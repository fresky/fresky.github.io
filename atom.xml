<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Dawei XU</title>
  <icon>https://www.gravatar.com/avatar/9d39b2a6e3c57a264492b8e97e82756d</icon>
  <subtitle>Flying in the free sky</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://fresky.github.io/"/>
  <updated>2019-12-20T08:29:07.315Z</updated>
  <id>http://fresky.github.io/</id>
  
  <author>
    <name>Dawei XU</name>
    <email>dawei.xu@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>来自金融时报的可视化辞典</title>
    <link href="http://fresky.github.io/2019/10/25/visual-vocabulary/"/>
    <id>http://fresky.github.io/2019/10/25/visual-vocabulary/</id>
    <published>2019-10-25T10:20:51.000Z</published>
    <updated>2019-12-20T08:29:07.315Z</updated>
    
    <content type="html"><![CDATA[<p>金融时报在<a href="https://github.com/ft-interactive/chart-doctor/tree/master/visual-vocabulary" target="_blank" rel="noopener">Github</a>上放了一个可视化辞典，帮助人们选择合适的展示数据的形式。有英文和中文，非常方便，可以在作报告或者演讲的时候做参考。在这个可视化辞典中介绍了下列图表：</p><ul><li>离差 - 范例：贸易顺差/逆差、气候变化  </li><li>相关性 - 范例：通胀与失业率、收入与平均寿命</li><li>排序 - 范例：财富、损失、排名表、选区选举结果</li><li>分布 - 范例：收入分配、人口（年龄/性别）分布</li><li>随时间的变化 - 范例：股价变动、经济动态时间序列</li><li>规模 - 范例：大宗商品产量、市值</li><li>部分和整体的关系 - 范例：财政预算、公司架构、全国选举结果</li><li>地理空间 - 范例：人口密度、自然资源分布、自然灾害风险/影响、集水区域、投票结果差异</li><li>流向 - 范例：资金、贸易、移民、资讯、诉讼的流向关系图表</li></ul><p><img src="https://raw.githubusercontent.com/ft-interactive/chart-doctor/master/visual-vocabulary/poster.png" alt="Visual Vocabulary"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;金融时报在&lt;a href=&quot;https://github.com/ft-interactive/chart-doctor/tree/master/visual-vocabulary&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Github&lt;/a&gt;上放了一
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>用opengrok搭建代码搜索引擎</title>
    <link href="http://fresky.github.io/2019/05/29/code-search-with-opengrok/"/>
    <id>http://fresky.github.io/2019/05/29/code-search-with-opengrok/</id>
    <published>2019-05-29T15:15:42.000Z</published>
    <updated>2019-12-20T08:29:07.315Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://oracle.github.io/opengrok/" target="_blank" rel="noopener">OpenGrok</a>是一个快速稳定的代码搜索引擎。它提供了一个<a href="https://github.com/OpenGrok/docker" target="_blank" rel="noopener">docker镜像</a>，可以通过如下的步骤很方便的搭建自己的代码搜索引擎。</p><ol><li>用<code>git clone</code>下载源代码，比如在<code>src</code>目录。  </li><li><p>用如下的脚本自动pull最新的代码，可以设置成windows的一个schedue task。  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">cd src</span><br><span class="line">set back=%cd%</span><br><span class="line">for /d %%i in (%back%\*) do (</span><br><span class="line">    echo git pull for repo: %%i</span><br><span class="line">    cd &quot;%%i&quot;</span><br><span class="line">    git pull</span><br><span class="line">)</span><br><span class="line">cd &quot;%back%&quot;</span><br></pre></td></tr></table></figure></li><li><p>运行如下的docker命令搭建代码搜索引擎。  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -e REINDEX=&lt;re-index minutes&gt; -v &lt;path/to/your/src&gt;:/opengrok/src -p &lt;host port&gt;:8080 opengrok/docker:latest</span><br></pre></td></tr></table></figure></li></ol><p>其中REINDEX指定了多长时间重新创建索引，这个可以根据第二部pull代码的间隔来设置。如果不加这个参数的话默认是10分钟，如果设置成0就不会重新创建索引，这样适合在自己在本机临时起搜索引擎时使用。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://oracle.github.io/opengrok/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;OpenGrok&lt;/a&gt;是一个快速稳定的代码搜索引擎。它提供了一个&lt;a href=&quot;https://github.com/
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>打包.NET Core的程序到一个单独的可执行文件</title>
    <link href="http://fresky.github.io/2019/02/18/package-net-core-in-one-single-exe/"/>
    <id>http://fresky.github.io/2019/02/18/package-net-core-in-one-single-exe/</id>
    <published>2019-02-18T08:13:57.000Z</published>
    <updated>2019-12-20T08:29:07.315Z</updated>
    
    <content type="html"><![CDATA[<p>.NET Core的程序在发布时会是一个目录，里面放着exe和它的所有依赖。在一些情况下一个单独的EXE会更方便一些。<a href="https://github.com/dgiagio/warp" target="_blank" rel="noopener">Warp</a>是一个开源（MIT）的软件可以把<code>Node.js</code>，<code>.NET Core</code>和<code>Java</code>的程序打包成一个可执行文件，支持Linux,MacOS和Windows。使用也很方便，下面是Windows下打包.NET Core的命令（假设下载下来的Warp叫做warp-packer.exe）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">warp-packer.exe --arch windows-x64 --input_dir bin/Release/netcoreapp2.1/win10-x64/publish --exec myapp.exe --output myapp.exe</span><br></pre></td></tr></table></figure><p>在这个之前需要先发布.NET Core的程序：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet publish -c Release -r win10-x64</span><br></pre></td></tr></table></figure><p><a href="https://github.com/Hubert-Rybak/dotnet-warp" target="_blank" rel="noopener">dotnet-warp</a>是一个Global .NET Core的工具，简化了这个打包过程，用下面的命令安装dotnet-warp。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet tool install --global dotnet-warp</span><br></pre></td></tr></table></figure><p>然后直接在项目目录下运行下面的命令就够了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet-warp</span><br></pre></td></tr></table></figure><p>这个工具现在有个小bug，如果你的项目目录包含空格，它会报如下的一个错误：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MSBUILD : error MSB1008: Only one project can be specified.</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;.NET Core的程序在发布时会是一个目录，里面放着exe和它的所有依赖。在一些情况下一个单独的EXE会更方便一些。&lt;a href=&quot;https://github.com/dgiagio/warp&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Warp&lt;
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>如何给自己的品牌选择颜色</title>
    <link href="http://fresky.github.io/2018/10/10/how-to-choose-brand-color/"/>
    <id>http://fresky.github.io/2018/10/10/how-to-choose-brand-color/</id>
    <published>2018-10-10T15:12:39.000Z</published>
    <updated>2019-12-20T08:29:07.315Z</updated>
    
    <content type="html"><![CDATA[<p>在我之前的一篇文章<a href="/2013/05/07/how-color-affect-marketing/">颜色在市场推广中的学问</a>中链接的文章介绍了颜色和情绪之前的关系，给了一个很酷的图把很多品牌的图标根据颜色分了个类。可以看出各个品牌的颜色和这个品牌想给人们带来的印象之前的关系。</p><p>最近看到了另外一篇类似的文章<a href="https://www.customlogocases.com/blog/choosing-brand-colors/" target="_blank" rel="noopener">Hidden in Plain Sight: How to Choose Your Brand’s Colors</a>。前面介绍了颜色对品牌的重要作用，颜色如何影响人们的情感。后面介绍了如何一步一步的选择自己品牌的颜色。</p><ol><li>接受这个挑战。不需要一个艺术家来为自己的品牌挑选颜色，决定品牌的颜色应该是公司品牌决策的一部分。  </li><li>定位自己的焦点。找到自己品牌的目标是什么，然后根据这个目标来决定用户看到你的品牌应该产生什么样的情绪。这样就能根据颜色和情绪的关系来选择颜色了。  </li><li>找到自己的个性。配色方案要和自己品牌的个性一致。  </li><li>生成自己的调色板。  <ol><li>创建情绪版。根据自己的选好的颜色，收集一些带有这些颜色并且能表现品牌个性的图片，然后通过这些图片找出6（大概）种喜欢的颜色，作为自己的调色板。  </li><li>确定颜色组合。这个时候色轮就是一个好帮手，一般有3种颜色的组合。1）渐进的，就是颜色有细微的变化。2）类似的，在色轮上挑选靠近的颜色。3）互补的，位于色轮的两端，可以用来突出自己的品牌颜色。  </li><li>同时使用深色和浅色。增加品牌颜色的对比度。  </li><li>决定品牌颜色的主色调和强调色。主色调是常用的颜色，强调色用来在特定场景下突出主色调。  </li></ol></li></ol><p>文章中还给出了一些有用的工具：  </p><ul><li><a href="Colr.org">Colr.org</a>，根据照片生成调色板。  </li><li><a href="https://color.adobe.com/create/color-wheel/" target="_blank" rel="noopener">Adobe Color CC</a>色轮。  </li><li><a href="http://www.checkmycolours.com/" target="_blank" rel="noopener">checkmycolours</a>检查颜色对比度。  </li><li><a href="https://www.designspiration.net/" target="_blank" rel="noopener">Designspiration</a>根据颜色来挑选图片。  </li><li><a href="https://coolors.co/" target="_blank" rel="noopener">Coolors</a>，<a href="http://colormind.io/" target="_blank" rel="noopener">Colormind</a>，<a href="https://color.hailpixel.com/" target="_blank" rel="noopener">Colordot</a>调色板生成器。  </li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在我之前的一篇文章&lt;a href=&quot;/2013/05/07/how-color-affect-marketing/&quot;&gt;颜色在市场推广中的学问&lt;/a&gt;中链接的文章介绍了颜色和情绪之前的关系，给了一个很酷的图把很多品牌的图标根据颜色分了个类。可以看出各个品牌的颜色和这个品牌想给
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>看看这些软件有多少行代码</title>
    <link href="http://fresky.github.io/2018/09/30/how-many-lines-of-code/"/>
    <id>http://fresky.github.io/2018/09/30/how-many-lines-of-code/</id>
    <published>2018-09-30T09:14:36.000Z</published>
    <updated>2019-12-20T08:29:07.314Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.visualcapitalist.com/millions-lines-of-code/" target="_blank" rel="noopener">How Many Millions of Lines of Code Does It Take?</a>列出了一些软件的行数，从10万行的Photoshop1.0到两百万行的Linux Kernel 2，到5千万行的Windows Vista。</p><img src="/images/loc.png">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.visualcapitalist.com/millions-lines-of-code/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;How Many Millions of Lines of Code Does 
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>使用mermain用Markdown的语法画流程图和UML图</title>
    <link href="http://fresky.github.io/2018/04/05/generate-diagram-and-flowchart-with-mermain-in-markdown/"/>
    <id>http://fresky.github.io/2018/04/05/generate-diagram-and-flowchart-with-mermain-in-markdown/</id>
    <published>2018-04-05T09:24:30.000Z</published>
    <updated>2019-12-20T08:29:07.314Z</updated>
    
    <content type="html"><![CDATA[<p>之前一直想找一种免费的工具可以用文本的方式画UML图，这样最大的好处是可以放进代码库中比如git，然后很方便的更新和看diff。之前尝试过<a href="http://jumly.tmtk.net/" target="_blank" rel="noopener">JUMLY</a>，用Javascript画sequence图很不错，也一直再用，最近发现了<a href="https://github.com/knsv/mermaid" target="_blank" rel="noopener">mermain</a>，可以用类似markdown的语法来画sequence图，类图，流程图，Gantt图。在它的<a href="https://mermaidjs.github.io/" target="_blank" rel="noopener">文档</a>里可以看到对各种编辑器的支持。比如在Visual Studio Code里装上<a href="https://marketplace.visualstudio.com/items?itemName=bierner.markdown-mermaid" target="_blank" rel="noopener">Markdown Preview Mermaid Support</a>插件，就能直接看UML图了，如下所示。</p><p><img src="https://raw.githubusercontent.com/mjbvz/vscode-markdown-mermaid/master/docs/example.png" alt="preview mermain in VS Code"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;之前一直想找一种免费的工具可以用文本的方式画UML图，这样最大的好处是可以放进代码库中比如git，然后很方便的更新和看diff。之前尝试过&lt;a href=&quot;http://jumly.tmtk.net/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;JUML
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>用DebuggerDisplay在Visual Studio的调试器中定制类的显示方式</title>
    <link href="http://fresky.github.io/2018/04/03/use-debuggerdisplay-in-assemblyinfo/"/>
    <id>http://fresky.github.io/2018/04/03/use-debuggerdisplay-in-assemblyinfo/</id>
    <published>2018-04-03T12:58:36.000Z</published>
    <updated>2019-12-20T08:29:07.314Z</updated>
    
    <content type="html"><![CDATA[<p>我在之前的博客<a href="/2015/06/17/customize-your-debugger-for-cpp-object/">用Natvis定制C++对象在Visual Studio调试时如何显示</a>和<a href="/2012/07/16/customize-your-own-debugger-visualizer-in-csharp/">定制自己的Visual Studio的Debugger Visualizer</a>中介绍过如何用<a href="https://docs.microsoft.com/en-us/visualstudio/debugger/using-the-debuggerdisplay-attribute" target="_blank" rel="noopener">Debugger Display Attributes</a>来定制C++和C#的对象在Visual Studio调试时如何显示。这个<code>DebuggerDisplay</code>也可以直接放在C#的<code>AssemblyInfo.cs</code>中来指定当调试当前程序时在Watch窗口如何显示其它的类型。</p><p>比如在我们调试WMI时，想找一个属性，看到如下的调试窗口，然后一个个的手动展开，估计是要崩溃的。</p><img src="/images/DebuggerDisplay1.png"><p>但是如果我们在<code>AssemblyInfo.cs</code>中写了如下的代码，那么看起来就顺眼多了。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">assembly: DebuggerDisplay(<span class="meta-string">"[Name=&#123;Name&#125;, Value=&#123;Value&#125;]"</span>, Target = typeof(System.Management.PropertyData))</span>]</span><br></pre></td></tr></table></figure><img src="/images/DebuggerDisplay2.png">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;我在之前的博客&lt;a href=&quot;/2015/06/17/customize-your-debugger-for-cpp-object/&quot;&gt;用Natvis定制C++对象在Visual Studio调试时如何显示&lt;/a&gt;和&lt;a href=&quot;/2012/07/16/customi
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>如何在一个进程中注入崩溃</title>
    <link href="http://fresky.github.io/2018/03/23/how-to-crash-a-process/"/>
    <id>http://fresky.github.io/2018/03/23/how-to-crash-a-process/</id>
    <published>2018-03-23T15:21:22.000Z</published>
    <updated>2019-12-20T08:29:07.314Z</updated>
    
    <content type="html"><![CDATA[<p>我们在设计一个系统时经常需要考虑如果某个进程崩溃之后系统应该作何反应。可以用<a href="https://stackoverflow.com/questions/10686231/force-any-running-process-to-crash" target="_blank" rel="noopener">force any running process to crash</a>中介绍的方法在一个进程中注入一个异常导致它崩溃。</p><p>这个方法使用了<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms682437(v=vs.85" target="_blank" rel="noopener"><code>CreateRemoteThread</code></a>.aspx)API。<code>CreateRemoteThread</code>可以在目标进程内创建一个线程来执行一段代码，只要这段代码能够crash，我们就能做到在目标进程中注入一个崩溃了。下面是根据这个方法实现的C#的代码。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">CrashInjecter</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Flags</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> ProcessAccessFlags : <span class="keyword">uint</span></span><br><span class="line">    &#123;</span><br><span class="line">        All = <span class="number">0x001F0FFF</span>,</span><br><span class="line">        Terminate = <span class="number">0x00000001</span>,</span><br><span class="line">        CreateThread = <span class="number">0x00000002</span>,</span><br><span class="line">        VirtualMemoryOperation = <span class="number">0x00000008</span>,</span><br><span class="line">        VirtualMemoryRead = <span class="number">0x00000010</span>,</span><br><span class="line">        VirtualMemoryWrite = <span class="number">0x00000020</span>,</span><br><span class="line">        DuplicateHandle = <span class="number">0x00000040</span>,</span><br><span class="line">        CreateProcess = <span class="number">0x000000080</span>,</span><br><span class="line">        SetQuota = <span class="number">0x00000100</span>,</span><br><span class="line">        SetInformation = <span class="number">0x00000200</span>,</span><br><span class="line">        QueryInformation = <span class="number">0x00000400</span>,</span><br><span class="line">        QueryLimitedInformation = <span class="number">0x00001000</span>,</span><br><span class="line">        Synchronize = <span class="number">0x00100000</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>, SetLastError = true)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> IntPtr <span class="title">OpenProcess</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">        ProcessAccessFlags processAccess,</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">bool</span> bInheritHandle,</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">int</span> processId</span></span></span><br><span class="line"><span class="function"><span class="params">    </span>)</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">extern</span> IntPtr <span class="title">CreateRemoteThread</span>(<span class="params">IntPtr hProcess,</span></span></span><br><span class="line"><span class="function"><span class="params">        IntPtr lpThreadAttributes, <span class="keyword">uint</span> dwStackSize, IntPtr lpStartAddress,</span></span></span><br><span class="line"><span class="function"><span class="params">        IntPtr lpParameter, <span class="keyword">uint</span> dwCreationFlags, <span class="keyword">out</span> IntPtr lpThreadId</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Crash</span>(<span class="params"><span class="keyword">int</span> processId</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">var</span> hProcess = OpenProcess(ProcessAccessFlags.All, <span class="literal">false</span>, processId);</span><br><span class="line">        CreateRemoteThread(hProcess, IntPtr.Zero, <span class="number">0</span>, IntPtr.Zero, IntPtr.Zero, <span class="number">0</span>, <span class="keyword">out</span> _);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;我们在设计一个系统时经常需要考虑如果某个进程崩溃之后系统应该作何反应。可以用&lt;a href=&quot;https://stackoverflow.com/questions/10686231/force-any-running-process-to-crash&quot; target=&quot;_
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>如何用C#来检查硬盘是不是SSD固态硬盘</title>
    <link href="http://fresky.github.io/2018/03/20/how-to-check-ssd-in-csharp/"/>
    <id>http://fresky.github.io/2018/03/20/how-to-check-ssd-in-csharp/</id>
    <published>2018-03-20T00:34:07.000Z</published>
    <updated>2019-12-20T08:29:07.313Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://emoacht.wordpress.com/2012/11/06/csharp-ssd/" target="_blank" rel="noopener">Tell whether SSD or not in C#</a>介绍了怎么用C#来判断一个磁盘是不是SSD固态硬盘。文中使用的方法来源于微软一篇介绍Windows7磁盘碎片整理的文章<a href="https://blogs.technet.microsoft.com/filecab/2009/11/25/windows-7-disk-defragmenter-user-interface-overview/" target="_blank" rel="noopener">Windows 7 Disk Defragmenter User Interface Overview</a>，在这篇文章中指出Windows7在做磁盘碎片整理的时候会把SSD的磁盘排除在外，它用了3种检测方法（如果前面一种方法失败了会尝试下面一种方法）：  </p><ul><li>没有seek penalty  </li><li>nominal media rotation rate是1  </li><li>random read disc score高于一个经验阈值（使用<a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc742157(v=ws.11" target="_blank" rel="noopener">Windows System Assessment Tool (WinSAT)</a>)方法。  </li></ul><p>主要就是用Windows的<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85" target="_blank" rel="noopener"><code>CreateFile</code></a>.aspx)API来打开磁盘设备，然后调用<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa363216(v=vs.85" target="_blank" rel="noopener"><code>DeviceIoControl</code></a>.aspx)API来获取这些信息。</p><p>详见下面的代码，除了判断是不是SSD，也顺带用<a href="https://msdn.microsoft.com/en-us/library/system.management.managementclass(v=vs.110" target="_blank" rel="noopener"><code>Management</code></a>.aspx)获取机器的硬件信息，包括：机器名，MAC地址，序列号，Model，Manufacturer，本地用户等信息。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    GetPhysicalDriveNumberFromLogicalDriveLetter();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//CheckSSDForPhysicalDrive();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//string version = "1.0";</span></span><br><span class="line">    <span class="comment">//string computername = "UNKNOWN";</span></span><br><span class="line">    <span class="comment">//string servicetag = "UNKNOWN";</span></span><br><span class="line">    <span class="comment">//string wifimac = "UNKNOWN";</span></span><br><span class="line">    <span class="comment">//string model = "UNKNOWN";</span></span><br><span class="line">    <span class="comment">//string manufacturer = "UNKNOWN";</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span>/  Get Manufacturer</span></span><br><span class="line">    <span class="comment">//manufacturer = GetManufacturer();</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span>/  Get Model</span></span><br><span class="line">    <span class="comment">//model = GetModel();</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span>/  Get computer name</span></span><br><span class="line">    <span class="comment">//computername = GetComputerName();</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span>/  Get the wifi MAC address</span></span><br><span class="line">    <span class="comment">//wifimac = GetWifiMAC();</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span>/  Get the service tag</span></span><br><span class="line">    <span class="comment">//servicetag = GetServiceTag();</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span>/  Write header to console</span></span><br><span class="line">    <span class="comment">//Console.WriteLine("*************************************");</span></span><br><span class="line">    <span class="comment">//Console.WriteLine("ASSET TAGGING VERSION &#123;0&#125;", version);</span></span><br><span class="line">    <span class="comment">//Console.WriteLine("*************************************");</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span>/  Write info to console</span></span><br><span class="line">    <span class="comment">//Console.WriteLine("Make: &#123;0&#125;", manufacturer);</span></span><br><span class="line">    <span class="comment">//Console.WriteLine("Model: &#123;0&#125;", model);</span></span><br><span class="line">    <span class="comment">//Console.WriteLine("Computer Name: &#123;0&#125;", computername);</span></span><br><span class="line">    <span class="comment">//Console.WriteLine("Wireless MAC: &#123;0&#125;", wifimac);</span></span><br><span class="line">    <span class="comment">//Console.WriteLine("Service Tag: &#123;0&#125;", servicetag);</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span>/  Wait for user to press a key</span></span><br><span class="line">    <span class="comment">//Console.WriteLine();</span></span><br><span class="line">    <span class="comment">//Console.WriteLine("Press any key to exit");</span></span><br><span class="line">    <span class="comment">//Console.ReadKey();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CheckSSDForPhysicalDrive</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">"Input physical drive number:"</span>);</span><br><span class="line">    <span class="keyword">string</span> sDrive = <span class="string">"\\\\.\\PhysicalDrive"</span> + Console.ReadLine();</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(</span><br><span class="line">        <span class="string">"Select method (0: No seek penalty, 1: Nominal media rotation rate):"</span>);</span><br><span class="line">    <span class="keyword">switch</span> (<span class="keyword">int</span>.Parse(Console.ReadLine()))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            HasNoSeekPenalty(sDrive);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            HasNominalMediaRotationRate(sDrive);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Console.ReadLine();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">GetComputerName</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Environment.MachineName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">GetWifiMAC</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">string</span> MAC = <span class="string">"UNKNOWN"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (NetworkInterface nic <span class="keyword">in</span> NetworkInterface.GetAllNetworkInterfaces())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (nic.NetworkInterfaceType == NetworkInterfaceType.Wireless80211)</span><br><span class="line">        &#123;</span><br><span class="line">            MAC = nic.GetPhysicalAddress().ToString();</span><br><span class="line">            <span class="comment">//  Insert hyphens</span></span><br><span class="line">            MAC = String.Join(<span class="string">"-"</span>, Regex.Matches(MAC, <span class="string">@"\w&#123;2&#125;"</span>).Cast&lt;Match&gt;());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> MAC;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">GetServiceTag</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">string</span> servicetag = <span class="string">"UNKNOWN"</span>;</span><br><span class="line"></span><br><span class="line">    ManagementClass wmi = <span class="keyword">new</span> ManagementClass(<span class="string">"Win32_Bios"</span>);</span><br><span class="line">    <span class="keyword">foreach</span> (ManagementObject bios <span class="keyword">in</span> wmi.GetInstances())</span><br><span class="line">    &#123;</span><br><span class="line">        servicetag = bios.Properties[<span class="string">"Serialnumber"</span>].Value.ToString().Trim();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> servicetag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">GetModel</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">string</span> model = <span class="string">"UNKNOWN"</span>;</span><br><span class="line"></span><br><span class="line">    ManagementClass wmi = <span class="keyword">new</span> ManagementClass(<span class="string">"Win32_ComputerSystem"</span>);</span><br><span class="line">    <span class="keyword">foreach</span> (ManagementObject computer <span class="keyword">in</span> wmi.GetInstances())</span><br><span class="line">    &#123;</span><br><span class="line">        model = computer.Properties[<span class="string">"Model"</span>].Value.ToString().Trim();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> model;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">GetManufacturer</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">string</span> manufacturer = <span class="string">"UNKNOWN"</span>;</span><br><span class="line"></span><br><span class="line">    ManagementClass wmi = <span class="keyword">new</span> ManagementClass(<span class="string">"Win32_ComputerSystem"</span>);</span><br><span class="line">    <span class="keyword">foreach</span> (ManagementObject computer <span class="keyword">in</span> wmi.GetInstances())</span><br><span class="line">    &#123;</span><br><span class="line">        manufacturer = computer.Properties[<span class="string">"Manufacturer"</span>].Value.ToString().Trim();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> manufacturer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">GetLocalUser</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">string</span> localUser = <span class="string">"UNKNOWN"</span>;</span><br><span class="line"></span><br><span class="line">    SelectQuery query = <span class="keyword">new</span> SelectQuery(<span class="string">"Select * from Win32_UserAccount Where LocalAccount=True"</span>);</span><br><span class="line">    ManagementObjectSearcher searcher = <span class="keyword">new</span> ManagementObjectSearcher(query);</span><br><span class="line">    <span class="keyword">foreach</span> (ManagementObject envVar <span class="keyword">in</span> searcher.Get())</span><br><span class="line">    &#123;</span><br><span class="line">        localUser += envVar[<span class="string">"Name"</span>] + <span class="string">","</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> localUser;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// For CreateFile to get handle to drive</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> GENERIC_READ = <span class="number">0x80000000</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> GENERIC_WRITE = <span class="number">0x40000000</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> FILE_SHARE_READ = <span class="number">0x00000001</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> FILE_SHARE_WRITE = <span class="number">0x00000002</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> OPEN_EXISTING = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> FILE_ATTRIBUTE_NORMAL = <span class="number">0x00000080</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CreateFile to get handle to drive</span></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>, SetLastError = true)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">extern</span> SafeFileHandle <span class="title">CreateFileW</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    [MarshalAs(UnmanagedType.LPWStr</span>)]</span></span><br><span class="line"><span class="function">    <span class="keyword">string</span> lpFileName,</span></span><br><span class="line"><span class="function">    <span class="keyword">uint</span> dwDesiredAccess,</span></span><br><span class="line"><span class="function">    <span class="keyword">uint</span> dwShareMode,</span></span><br><span class="line"><span class="function">    IntPtr lpSecurityAttributes,</span></span><br><span class="line"><span class="function">    <span class="keyword">uint</span> dwCreationDisposition,</span></span><br><span class="line"><span class="function">    <span class="keyword">uint</span> dwFlagsAndAttributes,</span></span><br><span class="line"><span class="function">    IntPtr hTemplateFile)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// For control codes</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> FILE_DEVICE_MASS_STORAGE = <span class="number">0x0000002d</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> IOCTL_STORAGE_BASE = FILE_DEVICE_MASS_STORAGE;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> FILE_DEVICE_CONTROLLER = <span class="number">0x00000004</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> IOCTL_SCSI_BASE = FILE_DEVICE_CONTROLLER;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> METHOD_BUFFERED = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> FILE_ANY_ACCESS = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> FILE_READ_ACCESS = <span class="number">0x00000001</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> FILE_WRITE_ACCESS = <span class="number">0x00000002</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> IOCTL_VOLUME_BASE = <span class="number">0x00000056</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">uint</span> <span class="title">CTL_CODE</span>(<span class="params"><span class="keyword">uint</span> DeviceType, <span class="keyword">uint</span> Function,</span></span></span><br><span class="line"><span class="function"><span class="params">                                <span class="keyword">uint</span> Method, <span class="keyword">uint</span> Access</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ((DeviceType &lt;&lt; <span class="number">16</span>) | (Access &lt;&lt; <span class="number">14</span>) |</span><br><span class="line">            (Function &lt;&lt; <span class="number">2</span>) | Method);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// For DeviceIoControl to check no seek penalty</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> StorageDeviceSeekPenaltyProperty = <span class="number">7</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> PropertyStandardQuery = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">StructLayout(LayoutKind.Sequential)</span>]</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">struct</span> STORAGE_PROPERTY_QUERY</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">uint</span> PropertyId;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">uint</span> QueryType;</span><br><span class="line">    [<span class="meta">MarshalAs(UnmanagedType.ByValArray, SizeConst = 1)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span>[] AdditionalParameters;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">StructLayout(LayoutKind.Sequential)</span>]</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">struct</span> DEVICE_SEEK_PENALTY_DESCRIPTOR</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">uint</span> Version;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">uint</span> Size;</span><br><span class="line">    [<span class="meta">MarshalAs(UnmanagedType.U1)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">bool</span> IncursSeekPenalty;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DeviceIoControl to check no seek penalty</span></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>, EntryPoint = <span class="meta-string">"DeviceIoControl"</span>,</span></span><br><span class="line"><span class="meta">            SetLastError = true)</span>]</span><br><span class="line">[<span class="meta">return: MarshalAs(UnmanagedType.Bool)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">bool</span> <span class="title">DeviceIoControl</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    SafeFileHandle hDevice,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> dwIoControlCode,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">ref</span> STORAGE_PROPERTY_QUERY lpInBuffer,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> nInBufferSize,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">ref</span> DEVICE_SEEK_PENALTY_DESCRIPTOR lpOutBuffer,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> nOutBufferSize,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">out</span> <span class="keyword">uint</span> lpBytesReturned,</span></span></span><br><span class="line"><span class="function"><span class="params">    IntPtr lpOverlapped</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// For DeviceIoControl to check nominal media rotation rate</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> ATA_FLAGS_DATA_IN = <span class="number">0x02</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">StructLayout(LayoutKind.Sequential)</span>]</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">struct</span> ATA_PASS_THROUGH_EX</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">ushort</span> Length;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">ushort</span> AtaFlags;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span> PathId;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span> TargetId;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span> Lun;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span> ReservedAsUchar;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">uint</span> DataTransferLength;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">uint</span> TimeOutValue;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">uint</span> ReservedAsUlong;</span><br><span class="line">    <span class="keyword">public</span> IntPtr DataBufferOffset;</span><br><span class="line">    [<span class="meta">MarshalAs(UnmanagedType.ByValArray, SizeConst = 8)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span>[] PreviousTaskFile;</span><br><span class="line">    [<span class="meta">MarshalAs(UnmanagedType.ByValArray, SizeConst = 8)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span>[] CurrentTaskFile;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">StructLayout(LayoutKind.Sequential)</span>]</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">struct</span> ATAIdentifyDeviceQuery</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> ATA_PASS_THROUGH_EX header;</span><br><span class="line">    [<span class="meta">MarshalAs(UnmanagedType.ByValArray, SizeConst = 256)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">ushort</span>[] data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DeviceIoControl to check nominal media rotation rate</span></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>, EntryPoint = <span class="meta-string">"DeviceIoControl"</span>,</span></span><br><span class="line"><span class="meta">            SetLastError = true)</span>]</span><br><span class="line">[<span class="meta">return: MarshalAs(UnmanagedType.Bool)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">bool</span> <span class="title">DeviceIoControl</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    SafeFileHandle hDevice,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> dwIoControlCode,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">ref</span> ATAIdentifyDeviceQuery lpInBuffer,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> nInBufferSize,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">ref</span> ATAIdentifyDeviceQuery lpOutBuffer,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> nOutBufferSize,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">out</span> <span class="keyword">uint</span> lpBytesReturned,</span></span></span><br><span class="line"><span class="function"><span class="params">    IntPtr lpOverlapped</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// For error message</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">uint</span> FORMAT_MESSAGE_FROM_SYSTEM = <span class="number">0x00001000</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>, SetLastError = true)</span>]</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">uint</span> <span class="title">FormatMessage</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> dwFlags,</span></span></span><br><span class="line"><span class="function"><span class="params">    IntPtr lpSource,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> dwMessageId,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> dwLanguageId,</span></span></span><br><span class="line"><span class="function"><span class="params">    StringBuilder lpBuffer,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> nSize,</span></span></span><br><span class="line"><span class="function"><span class="params">    IntPtr Arguments</span>)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Method for no seek penalty</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">HasNoSeekPenalty</span>(<span class="params"><span class="keyword">string</span> sDrive</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    SafeFileHandle hDrive = CreateFileW(</span><br><span class="line">        sDrive,</span><br><span class="line">        <span class="number">0</span>, <span class="comment">// No access to drive</span></span><br><span class="line">        FILE_SHARE_READ | FILE_SHARE_WRITE,</span><br><span class="line">        IntPtr.Zero,</span><br><span class="line">        OPEN_EXISTING,</span><br><span class="line">        FILE_ATTRIBUTE_NORMAL,</span><br><span class="line">        IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (hDrive == <span class="literal">null</span> || hDrive.IsInvalid)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">string</span> message = GetErrorMessage(Marshal.GetLastWin32Error());</span><br><span class="line">        Console.WriteLine(<span class="string">"CreateFile failed. "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">uint</span> IOCTL_STORAGE_QUERY_PROPERTY = CTL_CODE(</span><br><span class="line">        IOCTL_STORAGE_BASE, <span class="number">0x500</span>,</span><br><span class="line">        METHOD_BUFFERED, FILE_ANY_ACCESS); <span class="comment">// From winioctl.h</span></span><br><span class="line"></span><br><span class="line">    STORAGE_PROPERTY_QUERY query_seek_penalty =</span><br><span class="line">        <span class="keyword">new</span> STORAGE_PROPERTY_QUERY();</span><br><span class="line">    query_seek_penalty.PropertyId = StorageDeviceSeekPenaltyProperty;</span><br><span class="line">    query_seek_penalty.QueryType = PropertyStandardQuery;</span><br><span class="line"></span><br><span class="line">    DEVICE_SEEK_PENALTY_DESCRIPTOR query_seek_penalty_desc =</span><br><span class="line">        <span class="keyword">new</span> DEVICE_SEEK_PENALTY_DESCRIPTOR();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">uint</span> returned_query_seek_penalty_size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">bool</span> query_seek_penalty_result = DeviceIoControl(</span><br><span class="line">        hDrive,</span><br><span class="line">        IOCTL_STORAGE_QUERY_PROPERTY,</span><br><span class="line">        <span class="keyword">ref</span> query_seek_penalty,</span><br><span class="line">        (<span class="keyword">uint</span>)Marshal.SizeOf(query_seek_penalty),</span><br><span class="line">        <span class="keyword">ref</span> query_seek_penalty_desc,</span><br><span class="line">        (<span class="keyword">uint</span>)Marshal.SizeOf(query_seek_penalty_desc),</span><br><span class="line">        <span class="keyword">out</span> returned_query_seek_penalty_size,</span><br><span class="line">        IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">    hDrive.Close();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (query_seek_penalty_result == <span class="literal">false</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">string</span> message = GetErrorMessage(Marshal.GetLastWin32Error());</span><br><span class="line">        Console.WriteLine(<span class="string">"DeviceIoControl failed. "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (query_seek_penalty_desc.IncursSeekPenalty == <span class="literal">false</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">"This drive has NO SEEK penalty."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">"This drive has SEEK penalty."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Method for nominal media rotation rate</span></span><br><span class="line"><span class="comment">// (Administrative privilege is required)</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">HasNominalMediaRotationRate</span>(<span class="params"><span class="keyword">string</span> sDrive</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    SafeFileHandle hDrive = CreateFileW(</span><br><span class="line">        sDrive,</span><br><span class="line">        GENERIC_READ | GENERIC_WRITE, <span class="comment">// Administrative privilege is required</span></span><br><span class="line">        FILE_SHARE_READ | FILE_SHARE_WRITE,</span><br><span class="line">        IntPtr.Zero,</span><br><span class="line">        OPEN_EXISTING,</span><br><span class="line">        FILE_ATTRIBUTE_NORMAL,</span><br><span class="line">        IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (hDrive == <span class="literal">null</span> || hDrive.IsInvalid)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">string</span> message = GetErrorMessage(Marshal.GetLastWin32Error());</span><br><span class="line">        Console.WriteLine(<span class="string">"CreateFile failed. "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">uint</span> IOCTL_ATA_PASS_THROUGH = CTL_CODE(</span><br><span class="line">        IOCTL_SCSI_BASE, <span class="number">0x040b</span>, METHOD_BUFFERED,</span><br><span class="line">        FILE_READ_ACCESS | FILE_WRITE_ACCESS); <span class="comment">// From ntddscsi.h</span></span><br><span class="line"></span><br><span class="line">    ATAIdentifyDeviceQuery id_query = <span class="keyword">new</span> ATAIdentifyDeviceQuery();</span><br><span class="line">    id_query.data = <span class="keyword">new</span> <span class="keyword">ushort</span>[<span class="number">256</span>];</span><br><span class="line"></span><br><span class="line">    id_query.header.Length = (<span class="keyword">ushort</span>)Marshal.SizeOf(id_query.header);</span><br><span class="line">    id_query.header.AtaFlags = (<span class="keyword">ushort</span>)ATA_FLAGS_DATA_IN;</span><br><span class="line">    id_query.header.DataTransferLength =</span><br><span class="line">        (<span class="keyword">uint</span>)(id_query.data.Length * <span class="number">2</span>); <span class="comment">// Size of "data" in bytes</span></span><br><span class="line">    id_query.header.TimeOutValue = <span class="number">3</span>; <span class="comment">// Sec</span></span><br><span class="line">    id_query.header.DataBufferOffset = (IntPtr)Marshal.OffsetOf(</span><br><span class="line">        <span class="keyword">typeof</span>(ATAIdentifyDeviceQuery), <span class="string">"data"</span>);</span><br><span class="line">    id_query.header.PreviousTaskFile = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8</span>];</span><br><span class="line">    id_query.header.CurrentTaskFile = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8</span>];</span><br><span class="line">    id_query.header.CurrentTaskFile[<span class="number">6</span>] = <span class="number">0xec</span>; <span class="comment">// ATA IDENTIFY DEVICE</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">uint</span> retval_size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">bool</span> result = DeviceIoControl(</span><br><span class="line">        hDrive,</span><br><span class="line">        IOCTL_ATA_PASS_THROUGH,</span><br><span class="line">        <span class="keyword">ref</span> id_query,</span><br><span class="line">        (<span class="keyword">uint</span>)Marshal.SizeOf(id_query),</span><br><span class="line">        <span class="keyword">ref</span> id_query,</span><br><span class="line">        (<span class="keyword">uint</span>)Marshal.SizeOf(id_query),</span><br><span class="line">        <span class="keyword">out</span> retval_size,</span><br><span class="line">        IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">    hDrive.Close();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (result == <span class="literal">false</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">string</span> message = GetErrorMessage(Marshal.GetLastWin32Error());</span><br><span class="line">        Console.WriteLine(<span class="string">"DeviceIoControl failed. "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Word index of nominal media rotation rate</span></span><br><span class="line">        <span class="comment">// (1 means non-rotate device)</span></span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">int</span> kNominalMediaRotRateWordIndex = <span class="number">217</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (id_query.data[kNominalMediaRotRateWordIndex] == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">"This drive is NON-ROTATE device."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">"This drive is ROTATE device."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Method for error message</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">GetErrorMessage</span>(<span class="params"><span class="keyword">int</span> code</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    StringBuilder message = <span class="keyword">new</span> StringBuilder(<span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">    FormatMessage(</span><br><span class="line">        FORMAT_MESSAGE_FROM_SYSTEM,</span><br><span class="line">        IntPtr.Zero,</span><br><span class="line">        (<span class="keyword">uint</span>)code,</span><br><span class="line">        <span class="number">0</span>,</span><br><span class="line">        message,</span><br><span class="line">        (<span class="keyword">uint</span>)message.Capacity,</span><br><span class="line">        IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> message.ToString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// For DeviceIoControl to get disk extents</span></span><br><span class="line">[<span class="meta">StructLayout(LayoutKind.Sequential)</span>]</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">struct</span> DISK_EXTENT</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">uint</span> DiskNumber;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">long</span> StartingOffset;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">long</span> ExtentLength;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">StructLayout(LayoutKind.Sequential)</span>]</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">struct</span> VOLUME_DISK_EXTENTS</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">uint</span> NumberOfDiskExtents;</span><br><span class="line">    [<span class="meta">MarshalAs(UnmanagedType.ByValArray)</span>]</span><br><span class="line">    <span class="keyword">public</span> DISK_EXTENT[] Extents;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DeviceIoControl to get disk extents</span></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>, EntryPoint = <span class="meta-string">"DeviceIoControl"</span>,</span></span><br><span class="line"><span class="meta">            SetLastError = true)</span>]</span><br><span class="line">[<span class="meta">return: MarshalAs(UnmanagedType.Bool)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">bool</span> <span class="title">DeviceIoControl</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    SafeFileHandle hDevice,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> dwIoControlCode,</span></span></span><br><span class="line"><span class="function"><span class="params">    IntPtr lpInBuffer,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> nInBufferSize,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">ref</span> VOLUME_DISK_EXTENTS lpOutBuffer,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">uint</span> nOutBufferSize,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">out</span> <span class="keyword">uint</span> lpBytesReturned,</span></span></span><br><span class="line"><span class="function"><span class="params">    IntPtr lpOverlapped</span>)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">GetPhysicalDriveNumberFromLogicalDriveLetter</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">"Input logical drive letter:"</span>);</span><br><span class="line">    <span class="keyword">char</span> cDrive = Console.ReadLine()[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">char</span>.IsLetter(cDrive))</span><br><span class="line">    &#123;</span><br><span class="line">        GetDiskExtents(cDrive);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Console.ReadLine();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Method for disk extents</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">GetDiskExtents</span>(<span class="params"><span class="keyword">char</span> cDrive</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    DriveInfo di = <span class="keyword">new</span> DriveInfo(cDrive.ToString());</span><br><span class="line">    <span class="keyword">if</span> (di.DriveType != DriveType.Fixed)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">"This drive is not fixed drive."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">string</span> sDrive = <span class="string">"\\\\.\\"</span> + cDrive.ToString() + <span class="string">":"</span>;</span><br><span class="line"></span><br><span class="line">    SafeFileHandle hDrive = CreateFileW(</span><br><span class="line">        sDrive,</span><br><span class="line">        <span class="number">0</span>, <span class="comment">// No access to drive</span></span><br><span class="line">        FILE_SHARE_READ | FILE_SHARE_WRITE,</span><br><span class="line">        IntPtr.Zero,</span><br><span class="line">        OPEN_EXISTING,</span><br><span class="line">        FILE_ATTRIBUTE_NORMAL,</span><br><span class="line">        IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (hDrive == <span class="literal">null</span> || hDrive.IsInvalid)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">string</span> message = GetErrorMessage(Marshal.GetLastWin32Error());</span><br><span class="line">        Console.WriteLine(<span class="string">"CreateFile failed. "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">uint</span> IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS = CTL_CODE(</span><br><span class="line">        IOCTL_VOLUME_BASE, <span class="number">0</span>,</span><br><span class="line">        METHOD_BUFFERED, FILE_ANY_ACCESS); <span class="comment">// From winioctl.h</span></span><br><span class="line"></span><br><span class="line">    VOLUME_DISK_EXTENTS query_disk_extents =</span><br><span class="line">        <span class="keyword">new</span> VOLUME_DISK_EXTENTS();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">uint</span> returned_query_disk_extents_size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">bool</span> query_disk_extents_result = DeviceIoControl(</span><br><span class="line">        hDrive,</span><br><span class="line">        IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS,</span><br><span class="line">        IntPtr.Zero,</span><br><span class="line">        <span class="number">0</span>,</span><br><span class="line">        <span class="keyword">ref</span> query_disk_extents,</span><br><span class="line">        (<span class="keyword">uint</span>)Marshal.SizeOf(query_disk_extents),</span><br><span class="line">        <span class="keyword">out</span> returned_query_disk_extents_size,</span><br><span class="line">        IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">    hDrive.Close();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (query_disk_extents_result == <span class="literal">false</span> ||</span><br><span class="line">        query_disk_extents.Extents.Length != <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">string</span> message = GetErrorMessage(Marshal.GetLastWin32Error());</span><br><span class="line">        Console.WriteLine(<span class="string">"DeviceIoControl failed. "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">"The physical drive number is: "</span> +</span><br><span class="line">                            query_disk_extents.Extents[<span class="number">0</span>].DiskNumber);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://emoacht.wordpress.com/2012/11/06/csharp-ssd/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Tell whether SSD or not in C#&lt;/a&gt;介绍了怎么用C#来判
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>我们应该创新吗？</title>
    <link href="http://fresky.github.io/2018/03/06/should-we-innovate/"/>
    <id>http://fresky.github.io/2018/03/06/should-we-innovate/</id>
    <published>2018-03-06T01:00:34.000Z</published>
    <updated>2019-12-20T08:29:07.313Z</updated>
    
    <content type="html"><![CDATA[<p>在这个大众创业，万众创新的时代，我们应该什么时候都创新吗？<br><a href="https://uxdesign.cc/the-worst-volume-control-ui-in-the-world-60713dc86950" target="_blank" rel="noopener">The worst volume control UI in the world</a>是一篇很不错的小文章可以让我们想想是不是有些时候我们应该不创新。这篇文章里列了很多<strong>非常有创意</strong>的<strong>坏</strong>的音量控制的UI，大概就是怎么折腾用户怎么来。在这些有创新的背后，作者提醒大家来分清楚<strong>希望</strong>，<strong>可以</strong>，<strong>需要</strong>和<strong>应该</strong>。  </p><ol><li><strong>所有人</strong>都<strong>希望</strong>创新。  </li><li><strong>很多人</strong>是<strong>可以</strong>创新的。现在大家的UX的观念都变得越来越强，构建原型的工具也很多，很方便的可以让我们做出很多创新来。  </li><li><strong>没有人</strong>是<strong>需要</strong>创新的。在音量控制这个UI上，它已经存在和几十年，工作的很好，大家也都很习惯，我们没有必要在这个上面创新。  </li><li>什么时候<strong>应该</strong>创新呢？应该是一个主观的概念，需要了解业务逻辑，技术，文化，用户。回答是不是<strong>应该</strong>是一个需要长期磨练才能获得的技能。</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在这个大众创业，万众创新的时代，我们应该什么时候都创新吗？&lt;br&gt;&lt;a href=&quot;https://uxdesign.cc/the-worst-volume-control-ui-in-the-world-60713dc86950&quot; target=&quot;_blank&quot; rel=
      
    
    </summary>
    
    
      <category term="SoftSkill" scheme="http://fresky.github.io/tags/SoftSkill/"/>
    
  </entry>
  
  <entry>
    <title>让你的英文文章看起来高级的一些词汇</title>
    <link href="http://fresky.github.io/2018/03/03/words-for-better-essay/"/>
    <id>http://fresky.github.io/2018/03/03/words-for-better-essay/</id>
    <published>2018-03-03T08:59:43.000Z</published>
    <updated>2019-12-20T08:29:07.313Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.dailyinfographic.com/20-words-phrases-for-better-essays" target="_blank" rel="noopener">20 Words and Phrases for Better Essays</a>给出了一些让你的英文文章看起来高级的词汇。</p><ol><li>当想说<strong>还有</strong>，<strong>并且</strong>的时候。不要只用<strong>and</strong>，试试<strong>Furthermore</strong>，<strong>Likewise</strong>，<strong>Similarly</strong>，<strong>As well as</strong>和<strong>What’s more</strong>。  </li><li>当想<strong>对比</strong>，<strong>转折</strong>的时候。不要只用<strong>but</strong>，试试<strong>On the other hand</strong>，<strong>Then again</strong>，<strong>Having said that</strong>，<strong>However</strong>，<strong>Yet</strong>。  </li><li>当想<strong>解释</strong>时。试试<strong>In other words</strong>，<strong>To that end</strong>，<strong>That is to say</strong>，<strong>To put it another way</strong>，<strong>In order to</strong>。  </li><li>当想<strong>举例子</strong>时。不要只用<strong>for example</strong>，试试<strong>For instance</strong>，<strong>To give an illustration</strong>，<strong>Markedly</strong>，<strong>Let’s say</strong>，<strong>In particular</strong>。  </li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.dailyinfographic.com/20-words-phrases-for-better-essays&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;20 Words and Phrases for Bett
      
    
    </summary>
    
    
      <category term="Writing" scheme="http://fresky.github.io/tags/Writing/"/>
    
  </entry>
  
  <entry>
    <title>Windows的任务管理器怎么显示进程的图标</title>
    <link href="http://fresky.github.io/2018/03/03/how-taskmgr-display-icon/"/>
    <id>http://fresky.github.io/2018/03/03/how-taskmgr-display-icon/</id>
    <published>2018-03-03T03:20:21.000Z</published>
    <updated>2019-12-20T08:29:07.313Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blogs.msdn.microsoft.com/oldnewthing/20180301-00/?p=98135" target="_blank" rel="noopener">How does Task Manager choose the icon to show for a process?</a>介绍了Windows的任务管理器是如何显示进程的图标的。</p><ul><li>如果进程有可见的窗口，那么就选择窗口的图标。  </li><li>如果进程没有可见的窗口，但是有右下角的提醒图标，那就选择这个提醒图标。  </li><li>如果进程没有可见的窗口，也没有右下角的提醒图标，那么任务管理器会用一个缺省的图标。  </li><li>针对一些特殊的进程，比如<code>svchost.exe</code>，有一些硬编码的特殊图标。</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://blogs.msdn.microsoft.com/oldnewthing/20180301-00/?p=98135&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;How does Task Manager choose t
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>如何和不好相处的人一起工作</title>
    <link href="http://fresky.github.io/2018/03/02/how-to-work-with-difficult-people/"/>
    <id>http://fresky.github.io/2018/03/02/how-to-work-with-difficult-people/</id>
    <published>2018-03-02T01:09:03.000Z</published>
    <updated>2019-12-20T08:29:07.312Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.dailyinfographic.com/9-keys-to-working-with-difficult-people" target="_blank" rel="noopener">9 Keys To Working With Difficult People</a>介绍了9个和不好相处的人一起工作的技巧。</p><ol><li><strong>设置你想如何被对待的基本原则</strong>。  </li><li><strong>努力理解别人的问题</strong>。调查显示一般我们只能理解别人讲话的25%，下面的技巧可以帮助我们理解别人。1）保持眼神交流。2）镜像对方的身体语言。3）对不清楚的地方提问。4）复述别人的重点。  </li><li><strong>重复自己的重点</strong>。讲到重点时重复几次，并且请别人复述一下确保没有误解。  </li><li><strong>保持冷静</strong>。  </li><li><strong>改变身体语言</strong>。如果对话进了死胡同，建议一起散步，去喝咖啡等改变一下身体语言。  </li><li><strong>对问题创建一个双方对话的方式</strong>。应该说“这是我对刚才发生情况的理解，和你想的一样吗？我又没有漏掉什么东西？”，不要说“这是我的建设性反馈。”  </li><li><strong>认可好的改变</strong>。当你看到别人尊重你的基本原则或者你的反馈时及时表示感谢。  </li><li><strong>管理别人的预期</strong>。遵循下面的步骤：1）询问别人对你的预期。2）分享你对别人的预期。3）达成共识。4）写下共识。5）用这个写下的共识做为将来冲突的指导。  </li><li><strong>仔细选择你的战争</strong>。和别人争吵是一件特别消耗精力的事情，所以要把问题按照优先级排序，首先解决最重要的问题。</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.dailyinfographic.com/9-keys-to-working-with-difficult-people&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;9 Keys To Working With D
      
    
    </summary>
    
    
      <category term="SoftSkill" scheme="http://fresky.github.io/tags/SoftSkill/"/>
    
  </entry>
  
  <entry>
    <title>记忆的7个技巧</title>
    <link href="http://fresky.github.io/2018/02/28/7-tech-to-remember-anything/"/>
    <id>http://fresky.github.io/2018/02/28/7-tech-to-remember-anything/</id>
    <published>2018-02-28T13:48:10.000Z</published>
    <updated>2019-12-20T08:29:07.312Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.dailyinfographic.com/7-techniques-to-remember-anything" target="_blank" rel="noopener"><br>7 Techniques To Remember Anything</a>介绍了7个记忆的技巧。</p><ol><li><strong>轨迹</strong>。适用记忆一段演讲。找一个自己熟悉的路径，然后把需要记忆的话题对应于路径的各个地方。TED的演讲<a href="https://www.ted.com/talks/joshua_foer_feats_of_memory_anyone_can_do" target="_blank" rel="noopener">Feats of memory anyone can do</a>中讲的记忆宫殿也是一样的技巧。  </li><li><strong>缩略词</strong>。适用记忆一组词语。  </li><li><strong>押韵</strong>。适用于记忆一组有序的信息。  </li><li><strong>关联</strong>。适用于记忆购物清单，就是把要买的东西串起来。  </li><li><strong>分段</strong>。适用于记忆长的数字，最简单的应用就是记忆电话号码的XXX-XXXX-XXXX。  </li><li><strong>PQRST</strong>，预习，提问，阅读，描述和测试。适用于考试。  </li><li><strong>写下来</strong>。适用于学习一门新的语言。</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.dailyinfographic.com/7-techniques-to-remember-anything&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;br&gt;7 Techniques To Remember A
      
    
    </summary>
    
    
      <category term="SoftSkill" scheme="http://fresky.github.io/tags/SoftSkill/"/>
    
  </entry>
  
  <entry>
    <title>如何影响和说服别人</title>
    <link href="http://fresky.github.io/2018/02/28/how-to-influence/"/>
    <id>http://fresky.github.io/2018/02/28/how-to-influence/</id>
    <published>2018-02-28T08:57:39.000Z</published>
    <updated>2019-12-20T08:29:07.312Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.dailyinfographic.com/how-to-influence-people" target="_blank" rel="noopener">How To Get Anyone To Agree With You, According To Science</a>介绍了6个有科学依据的小技巧来帮助我们影响和说服别人。</p><ol><li><strong>互惠</strong>。给别人一下好处会更容易让别人同意你的观点，怎么给别人好处也很关键。研究表明，如果服务员给了顾客一块薄荷糖可以增加3%的小费，两块可以增加14%的小费。如果先给了顾客一块薄荷糖，然后说“但是你真好，再给你一块”，这样同样是凉快薄荷糖，但是可以增加23%的小费。  </li><li><strong>缺乏</strong>。当东西变少时，人们会想要更多。  </li><li><strong>权威</strong>。人们更倾向于跟随专家的意见。研究表明，如果中介公司接到电话后简单的多说一句，“我转给我的同事，他有15年的物业管理经验”，可以增加15%的签约率。  </li><li><strong>一致</strong>。先寻求一个小的共识，可以进而达成大的共识。研究表明，在一次要求在花园前树立安全驾驶的广告牌的公益活动中，一个街区的成功率是其它街区的4倍，仅仅是因为之前先让这个街区的人在窗户上放一张小的安全驾驶的明信片。  </li><li><strong>喜欢</strong>。人们更容易对喜欢的人说好的。让别人喜欢你的一个好的方式是找到一些你和他的共同点。  </li><li><strong>舆论</strong>。人们通常会受到别人的选择的影响。研究表明，在酒店卫生间的重用毛巾的牌子上写上“本店75%的客人会重用毛巾来保护环境”，可以增加33%的毛巾重用率。  </li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.dailyinfographic.com/how-to-influence-people&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;How To Get Anyone To Agree With You, Acc
      
    
    </summary>
    
    
      <category term="SoftSkill" scheme="http://fresky.github.io/tags/SoftSkill/"/>
    
  </entry>
  
  <entry>
    <title>为什么地址栏的快捷键是Alt D</title>
    <link href="http://fresky.github.io/2017/08/27/why-alt-d-short-cut-for-address-bar/"/>
    <id>http://fresky.github.io/2017/08/27/why-alt-d-short-cut-for-address-bar/</id>
    <published>2017-08-27T13:54:30.000Z</published>
    <updated>2019-12-20T08:29:07.312Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://blogs.msdn.microsoft.com/oldnewthing/20170314-00/?p=95727" target="_blank" rel="noopener">Why is Alt+D the keyboard shortcut for putting focus on the address bar?</a>解释了为啥在Windows的系统下，地址栏的快捷键是<code>Alt</code>+<code>D</code>。</p><p>因为地址栏的英文是A<u>d</u>dress。但是为啥不是<code>Alt</code>+<code>A</code>呢（<u>A</u>ddress）？</p><p>因为<code>Alt</code>+<code>A</code>已经被收藏夹占用了，因为收藏夹是F<u>a</u>vorites。但是为啥收藏夹不是<code>Alt</code>+<code>F</code>呢（<u>F</u>avorites）？</p><p>因为<code>Alt</code>+<code>F</code>已经被文件占用了，因为文件是<u>F</u>ile。</p><p>当然了，一个更好的快捷键是<code>Ctrl</code>（<code>Command</code>）+<code>L</code>，这个无论Windows还是Mac下都是好使的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://blogs.msdn.microsoft.com/oldnewthing/20170314-00/?p=95727&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Why is Alt+D the keyboard shor
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>如何选择合适的幻灯片布局</title>
    <link href="http://fresky.github.io/2017/08/26/how-to-choose-slide/"/>
    <id>http://fresky.github.io/2017/08/26/how-to-choose-slide/</id>
    <published>2017-08-26T08:50:33.000Z</published>
    <updated>2019-12-20T08:29:07.311Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://extremepresentation.typepad.com/blog/2015/01/announcing-the-slide-chooser.html" target="_blank" rel="noopener">Announcing the Slide Chooser</a>用下图展示了如何选择幻灯片布局。</p><ul><li>解释<ul><li>什么<ul><li>什么问题<ul><li>意见不同<ul><li>不同的方法</li><li>压力</li><li>天平箭头</li><li>天平比较</li></ul></li><li>劣势<ul><li>下降螺旋</li><li>悬崖边上</li></ul></li><li>障碍：障碍物</li></ul></li><li>我们做了什么<ul><li>线性推移</li><li>层层筛选</li></ul></li><li>现在什么状况<ul><li>扩张：发散放射线</li><li>收敛<ul><li>收敛问题</li><li>收敛放射线</li></ul></li><li>复杂情况<ul><li>非线性过程<ul><li>迷宫图</li><li>棋盘</li><li>流程图</li></ul></li><li>二维：矩阵</li><li>许多不相关的部分：谜题拼图</li><li>眼睛看不过来：冰山图</li></ul></li></ul></li></ul></li><li>怎么样<ul><li>它是怎么工作的<ul><li>一件事情基于另一件事情：金字塔列表</li><li>模块<ul><li>标记的物体</li><li>多个方面</li></ul></li><li>过程<ul><li>非线性过程<ul><li>流程图</li><li>棋盘</li></ul></li><li>线性过程：线性推移</li></ul></li></ul></li><li>他们有什么不同<ul><li>选择-两方对比</li><li>选择-多方对比</li></ul></li><li>我们怎么样：天平比较</li><li>他们是怎么相关的<ul><li>关系</li><li>隐喻</li><li>雷区</li></ul></li></ul></li><li>谁<ul><li>我们的目标是谁<ul><li>二维分布</li><li>三位分布</li></ul></li><li>谁对什么负责<ul><li>RASCI矩阵（Responsible，Accountable，Support，Consulted，Informed）</li><li>组织架构图</li></ul></li></ul></li><li>为什么<ul><li>为什么发生<ul><li>分解图</li><li>从X到Y过程图</li></ul></li></ul></li></ul></li><li>建议<ul><li>怎么样<ul><li>怎么从这里到那里：从X到Y过程图</li><li>怎么做<ul><li>改进步骤</li><li>甘特图（进度表）</li></ul></li></ul></li><li>为什么<ul><li>为什么会产生这些效果：输入输出图</li><li>为什么这个更好：选择-两方对比</li></ul></li><li>哪里<ul><li>去哪里：地图</li><li>哪里增长：增长机会</li></ul></li><li>何时<ul><li>什么时候我们应该做什么<ul><li>时间表</li><li>甘特图（进度表）</li><li>线性推进</li></ul></li></ul></li><li>什么<ul><li>我们建议什么<ul><li>采取行动<ul><li>遵循流程<ul><li>环形流程</li><li>线性流程</li><li>改进步骤</li></ul></li><li>提供解决方案<ul><li>标记的物体</li><li>隐喻</li></ul></li><li>选择道路：道路变化</li></ul></li><li>做出决定<ul><li>这个还是那个：选择-两方对比</li><li>选择范围：金字塔列表</li><li>离散的选择<ul><li>选择-多方对比</li><li>发散放射线</li><li>决策树</li></ul></li></ul></li></ul></li><li>我们要达到什么目标<ul><li>一致性<ul><li>输入输出图</li><li>天平比较</li></ul></li><li>合并努力：建筑/柱子</li></ul></li></ul></li></ul></li></ul><img src="/images/slidechooser1.png"><img src="/images/slidechooser2.png">]]></content>
    
    <summary type="html">
    
      本文介绍了如何根据不同的数据选择不表类型。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="SoftSkill" scheme="http://fresky.github.io/tags/SoftSkill/"/>
    
  </entry>
  
  <entry>
    <title>如何选择合适的图表类型</title>
    <link href="http://fresky.github.io/2017/08/26/how-to-choose-the-best-chart/"/>
    <id>http://fresky.github.io/2017/08/26/how-to-choose-the-best-chart/</id>
    <published>2017-08-26T08:16:57.000Z</published>
    <updated>2019-12-20T08:29:07.311Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://extremepresentation.typepad.com/blog/2006/09/choosing_a_good.html" target="_blank" rel="noopener">Choosing a good chart</a>用下图展示了如何根据不同的数据选择不同的图表，非常直观。</p><ul><li>比较<ul><li>不同个体比较<ul><li>每个个体有两个变量：变宽柱状图</li><li>每个个体有一个变量<ul><li>种类很多：表格或者表格中嵌套图表</li><li>种类不多<ul><li>很多个体：长条图</li><li>个体数目不多：柱状图</li></ul></li></ul></li></ul></li><li>随时间比较<ul><li>多个周期<ul><li>环形数据：蜘蛛图</li><li>非环形数据：折线图</li></ul></li><li>少数周期<ul><li>种类不多：柱状图</li><li>种类很多：折线图</li></ul></li></ul></li></ul></li><li>关系<ul><li>两个变量：散布图</li><li>三个变量：泡泡图</li></ul></li><li>分布<ul><li>单个变量<ul><li>少数数据点：列柱状图</li><li>多个数据点：线柱状图</li></ul></li><li>两个变量：散布图</li><li>三个变量：三维面积图</li></ul></li><li>组合<ul><li>随时间变化<ul><li>少数周期<ul><li>只显示差值： 等高堆叠柱状图</li><li>显示差值和绝对值：堆叠柱状图</li></ul></li><li>多个周期<ul><li>只显示差值： 等高堆叠面积图</li><li>显示差值和绝对值：堆叠面积图</li></ul></li></ul></li><li>静态组合<ul><li>简单分布：饼图</li><li>累积或者差：瀑布图</li><li>子模块：等高堆叠柱状图显示子模块</li></ul></li></ul></li></ul><img src="/images/bestchart.png"><p>翻译完后发现官网上有一个中文版的图<a href="http://extremepresentation.typepad.com/blog/2009/01/chart-chooser-in-chinese.html" target="_blank" rel="noopener">Chart Chooser in Chinese</a>，见下：（好汗。。。）</p><img src="/images/bestchartcn.jpg">]]></content>
    
    <summary type="html">
    
      本文介绍了如何根据不同的数据选择不表类型。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="SoftSkill" scheme="http://fresky.github.io/tags/SoftSkill/"/>
    
  </entry>
  
  <entry>
    <title>参加技术会议的一些小窍门</title>
    <link href="http://fresky.github.io/2017/06/02/tips-for-tech-conference/"/>
    <id>http://fresky.github.io/2017/06/02/tips-for-tech-conference/</id>
    <published>2017-06-02T01:38:41.000Z</published>
    <updated>2019-12-20T08:29:07.311Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.hanselman.com/blog/SuggestionsAndTipsForAttendingYourFirstTechConference.aspx" target="_blank" rel="noopener">Suggestions and Tips for attending your first tech conference</a>给出了一些参加技术会议的小窍门。</p><ul><li>拿别人名片时写上为什么，你们聊了啥</li><li>和与会者，演讲者聊天，技术很重要，但是人脉也很重要</li><li>如果不善于和别人打交道，可以从“你是做什么的”开始</li><li>向别人介绍自己</li><li>会前最好联系一些与会者或者演讲者，带够名片</li><li>着装舒适</li><li>你可能会觉得其他人都互相认识，只有自己落单，但是也不要害怕和和别人聊天，如果你喜欢谁的演讲，告诉他们</li><li>计划参加哪些会议，如果到时候想参加的会议坐满了，要有替代计划</li><li>参会前就尝试认识一些人</li><li>勇于和工作人员和演讲者打招呼，尤其当你向提供帮助的时候</li><li>挑3个你想认识的人，每个人准备一个问题，早点去，在到达会场的一个小时内找到其中一个人</li><li>多见人，可以少开会，和别人聊天你能得到更多</li><li>没必要去参加没一个会议</li><li>尽量不要内向</li><li>不要依赖会议的wifi</li><li>带零食</li><li>确认从哪里下载有幻灯片或者视频，然后就享受会议，不要担心漏了什么</li><li>做笔记，发微博，带着笔记本，睡觉前整理一下以免忘记</li><li>吃饭的时候和不认识的人坐在一起，并且做自我介绍</li><li>问演讲者什么时候<em>不</em>应该用他们的产品，如果演讲者答不上来，那么他是做市场的</li><li>不要害怕提前离场，或者中途进场</li><li>如果遇到你的偶像，不要太紧张，他们都是正常人，只不过做了一些很酷的事情</li><li>好事情都发生在走廊，茶水间，减少呆在会议室的时间</li><li>参会期间不要安排其他工作</li><li>在微博上问有没有人想会后去喝一杯，和人聊天永远比听报告更重要</li><li>问其他人都参加哪些聚会，设法让自己得到邀请</li><li>用脚投票定律（Law of Two Feet），如果你没兴趣，就离开</li><li>如果你不是要找工作，就带你的工作名片，如果要找工作，就带你的私人名片</li><li>参加一些你平时用不倒的技术会议</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.hanselman.com/blog/SuggestionsAndTipsForAttendingYourFirstTechConference.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Sugges
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>提高Scrum站会效率的一个小工具</title>
    <link href="http://fresky.github.io/2016/11/06/scrum-standup-meeting-tool/"/>
    <id>http://fresky.github.io/2016/11/06/scrum-standup-meeting-tool/</id>
    <published>2016-11-06T02:32:10.000Z</published>
    <updated>2019-12-20T08:29:07.311Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.infoq.com/articles/actionable-agile-tools" target="_blank" rel="noopener">Actionable Agile Tools</a>给出了一个提高Scrum站会效率的一个小工具，可以在开站会时试试看。</p><img src="/images/scrumstandupmeeting.jpg">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.infoq.com/articles/actionable-agile-tools&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Actionable Agile Tools&lt;/a&gt;给出了一个提高Scrum站会效率
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>用6个字符写出任意的Javascript代码</title>
    <link href="http://fresky.github.io/2016/11/05/write-any-javascript-code-with-6-characters/"/>
    <id>http://fresky.github.io/2016/11/05/write-any-javascript-code-with-6-characters/</id>
    <published>2016-11-05T02:04:54.000Z</published>
    <updated>2019-12-20T08:29:07.311Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://jazcash.com/a-javascript-journey-with-only-six-characters/" target="_blank" rel="noopener">A Javascript journey with only six characters</a>展示了只用<code>(</code>，<code>)</code>，<code>+</code>，<code>[</code>，<code>]</code>和<code>!</code>这6个字符能做什么事情。<a href="http://www.jsfuck.com/" target="_blank" rel="noopener">JSFuck</a>是一个网站，把你输入的任何Javascript语句翻译成只用这6个字符表示的形式，比如<code>alert(1)</code>可以用如下的6个字符代码替代，是不是大开眼界:)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]+(!![]+[])[+[]]+(![]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]])[!+[]+!+[]+[+[]]]+[+!+[]]+(!![]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]])[!+[]+!+[]+[+[]]]</span><br></pre></td></tr></table></figure><p>下面简单说一下这个原理。首先，下面的是Javascript的规则：</p><ol><li><code>!</code>开头会被转换成布尔值</li><li><code>+</code>开头会被转换成数值</li><li><code>[]</code>开头会被转换成字符串</li></ol><p>也就是说如下的这些语句都是true。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![] === <span class="literal">false</span></span><br><span class="line">+[] === <span class="number">0</span></span><br><span class="line">[]+[] === <span class="string">""</span></span><br></pre></td></tr></table></figure><p>这样我们就能做一些有意思的事情了，比如如下的代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">![]+[] === <span class="string">"false"</span></span><br><span class="line">+!![] === <span class="number">1</span></span><br><span class="line">------------------------</span><br><span class="line">(![]+[])[+!![]] === <span class="string">"a"</span>  <span class="comment">// same as "false"[1]</span></span><br></pre></td></tr></table></figure><p>这样我们其实就能从<code>(</code>，<code>)</code>，<code>+</code>，<code>[</code>，<code>]</code>和<code>!</code>这6个字符中得到如下的字符了：<code>true</code>，<code>false</code>，<code>a</code>，<code>e</code>，<code>f</code>，<code>l</code>，<code>r</code>，<code>s</code>，<code>t</code>，<code>u</code>。</p><p>我们还能用如下的方式拿到”undefined”。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[][[]] + [] === <span class="string">"undefined"</span></span><br></pre></td></tr></table></figure><p>另外<code>Number</code>类型的<code>toString</code>方法有一个可以取底数的功能，如下所示，这样我们就能拿到<code>0-9</code>和<code>a-z</code>的所有字符了。如下所示：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">12</span>)[<span class="string">"toString"</span>](<span class="number">10</span>) === <span class="string">"12"</span> <span class="comment">// base 10 - normal to us</span></span><br><span class="line">(<span class="number">12</span>)[<span class="string">"toString"</span>](<span class="number">2</span>) === <span class="string">"1100"</span> <span class="comment">// base 2, or binary, for 12</span></span><br><span class="line">(<span class="number">12</span>)[<span class="string">"toString"</span>](<span class="number">8</span>) === <span class="string">"14"</span> <span class="comment">// base 8 (octonary) for 12</span></span><br><span class="line">(<span class="number">12</span>)[<span class="string">"toString"</span>](<span class="number">16</span>) === <span class="string">"c"</span> <span class="comment">// hex for 12</span></span><br><span class="line">(<span class="number">10</span>)[<span class="string">"toString"</span>](<span class="number">36</span>) === <span class="string">"a"</span></span><br><span class="line">(<span class="number">35</span>)[<span class="string">"toString"</span>](<span class="number">36</span>) === <span class="string">"z"</span></span><br></pre></td></tr></table></figure><p>那么我们如何拼凑一个函数呢？<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[][<span class="string">"fill"</span>][<span class="string">"constructor"</span>] === <span class="built_in">Function</span></span><br></pre></td></tr></table></figure></p><p>而<code>Function(&quot;alert(1)&quot;)</code>能返回给我们如下的函数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">anonymous</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>也就是说如果我写下面的语句，那么就会在浏览器中弹出一个对话框来。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[][<span class="string">"fill"</span>][<span class="string">"constructor"</span>](<span class="string">"alert(1)"</span>)()</span><br></pre></td></tr></table></figure></p><p>而这条语句中的所有字符都能用<code>(</code>，<code>)</code>，<code>+</code>，<code>[</code>，<code>]</code>和<code>!</code>这6个字符表示出来，这样大家就理解了那个<a href="http://www.jsfuck.com/" target="_blank" rel="noopener">JSFuck</a>网站是如何工作的了吧。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://jazcash.com/a-javascript-journey-with-only-six-characters/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;A Javascript journey with only
      
    
    </summary>
    
    
      <category term="Javascript" scheme="http://fresky.github.io/tags/Javascript/"/>
    
  </entry>
  
  <entry>
    <title>根据经纬度计算地图的像素值</title>
    <link href="http://fresky.github.io/2016/08/12/compute-pixel-from-longitude-latitude/"/>
    <id>http://fresky.github.io/2016/08/12/compute-pixel-from-longitude-latitude/</id>
    <published>2016-08-12T09:14:24.000Z</published>
    <updated>2019-12-20T08:29:07.310Z</updated>
    
    <content type="html"><![CDATA[<p>如果我们想根据经纬度在一张地图的图片上画一个点，就需要知道如何根据经纬度算出对应图片的像素值。本文介绍一下怎么根据在线地图中常用的Web Mercator投射算法来从经纬度计算像素值。</p><p><a href="https://en.wikipedia.org/wiki/Web_Mercator" target="_blank" rel="noopener">Web Mercator</a>投射算法最早是Google地图在2005年使用的，随后就成了在线地图的实际标准，Google地图，必应Bing地图用的都是Web Mercator投射算法。Web Mercator投射算法如下公式所示：</p><p><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/3e5240c35bde180226b268aa4de4e4cde3b95ed3" alt="Web Mercator算法"></p><p>其中λ是经度（longitude），ψ是维度（latitude）。zoom level就是放大的倍数，在Google地图中可以在地址栏看到这个值，比如下面是北京的地址，其中4z就表明现在的zoom level是4。</p><p><code>https://www.google.com/maps/place/Beijing,+China/@39.9385809,115.835544,4z</code></p><p>直接套用上面的公式就能算出给定经纬度的地点对应的像素。<a href="https://developers.google.com/maps/documentation/javascript/examples/map-coordinates" target="_blank" rel="noopener">Google Maps APIs</a>上的示例代码也展示了怎么根据经纬度计算像素值，用的是芝加哥的地址。</p><p>但是通常我们的图片只包含世界地图的一小块区域，这个时候如果想在这个地图上标出经纬度对应的点，需要算出这个点对应的像素值。然后在算出图片左上角的那个点对应的像素值，一减就是在这个图片上对应的位置了。</p><p>下面的代码是根据Google Maps APIs上的示例程序简单修改的计算地图图片中相对坐标的代码。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// below function is from: https://developers.google.com/maps/documentation/javascript/examples/map-coordinates</span></span><br><span class="line"><span class="keyword">var</span> TILE_SIZE = <span class="number">256</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">project</span>(<span class="params">lat, lng, zoom</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> siny = <span class="built_in">Math</span>.sin(lat * <span class="built_in">Math</span>.PI / <span class="number">180</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Truncating to 0.9999 effectively limits latitude to 89.189. This is</span></span><br><span class="line">    <span class="comment">// about a third of a tile past the edge of the world tile.</span></span><br><span class="line">    siny = <span class="built_in">Math</span>.min(<span class="built_in">Math</span>.max(siny, <span class="number">-0.9999</span>), <span class="number">0.9999</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        X: TILE_SIZE * (<span class="number">0.5</span> + lng / <span class="number">360</span>) * (<span class="number">1</span> &lt;&lt; zoom),</span><br><span class="line">        Y: TILE_SIZE * (<span class="number">0.5</span> - <span class="built_in">Math</span>.log((<span class="number">1</span> + siny) / (<span class="number">1</span> - siny)) / (<span class="number">4</span> * <span class="built_in">Math</span>.PI)) * (<span class="number">1</span> &lt;&lt; zoom)</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPosition</span>(<span class="params">lat, lng</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// top left point of the map picture we are using</span></span><br><span class="line">    <span class="keyword">var</span> STARTLAT = <span class="number">40</span>;</span><br><span class="line">    <span class="keyword">var</span> STARTLNG = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// zoom level of the map picture</span></span><br><span class="line">    <span class="keyword">var</span> zoom = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> start = project(STARTLAT, STARTLNG, zoom);</span><br><span class="line">    <span class="keyword">var</span> p = project(lat, lng, zoom);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        X: p.X - start.X,</span><br><span class="line">        Y: p.Y - start.Y</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;如果我们想根据经纬度在一张地图的图片上画一个点，就需要知道如何根据经纬度算出对应图片的像素值。本文介绍一下怎么根据在线地图中常用的Web Mercator投射算法来从经纬度计算像素值。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wik
      
    
    </summary>
    
    
      <category term="Javascript" scheme="http://fresky.github.io/tags/Javascript/"/>
    
      <category term="Web" scheme="http://fresky.github.io/tags/Web/"/>
    
  </entry>
  
  <entry>
    <title>用Swashbuckle给ASP.NET Core的项目自动生成Swagger的API帮助文档</title>
    <link href="http://fresky.github.io/2016/06/08/use-swashbuckle-to-add-swagger-api-help-for-asp-net-core/"/>
    <id>http://fresky.github.io/2016/06/08/use-swashbuckle-to-add-swagger-api-help-for-asp-net-core/</id>
    <published>2016-06-08T13:16:41.000Z</published>
    <updated>2019-12-20T08:29:07.310Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://swagger.io/" target="_blank" rel="noopener">Swagger</a>是一个描述RESTful的Web API的规范和框架。如果使用ASP.NET的话，可以用<a href="https://github.com/domaindrivendev/Swashbuckle" target="_blank" rel="noopener">Swashbuckle</a>来自动生成Swagger。下面详细的介绍一下如何给ASP.NET Core的项目自动生成Swagger的API帮助文档。</p><h1 id="创建ASP-NET-Core的Web-API-Controller"><a href="#创建ASP-NET-Core的Web-API-Controller" class="headerlink" title="创建ASP.NET Core的Web API Controller"></a>创建ASP.NET Core的Web API Controller</h1><p>在Visual Studio 2015中创建一个ASP.NET Core的项目，点击添加“New Item”，“Server-side”，“Web API Controller Class”。Visual Studio会帮我们自动创建一个如下的文件，实现了一个标准的RESTful的Web API。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">Route(<span class="meta-string">"api/[controller]"</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ValuesController</span> : <span class="title">Controller</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// GET: api/values</span></span><br><span class="line">    [<span class="meta">HttpGet</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> IEnumerable&lt;<span class="keyword">string</span>&gt; <span class="title">Get</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">string</span>[] &#123; <span class="string">"value1"</span>, <span class="string">"value2"</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// GET api/values/5</span></span><br><span class="line">    [<span class="meta">HttpGet(<span class="meta-string">"&#123;id&#125;"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">string</span> <span class="title">Get</span>(<span class="params"><span class="keyword">int</span> id</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"value"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// POST api/values</span></span><br><span class="line">    [<span class="meta">HttpPost</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Post</span>(<span class="params">[FromBody]<span class="keyword">string</span> <span class="keyword">value</span></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// PUT api/values/5</span></span><br><span class="line">    [<span class="meta">HttpPut(<span class="meta-string">"&#123;id&#125;"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Put</span>(<span class="params"><span class="keyword">int</span> id, [FromBody]<span class="keyword">string</span> <span class="keyword">value</span></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// DELETE api/values/5</span></span><br><span class="line">    [<span class="meta">HttpDelete(<span class="meta-string">"&#123;id&#125;"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Delete</span>(<span class="params"><span class="keyword">int</span> id</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="添加Swashbuckle的Nuget包"><a href="#添加Swashbuckle的Nuget包" class="headerlink" title="添加Swashbuckle的Nuget包"></a>添加Swashbuckle的Nuget包</h1><p>打开<code>project.json</code>文件，添加Swashbuckle的依赖<code>Swashbuckle.SwaggerGen</code>和<code>Swashbuckle.SwaggerUi</code>。注意我们要使用6.0的版本，这是针对ASP.NET Core的。它的github地址<a href="https://github.com/domaindrivendev/Ahoy" target="_blank" rel="noopener">Ahoy</a>也和之前的版本不一样了。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">"dependencies": &#123;</span><br><span class="line">  "Microsoft.AspNet.IISPlatformHandler": "1.0.0-rc1-final",</span><br><span class="line">  "Microsoft.AspNet.Mvc": "6.0.0-rc1-final",</span><br><span class="line">  "Microsoft.AspNet.Mvc.Core": "6.0.0-rc1-final",</span><br><span class="line">  "Microsoft.AspNet.Server.Kestrel": "1.0.0-rc1-final",</span><br><span class="line">  "Microsoft.AspNet.SignalR.Server": "3.0.0-rc1-final",</span><br><span class="line">  "Microsoft.AspNet.StaticFiles": "1.0.0-rc1-final",</span><br><span class="line">  "Swashbuckle.SwaggerGen": "6.0.0-rc1-final",</span><br><span class="line">  "Swashbuckle.SwaggerUi": "6.0.0-rc1-final"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1 id="在Startup-cs中配置Swashbuckle"><a href="#在Startup-cs中配置Swashbuckle" class="headerlink" title="在Startup.cs中配置Swashbuckle"></a>在<code>Startup.cs</code>中配置Swashbuckle</h1><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ConfigureServices</span>(<span class="params">IServiceCollection services</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    services.AddSwaggerGen();</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Configure</span>(<span class="params">IApplicationBuilder app</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    app.UseSwaggerGen();</span><br><span class="line">    app.UseSwaggerUi(<span class="string">"help"</span>); <span class="comment">// API文档的地址，默认是 /swagger/ui</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="运行项目，查看API文档，也能直接测试"><a href="#运行项目，查看API文档，也能直接测试" class="headerlink" title="运行项目，查看API文档，也能直接测试"></a>运行项目，查看API文档，也能直接测试</h1><p>万事俱备，运行项目，打开地址，就能看到如下的API文档了，还能直接在这里测试Web API。</p><img src="/images/swagger.png">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://swagger.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Swagger&lt;/a&gt;是一个描述RESTful的Web API的规范和框架。如果使用ASP.NET的话，可以用&lt;a href=&quot;https://githu
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Web" scheme="http://fresky.github.io/tags/Web/"/>
    
  </entry>
  
  <entry>
    <title>如何在Visual Studio中选择C++和C#的编译器版本</title>
    <link href="http://fresky.github.io/2016/05/23/how-to-choose-cpp-and-csharp-compiler-version-in-visual-studio/"/>
    <id>http://fresky.github.io/2016/05/23/how-to-choose-cpp-and-csharp-compiler-version-in-visual-studio/</id>
    <published>2016-05-23T15:14:03.000Z</published>
    <updated>2019-12-20T08:29:07.310Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MSBuild简介"><a href="#MSBuild简介" class="headerlink" title="MSBuild简介"></a>MSBuild简介</h1><p>Visual Studio的编译引擎是<a href="https://msdn.microsoft.com/en-us/library/dd393574.aspx" target="_blank" rel="noopener">MSBuild</a>，它提供了一套项目文件（<code>.csproj</code>,<code>.vbproj</code>, <code>vcxproj</code>）的XML的Schema，用来指定如何处理和编译项目。</p><p>当然MSBuild不依赖于Visual Studio，完全可以在不安装Visual Studio的情况下使用MSBuild。比如可以从<a href="https://www.microsoft.com/en-us/download/details.aspx?id=48159" target="_blank" rel="noopener">Microsoft Build Tools 2015</a>下载MSBuild来编译C#。2016年3月31号微软也宣布了<a href="https://blogs.msdn.microsoft.com/vcblog/2016/03/31/announcing-the-official-release-of-the-visual-c-build-tools-2015/" target="_blank" rel="noopener">Visual C++ Build Tools 2015</a>，可以<a href="http://go.microsoft.com/fwlink/?LinkId=691126" target="_blank" rel="noopener">下载</a>来编译VC++的项目。</p><p>MSBuild也是一个MIT License的开源软件，可以在Github上看到它的<a href="https://github.com/Microsoft/msbuild" target="_blank" rel="noopener">仓库</a>。</p><p><a href="https://msdn.microsoft.com/en-us/library/bb383796.aspx" target="_blank" rel="noopener">MSBuild Toolset (ToolsVersion)</a>是一个任务、目标和工具的集合，指定MSBuild的行为。通常一个MSBuild的Toolset包含<code>microsoft.common.tasks</code>文件，<code>microsoft.common.targets</code>文件和编译器比如<code>csc.exe</code>，<code>cl.exe</code>和<code>link.exe</code>。</p><p>在装Visual Studio时会按照对应版本的MSBuild，比如Visual Studio 2015对应的MSBuild就是v14。如果我们用Visual Studio创建C#和C++的项目，在<code>.csproj</code>和<code>.vcxproj</code>文件的第一行都指定了对应MSBuild的Toolset，如下所示。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Project DefaultTargets=&quot;Build&quot; ToolsVersion=&quot;14.0&quot; xmlns=&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot;&gt;</span><br></pre></td></tr></table></figure><p>在Visual Studio中编译项目时就会使用v14的MSBuild来编译。</p><h1 id="用VS2015的MSBuild来编译VS2015创建的项目"><a href="#用VS2015的MSBuild来编译VS2015创建的项目" class="headerlink" title="用VS2015的MSBuild来编译VS2015创建的项目"></a>用VS2015的MSBuild来编译VS2015创建的项目</h1><p>我们也可以直接使用MSBuild来编译，我分别创建了一个空的C#和空的C++的Console应用，然后打开MSBuild Command Prompt for VS2015，用如下命令行来编译</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msbuild CompilerDemo.sln /t:rebuild</span><br></pre></td></tr></table></figure><p>可以看到如下的命令行输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CoreCompile:</span><br><span class="line">  C:\Program Files (x86)\MSBuild\14.0\bin\csc.exe ...</span><br><span class="line">  </span><br><span class="line">ClCompile:</span><br><span class="line">  C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin\CL.exe ...</span><br><span class="line"></span><br><span class="line">Link:</span><br><span class="line">  C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin\link.exe ...</span><br></pre></td></tr></table></figure></p><p>说明在编译项目时使用了v14的MSBuild下的<code>csc.exe</code>，<code>cl.exe</code>和<code>link.exe</code>。</p><h1 id="用VS2013的MSBuild来编译VS2015创建的项目"><a href="#用VS2013的MSBuild来编译VS2015创建的项目" class="headerlink" title="用VS2013的MSBuild来编译VS2015创建的项目"></a>用VS2013的MSBuild来编译VS2015创建的项目</h1><p>如果我们打开Developer Command Prompt for VS2013，用VS2013的MSBuild编译项目。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msbuild CompilerDemo.sln /t:rebuild</span><br></pre></td></tr></table></figure><p>得到如下的命令行输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CoreCompile:</span><br><span class="line">  C:\Program Files (x86)\MSBuild\12.0\bin\Csc.exe ...</span><br><span class="line">Done Building Project &quot;D:\Documents\Visual Studio 2015\Projects\CompilerDemo\CSharpCompiler\CSharpCompiler.csproj&quot; (Rebuild target(s)).</span><br><span class="line"></span><br><span class="line">C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V120\Microsoft.Cpp.Platform.targets(64,5): error MSB8020: The build tools for v140 (Platform Toolset = &apos;v140&apos;) cannot be found.</span><br></pre></td></tr></table></figure><p>我们看到用v12的MSBuild编译C#项目时成功了，但是编译C++项目时失败了，说找不到Platform Toolset = ‘v140’。我们回头打开<code>.vcxproj</code>文件，可以看到在这个文件里指定了<code>&lt;PlatformToolset&gt;v140&lt;/PlatformToolset&gt;</code>。我们把它改成v120，再重新编译，这次发现成功了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ClCompile:</span><br><span class="line">  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\CL.exe ...</span><br><span class="line">Link:</span><br><span class="line">  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\link.exe ...</span><br></pre></td></tr></table></figure><h1 id="用VS2015的MSBuild来编译VS2015创建的项目（修改C-项目的PlatformToolset）"><a href="#用VS2015的MSBuild来编译VS2015创建的项目（修改C-项目的PlatformToolset）" class="headerlink" title="用VS2015的MSBuild来编译VS2015创建的项目（修改C++项目的PlatformToolset）"></a>用VS2015的MSBuild来编译VS2015创建的项目（修改C++项目的PlatformToolset）</h1><p>修改完<code>PlatformToolset</code>之后，我们再用VS2015的MSBuild编译一下，看看结果。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CoreCompile:</span><br><span class="line">  C:\Program Files (x86)\MSBuild\14.0\bin\csc.exe ...</span><br><span class="line">ClCompile:</span><br><span class="line">  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\CL.exe ...</span><br><span class="line">Link:</span><br><span class="line">  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\link.exe ...</span><br></pre></td></tr></table></figure><p>我们发现它使用了v14的<code>csc.exe</code>，但是使用了v12的<code>cl.exe</code>和<code>link</code>。</p><h1 id="用VS2015的MSBuild来编译，但是指定VS2013的C-和C-的编译器"><a href="#用VS2015的MSBuild来编译，但是指定VS2013的C-和C-的编译器" class="headerlink" title="用VS2015的MSBuild来编译，但是指定VS2013的C++和C#的编译器"></a>用VS2015的MSBuild来编译，但是指定VS2013的C++和C#的编译器</h1><p>那有没有办法让VS2015的MSBuild也使用v12的C#的编译器（<code>csc.exe</code>）呢？我们可以参考一下<a href="https://msdn.microsoft.com/en-us/library/bb383985.aspx" target="_blank" rel="noopener">Overriding ToolsVersion Settings</a>。</p><p>可以使用MSBuild的命令行参数开关：<code>/ToolsVersion</code>，简写为<code>/tv</code>。打开MSBuild Command Prompt for VS2015，用如下命令行来编译。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msbuild CompilerDemo.sln /t:rebuild /tv:&quot;12.0&quot;</span><br></pre></td></tr></table></figure></p><p>我们得到了如下的命令行输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CoreCompile:</span><br><span class="line">  C:\Program Files (x86)\MSBuild\12.0\bin\Csc.exe ...</span><br><span class="line">ClCompile:</span><br><span class="line">  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\CL.exe ...</span><br><span class="line">Link:</span><br><span class="line">  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\link.exe ...</span><br></pre></td></tr></table></figure></p><p>嗯，我们终于在VS2015的MSBuild命令下，成功的使用了VS2013的C++和C#的编译器。</p><h1 id="用Visual-Studio-2015来编译，但是指定VS2013的C-和C-的编译器"><a href="#用Visual-Studio-2015来编译，但是指定VS2013的C-和C-的编译器" class="headerlink" title="用Visual Studio 2015来编译，但是指定VS2013的C++和C#的编译器"></a>用Visual Studio 2015来编译，但是指定VS2013的C++和C#的编译器</h1><p>那么有没有办法来让Visual Studio 2015在编译时也用2013的编译器呢？我们没有办法来指定MSBuild的开关了。根据<a href="https://msdn.microsoft.com/en-us/library/bb383985.aspx" target="_blank" rel="noopener">Overriding ToolsVersion Settings</a>介绍的方法，需要做两件事。</p><h2 id="修改项目文件的ToolsVersion属性"><a href="#修改项目文件的ToolsVersion属性" class="headerlink" title="修改项目文件的ToolsVersion属性"></a>修改项目文件的<code>ToolsVersion</code>属性</h2><p>在本文的开头提到了在项目文件的第一行写明了对应MSBuild的Toolset。我们可以修改这个属性，把项目文件的第一行改成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Project DefaultTargets=&quot;Build&quot; ToolsVersion=&quot;12.0&quot; xmlns=&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot;&gt;</span><br></pre></td></tr></table></figure></p><h2 id="设置环境变量MSBUILDLEGACYDEFAULTTOOLSVERSION"><a href="#设置环境变量MSBUILDLEGACYDEFAULTTOOLSVERSION" class="headerlink" title="设置环境变量MSBUILDLEGACYDEFAULTTOOLSVERSION"></a>设置环境变量<code>MSBUILDLEGACYDEFAULTTOOLSVERSION</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set MSBUILDLEGACYDEFAULTTOOLSVERSION=true</span><br></pre></td></tr></table></figure><p>这样在Visual Studio 2015中编译也会使用VS2013的编译器了。而且直接在MSBuild Command Prompt for VS2015中直接使用MSBuild，不需要制定<code>/tv</code>开关，也是使用VS2013的编译器了。</p><p>来验证一下，如果我们在代码中使用了C#6的新特性（VS2015支持）。<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span> o = <span class="literal">null</span>;</span><br><span class="line">Console.WriteLine(o?.ToString());</span><br></pre></td></tr></table></figure></p><p>那么在Visual Studio 2015中编译会报错。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Build FAILED.</span><br><span class="line"></span><br><span class="line">&quot;D:\Documents\Visual Studio 2015\Projects\CompilerDemo\CompilerDemo.sln&quot; (rebuild target) (1) -&gt;</span><br><span class="line">&quot;D:\Documents\Visual Studio 2015\Projects\CompilerDemo\CSharpCompiler\CSharpCompiler.csproj&quot; (Rebuild target) (2) -&gt;</span><br><span class="line">(CoreCompile target) -&gt; </span><br><span class="line">  Program.cs(10,33): error CS1525: Invalid expression term &apos;.&apos; [D:\Documents\Visual Studio 2015\Projects\CompilerDemo\CSharpCompiler\CSharpCompiler.csproj]</span><br><span class="line">  Program.cs(10,34): error CS1003: Syntax error, &apos;:&apos; expected [D:\Documents\Visual Studio 2015\Projects\CompilerDemo\CSharpCompiler\CSharpCompiler.csproj]</span><br><span class="line">  Program.cs(10,44): error CS1002: ; expected [D:\Documents\Visual Studio 2015\Projects\CompilerDemo\CSharpCompiler\CSharpCompiler.csproj]</span><br><span class="line">  Program.cs(10,44): error CS1525: Invalid expression term &apos;)&apos; [D:\Documents\Visual Studio 2015\Projects\CompilerDemo\CSharpCompiler\CSharpCompiler.csproj]</span><br><span class="line"></span><br><span class="line">    0 Warning(s)</span><br><span class="line">    4 Error(s)</span><br></pre></td></tr></table></figure><h1 id="在Visual-Studio-2015中指定C-语言的版本"><a href="#在Visual-Studio-2015中指定C-语言的版本" class="headerlink" title="在Visual Studio 2015中指定C#语言的版本"></a>在Visual Studio 2015中指定C#语言的版本</h1><p>另外在Visual Studio中可以指定支持的C#语言的版本。右键项目-》属性-》编译-》高级-》语言版本。Visual Studio 2015的默认就是支持的最高版本C# 6.0，可以在这里选择不同的版本。</p><h1 id="总结-TLDR"><a href="#总结-TLDR" class="headerlink" title="总结 TLDR"></a>总结 TLDR</h1><h2 id="对于C-项目"><a href="#对于C-项目" class="headerlink" title="对于C++项目"></a>对于C++项目</h2><p><strong>通过设置<code>PlatformToolset</code>来指定C++的编译器版本。</strong></p><h2 id="对于C-项目-1"><a href="#对于C-项目-1" class="headerlink" title="对于C#项目"></a>对于C#项目</h2><p><strong>使用相应版本的MSBuild。</strong></p><p>或者</p><p><strong>使用MSBuild的命令行开关<code>/ToolsVersion</code>（<code>/tv</code>）。</strong></p><p>或者</p><p><strong>1. 修改项目文件的<code>ToolsVersion</code>属性。</strong><br><strong>2. 设置环境变量<code>MSBUILDLEGACYDEFAULTTOOLSVERSION</code>。</strong></p>]]></content>
    
    <summary type="html">
    
      本文介绍了Visual Studio的编译引擎MSBuild，以及如何使用Toolset来为MSBuild指定C#和C++的编译器。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>用Roslynpad做一个轻量级的C#编辑器</title>
    <link href="http://fresky.github.io/2016/05/21/use-roslynpad-as-lightweight-csharp-editor/"/>
    <id>http://fresky.github.io/2016/05/21/use-roslynpad-as-lightweight-csharp-editor/</id>
    <published>2016-05-21T09:18:37.000Z</published>
    <updated>2019-12-20T08:29:07.309Z</updated>
    
    <content type="html"><![CDATA[<p>在我之前的文章<a href>用CS-Script把Notepad++变身支持智能提示和运行代码的C#集成开发环境</a>中介绍过CS-Script，今天再介绍一下<a href="https://roslynpad.net/" target="_blank" rel="noopener">Roslynpad</a>。它是一个Apache 2.0协议开源的轻量级C#编辑器。支持自动完成，语法提示，修改建议等功能。很适合平时随手写个C#程序看看运行结果。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在我之前的文章&lt;a href&gt;用CS-Script把Notepad++变身支持智能提示和运行代码的C#集成开发环境&lt;/a&gt;中介绍过CS-Script，今天再介绍一下&lt;a href=&quot;https://roslynpad.net/&quot; target=&quot;_blank&quot; rel=&quot;n
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>软件架构师要做出的重要决定是什么？</title>
    <link href="http://fresky.github.io/2016/03/13/what-are-the-important-decisions-to-make-for-software-architect/"/>
    <id>http://fresky.github.io/2016/03/13/what-are-the-important-decisions-to-make-for-software-architect/</id>
    <published>2016-03-13T04:21:16.000Z</published>
    <updated>2019-12-20T08:29:07.309Z</updated>
    
    <content type="html"><![CDATA[<p>身为一个软件架构师，你需要做出的重要决定是什么？Robert Martin (Uncle Bob)在他的博客<a href="http://blog.cleancoder.com/uncle-bob/2016/01/04/ALittleArchitecture.html" target="_blank" rel="noopener">A Little Architecture</a>中用一问一答的方式给出了他的答案。</p><p>软件架构师要做的重要决定<strong>不是</strong>选择什么数据库，选择什么框架，选择什么Web服务器。<strong>而是</strong>如何才能让我们不用在一开始就决定选择什么数据库，选择什么框架，选择什么Web服务器，而是等到我们有了更多的信息时再做决定。</p><p>拿业务逻辑和数据库的例子来说，我们应该用依赖反转原则来让业务逻辑不依赖于数据库，反过来让数据库依赖于业务逻辑。尽管在运行时业务逻辑依赖于数据库，但是在编译时依赖应该反过来，数据库依赖业务逻辑。</p><p>最后列一下Uncle Bob举得例子，眼熟不？:)</p><ol><li>早期决定使用数据库，后来发现文件就足够了。  </li><li>早期决定使用Web服务器，后来发现只需要一个简单的Socket接口。  </li><li>早期决定使用一个框架，后来发现这个框架中的很多功能根本用不上，反而有很多限制让我们很痛苦。  </li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;身为一个软件架构师，你需要做出的重要决定是什么？Robert Martin (Uncle Bob)在他的博客&lt;a href=&quot;http://blog.cleancoder.com/uncle-bob/2016/01/04/ALittleArchitecture.html&quot; 
      
    
    </summary>
    
    
      <category term="Design" scheme="http://fresky.github.io/tags/Design/"/>
    
  </entry>
  
  <entry>
    <title>用BenchmarkDotNet给C#程序做性能测试</title>
    <link href="http://fresky.github.io/2016/03/06/use-benchmarkdotnet-for-csharp-benchmark/"/>
    <id>http://fresky.github.io/2016/03/06/use-benchmarkdotnet-for-csharp-benchmark/</id>
    <published>2016-03-06T02:22:53.000Z</published>
    <updated>2019-12-20T08:29:07.309Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/PerfDotNet/BenchmarkDotNet" target="_blank" rel="noopener">BenchmarkDotNet</a>是一个用MIT协议开源的C#程序性能测试的一个库，非常简单易用。</p><h1 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h1><ol><li>安装NuGet包，BenchmarkDotNet  </li><li>在需要做性能测试的方法前加上属性<code>[Benchmark]</code>。  </li><li>在Main函数调用性能测试<code>var summary = BenchmarkRunner.Run&lt;Md5VsSha256&gt;();</code>。  </li></ol><h1 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h1><ol><li>BenchmarkDotNet为每一个要做性能测试的方法生成了一个单独的项目，放在程序的输出目录下，用Release模式编译，并且运行多次来统计性能测试结果。    </li><li>每次运行都包含以下几个步骤。  <ul><li>Pilot： 决定运行几次。  </li><li>IdleWarmup， IdleTarget：评估BenchmarkDotNet这个工具带来的额外开销。  </li><li>MainWarmup：测试热身。  </li><li>MainTarget：测试。  </li><li>Result：测试结果减去BenchmarkDotNet带来的额外开销。  </li></ul></li><li>生成测试报告。有各种格式，包括html格式，markdown格式（缺省风格，github风格，stackoverflow风格），txt格式，csv格式。比如如下就是我运行示例代码后得到的github风格的输出。</li></ol><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">BenchmarkDotNet</span>=v0.<span class="number">9.2</span>.<span class="number">0</span></span><br><span class="line"><span class="attr">OS</span>=Microsoft Windows NT <span class="number">6.1</span>.<span class="number">7601</span> Service Pack <span class="number">1</span></span><br><span class="line"><span class="attr">Processor</span>=Intel(R) Core(TM) i7-<span class="number">4600</span>U CPU @ <span class="number">2.10</span>GHz, ProcessorCount=<span class="number">4</span></span><br><span class="line"><span class="attr">Frequency</span>=<span class="number">2630693</span> ticks, Resolution=<span class="number">380.1280</span> ns</span><br><span class="line"><span class="attr">HostCLR</span>=MS.NET <span class="number">4.0</span>.<span class="number">30319.42000</span>, Arch=<span class="number">32</span>-bit RELEASE</span><br><span class="line"></span><br><span class="line"><span class="attr">Type</span>=Md5VsSha256  Mode=Throughput</span><br></pre></td></tr></table></figure><table><thead><tr><th>Method</th><th>Median</th><th>StdDev</th></tr></thead><tbody><tr><td>    Md5</td><td>21.8816 us</td><td>0.6091 us</td><td></td></tr><tr><td> Sha256</td><td>123.4171 us</td><td>6.7846 us</td><td></td></tr></tbody></table><p>可以在程序的输出目录下的log文件中看到上面所说的每个过程的详细信息。</p><h1 id="其他配置"><a href="#其他配置" class="headerlink" title="其他配置"></a>其他配置</h1><p>BenchmarkDotNet还有很多可以配置的地方，可以参见主页的介绍。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://github.com/PerfDotNet/BenchmarkDotNet&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;BenchmarkDotNet&lt;/a&gt;是一个用MIT协议开源的C#程序性能测试的一个库，非常简单易用
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>在Azure上搭架Shadowsocks代理服务器</title>
    <link href="http://fresky.github.io/2015/12/19/setup-shadowsocks-on-azure/"/>
    <id>http://fresky.github.io/2015/12/19/setup-shadowsocks-on-azure/</id>
    <published>2015-12-19T10:00:59.000Z</published>
    <updated>2019-12-20T08:29:07.309Z</updated>
    
    <content type="html"><![CDATA[<p>简单总结一下如何在云服务的虚拟机中搭建Shadowsocks代理服务器。</p><p>1.注册一个云服务器提供商，比如美国Azure。<br>2.创建一个Ubuntu的虚拟机。<br>3.用SSH客户端（比如<a href="http://www.putty.org/" target="_blank" rel="noopener">putty</a>）连接虚拟机。<br>3.安装<a href="https://shadowsocks.org/en/index.html" target="_blank" rel="noopener">Shadowsocks</a>。<br>    1) 安装<a href="https://pip.pypa.io" target="_blank" rel="noopener">PIP</a>。 <code>sudo apt-get install python-pip</code><br>    2) 用PIP安装Shadowsocks。<code>sudo pip install shadowsocks</code><br>4.创建Shadowsocks的配置文件。<code>sudo vi vpn.json</code>，如下为示例内容。<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"server"</span>:<span class="string">"0.0.0.0"</span>,</span><br><span class="line">    <span class="attr">"server_port"</span>:<span class="number">8388</span>,</span><br><span class="line">    <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"local_port"</span>:<span class="number">1080</span>,</span><br><span class="line">    <span class="attr">"password"</span>:<span class="string">"mypassword"</span>,</span><br><span class="line">    <span class="attr">"timeout"</span>:<span class="number">300</span>,</span><br><span class="line">    <span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span>,</span><br><span class="line">    <span class="attr">"fast_open"</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>5.启动Shadowsocks服务。<code>ssserver -c /home/vpn/vpn.json -d start</code>。如果要停止服务<code>ssserver -c /home/vpn/vpn.json -d stop</code><br>6.记得在Azure的虚拟机配置中打开上面配置文件中指明的那个服务器端口8388。<br>7.从Shadowsocks的<a href="https://shadowsocks.org/en/download/clients.html" target="_blank" rel="noopener">客户端</a>下载相应的客户端，所有平台都支持。比如Windows的在<a href="https://github.com/shadowsocks/shadowsocks-windows" target="_blank" rel="noopener">这里</a>，Android的在<a href="https://github.com/shadowsocks/shadowsocks-android" target="_blank" rel="noopener">这里</a>。这样就可以科学上网了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;简单总结一下如何在云服务的虚拟机中搭建Shadowsocks代理服务器。&lt;/p&gt;
&lt;p&gt;1.注册一个云服务器提供商，比如美国Azure。&lt;br&gt;2.创建一个Ubuntu的虚拟机。&lt;br&gt;3.用SSH客户端（比如&lt;a href=&quot;http://www.putty.org/&quot; 
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>用Rufus来制作Windows10的U盘安装盘</title>
    <link href="http://fresky.github.io/2015/11/08/use-rufus-to-create-bootable-usb-installer-for-windows-10/"/>
    <id>http://fresky.github.io/2015/11/08/use-rufus-to-create-bootable-usb-installer-for-windows-10/</id>
    <published>2015-11-08T04:11:52.000Z</published>
    <updated>2019-12-20T08:29:07.309Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://rufus.akeo.ie/" target="_blank" rel="noopener">Rufus</a>是一个免费的通过ISO安装文件生成可启动安装U盘的软件，亲测Windows 10可用。</p><ul><li>非常小巧，绿色版只有800k。  </li><li>官网说比其他类似功能的软件官网说比其他类似功能的软件<a href="http://unetbootin.sourceforge.net/" target="_blank" rel="noopener">UNetbootin</a>, <a href="http://www.pendrivelinux.com/universal-usb-installer-easy-as-1-2-3" target="_blank" rel="noopener">Universal USB Installer</a>或者<a href="http://wudt.codeplex.com/" target="_blank" rel="noopener">Windows 7 USB download tool</a>快两倍。  </li><li>支持如下操作系统。</li></ul><blockquote><p>Arch Linux,  Archbang,  BartPE/pebuilder,  CentOS,  Damn Small Linux,  Debian,  Fedora,  FreeDOS, FreeNAS,  Gentoo,  GParted,  gNewSense,  Hiren’s Boot CD,  LiveXP,  Knoppix,  KolibriOS,  Kubuntu, Linux Mint,  NT Password Registry Editor,  Parted Magic,  Partition Wizard,  Raspbian, ReactOS,  Red Hat,  rEFInd,  Slackware,  Super Grub2 Disk,  Tails,  Trinity Rescue Kit,  Ubuntu, Ultimate Boot CD,  Windows XP (SP2+),  Windows Server 2003 R2,  Windows Vista,  Windows 7, Windows 8,  Windows 8.1,  Windows 10,  …</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://rufus.akeo.ie/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Rufus&lt;/a&gt;是一个免费的通过ISO安装文件生成可启动安装U盘的软件，亲测Windows 10可用。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;非常小巧，绿色版
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>搭架私有Git服务器Gogs</title>
    <link href="http://fresky.github.io/2015/11/07/setup-git-service-gogs-in-ubuntu/"/>
    <id>http://fresky.github.io/2015/11/07/setup-git-service-gogs-in-ubuntu/</id>
    <published>2015-11-06T16:50:35.000Z</published>
    <updated>2019-12-20T08:29:07.308Z</updated>
    
    <content type="html"><![CDATA[<p>我之前的博客<a href="/2013/06/08/gitlab-opensource-github-clone/">GitLab: 开源免费的git管理工具</a>和<a href="/2013/07/16/how-to-install-gitlab-in-windows-github-open-source-alternative/">在Windows上安装私有GitHub的开源替代-GitLab</a>介绍过如何自己搭建一个Git服务器来管理自己的私有仓库。今天再介绍一个Git服务器<a href="https://github.com/gogits/gogs" target="_blank" rel="noopener">Gogs (Go Git Service)</a>。</p><p>Gogs是一个用Go语言写的Git服务器，开源免费，MIT开源协议。因为Go是跨平台的，所有Gogs也支持所有平台。搭建Gogs非常简单，下面以Ubuntu为例介绍一下怎么安装Gogs。</p><ol><li><a href="https://github.com/gogits/gogs/wiki/Download" target="_blank" rel="noopener">下载</a>自己平台对应的二进制文件，是一个zip压缩包。在Ubuntu的终端运行<code>wget http://7d9nal.com2.z0.glb.qiniucdn.com/gogs_v0.6.15_linux_amd64.zip</code>。  </li><li>解压，运行<code>unzip gogs_v0.6.15_linux_amd64.zip</code>。如果没有<code>unzip</code>命令，需要安装<code>sudo apt-get install unzip</code>。  </li><li>到解压缩的目录下运行<code>./gogs web</code>，如果是远程ssh的，就运行<code>screen ./gogs web</code>。  </li><li>打开浏览器输入<code>http://localhost:3000</code>就打开了安装界面，填一些配置选项就好了，支持多种数据库，如果只是几个人用，直接用sqlite最省事。  </li><li>安装完后打开浏览器输入<code>http://localhost:3000</code>，就可以注册登录了。可以push上去一个repo试试，很简单。  </li><li>如果更新Gogs，直接下载zip压缩包，删除老目录里的templates文件夹，别的直接解压覆盖就行了。  </li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;我之前的博客&lt;a href=&quot;/2013/06/08/gitlab-opensource-github-clone/&quot;&gt;GitLab: 开源免费的git管理工具&lt;/a&gt;和&lt;a href=&quot;/2013/07/16/how-to-install-gitlab-in-window
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Github" scheme="http://fresky.github.io/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>商标中的颜色心理学</title>
    <link href="http://fresky.github.io/2015/10/14/color-in-logo/"/>
    <id>http://fresky.github.io/2015/10/14/color-in-logo/</id>
    <published>2015-10-14T00:47:50.000Z</published>
    <updated>2019-12-20T08:29:07.308Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.dailyinfographic.com/color-psychology-in-logo-design" target="_blank" rel="noopener">Dailyinfographic - Color Psychology In Logo Design</a>列出了如下的商标颜色心理学。</p><ol><li>黄色（壳牌）：有趣、温暖、乐观、有活力、警告。多用于获取注意。  </li><li>紫色（雅虎）：忠诚、财富、成功、智慧。常见于教育和奢侈品公司。  </li><li>绿色（嘉士伯）：健康、平静、钱、自然。常见于环境友好的公司。  </li><li>蓝色（三星）：信任、力量、想象、高贵、忠诚。广泛用于政府和世界500强。  </li><li>桔色（Orange City）：兴奋、热情、温暖、警告。常用于制造乐趣、欲望。  </li><li>灰色（IZZE）：纯洁、天真、空闲、宽广。多用于商标内部，和其他颜色都很搭配。  </li><li>黑色（阿迪）：邪恶、死亡、悲伤、权利。多用于大胆、简单、精于世故的场景。  </li><li>棕色（UPS快递）：自然、木质、功效、简单、温暖。多用于建筑、法律行业。  </li><li>粉色（hmv）：女性、浪漫、亲切、亲密。  </li><li>红色（Pinterest）：食物、刺激、煽动、挑逗。用于获取注意。  </li><li>白色（WWF）：平静、纯洁。</li></ol><img src="/images/colorlogo.jpg">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.dailyinfographic.com/color-psychology-in-logo-design&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Dailyinfographic - Color Psychol
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>关于Windows文件名和路径名的那些事</title>
    <link href="http://fresky.github.io/2015/10/13/story-about-windows-file-name/"/>
    <id>http://fresky.github.io/2015/10/13/story-about-windows-file-name/</id>
    <published>2015-10-13T14:42:02.000Z</published>
    <updated>2019-12-20T08:29:07.308Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx" target="_blank" rel="noopener">Naming Files, Paths, and Namespaces</a>介绍了Windows的文件、路径。要点如下：</p><h1 id="文件名"><a href="#文件名" class="headerlink" title="文件名"></a>文件名</h1><h2 id="文件命名规范"><a href="#文件命名规范" class="headerlink" title="文件命名规范"></a>文件命名规范</h2><ol><li>用点<code>.</code>来分隔基本文件名和扩展名。  </li><li>用反斜线<code>\</code>来分隔路径不同的组件。  </li><li>盘符名中需要用反斜线<code>\</code>。比如<code>C:\path\file</code>中的<code>C:\</code>，UNC（Universal Naming Convention)下<code>\\server\share\path\file</code>中的<code>\\server\shar</code>。  </li><li>不要假设区分大小写。有一些文件系统，比如POSIX兼容的文件系统，可能支持区分大小写。但是NTFS（支持POSIX）默认是不区分大小写的。  </li><li>盘符不区分大小写。  </li><li>用点<code>.</code>来表示当前目录。  </li><li>用两个连续的点<code>..</code>来表示上层目录。  </li><li>文件或者文件夹名字的末尾不能使点<code>.</code>或者空格。  </li><li>文件名不能是系统预留的这些名字：<code>CON</code>, <code>PRN</code>, <code>AUX</code>, <code>NUL</code>, <code>COM1</code>, <code>COM2</code>, <code>COM3</code>, <code>COM4</code>, <code>COM5</code>, <code>COM6</code>, <code>COM7</code>, <code>COM8</code>, <code>COM9</code>, <code>LPT1</code>, <code>LPT2</code>, <code>LPT3</code>, <code>LPT4</code>, <code>LPT5</code>, <code>LPT6</code>, <code>LPT7</code>, <code>LPT8</code>和<code>LPT9</code>。也要避免直接在这些名字后面加一个扩展名。  </li><li>除了以下的特殊字符外，可以在文件名中使用当前code page的任何字符，包括unicode字符。  </li></ol><ul><li>预留字符。包括<code>&lt;</code>小于号， <code>&gt;</code>大于号， <code>:</code>冒号， <code>&quot;</code>双引号， <code>/</code>正斜线， <code>\</code>反斜线， <code>|</code>竖线， <code>?</code>问号， <code>*</code>星号。  </li><li>ASCII中的0到31控制字符，详见<a href="http://www.ascii-code.com/" target="_blank" rel="noopener">ASCII Code</a>。  </li></ul><h2 id="短名字和长名字"><a href="#短名字和长名字" class="headerlink" title="短名字和长名字"></a>短名字和长名字</h2><p>首先说什么是<strong>8.3文件名</strong>。MS-DOS的FAT文件系统支持文件名最多8个字符加扩展名最多3个字符，加上中间的那个点，一共最多支持12个字符。</p><p>超过8.3文件名限制的文件名就叫做长名字，当创建一个长文件名的文件时，系统会生成一个相应的8.3文件名，叫做短文件名。</p><p>比如我们经常能看见在一些程序中文件名超过8个字符的，都会在最后包含一个<code>~</code>，这就是长文件名对应的短文件名。</p><p>Windows的API<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa364989%28v=vs.85%29.aspx" target="_blank" rel="noopener">GetShortPathName</a>可以拿到一个长文件名对应的短文件名。<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa364980%28v=vs.85%29.aspx" target="_blank" rel="noopener">GetLongPathName</a>可以拿到一个短文件名对应的长文件名。下面是一个示例的小程序。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">long</span> length = <span class="number">0</span>;</span><br><span class="line">TCHAR* buffer = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">LPCWSTR path = TEXT(<span class="string">"d:\\1111111111.txt"</span>);</span><br><span class="line">length = GetShortPathName(path, <span class="literal">NULL</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (length == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">_tprintf(FormatErrorMessage(GetLastError()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">buffer = <span class="keyword">new</span> TCHAR[length];</span><br><span class="line">length = GetShortPathName(path, buffer, length);</span><br><span class="line"></span><br><span class="line">_tprintf(TEXT(<span class="string">"long name = %s, short name = %s\r\n"</span>), path, buffer);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> bufferSize = <span class="number">100</span>;</span><br><span class="line">TCHAR* longBuffer = <span class="keyword">new</span> TCHAR[bufferSize];</span><br><span class="line">length = GetLongPathName(buffer, longBuffer, bufferSize);</span><br><span class="line"></span><br><span class="line">_tprintf(TEXT(<span class="string">"long name = %s, short name = %s\r\n"</span>), longBuffer, buffer);</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span>[] buffer;</span><br><span class="line"><span class="keyword">delete</span>[] longBuffer;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>它的输出如下，可以看到我有个文件的名字长度为10，超出了8.3文件名的限制，那么它对应的短文件名中就会包含一个<code>~</code>。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">long name = d:\1111111111.txt, short name = d:\111111~1.TXT</span><br><span class="line">long name = d:\1111111111.txt, short name = d:\111111~1.TXT</span><br></pre></td></tr></table></figure><p>其中的<code>FormatErrorMessage</code>是拿到<code>GetLastError</code>的<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms681381%28v=vs.85%29.aspx" target="_blank" rel="noopener">错误码</a>的对应消息。加入我的D盘下没有对应的1111111111.txt这个文件，那么会输出错误信息<code>The system cannot find the file specified.</code>。代码如下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">CString <span class="title">FormatErrorMessage</span><span class="params">(DWORD ErrorCode)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TCHAR   *pMsgBuf = <span class="literal">NULL</span>;</span><br><span class="line">DWORD   nMsgLen = FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER |</span><br><span class="line">FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,</span><br><span class="line"><span class="literal">NULL</span>, ErrorCode, MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),</span><br><span class="line">(LPTSTR)(&amp;pMsgBuf), <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line"><span class="keyword">if</span> (!nMsgLen)</span><br><span class="line"><span class="keyword">return</span> _T(<span class="string">"FormatMessage fail"</span>);</span><br><span class="line"><span class="function">CString <span class="title">sMsg</span><span class="params">(pMsgBuf, nMsgLen)</span></span>;</span><br><span class="line">LocalFree(pMsgBuf);</span><br><span class="line"><span class="keyword">return</span> sMsg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h1><p>文件的路径由多个组件组成，用反斜线<code>\</code>分隔。路径的前缀指明了路径的命名空间。如果有个组件是文件名，那么它一定是最后一个组件。</p><h2 id="相对路径和绝对路径"><a href="#相对路径和绝对路径" class="headerlink" title="相对路径和绝对路径"></a>相对路径和绝对路径</h2><p>以下面这些开头的路径是绝对路径：</p><ol><li>UNC名字，两个反斜杠开头<code>\\</code>。  </li><li>盘符冒号加反斜杠开头，例如<code>C:\</code>。  </li><li>一个反斜杠开头，例如<code>\file.txt</code>。</li></ol><p>注意：如果一个路径是盘符加冒号开头，但是没有反斜杠，那么<strong>它是相对路径</strong>。所以<code>C:1.txt</code>表示的意思是C盘下的当前目录下面的1.txt文件。因为Windows每个盘符都记录了一个当前路径，那么可以用这种方式来快速在不同盘符的当前路径下切换。同样的<code>C:..\1.txt</code>表示C盘的当前目录的上层目录下的1.txt文件。</p><h2 id="最长路径名限制"><a href="#最长路径名限制" class="headerlink" title="最长路径名限制"></a>最长路径名限制</h2><p>Windows下的最长路径长度是<strong>260</strong>字符。但是Windows下的很多API支持扩展长度的路径名，支持最长为<strong>32767</strong>的路径。这些路径要以<code>\\?\</code>作为前缀，如果是UNC格式，那么就以<code>\\?\UNC\</code>为前缀。</p><p>这个长路径由多个组件（文件夹或者文件）组成，每个组件的长度不能超过<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa364993(v=vs.85" target="_blank" rel="noopener">GetVolumeInformation</a>.aspx)返回的<code>lpMaximumComponentLength</code>。（这个值通常是255）</p><p>如下是一个支持长路径的例子，首先在D盘创建了一个名字长为244的文件夹，然后在这个文件夹下面又创建了一个名字长为244的文件，如果不加<code>\\?\</code>作为前缀，那么文件会创建失败，错误码为3，ERROR_PATH_NOT_FOUND，The system cannot find the path specified。如果加上<code>\\?\</code>作为前缀，就能创建成功了。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">LPCWSTR folder = <span class="string">L"d:\\111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"</span>;</span><br><span class="line"><span class="keyword">bool</span> ret = CreateDirectory(folder, <span class="literal">NULL</span>);</span><br><span class="line"><span class="keyword">if</span> (!ret)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Could not create folder %ws, error %d\n"</span>, folder, GetLastError());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LPCWSTR name = <span class="string">L"\\\\?\\d:\\111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111\\111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.txt"</span>;</span><br><span class="line"><span class="comment">//LPCWSTR name = L"d:\\111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111\\111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.txt";</span></span><br><span class="line"></span><br><span class="line">HANDLE handle = (HANDLE)CreateFile(name, GENERIC_WRITE, FILE_SHARE_WRITE, <span class="literal">NULL</span>, CREATE_ALWAYS, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line"><span class="keyword">if</span> (handle == INVALID_HANDLE_VALUE)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Could not create file %ws, error %d\n"</span>, name, GetLastError());</span><br><span class="line">CloseHandle(handle);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      本文介绍了Windows下关于文件名和路径名的一些规范，介绍了什么是8.3文件名，什么是长文件名和短文件名。并且介绍了如何绕过Windows关于路径260长度的限制。
    
    </summary>
    
    
      <category term="C++" scheme="http://fresky.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>如何创建一个有System用户权限的命令行</title>
    <link href="http://fresky.github.io/2015/09/24/create-a-system-user-cmd/"/>
    <id>http://fresky.github.io/2015/09/24/create-a-system-user-cmd/</id>
    <published>2015-09-24T02:26:49.000Z</published>
    <updated>2019-12-20T08:29:07.307Z</updated>
    
    <content type="html"><![CDATA[<p>电脑上有个文件夹删不掉，右键属性，查看安全页面，显示用户组属于SYSTEM，就算是Administrator权限也不能删除，很是郁闷。</p><p>找到了一篇文章<a href="http://blogs.msdn.com/b/adioltean/archive/2004/11/27/271063.aspx" target="_blank" rel="noopener">Running CMD.EXE as Local System</a>，可以打开一个SYSTEM用户权限的命令行，那就可以用<code>rmdir</code>命令删除了。方法如下：</p><p>1.首先创建一个服务，这个服务运行的程序就是命令行<code>cmd</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sc create testsvc binpath= &quot;cmd /K start&quot; type= own type= interact</span><br></pre></td></tr></table></figure></p><p>2.然后运行这个服务。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sc start testsvc</span><br></pre></td></tr></table></figure><p>会报一个如下的错误，但是命令行窗口还是可以打开。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[SC] StartService FAILED 1053:</span><br><span class="line"></span><br><span class="line">The service did not respond to the start or control request in a timely fashion.</span><br></pre></td></tr></table></figure><p>3.在这个新打开的命令行窗口里，就拥有了SYSTEM用户的权限。如果用完想删除这个服务，可以运行如下命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sc delete testsvc</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;电脑上有个文件夹删不掉，右键属性，查看安全页面，显示用户组属于SYSTEM，就算是Administrator权限也不能删除，很是郁闷。&lt;/p&gt;
&lt;p&gt;找到了一篇文章&lt;a href=&quot;http://blogs.msdn.com/b/adioltean/archive/2004
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>20个导致我们做出错误决定的偏见</title>
    <link href="http://fresky.github.io/2015/09/23/20-common-bias/"/>
    <id>http://fresky.github.io/2015/09/23/20-common-bias/</id>
    <published>2015-09-23T10:33:54.000Z</published>
    <updated>2019-12-20T08:29:07.307Z</updated>
    
    <content type="html"><![CDATA[<p>今天的<a href="http://www.dailyinfographic.com/20-common-ways-we-make-bad-decisions" target="_blank" rel="noopener">Dailyinfographic - 20 Common Ways We Make Bad Decisions</a>列了20个导致我们做出错误决定的偏见，挺有意思的。</p><ol><li>锚定效应。过分依赖第一印象。  </li><li>可见性启发。高估可见的信息。  </li><li>流行效应。倾向于选择大众接受的。  </li><li>盲点偏见。忽略自己的偏见。  </li><li>选择支持偏见。一旦选择了，就会支持自己的选择。  </li><li>分类幻觉。倾向于在随机事件中发现模式。  </li><li>确认偏见。倾向于确认我们的先入为主的观念。  </li><li>保守偏见。对新事物接受缓慢。  </li><li>信息偏见。总是尝试获取更多的信息，但是其实未必有用。  </li><li>鸵鸟偏见。忽略危险或者负面的信息。  </li><li>结果偏见。单纯依赖结果、产出做判断。  </li><li>过分自信。  </li><li>安慰剂效应。觉得有效就真的有效的。  </li><li>拥护创新偏见。高估新的创新会带来的价值。  </li><li>近因效应。倾向认为最近的信息更有用。  </li><li>特例效应。倾向于关注最突出的部分。  </li><li>选择性感知。期望影响我们的感知。  </li><li>固定模式。在不了解真实情况前根据固定模式做判断。  </li><li>幸存者偏见。只看见成功的案例，忽略更多失败的案例。  </li><li>零风险偏见。消除一切风险有可能不是一件好事。  </li></ol><img src="/images/bias.jpg">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天的&lt;a href=&quot;http://www.dailyinfographic.com/20-common-ways-we-make-bad-decisions&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Dailyinfographic - 20 Co
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>如何检查机器是否因为装了Windows更新而需要重新启动</title>
    <link href="http://fresky.github.io/2015/09/22/how-to-check-if-windows-update-waiting-for-system-to-reboot/"/>
    <id>http://fresky.github.io/2015/09/22/how-to-check-if-windows-update-waiting-for-system-to-reboot/</id>
    <published>2015-09-22T03:06:07.000Z</published>
    <updated>2019-12-20T08:29:07.307Z</updated>
    
    <content type="html"><![CDATA[<p>今天的<a href="http://blogs.msdn.com/b/oldnewthing/archive/2015/09/21/10642727.aspx" target="_blank" rel="noopener">The Old New Thing: How can I tell if Windows Update is waiting for the system to reboot?</a>介绍了如何检查机器是否因为装了Windows更新而需要重新启动。下面是稍作修改的CPP和C#的代码。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;atlstr.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;wuapi.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">    CoInitialize(<span class="literal">NULL</span>);</span><br><span class="line">    &#123;</span><br><span class="line">        CComPtr&lt;ISystemInformation&gt; info;</span><br><span class="line">        info.CoCreateInstance(CLSID_SystemInformation);</span><br><span class="line"></span><br><span class="line">        VARIANT_BOOL rebootRequired;</span><br><span class="line">        info-&gt;get_RebootRequired(&amp;rebootRequired);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; rebootRequired;</span><br><span class="line">    &#125;</span><br><span class="line">    CoUninitialize();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Type t = Type.GetTypeFromProgID(<span class="string">"Microsoft.Update.SystemInfo"</span>);</span><br><span class="line"><span class="keyword">object</span> s = Activator.CreateInstance(t);</span><br><span class="line"><span class="keyword">var</span> needReboot = t.InvokeMember(<span class="string">"RebootRequired"</span>, BindingFlags.GetProperty, <span class="literal">null</span>, s, <span class="literal">null</span>);</span><br><span class="line">Console.WriteLine(needReboot);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天的&lt;a href=&quot;http://blogs.msdn.com/b/oldnewthing/archive/2015/09/21/10642727.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;The Old New Thing: How c
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>如何在一个进程开始运行时得到通知</title>
    <link href="http://fresky.github.io/2015/09/17/how-to-monitor-a-process-is-launched/"/>
    <id>http://fresky.github.io/2015/09/17/how-to-monitor-a-process-is-launched/</id>
    <published>2015-09-17T11:49:24.000Z</published>
    <updated>2019-12-20T08:29:07.307Z</updated>
    
    <content type="html"><![CDATA[<p>如果我们想在某个进程被执行时做一些事情，该怎么做呢？最简单粗暴的办法是来个死循环，不停地检查这个进程存不存在。代码如下所示：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">monitorProcessRuning</span>(<span class="params"><span class="keyword">string</span> name</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (Process.GetProcessesByName(name).Length &gt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"Process [&#123;0&#125;] is running"</span>, name);</span><br><span class="line">&#125;</span><br><span class="line">Thread.Sleep(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">monitorProcessRuning(<span class="string">"notepad"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个看起来技术含量有点低，那就试试别的办法。我们可以求助于<a href="https://msdn.microsoft.com/en-us/library/aa394649%28v=vs.85%29.aspx" target="_blank" rel="noopener">__InstanceCreationEvent</a>。当有一个新的实例生成时会触发这个事件。我们可以通过<a href="https://msdn.microsoft.com/en-us/library/aa394582%28v=vs.85%29.aspx" target="_blank" rel="noopener">WMI - Windows Management Instrumentation</a>来查询。如下是MSDN上给出的一个示例，当记事本程序运行时，会得到通知，使用了WMI中的<a href="https://msdn.microsoft.com/en-us/library/aa394372%28v=vs.85%29.aspx" target="_blank" rel="noopener">Win32_Process</a>。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> __InstanceCreationEvent <span class="keyword">WITHIN</span> PollingInterval <span class="keyword">WHERE</span> TargetInstance ISA <span class="string">'Win32_Process'</span> <span class="keyword">and</span> TargetInstance.Name = <span class="string">'notepad.exe'</span></span><br></pre></td></tr></table></figure><p>下面来写我们的C#程序吧，需要用到<a href="https://msdn.microsoft.com/en-us/library/system.management.managementeventwatcher.aspx" target="_blank" rel="noopener">ManagementEventWatcher</a>。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">monitorProcessRuning</span>(<span class="params"><span class="keyword">string</span> name</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">WqlEventQuery processQuery = <span class="keyword">new</span> WqlEventQuery(<span class="string">"__InstanceCreationEvent"</span>, <span class="keyword">new</span> TimeSpan(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>),</span><br><span class="line"><span class="string">"TargetInstance isa 'Win32_Process' AND TargetInstance.Name = '"</span> + name + <span class="string">"'"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> watcher = <span class="keyword">new</span> ManagementEventWatcher(processQuery))</span><br><span class="line">&#123;</span><br><span class="line">watcher.EventArrived += (sender, eventArgs) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"Process [&#123;0&#125;] is running"</span>, name);</span><br><span class="line">&#125;;</span><br><span class="line">watcher.Start();</span><br><span class="line"></span><br><span class="line">Console.ReadLine();</span><br><span class="line">watcher.Stop();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">monitorProcessRuning(<span class="string">"notepad.exe"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们看看能不能用这个方法来解决之前的博文<a href="/2015/09/16/how-to-change-time-back-after-user-change-time-in-windows/">Windows下如何检测用户修改了系统时间并且把系统时间改回来</a>，在那篇文章中是用户修改过系统时间后会得到通知。我们可以看看那个修改时间的进程是什么，然后就可以在那个进程启动时得到通知了。</p><p>首先通过Process Explorer看出启动的进程是<code>rundll32.exe</code>，命令行为<code>&quot;C:\WINDOWS\system32\rundll32.exe&quot; Shell32.dll,Control_RunDLL &quot;C:\WINDOWS\system32\timedate.cpl&quot;,</code>。我们可以用下面的代码来监测这个进程启动，我们甚至可以通过监测到它启动就杀掉这个进程来阻止用户修改系统时间。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">monitorUserChangeTime</span>(<span class="params"><span class="keyword">bool</span> kill</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">var</span> target = <span class="string">"rundll32.exe"</span>;</span><br><span class="line"><span class="keyword">string</span> arg = <span class="string">"timedate.cpl"</span>;</span><br><span class="line">WqlEventQuery processQuery = <span class="keyword">new</span> WqlEventQuery(<span class="string">"__InstanceCreationEvent"</span>, <span class="keyword">new</span> TimeSpan(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>),</span><br><span class="line"><span class="string">"TargetInstance isa 'Win32_Process' AND TargetInstance.Name = '"</span> + target + <span class="string">"'"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> watcher = <span class="keyword">new</span> ManagementEventWatcher(processQuery))</span><br><span class="line">&#123;</span><br><span class="line">watcher.EventArrived += (sender, eventArgs) =&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">var</span> plist = Process.GetProcessesByName(Path.GetFileNameWithoutExtension(target));</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> p <span class="keyword">in</span> plist)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> searcher = <span class="keyword">new</span> ManagementObjectSearcher(<span class="string">"SELECT CommandLine FROM Win32_Process WHERE ProcessId = "</span> + p.Id))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">var</span> commandLine = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> @<span class="keyword">object</span> <span class="keyword">in</span> searcher.Get())</span><br><span class="line">&#123;</span><br><span class="line">commandLine.Append(@<span class="keyword">object</span>[<span class="string">"CommandLine"</span>]);</span><br><span class="line">commandLine.Append(<span class="string">" "</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (commandLine.ToString().Contains(arg))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (kill)</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"Killing the process!"</span>);</span><br><span class="line">p.Kill();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"User is changing the time!"</span>);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">watcher.Start();</span><br><span class="line"></span><br><span class="line">Console.ReadLine();</span><br><span class="line">watcher.Stop();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意上面的代码中获取进程命令行又是通过WMI实现的，使用了<a href="https://msdn.microsoft.com/en-us/library/system.management.managementobjectsearcher(v=vs.110" target="_blank" rel="noopener">ManagementObjectSearcher</a>.aspx)从<a href="https://msdn.microsoft.com/en-us/library/aa394372%28v=vs.85%29.aspx" target="_blank" rel="noopener">Win32_Process</a>中获取命令行。</p><p>不能简单的通过<a href="https://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.arguments%28v=vs.110%29.aspx" target="_blank" rel="noopener">ProcessStartInfo.Arguments</a>来获取命令行。<a href="https://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo%28v=vs.110%29.aspx" target="_blank" rel="noopener">ProcessStartInfo</a>只有在用<code>Process.Start</code>时才有用，在用<code>GetProcesses</code>拿到的进程中，<code>StartInfo</code>不包含进程的文件名和命令行参数。</p><blockquote><p>If you did not use the Start method to start a process, the StartInfo property does not reflect the parameters used to start the process. For example, if you use GetProcesses to get an array of processes running on the computer, the StartInfo property of each Process does not contain the original file name or arguments used to start the process.</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;如果我们想在某个进程被执行时做一些事情，该怎么做呢？最简单粗暴的办法是来个死循环，不停地检查这个进程存不存在。代码如下所示：&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;s
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>Windows下如何检测用户修改了系统时间并且把系统时间改回来</title>
    <link href="http://fresky.github.io/2015/09/16/how-to-change-time-back-after-user-change-time-in-windows/"/>
    <id>http://fresky.github.io/2015/09/16/how-to-change-time-back-after-user-change-time-in-windows/</id>
    <published>2015-09-16T12:04:36.000Z</published>
    <updated>2019-12-20T08:29:07.306Z</updated>
    
    <content type="html"><![CDATA[<p>有些时候我们不希望用户在使用我们的软件时修改系统时间，那么怎么检测用户是否修改系统时间呢？Windows会在系统时间修改时发送<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms725498%28v=vs.85%29.aspx" target="_blank" rel="noopener">WM_TIMECHANGE</a>消息，所以可以在C++的WindowProc函数中处理这个消息。如果是C#，可以直接用<a href="https://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.timechanged.aspx" target="_blank" rel="noopener">SystemEvents.TimeChanged</a>事件。这个事件有个<a href="https://connect.microsoft.com/VisualStudio/feedback/details/776003/systemevent-timechanged-is-fired-twice" target="_blank" rel="noopener">bug</a>，就是每次都会被触发两次。</p><p>如果还想做的更智能一点，想把时间再改回去，就需要知道用户修改时间前的时间是什么。一个可行的办法是在程序开始运行时记一个开始时间，然后用<a href="https://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch%28v=vs.110%29.aspx" target="_blank" rel="noopener">Stopwatch</a>这个类来掐表算算过去了多长时间。给Windows设置时间需要用到<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms724942%28v=vs.85%29.aspx" target="_blank" rel="noopener">SetSystemTime</a>这个API。</p><p>下面是示例代码：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Stopwatch s_Stopwatch;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> DateTime s_Start;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> s_Count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">extern</span> <span class="keyword">static</span> <span class="keyword">uint</span> <span class="title">SetSystemTime</span>(<span class="params"><span class="keyword">ref</span> SYSTEMTIME lpSystemTime</span>)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">struct</span> SYSTEMTIME</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">ushort</span> wYear;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">ushort</span> wMonth;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">ushort</span> wDayOfWeek;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">ushort</span> wDay;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">ushort</span> wHour;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">ushort</span> wMinute;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">ushort</span> wSecond;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">ushort</span> wMilliseconds;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">SystemEvents.TimeChanged += (sender, eventArgs) =&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (s_Count == <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">s_Count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> realTime = s_Start + s_Stopwatch.Elapsed;</span><br><span class="line"><span class="keyword">var</span> newTime = DateTime.Now;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Console.WriteLine(newTime);</span><br><span class="line">Console.WriteLine(<span class="string">"Should be:"</span>);</span><br><span class="line">Console.WriteLine(realTime);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> utcTime = realTime.ToUniversalTime();</span><br><span class="line"></span><br><span class="line">SYSTEMTIME systemtime = <span class="keyword">new</span> SYSTEMTIME();</span><br><span class="line"></span><br><span class="line">systemtime.wYear = (<span class="keyword">ushort</span>)utcTime.Year;</span><br><span class="line">systemtime.wMonth = (<span class="keyword">ushort</span>)utcTime.Month;</span><br><span class="line">systemtime.wDay = (<span class="keyword">ushort</span>)utcTime.Day;</span><br><span class="line">systemtime.wHour = (<span class="keyword">ushort</span>)utcTime.Hour;</span><br><span class="line">systemtime.wMinute = (<span class="keyword">ushort</span>)utcTime.Minute;</span><br><span class="line">systemtime.wSecond = (<span class="keyword">ushort</span>)utcTime.Second;</span><br><span class="line">systemtime.wMilliseconds = (<span class="keyword">ushort</span>)utcTime.Millisecond;</span><br><span class="line"></span><br><span class="line">SetSystemTime(<span class="keyword">ref</span> systemtime);</span><br><span class="line">Console.WriteLine(<span class="string">"Change back!"</span>);</span><br><span class="line">Console.WriteLine();</span><br><span class="line"></span><br><span class="line">s_Count++;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s_Stopwatch = <span class="keyword">new</span> Stopwatch();</span><br><span class="line">s_Start = DateTime.Now;</span><br><span class="line">s_Stopwatch.Start();    </span><br><span class="line"></span><br><span class="line">Console.ReadLine();</span><br><span class="line">s_Stopwatch.Stop();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下面是一个运行结果，可以看到时间改了两次，因为我们的程序改了一次。注意上面代码中的<code>s_Count</code>用来绕过上面提到的触发两次event的bug，如果没有这个话，这段代码会死循环下去。。。因为我们一直再改时间。当然也可以做一个时间的比较，小于某个值我们就认为一样，就不修改了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">9/15/2015 8:01:32 PM</span><br><span class="line">Should be:</span><br><span class="line">9/16/2015 8:01:32 PM</span><br><span class="line">Change back!</span><br><span class="line"></span><br><span class="line">9/16/2015 8:01:32 PM</span><br><span class="line">Should be:</span><br><span class="line">9/16/2015 8:01:32 PM</span><br><span class="line">Change back!</span><br></pre></td></tr></table></figure><p>两外一个要注意的是如果程序是Windows服务的话，需要起一个隐藏的窗口来处理消息，不然<code>TimeChanged</code>收不到。</p><p>如果想直接禁止用户修改时间，可以参见这篇文章<a href="http://www.sevenforums.com/tutorials/113557-date-time-allow-prevent-users-groups-changing.html" target="_blank" rel="noopener">How to Allow or Prevent Specific Users and Groups from Changing the Date and Time in Windows</a>。里面提供了两个方法：</p><ol><li>修改Local Security Policy中的Change the system time。  </li><li>通过<code>ntrights运行ntrights -U &quot;Administrators&quot; -R SeSystemtimePrivilege</code>来禁止修改时间，运行<code>ntrights -U &quot;Administrators&quot; -R SeSystemtimePrivilege</code>来允许修改时间。</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;有些时候我们不希望用户在使用我们的软件时修改系统时间，那么怎么检测用户是否修改系统时间呢？Windows会在系统时间修改时发送&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/windows/desktop/ms725498
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>为什么只有在用Visual Studio启动程序时会抛出InvalidOperationException异常</title>
    <link href="http://fresky.github.io/2015/09/14/why-only-throw-invalidoperation-exception-when-launch-from-vs/"/>
    <id>http://fresky.github.io/2015/09/14/why-only-throw-invalidoperation-exception-when-launch-from-vs/</id>
    <published>2015-09-14T10:22:24.000Z</published>
    <updated>2019-12-20T08:29:07.306Z</updated>
    
    <content type="html"><![CDATA[<p>在我之前的博文<a href="/2014/05/14/is-invokerequired-reliable/">C#中只使用Invokerequired来判断是不是UI线程可靠吗？</a>提到过除了检查<code>InvokeRequired</code>，还需要检查<code>IsHandleCreated</code>。今天再分享一段关于<code>InvokeRequired</code>的代码。</p><pre><code>public partial class Form9 : Form{    public Form9()    {        InitializeComponent();        // CheckForIllegalCrossThreadCalls = false;    }    private void button1_Click(object sender, EventArgs e)    {        var t = new Thread(() =&gt; { textBox1.Text = &quot;Random Text&quot;; });        t.Start();    }}</code></pre><p>这段代码很简单，就是在非UI线程更新UI控件。如果用Visual Studio启动程序时会抛出<code>InvalidOperationException</code>异常。但是如果直接双击启动编译后的exe文件，则一切工作顺利，没有InvalidOperation异常抛出。就算双击exe文件启动后拿Visual Studio Attach到这个进程，设置Visual Studio在所有的异常抛出时都break，还是没有抓到。为什么双击exe文件就神奇的工作了呢？</p><p>回头看MSDN的<a href="https://msdn.microsoft.com/en-us/library/ms171728.aspx" target="_blank" rel="noopener">How to: Make Thread-Safe Calls to Windows Forms Controls</a>。</p><blockquote><p>Access to Windows Forms controls is not inherently thread safe. If you have two or more threads manipulating the state of a control, it is possible to force the control into an inconsistent state. Other thread-related bugs are possible, such as race conditions and deadlocks. It is important to make sure that access to your controls is performed in a thread-safe way.</p></blockquote><blockquote><p><strong>It is unsafe to call a control from a thread other than the one that created the control without using the Invoke method. </strong></p></blockquote><p>这段写的就是说不能跨线程操作UI控件。接着往下读。</p><blockquote><p>The .NET Framework helps you detect when you are accessing your controls in a manner that is not thread safe. When you are running your application in the debugger, and a thread other than the one which created a control tries to call that control, the debugger raises an InvalidOperationException with the message, “Control control name accessed from a thread other than the thread it was created on.”</p></blockquote><blockquote><p><strong>This exception occurs reliably during debugging and, under some circumstances, at run time.</strong> You might see this exception when you debug applications that you wrote with the .NET Framework prior to the .NET Framework 2.0. <strong>You are strongly advised to fix this problem when you see it, but you can disable it by setting the CheckForIllegalCrossThreadCalls property to false.</strong> </p></blockquote><p>这段写的就是说如果是用Visual Studio运行程序，会强制抛出一个<code>InvalidOperationException</code>，<strong>帮助我们发现这些问题然后修复他们</strong>。如果没有通过Visual Studio直接运行程序，不会稳定的抛出这个异常，但是并不是说没有问题。</p><p>另外，如果暂时不想修改代码，但是还想从Visual Studio中启动，可以在Form中设置属性<a href="https://msdn.microsoft.com/en-us/library/system.windows.forms.control.checkforillegalcrossthreadcalls%28v=vs.80%29.aspx" target="_blank" rel="noopener">CheckForIllegalCrossThreadCalls</a>为false，这样Visual Studio就会忽略跨线程访问UI的情况，不抛出<code>InvalidOperationException</code>异常了。就是我上面列的代码注释掉的那行。<code>CheckForIllegalCrossThreadCalls</code>是.NET Framework 2.0引入的一个新属性。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在我之前的博文&lt;a href=&quot;/2014/05/14/is-invokerequired-reliable/&quot;&gt;C#中只使用Invokerequired来判断是不是UI线程可靠吗？&lt;/a&gt;提到过除了检查&lt;code&gt;InvokeRequired&lt;/code&gt;，还需要检查&lt;c
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>使用Windows的分析等待链（analyze wait chain）来诊断没用响应的应用</title>
    <link href="http://fresky.github.io/2015/09/11/analyze-wait-chain/"/>
    <id>http://fresky.github.io/2015/09/11/analyze-wait-chain/</id>
    <published>2015-09-11T13:09:18.000Z</published>
    <updated>2019-12-20T08:29:07.306Z</updated>
    
    <content type="html"><![CDATA[<p>我之前的博文<a href="/2015/06/03/use-procdump-to-detect-hung-window/">使用ProcDump在程序没有响应时自动收集dump</a>介绍过如何使用ProcDump自动收集无响应程序的dump。另外还有一个很有用的工具<a href="http://www.nirsoft.net/utils/what_is_hang.html" target="_blank" rel="noopener">WhatIsHang</a>也可以自动监测没有相应的程序，还能给出一个分析报告，包含调用栈Call Stack，栈上数据Stack Data等。</p><p>今天再看一个从Windows 7开始引入的这个分析等待链的功能，在Windows 7系统中打开Resource Monitor，在CPU页面，会列出所有的进程，右键点击某个进程，可以在右键菜单中看到分析等待链（analyze wait chain）。从Windows 8开始在任务管理器中可以直接右键进程，看到这个选项了。</p><p>下面是一个简单的示例，假设我们有如下程序：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Console.ReadLine();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行之后针对这个进程点击分析等待链（analyze wait chain），我们可以看到如下结果。</p><img src="/images/analyzewaitchain.png">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;我之前的博文&lt;a href=&quot;/2015/06/03/use-procdump-to-detect-hung-window/&quot;&gt;使用ProcDump在程序没有响应时自动收集dump&lt;/a&gt;介绍过如何使用ProcDump自动收集无响应程序的dump。另外还有一个很有用的工具&lt;
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>如何通过进程名获取进程ID</title>
    <link href="http://fresky.github.io/2015/08/20/get-process-id-by-name/"/>
    <id>http://fresky.github.io/2015/08/20/get-process-id-by-name/</id>
    <published>2015-08-20T10:45:02.000Z</published>
    <updated>2019-12-20T08:29:07.305Z</updated>
    
    <content type="html"><![CDATA[<p>之前的博客<a href="/2015/08/19/how-to-get-the-window-title/">C++如何拿到一个窗口的标题</a>在最后总结如何获取窗口标题时的一个建议是只查询属于自己感兴趣的进程的窗口。Windows的函数<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms633522%28v=vs.85%29.aspx" target="_blank" rel="noopener">GetWindowThreadProcessId</a>可以拿到一个窗口属于的进程ID，通常我们是知道我们感兴趣的进程名字，那么怎么根据进程名字来找到进程ID呢？</p><p>如果是C#那就非常简单了，直接使用<a href="https://msdn.microsoft.com/en-us/library/z3w4xdc9%28v=vs.110%29.aspx" target="_blank" rel="noopener">Process.GetProcessesByName</a>函数就能返回对应进程名字的进程数组。那如何在C++中实现呢？</p><p>老办法，翻翻C#的源代码（<code>Process.cs</code>）：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Process[] <span class="title">GetProcessesByName</span>(<span class="params"><span class="keyword">string</span> processName</span>)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> GetProcessesByName(processName, <span class="string">"."</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Process[] <span class="title">GetProcessesByName</span>(<span class="params"><span class="keyword">string</span> processName, <span class="keyword">string</span> machineName</span>)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (processName == <span class="literal">null</span>) processName = String.Empty;</span><br><span class="line">Process[] procs = GetProcesses(machineName);</span><br><span class="line">ArrayList list = <span class="keyword">new</span> ArrayList();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; procs.Length; i++) &#123;                </span><br><span class="line"><span class="keyword">if</span>( String.Equals(processName, procs[i].ProcessName, StringComparison.OrdinalIgnoreCase)) &#123;</span><br><span class="line">list.Add( procs[i]);                    </span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">procs[i].Dispose();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Process[] temp = <span class="keyword">new</span> Process[list.Count];</span><br><span class="line">list.CopyTo(temp, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Process[] <span class="title">GetProcesses</span>(<span class="params"><span class="keyword">string</span> machineName</span>)</span> &#123;</span><br><span class="line"><span class="keyword">bool</span> isRemoteMachine = ProcessManager.IsRemoteMachine(machineName);</span><br><span class="line">ProcessInfo[] processInfos = ProcessManager.GetProcessInfos(machineName);</span><br><span class="line">Process[] processes = <span class="keyword">new</span> Process[processInfos.Length];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; processInfos.Length; i++) &#123;</span><br><span class="line">ProcessInfo processInfo = processInfos[i];</span><br><span class="line">processes[i] = <span class="keyword">new</span> Process(machineName, isRemoteMachine, processInfo.processId, processInfo);</span><br><span class="line">&#125;</span><br><span class="line">Debug.WriteLineIf(processTracing.TraceVerbose, <span class="string">"Process.GetProcesses("</span> + machineName + <span class="string">")"</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> DEBUG</span></span><br><span class="line"><span class="keyword">if</span> (processTracing.TraceVerbose) &#123;</span><br><span class="line">Debug.Indent();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; processInfos.Length; i++) &#123;</span><br><span class="line">Debug.WriteLine(processes[i].Id + <span class="string">": "</span> + processes[i].ProcessName);</span><br><span class="line">&#125;</span><br><span class="line">Debug.Unindent();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">return</span> processes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>先拿到所有的进程，然后比较进程名字。<code>Process.cs</code>调用了<code>ProcessManager.cs</code>来拿所有的进程，接着看源代码（<code>ProcessManager.cs</code>）：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ProcessInfo[] <span class="title">GetProcessInfos</span>(<span class="params"><span class="keyword">string</span> machineName</span>)</span> &#123;</span><br><span class="line"><span class="keyword">bool</span> isRemoteMachine = IsRemoteMachine(machineName);</span><br><span class="line"><span class="keyword">if</span> (IsNt) &#123;</span><br><span class="line"><span class="comment">// Do not use performance counter for local machine with Win2000 and above</span></span><br><span class="line"><span class="keyword">if</span>( !isRemoteMachine &amp;&amp; </span><br><span class="line">(Environment.OSVersion.Version.Major &gt;= <span class="number">5</span> ))   &#123;</span><br><span class="line"><span class="keyword">return</span> NtProcessInfoHelper.GetProcessInfos();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> NtProcessManager.GetProcessInfos(machineName, isRemoteMachine);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (isRemoteMachine)</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> PlatformNotSupportedException(SR.GetString(SR.WinNTRequiredForRemote));</span><br><span class="line"><span class="keyword">return</span> WinProcessManager.GetProcessInfos();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接着往下看就能看到C#是如何取进程ID的了。有下面几种实现：</p><ol><li>Windows 2000以上的系统用<code>NtProcessInfoHelper.GetProcessInfos()</code>。实现就是使用<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms724509%28v=vs.85%29.aspx" target="_blank" rel="noopener">NtQuerySystemInformation</a>函数，根据参数<code>SYSTEM_PROCESS_INFORMATION</code>，可以获取包含所有进程信息的一个数组。  </li><li>Windows NT以上Windows2000以下用<code>NtProcessManager.GetProcessInfos</code>。实现就是通过<code>PerformanceCounterLib</code>来获取进程数组。  </li><li>Windows NT之前的用<code>WinProcessManager.GetProcessInfos()</code>。实现就是使用<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms682489%28v=vs.85%29.aspx" target="_blank" rel="noopener">CreateToolhelp32Snapshot</a>函数，根据参数<code>TH32CS_SNAPPROCESS</code>来包含所有进程，然后根据<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms684834%28v=vs.85%29.aspx" target="_blank" rel="noopener">Process32First</a>来遍历进程。  </li></ol><p>下面是一个简化版的用<code>CreateToolhelp32Snapshot</code>来获取给定进程名字进程ID的例子。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;DWORD&gt; GetProcessIDByName(CComBSTR processName)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;DWORD&gt; processIDs;</span><br><span class="line"></span><br><span class="line">    PROCESSENTRY32 entry;</span><br><span class="line">    entry.dwSize = <span class="keyword">sizeof</span>(PROCESSENTRY32);</span><br><span class="line"></span><br><span class="line">    HANDLE snapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">if</span> (Process32First(snapshot, &amp;entry) == TRUE)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (Process32Next(snapshot, &amp;entry) == TRUE)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (CComBSTR(entry.szExeFile) == processName)</span><br><span class="line">            &#123;</span><br><span class="line">                processIDs.push_back(entry.th32ProcessID);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    CloseHandle(snapshot);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> processIDs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      本文通过查看C#的GetProcessesByName的源代码来看如何在C++中获取所有系统进程信息。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>C#是怎么获取窗口标题的</title>
    <link href="http://fresky.github.io/2015/08/20/how-csharp-get-window-title/"/>
    <id>http://fresky.github.io/2015/08/20/how-csharp-get-window-title/</id>
    <published>2015-08-20T01:29:52.000Z</published>
    <updated>2019-12-20T08:29:07.305Z</updated>
    
    <content type="html"><![CDATA[<p>之前的博客<a href="/2015/08/19/how-to-get-the-window-title/">C++如何拿到一个窗口的标题</a>介绍了如何用Windows的GetWindowText函数来获取窗口的标题，Windows是如何实现这个方法的，同时介绍了在使用GetWindowText时可能遇到的一些问题。下面我们来看看在C#中是怎么拿窗口标题的。</p><p>C#的<a href="https://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainwindowtitle%28v=vs.110%29.aspx" target="_blank" rel="noopener">Process.MainWindowTitle</a>可以获取进程主窗口的标题，如果进程没有UI，那么返回空字符串。如果进程刚启动，可以调用<code>WaitForInputIdle</code>来等待进程初始化完成。下面的程序代码可以遍历所有进程，打印主窗口标题。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> p <span class="keyword">in</span> Process.GetProcesses())</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(p.MainWindowTitle);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>C#是怎么实现的呢？可以看看C#的源代码（<code>Process.cs</code>）：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Process</span> : <span class="title">Component</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">string</span> MainWindowTitle &#123;</span><br><span class="line">[<span class="meta">ResourceExposure(ResourceScope.None)</span>]</span><br><span class="line">[<span class="meta">ResourceConsumption(ResourceScope.Machine, ResourceScope.Machine)</span>]</span><br><span class="line"><span class="keyword">get</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (mainWindowTitle == <span class="literal">null</span>) &#123;</span><br><span class="line">IntPtr handle = MainWindowHandle;</span><br><span class="line"><span class="keyword">if</span> (handle == (IntPtr)<span class="number">0</span>) &#123;</span><br><span class="line">mainWindowTitle = String.Empty;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">int</span> length = NativeMethods.GetWindowTextLength(<span class="keyword">new</span> HandleRef(<span class="keyword">this</span>, handle)) * <span class="number">2</span>;</span><br><span class="line">StringBuilder builder = <span class="keyword">new</span> StringBuilder(length);</span><br><span class="line">NativeMethods.GetWindowText(<span class="keyword">new</span> HandleRef(<span class="keyword">this</span>, handle), builder, builder.Capacity);</span><br><span class="line">mainWindowTitle = builder.ToString();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> mainWindowTitle;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们看到也是调用了windows的<code>GetWindowText</code>方法，那么这个<code>MainWindowHandle</code>是怎么来的呢？接着翻代码（<code>Process.cs</code>）：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Process</span> : <span class="title">Component</span> &#123;</span><br><span class="line"><span class="keyword">public</span> IntPtr MainWindowHandle &#123;</span><br><span class="line">[<span class="meta">ResourceExposure(ResourceScope.Machine)</span>]</span><br><span class="line">[<span class="meta">ResourceConsumption(ResourceScope.Machine)</span>]</span><br><span class="line"><span class="keyword">get</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (!haveMainWindow) &#123;</span><br><span class="line">EnsureState(State.IsLocal | State.HaveId);</span><br><span class="line">mainWindowHandle = ProcessManager.GetMainWindowHandle(processId);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (mainWindowHandle != (IntPtr)<span class="number">0</span>) &#123;</span><br><span class="line">haveMainWindow = <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// We do the following only for the side-effect that it will throw when if the process no longer exists on the system.  In Whidbey</span></span><br><span class="line"><span class="comment">// we always did this check but have now changed it to just require a ProcessId. In the case where someone has called Refresh() </span></span><br><span class="line"><span class="comment">// and the process has exited this call will throw an exception where as the above code would return 0 as the handle.</span></span><br><span class="line">EnsureState(State.HaveProcessInfo);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> mainWindowHandle;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>是通过<code>ProcessManager.GetMainWindowHandle</code>函数根据<code>processId</code>找到的，那再看看<code>ProcessManager.GetMainWindowHandle</code>的实现（<code>ProcessManager.cs</code>）：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">ProcessManager</span> &#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IntPtr <span class="title">GetMainWindowHandle</span>(<span class="params"><span class="keyword">int</span> processId</span>)</span> &#123;</span><br><span class="line">MainWindowFinder finder = <span class="keyword">new</span> MainWindowFinder();</span><br><span class="line"><span class="keyword">return</span> finder.FindMainWindow(processId);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">MainWindowFinder</span> &#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> IntPtr <span class="title">FindMainWindow</span>(<span class="params"><span class="keyword">int</span> processId</span>)</span> &#123;</span><br><span class="line">bestHandle = (IntPtr)<span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>.processId = processId;</span><br><span class="line"></span><br><span class="line">NativeMethods.EnumThreadWindowsCallback callback = <span class="keyword">new</span> NativeMethods.EnumThreadWindowsCallback(<span class="keyword">this</span>.EnumWindowsCallback);</span><br><span class="line">NativeMethods.EnumWindows(callback, IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">GC.KeepAlive(callback);</span><br><span class="line"><span class="keyword">return</span> bestHandle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">EnumWindowsCallback</span>(<span class="params">IntPtr handle, IntPtr extraParameter</span>)</span> &#123;</span><br><span class="line"><span class="keyword">int</span> processId;</span><br><span class="line">NativeMethods.GetWindowThreadProcessId(<span class="keyword">new</span> HandleRef(<span class="keyword">this</span>, handle), <span class="keyword">out</span> processId);</span><br><span class="line"><span class="keyword">if</span> (processId == <span class="keyword">this</span>.processId) &#123;</span><br><span class="line"><span class="keyword">if</span> (IsMainWindow(handle)) &#123;</span><br><span class="line">bestHandle = handle;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsMainWindow</span>(<span class="params">IntPtr handle</span>)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (NativeMethods.GetWindow(<span class="keyword">new</span> HandleRef(<span class="keyword">this</span>, handle), NativeMethods.GW_OWNER) != (IntPtr)<span class="number">0</span> || !NativeMethods.IsWindowVisible(<span class="keyword">new</span> HandleRef(<span class="keyword">this</span>, handle)))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// [....]: should we use no window title to mean not a main window? (task man does)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">int length = NativeMethods.GetWindowTextLength(handle) * 2;</span></span><br><span class="line"><span class="comment">StringBuilder builder = new StringBuilder(length);</span></span><br><span class="line"><span class="comment">if (NativeMethods.GetWindowText(handle, builder, builder.Capacity) == 0)</span></span><br><span class="line"><span class="comment">return false;</span></span><br><span class="line"><span class="comment">if (builder.ToString() == string.Empty)</span></span><br><span class="line"><span class="comment">return false;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这就清楚的看出来C#是怎么拿窗口标题了：</p><ol><li>根据<code>processId</code>使用<code>EnumWindows</code>方法找到属于当前进程的窗口。  </li><li>根据窗口有没有GW_OWNER并且可见来判断是不是主窗口。  </li><li>根据主窗口句柄使用<code>GetWindowText</code>方法得到窗口的标题。</li></ol><p>跟我在博文中<a href="/2015/08/19/how-to-get-the-window-title/">C++如何拿到一个窗口的标题</a>推荐的C++的使用方式一样。</p><p>如果在C#中想得到非主窗口的标题，可以用p/invoke来直接调用<code>EnumWindows</code>和<code>GetWindowText</code>。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;之前的博客&lt;a href=&quot;/2015/08/19/how-to-get-the-window-title/&quot;&gt;C++如何拿到一个窗口的标题&lt;/a&gt;介绍了如何用Windows的GetWindowText函数来获取窗口的标题，Windows是如何实现这个方法的，同时介绍了在使
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>C++如何拿到一个窗口的标题</title>
    <link href="http://fresky.github.io/2015/08/19/how-to-get-the-window-title/"/>
    <id>http://fresky.github.io/2015/08/19/how-to-get-the-window-title/</id>
    <published>2015-08-19T10:38:17.000Z</published>
    <updated>2019-12-20T08:29:07.305Z</updated>
    
    <content type="html"><![CDATA[<p>如果想拿到一个窗口的标题，那么使用Windows的函数<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms633520%28v=vs.85%29.aspx" target="_blank" rel="noopener">GetWindowText</a>，但是使用这个函数时有一些坑需要注意一下。先看看MSDN上的说明：</p><blockquote><p>If the target window is owned by the current process, GetWindowText causes a WM_GETTEXT message to be sent to the specified window or control. If the target window is owned by another process and has a caption, GetWindowText retrieves the window caption text. If the window does not have a caption, the return value is a null string. This behavior is by design. It allows applications to call GetWindowText without becoming unresponsive if the process that owns the target window is not responding. However, if the target window is not responding and it belongs to the calling application, GetWindowText will cause the calling application to become unresponsive.</p></blockquote><blockquote><p>To retrieve the text of a control in another process, send a WM_GETTEXT message directly instead of calling GetWindowText. </p></blockquote><p>这个说明写的不太好懂！可以参看The Old New Thing的博客<a href="http://blogs.msdn.com/b/oldnewthing/archive/2003/08/21/54675.aspx" target="_blank" rel="noopener">The secret life of GetWindowText</a>，说的更明白一些，下面我就简要介绍一下。</p><h1 id="GetWindowText是怎么工作的"><a href="#GetWindowText是怎么工作的" class="headerlink" title="GetWindowText是怎么工作的"></a>GetWindowText是怎么工作的</h1><ol><li>如果你要拿标题的窗口属于当前的进程，那么<code>GetWindowText</code>就是发送<code>WM_GETTEXT</code>消息过去，然后获取标题。</li><li>如果你要拿标题的窗口不属于当前的进程，那么<code>GetWindowText</code>就不发送<code>WM_GETTEXT</code>消息，而是直接从一个特定的地方读取标题。</li></ol><h1 id="GetWindowText为什么这么实现"><a href="#GetWindowText为什么这么实现" class="headerlink" title="GetWindowText为什么这么实现"></a>GetWindowText为什么这么实现</h1><p>窗口的标题有两种处理的方式：  </p><ol><li>让系统来处理，<code>WM_NCCREATE</code>消息会把<code>CreateWindow/Ex</code>的参数<code>lpWindowName</code>放到一个特定位置。处理<code>WM_GETTEXT</code>消息是就把这个特定位置存储的字符串返回出去。处理<code>WM_SETTEXT</code>消息就是把传进来的字符串放到那个特定位置。  </li><li>窗口自己处理，自己决定如何响应<code>WM_GETTEXT</code>和<code>WM_SETTEXT</code>消息。</li></ol><p>通常来说Frame窗口让系统来处理的，自定义的控件自己管理。</p><p>如果我们用发送<code>WM_GETTEXT</code>消息的方式来获取标题，会有一个潜在的风险，如果目标窗口已经没有反应了，那么就不能处理这个<code>WM_GETTEXT</code>消息，而获取方用的是send的方式，所以也会变得没有反应，就被刮起了。</p><p>所以Windows选择的的实现方式就是如果你要获取其他进程的窗口标题，那么就直接从特定位置取，这样可以保证调用方不会挂起。如果你要获取自己进程的窗口标题，那么就发送<code>WM_GETTEXT</code>消息，这样可以保证就算是窗口自己管理标题，也能拿到正确的值。当然，带来的风险就是假设这个窗口没有响应，那么调用方也就被挂起了，因为这个窗口是自己进程，挂起也没啥不应该的：）。</p><h1 id="验证GetWindowText是怎么工作的"><a href="#验证GetWindowText是怎么工作的" class="headerlink" title="验证GetWindowText是怎么工作的"></a>验证GetWindowText是怎么工作的</h1><p>虽然我们没有<code>GetWindowText</code>的源代码，但是我们还是可以很容易的用调试的方式来验证它是不是这么实现的。先写如下的示例代码。</p><h2 id="PrintProcessNameAndID打印给定进程ID的进程名。"><a href="#PrintProcessNameAndID打印给定进程ID的进程名。" class="headerlink" title="PrintProcessNameAndID打印给定进程ID的进程名。"></a><code>PrintProcessNameAndID</code>打印给定进程ID的进程名。</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintProcessNameAndID</span><span class="params">(DWORD processID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    TCHAR szProcessName[MAX_PATH] = TEXT(<span class="string">"&lt;unknown&gt;"</span>);</span><br><span class="line"></span><br><span class="line">    HANDLE hProcess = OpenProcess(PROCESS_QUERY_INFORMATION |</span><br><span class="line">        PROCESS_VM_READ,</span><br><span class="line">        FALSE, processID);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">NULL</span> != hProcess)</span><br><span class="line">    &#123;</span><br><span class="line">        HMODULE hMod;</span><br><span class="line">        DWORD cbNeeded;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (EnumProcessModules(hProcess, &amp;hMod, <span class="keyword">sizeof</span>(hMod),</span><br><span class="line">            &amp;cbNeeded))</span><br><span class="line">        &#123;</span><br><span class="line">            GetModuleBaseName(hProcess, hMod, szProcessName,</span><br><span class="line">                <span class="keyword">sizeof</span>(szProcessName) / <span class="keyword">sizeof</span>(TCHAR));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    CString msg;</span><br><span class="line">    msg.Format(<span class="string">L"%s(PID: %u)  "</span>, szProcessName, processID);</span><br><span class="line">    OutputDebugString(msg);</span><br><span class="line"></span><br><span class="line">    CloseHandle(hProcess);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="LoopWindow遍历窗口并打印窗口标题。"><a href="#LoopWindow遍历窗口并打印窗口标题。" class="headerlink" title="LoopWindow遍历窗口并打印窗口标题。"></a><code>LoopWindow</code>遍历窗口并打印窗口标题。</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LoopWindow</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    HWND hDesktopWnd = ::GetDesktopWindow();</span><br><span class="line"></span><br><span class="line">    HWND hWindow = ::GetWindow(hDesktopWnd, GW_CHILD);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (hWindow != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        DWORD processID;</span><br><span class="line">        GetWindowThreadProcessId(hWindow, &amp;processID);</span><br><span class="line">        PrintProcessNameAndID(processID);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> lTextLen = ::GetWindowTextLength(hWindow);</span><br><span class="line">        CString str;</span><br><span class="line">        ::GetWindowText(hWindow, str.GetBufferSetLength(lTextLen + <span class="number">1</span>), lTextLen + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        OutputDebugString(str);</span><br><span class="line">        OutputDebugString(<span class="string">L"\r\n"</span>);</span><br><span class="line">        hWindow = ::GetWindow(hWindow, GW_HWNDNEXT);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们在主函数调用<code>LoopWindow</code>，就可以在debugger中看到所有窗口的标题输出。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">    LoopWindow();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="用windbg来验证GetWindowText的行为"><a href="#用windbg来验证GetWindowText的行为" class="headerlink" title="用windbg来验证GetWindowText的行为"></a>用windbg来验证<code>GetWindowText</code>的行为</h2><p>我们用windbg来运行编译好的exe，在发送消息的地方加上断点，如下所示。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bp user32!NtUserMessageCall</span><br></pre></td></tr></table></figure><p>然后运行，我们就可以发现只有在获取当前进程的窗口时，这个断点才会进来。这就验证了如果你要拿标题的窗口属于当前的进程，那么<code>GetWindowText</code>就是发送<code>WM_GETTEXT</code>消息过去，然后获取标题。如果你要拿标题的窗口不属于当前的进程，那么<code>GetWindowText</code>就不发送<code>WM_GETTEXT</code>消息，而是直接从一个特定的地方读取标题。</p><h1 id="模拟目标窗口无响应的情形。"><a href="#模拟目标窗口无响应的情形。" class="headerlink" title="模拟目标窗口无响应的情形。"></a>模拟目标窗口无响应的情形。</h1><h2 id="目标窗口是其他进程的。"><a href="#目标窗口是其他进程的。" class="headerlink" title="目标窗口是其他进程的。"></a>目标窗口是其他进程的。</h2><p>这个非常简单，随便用C#写一个winform，在一个按钮响应里写一个<code>while(true){}</code>，第一点这个按钮，窗口就没有相应了。我们运行上面的那个<code>LoopWindow</code>，发现没有任何问题，正常退出，窗口标题也能拿到。</p><h2 id="目标窗口是当前进程的。"><a href="#目标窗口是当前进程的。" class="headerlink" title="目标窗口是当前进程的。"></a>目标窗口是当前进程的。</h2><p>我们可以写一个MFC的程序，然后在第一个对话框中加两个按钮，第一个按钮会起一个线程不停的调用<code>LoopWindow</code>，第二个按钮会打开另一个对框框。第二个对话框有一个按钮，这个按钮的响应函数也是<code>while(true){}</code>。这样我们发现在点了第二个对话框的按钮之后，那个调用<code>LoopWindow</code>的线程也被挂起了。</p><h1 id="GetWindow带来的坑"><a href="#GetWindow带来的坑" class="headerlink" title="GetWindow带来的坑"></a><code>GetWindow</code>带来的坑</h1><p>我们的<code>LoopWindow</code>里使用了<a href="https://msdn.microsoft.com/en-gb/library/windows/desktop/ms633515.asphttps://msdn.microsoft.com/en-gb/library/windows/desktop/ms633515.aspx" target="_blank" rel="noopener">GetWindow</a>来寻找所有的窗口，但是这个<code>GetWindow</code>也有一个坑，MSDN上的说明是这么写的：</p><blockquote><p>The EnumChildWindows function is more reliable than calling GetWindow in a loop. An application that calls GetWindow to perform this task risks being caught in an infinite loop or referencing a handle to a window that has been destroyed. </p></blockquote><p>就是说在一个循环中调用<code>GetWindow</code>有可能会进入一个死循环。或者<code>GetWindow</code>有可能会返回一个已经被析构掉的一个窗口。</p><h1 id="如何绕过这些坑"><a href="#如何绕过这些坑" class="headerlink" title="如何绕过这些坑"></a>如何绕过这些坑</h1><ol><li>遍历窗口要使用<a href="https://msdn.microsoft.com/en-gb/library/windows/desktop/ms633497.aspx" target="_blank" rel="noopener">EnumWindows</a>或者<a href="https://msdn.microsoft.com/en-gb/library/windows/desktop/ms633494.aspx" target="_blank" rel="noopener">EnumChildWindows</a>。  </li><li>如果我们不希望调用<code>GetWindowText</code>的线程挂起，需要做超时处理。  </li><li>大部分情况下我们获取窗口标题并不需要处理当前进程的窗口，所以在调用<code>GetWindowText</code>之前可以做个判断，如果是当前进程就直接返回。如果我们只需要获取某些特定进程的窗口标题，可以在调用<code>GetWindowText</code>之前判断目标窗口是否属于我们感兴趣的进程。  </li></ol>]]></content>
    
    <summary type="html">
    
      本文介绍了如何用Windows的GetWindowText函数来获取窗口的标题。介绍了Windows是如何实现这个方法的。同时介绍了在使用GetWindowText时可能遇到的一些问题，比如调用方被挂起hang了，原因是什么，如何避免。另外还说明了使用GetWindow函数可能遇到的问题，应该尽量使用EnumWindows来替代。
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>C#如何转换2位数字表示的年</title>
    <link href="http://fresky.github.io/2015/08/12/how-to-parse-2-digit-year/"/>
    <id>http://fresky.github.io/2015/08/12/how-to-parse-2-digit-year/</id>
    <published>2015-08-12T11:15:09.000Z</published>
    <updated>2019-12-20T08:29:07.305Z</updated>
    
    <content type="html"><![CDATA[<p>C#的<a href="https://msdn.microsoft.com/en-us/library/system.datetime.parse%28v=vs.110%29.aspx" target="_blank" rel="noopener">DateTime.Parse</a>可以把一个字符串转换成DateTime。但是如果年份只有2位数字，它会怎么转换呢？来看看下面的代码：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DateTime d = DateTime.Parse(<span class="string">"01/13/30"</span>);</span><br><span class="line">Console.WriteLine(d);</span><br></pre></td></tr></table></figure><p>输入结果是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1/13/1930 12:00:00 AM</span><br></pre></td></tr></table></figure></p><p>如果换成这样：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DateTime d = DateTime.Parse(<span class="string">"01/13/29"</span>);</span><br><span class="line">Console.WriteLine(d);</span><br></pre></td></tr></table></figure></p><p>输入结果是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1/13/2029 12:00:00 AM</span><br></pre></td></tr></table></figure></p><p>怎么回事呢？貌似29是一个分水岭，29之前的是20XX，29之后的是19XX。</p><p>再去仔细看看MSDN吧，上面关于2位数字的年份怎么转换是这么说的：</p><blockquote><p>A string with a date but no time component. If the time component is absent, the method assumes 12:00 midnight. If the date component has a two-digit year, it is converted to a year based on the Calendar.TwoDigitYearMax of the current culture’s current calendar or the specified culture’s current calendar (if you use an overload with a non-null provider argument). </p></blockquote><p>就是说关于2位数字的年份转换，需要参考<code>Calendar.TwoDigitYearMax</code>，它是两位数字年份转换的最大值。那这个默认是2029是怎么来的呢？在<a href="https://msdn.microsoft.com/en-us/library/system.globalization.calendar.twodigityearmax%28v=vs.110%29.aspx" target="_blank" rel="noopener">Calendar.TwoDigitYearMax</a>有如下的描述：</p><blockquote><p>The initial value of this property is derived from the settings in the regional and language options portion of Control Panel. However, that information can change during the life of the AppDomain. The Calendar class does not detect changes in the system settings automatically. If the calendar is not supported in the regional and language options, the initial value of this property is the default value defined by the Calendar class.</p></blockquote><p>打开我的控制面板，发现了如下的设置。</p><img src="/images/2digityear.png">]]></content>
    
    <summary type="html">
    
      C#根据Calendar.TwoDigitYearMax来做2位数字年份的转换，默认值是2029，所以30就是1930，29就是2029。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>在Visual Studio中使用Pseudovariables来帮助调试</title>
    <link href="http://fresky.github.io/2015/07/15/debug-in-visual-studio-with-pseudovariables/"/>
    <id>http://fresky.github.io/2015/07/15/debug-in-visual-studio-with-pseudovariables/</id>
    <published>2015-07-14T23:23:23.000Z</published>
    <updated>2019-12-20T08:29:07.304Z</updated>
    
    <content type="html"><![CDATA[<p>在我之前的博文<a href="/2013/06/07/constrained-execution-regions-in-csharp/">C#的强迫执行域Constrained Execution Regions(CERs)</a>中提到过一点可以通过在Visual Studio的Watch窗口输入<code>@err,hr</code>来显示<code>GetLastError</code>。今天把Visual Studio中能使用的<a href="https://msdn.microsoft.com/en-us/library/ms164891.aspx" target="_blank" rel="noopener">Pseudovariables</a>都列一下，灵活运用这些Pseudovariables，可以大大的提高调试的效率。</p><p>在C++的程序中可以使用的Pseudovariables如下：</p><table><thead><tr><th>变量名</th><th>功能</th></tr></thead><tbody><tr><td><code>$err</code></td><td>显示通过<code>SetLastError</code>设置的错误代码，何在代码中调用<code>GetLastError</code>效果一样。可以用<code>$err,hr</code>来显示错误代码对应的文本信息</td></tr><tr><td><code>$handles</code></td><td>显示应用程序中的句柄数量</td></tr><tr><td><code>$vframe</code></td><td>显示当前栈帧的地址</td></tr><tr><td><code>$tid</code></td><td>显示当前的线程ID</td></tr><tr><td><code>$env</code></td><td>显示当前应用的环境变量</td></tr><tr><td><code>$cmdline</code></td><td>显示运行当前应用的命令行参数</td></tr><tr><td><code>$pid</code></td><td>显示进程ID</td></tr><tr><td><code>$registername</code>或<code>@registername</code></td><td>显示寄存器的内容，如果寄存器的名字不和当前其他变量重名，直接写寄存器的名字也行</td></tr><tr><td><code>$clk</code></td><td>显示clock cycles</td></tr><tr><td><code>$user</code></td><td>显示运行当前用户的用户信息</td></tr></tbody></table><p>在C#的程序中可以使用的Pseudovariables如下：</p><table><thead><tr><th>变量名</th><th>功能</th></tr></thead><tbody><tr><td><code>$exception</code></td><td>显示最后的异常信息</td></tr><tr><td><code>$user</code></td><td>显示运行当前用户的用户信息</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在我之前的博文&lt;a href=&quot;/2013/06/07/constrained-execution-regions-in-csharp/&quot;&gt;C#的强迫执行域Constrained Execution Regions(CERs)&lt;/a&gt;中提到过一点可以通过在Visual St
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>如何去掉WinForm或者WPF的最大化和最小化按钮</title>
    <link href="http://fresky.github.io/2015/07/14/how-to-remove-the-maximize-and-minimize-button/"/>
    <id>http://fresky.github.io/2015/07/14/how-to-remove-the-maximize-and-minimize-button/</id>
    <published>2015-07-14T15:13:18.000Z</published>
    <updated>2019-12-20T08:29:07.304Z</updated>
    
    <content type="html"><![CDATA[<p>有时候我们希望对我们的WinForm或者WPF控件做一些定制，比如去掉最大化和最小化按钮，怎么做呢？</p><h1 id="WinForm"><a href="#WinForm" class="headerlink" title="WinForm"></a>WinForm</h1><p>WinForm去掉最大化和最小化按钮：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MaximizeBox = <span class="literal">false</span>;</span><br><span class="line">MinimizeBox = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure></p><p>WinForm的最大化和最小化按钮和能否改变窗口大小是两个属性，所以上面的代码只是把最小化和最大化按钮去掉了，但是窗口还能改变大小。</p><p>下面的代码是不允许改变WinForm的窗口大小，但是最大化和最小化按钮还是能点的。<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FormBorderStyle = FormBorderStyle.FixedSingle;</span><br></pre></td></tr></table></figure></p><h1 id="WPF"><a href="#WPF" class="headerlink" title="WPF"></a>WPF</h1><p>WPF没有API可以直接去掉最大化和最小化按钮的，但是我们可以通过<code>ResizeMode</code>来曲线救国，如果设置窗口不能改变大小，那么最大化和最小化按钮也就没有了，如下所示：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ResizeMode = System.Windows.ResizeMode.NoResize;</span><br></pre></td></tr></table></figure></p><p>另外还有一个办法是通过设置<code>WindowStyle</code>来实现，但是这个会把关闭的按钮也弄没，如下所示：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WindowStyle = WindowStyle.None;</span><br></pre></td></tr></table></figure></p><p>这两种方式都不是很好，会有一些副作用，那还有别的办法吗？</p><h1 id="用Windows的API：SetWindowLongPtr"><a href="#用Windows的API：SetWindowLongPtr" class="headerlink" title="用Windows的API：SetWindowLongPtr"></a>用Windows的API：SetWindowLongPtr</h1><p><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms644898%28v=vs.85%29.aspx" target="_blank" rel="noopener">SetWindowLongPtr</a>是Windows的一个API，作用是改变窗口的属性。函数签名如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">LONG_PTR WINAPI <span class="title">SetWindowLongPtr</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">  _In_ HWND     hWnd,</span></span></span><br><span class="line"><span class="function"><span class="params">  _In_ <span class="keyword">int</span>      nIndex,</span></span></span><br><span class="line"><span class="function"><span class="params">  _In_ LONG_PTR dwNewLong</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre></td></tr></table></figure></p><p>第一个参数是窗口句柄。第二个参数是offset，当它的值是<code>GWL_STYLE</code>（-16）时，可以设置窗口风格。第三个参数是要设置的值，比如针对<code>GWL_STYLE</code>的可能取值参见<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms632600%28v=vs.85%29.aspx" target="_blank" rel="noopener">Window Styles</a>。里面就有最大化（<code>WS_MAXIMIZEBOX=0x00010000L</code>）和最小化按钮（<code>WS_MINIMIZEBOX=0x00020000L</code>）。所以我们可以通过设置这两个值去掉最大化和最小化按钮。</p><p>在调用<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms644898%28v=vs.85%29.aspx" target="_blank" rel="noopener">SetWindowLongPtr</a>之前要调用<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms633585%28v=vs.85%29.aspx" target="_blank" rel="noopener">GetWindowLongPtr</a>来获取当前Window的信息，确保我们只是把最大化和最小化按钮去了。</p><p>在调用<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms644898%28v=vs.85%29.aspx" target="_blank" rel="noopener">SetWindowLongPtr</a>之前要调用<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx" target="_blank" rel="noopener">SetWindowPos</a>以确保我们的设置生效了。<br><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms644898%28v=vs.85%29.aspx" target="_blank" rel="noopener">SetWindowLongPtr</a>和<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms633585%28v=vs.85%29.aspx" target="_blank" rel="noopener">GetWindowLongPtr</a>都是<strong>针对64位程序</strong>的。</p><p>尽管MSDN上写的是这两个对32位也有效，但是其实如果直接<code>DllImport</code>这两个API使用时会报<code>EntryPointNotFoundException</code>。所以我们要根据当前应用程序是32位还是64位使用不同的<code>DllImport</code>API。<strong>32位</strong>下需要用<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms633584%28v=vs.85%29.aspx" target="_blank" rel="noopener">GetWindowLong</a>和<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms633591%28v=vs.85%29.aspx" target="_blank" rel="noopener">SetWindowLong</a>。</p><p>下面的代码对WinForm和WPF都有效：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">int</span> GWL_STYLE = <span class="number">-16</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">int</span> WS_MAXIMIZEBOX = <span class="number">0x10000</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">int</span> WS_MINIMIZEBOX = <span class="number">0x20000</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">int</span> SWP_NOMOVE = <span class="number">0x0002</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">int</span> SWP_NOSIZE = <span class="number">0x0001</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">int</span> SWP_NOZORDER = <span class="number">0x0004</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">int</span> SWP_FRAMECHANGED = <span class="number">0x0020</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"user32.dll"</span>, EntryPoint = <span class="meta-string">"GetWindowLong"</span>, CharSet = CharSet.Auto)</span>]</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">GetWindowLong32</span>(<span class="params">IntPtr hWnd, <span class="keyword">int</span> nIndex</span>)</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"user32.dll"</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">GetWindowLongPtr</span>(<span class="params">IntPtr hwnd, <span class="keyword">int</span> index</span>)</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"user32.dll"</span>, EntryPoint = <span class="meta-string">"SetWindowLong"</span>, CharSet = CharSet.Auto)</span>]</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">SetWindowLong32</span>(<span class="params">IntPtr hwnd, <span class="keyword">int</span> index, <span class="keyword">int</span> <span class="keyword">value</span></span>)</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"user32.dll"</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">SetWindowLongPtr</span>(<span class="params">IntPtr hwnd, <span class="keyword">int</span> index, <span class="keyword">int</span> <span class="keyword">value</span></span>)</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"user32.dll"</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">bool</span> <span class="title">SetWindowPos</span>(<span class="params">IntPtr hWnd, <span class="keyword">int</span> hWndInsertAfter, <span class="keyword">int</span> x, <span class="keyword">int</span> Y, <span class="keyword">int</span> cx, <span class="keyword">int</span> cy, <span class="keyword">int</span> wFlags</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">HideMinMaxButtons</span>(<span class="params">IntPtr hwnd</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (IntPtr.Size == <span class="number">4</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">var</span> currentStyle = GetWindowLong32(hwnd, GWL_STYLE);</span><br><span class="line">SetWindowLong32(hwnd, GWL_STYLE, (currentStyle &amp; ~WS_MAXIMIZEBOX &amp; ~WS_MINIMIZEBOX));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">var</span> currentStyle = GetWindowLongPtr(hwnd, GWL_STYLE);</span><br><span class="line">SetWindowLongPtr(hwnd, GWL_STYLE, (currentStyle &amp; ~WS_MAXIMIZEBOX &amp; ~WS_MINIMIZEBOX));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//call SetWindowPos to make sure the SetWindowLongPtr take effect according to MSDN</span></span><br><span class="line">SetWindowPos(hwnd, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, SWP_NOMOVE | SWP_NOSIZE | SWP_NOZORDER | SWP_FRAMECHANGED);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>另外要注意的一点事，在调用过<code>HideMinMaxButtons</code>之后不能在调用其他会改变窗口风格的C#的API。比如如果WinForm，在这个函数之后在调用一下<code>FormBorderStyle = FormBorderStyle.Sizable;</code>，或者WPF调用一下<code>ResizeMode = System.Windows.ResizeMode.CanResize;</code>，那么最大化和最小化按钮就又回来了。</p>]]></content>
    
    <summary type="html">
    
      本文介绍了如何通过SetWindowLongPtr和GetWindowLongPtr、SetWindowPos来去掉WinForm或者WPF的最大化和最小化按钮。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>Visual C++中的编译器优化</title>
    <link href="http://fresky.github.io/2015/07/13/visual-cpp-compiler-optimization/"/>
    <id>http://fresky.github.io/2015/07/13/visual-cpp-compiler-optimization/</id>
    <published>2015-07-13T04:48:00.000Z</published>
    <updated>2019-12-20T08:29:07.304Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://msdn.microsoft.com/en-us/magazine/dn904673.aspx" target="_blank" rel="noopener">Compilers - What Every Programmer Should Know About Compiler Optimizations</a>和<a href="https://msdn.microsoft.com/en-us/magazine/dn973015.aspx" target="_blank" rel="noopener">Part 2</a>介绍了Visual C++中的编译器优化。摘录几个定义如下：</p><p>链接期代码生成（Link-Time Code Generation）：C++编译器本来是编译单个文件，所以优化只能基于单个源文件。但是如果打开这个LTCG之后，编译会生成C中间语音（C Inter­mediate Language），然后链接器会做全程序优化（Whole Program Optimization）。Visual Studio的Release配置就是这个LTCG。</p><p>循环优化（Loop Optimization）：主要包括1）循环展开，2）自动向量化，3）循环不变量代码移动。</p><p>寄存器分配优化（Register Allocation）。x86处理器有8个32位通用寄存器，8个80位的浮点数寄存器，8个128位向量寄存器。64位处理器有16个64位通用寄存器，8个80位浮点数寄存器和至少16个向量寄存器（每个至少128位）。因为寄存器没有地址，所以如果一个变量需要取地址，不会放在寄存器里。</p><p>指令调度优化（Instruction Scheduling）。基于编译的指令重排（instruction reordering），基于硬件的乱序执行（out-of-order）。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/magazine/dn904673.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Compilers - What Every Programmer Should
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>如何用C#检查硬盘是否是固态硬盘SSD</title>
    <link href="http://fresky.github.io/2015/07/09/check-ssd-disk-with-csharp/"/>
    <id>http://fresky.github.io/2015/07/09/check-ssd-disk-with-csharp/</id>
    <published>2015-07-09T14:00:48.000Z</published>
    <updated>2019-12-20T08:29:07.304Z</updated>
    
    <content type="html"><![CDATA[<p>在我的上一篇文章<a href="/2015/07/08/know-your-computer-from-csharp/">用C#来查看电脑硬件和系统信息</a>中介绍了<code>Environment</code>和<code>ManagementClass</code>两个类。那我们能不能通过这两个类得到硬盘是不是固态硬盘SSD呢？答案是否定的。</p><p>那我们怎么才能判断一个硬盘是不是固态硬盘SSD呢？我们知道Windows的磁盘碎片整理对SSD是默认关闭的，那么Windows是怎么判断硬盘是不是固态硬盘呢？<a href="http://blogs.technet.com/b/filecab/archive/2009/11/25/windows-7-disk-defragmenter-user-interface-overview.aspx" target="_blank" rel="noopener">Windows 7 Disk Defragmenter User Interface Overview</a>介绍了磁盘碎片整理的算法，它通过下面两种方式来判断硬盘是不是固态硬盘SSD。</p><ol><li>Volumes on disks whose driver reports “no seek penalty”.就是说如果硬盘没有查找开销，那么就认为是SSD。具体定义如下：</li></ol><blockquote><p>Disk port driver needs to send a valid response to <code>IOCTL_STORAGE_QUERY_PROPERTY</code> call. Disk Defragmenter issues <code>IOCTL_STORAGE_QUERY_PROPERTY</code> request with <code>QueryType = PropertyStandardQuery</code> and <code>PropertyId = StorageDeviceSeekPenaltyProperty</code>.</p></blockquote><blockquote><p>A valid response involves populating a <code>DEVICE_SEEK_PENALTY_DESCRIPTOR</code> structure with accurate version and size data. If the <code>IncursSeekPenalty</code> member is set to <code>false</code>, the disk is considered a SSD.</p></blockquote><ol start="2"><li>Volumes on ATA/SATA disks that report a nominal media rotation rate of 1.就是说如果硬盘的转速是1，就认为是固态硬盘SSD。具体定义如下：</li></ol><blockquote><p>If the port driver does not return valid data for <code>StorageDeviceSeekPenaltyProperty</code>, Disk Defragmenter looks at the result of directly querying the device through the ATA IDENTIFY DEVICE command. Defragmenter issues <code>IOCTL_ATA_PASS_THROUGH</code> request and checks <code>IDENTIFY_DEVICE_DATA</code> structure. If the <code>NomimalMediaRotationRate</code> is set to 1, this disk is considered a SSD.</p></blockquote><blockquote><p>The latest SSDs will respond to the command by setting word 217 (which is used for reporting the nominal media rotation rate to 1).  The word 217 was introduced in 2007 in the ATA8-ACS specification.</p></blockquote><p>我们也可以用类似的方法来判断硬盘是不是SSD，下面的代码修改自<a href="https://emoacht.wordpress.com/2012/11/06/csharp-ssd/" target="_blank" rel="noopener"><br>Tell whether SSD or not in C#</a>。主要函数是<code>isSSDBySeekPenalty</code>和<code>isSSDByNominalMediaRotationRate</code>。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br></pre></td><td class="code"><pre><span class="line">// For CreateFile to get handle to drive</span><br><span class="line">private const uint GENERIC_READ = 0x80000000;</span><br><span class="line">private const uint GENERIC_WRITE = 0x40000000;</span><br><span class="line">private const uint FILE_SHARE_READ = 0x00000001;</span><br><span class="line">private const uint FILE_SHARE_WRITE = 0x00000002;</span><br><span class="line">private const uint OPEN_EXISTING = 3;</span><br><span class="line">private const uint FILE_ATTRIBUTE_NORMAL = 0x00000080;</span><br><span class="line"></span><br><span class="line">// CreateFile to get handle to drive</span><br><span class="line">[DllImport(&quot;kernel32.dll&quot;, SetLastError = true)]</span><br><span class="line">private static extern SafeFileHandle CreateFileW(</span><br><span class="line">[MarshalAs(UnmanagedType.LPWStr)]</span><br><span class="line">string lpFileName,</span><br><span class="line">uint dwDesiredAccess,</span><br><span class="line">uint dwShareMode,</span><br><span class="line">IntPtr lpSecurityAttributes,</span><br><span class="line">uint dwCreationDisposition,</span><br><span class="line">uint dwFlagsAndAttributes,</span><br><span class="line">IntPtr hTemplateFile);</span><br><span class="line"></span><br><span class="line">// For control codes</span><br><span class="line">private const uint FILE_DEVICE_MASS_STORAGE = 0x0000002d;</span><br><span class="line">private const uint IOCTL_STORAGE_BASE = FILE_DEVICE_MASS_STORAGE;</span><br><span class="line">private const uint FILE_DEVICE_CONTROLLER = 0x00000004;</span><br><span class="line">private const uint IOCTL_SCSI_BASE = FILE_DEVICE_CONTROLLER;</span><br><span class="line">private const uint METHOD_BUFFERED = 0;</span><br><span class="line">private const uint FILE_ANY_ACCESS = 0;</span><br><span class="line">private const uint FILE_READ_ACCESS = 0x00000001;</span><br><span class="line">private const uint FILE_WRITE_ACCESS = 0x00000002;</span><br><span class="line"></span><br><span class="line">private static uint CTL_CODE(uint DeviceType, uint Function,</span><br><span class="line"> uint Method, uint Access)</span><br><span class="line">&#123;</span><br><span class="line">return ((DeviceType &lt;&lt; 16) | (Access &lt;&lt; 14) |</span><br><span class="line">(Function &lt;&lt; 2) | Method);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// For DeviceIoControl to check no seek penalty</span><br><span class="line">private const uint StorageDeviceSeekPenaltyProperty = 7;</span><br><span class="line">private const uint PropertyStandardQuery = 0;</span><br><span class="line"></span><br><span class="line">[StructLayout(LayoutKind.Sequential)]</span><br><span class="line">private struct STORAGE_PROPERTY_QUERY</span><br><span class="line">&#123;</span><br><span class="line">public uint PropertyId;</span><br><span class="line">public uint QueryType;</span><br><span class="line">[MarshalAs(UnmanagedType.ByValArray, SizeConst = 1)]</span><br><span class="line">public byte[] AdditionalParameters;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[StructLayout(LayoutKind.Sequential)]</span><br><span class="line">private struct DEVICE_SEEK_PENALTY_DESCRIPTOR</span><br><span class="line">&#123;</span><br><span class="line">public uint Version;</span><br><span class="line">public uint Size;</span><br><span class="line">[MarshalAs(UnmanagedType.U1)]</span><br><span class="line">public bool IncursSeekPenalty;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// DeviceIoControl to check no seek penalty</span><br><span class="line">[DllImport(&quot;kernel32.dll&quot;, EntryPoint = &quot;DeviceIoControl&quot;,</span><br><span class="line">   SetLastError = true)]</span><br><span class="line">[return: MarshalAs(UnmanagedType.Bool)]</span><br><span class="line">private static extern bool DeviceIoControl(</span><br><span class="line">SafeFileHandle hDevice,</span><br><span class="line">uint dwIoControlCode,</span><br><span class="line">ref STORAGE_PROPERTY_QUERY lpInBuffer,</span><br><span class="line">uint nInBufferSize,</span><br><span class="line">ref DEVICE_SEEK_PENALTY_DESCRIPTOR lpOutBuffer,</span><br><span class="line">uint nOutBufferSize,</span><br><span class="line">out uint lpBytesReturned,</span><br><span class="line">IntPtr lpOverlapped);</span><br><span class="line"></span><br><span class="line">// For DeviceIoControl to check nominal media rotation rate</span><br><span class="line">private const uint ATA_FLAGS_DATA_IN = 0x02;</span><br><span class="line"></span><br><span class="line">[StructLayout(LayoutKind.Sequential)]</span><br><span class="line">private struct ATA_PASS_THROUGH_EX</span><br><span class="line">&#123;</span><br><span class="line">public ushort Length;</span><br><span class="line">public ushort AtaFlags;</span><br><span class="line">public byte PathId;</span><br><span class="line">public byte TargetId;</span><br><span class="line">public byte Lun;</span><br><span class="line">public byte ReservedAsUchar;</span><br><span class="line">public uint DataTransferLength;</span><br><span class="line">public uint TimeOutValue;</span><br><span class="line">public uint ReservedAsUlong;</span><br><span class="line">public IntPtr DataBufferOffset;</span><br><span class="line">[MarshalAs(UnmanagedType.ByValArray, SizeConst = 8)]</span><br><span class="line">public byte[] PreviousTaskFile;</span><br><span class="line">[MarshalAs(UnmanagedType.ByValArray, SizeConst = 8)]</span><br><span class="line">public byte[] CurrentTaskFile;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[StructLayout(LayoutKind.Sequential)]</span><br><span class="line">private struct ATAIdentifyDeviceQuery</span><br><span class="line">&#123;</span><br><span class="line">public ATA_PASS_THROUGH_EX header;</span><br><span class="line">[MarshalAs(UnmanagedType.ByValArray, SizeConst = 256)]</span><br><span class="line">public ushort[] data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// DeviceIoControl to check nominal media rotation rate</span><br><span class="line">[DllImport(&quot;kernel32.dll&quot;, EntryPoint = &quot;DeviceIoControl&quot;,</span><br><span class="line">   SetLastError = true)]</span><br><span class="line">[return: MarshalAs(UnmanagedType.Bool)]</span><br><span class="line">private static extern bool DeviceIoControl(</span><br><span class="line">SafeFileHandle hDevice,</span><br><span class="line">uint dwIoControlCode,</span><br><span class="line">ref ATAIdentifyDeviceQuery lpInBuffer,</span><br><span class="line">uint nInBufferSize,</span><br><span class="line">ref ATAIdentifyDeviceQuery lpOutBuffer,</span><br><span class="line">uint nOutBufferSize,</span><br><span class="line">out uint lpBytesReturned,</span><br><span class="line">IntPtr lpOverlapped);</span><br><span class="line"></span><br><span class="line">// For error message</span><br><span class="line">private const uint FORMAT_MESSAGE_FROM_SYSTEM = 0x00001000;</span><br><span class="line"></span><br><span class="line">[DllImport(&quot;kernel32.dll&quot;, SetLastError = true)]</span><br><span class="line">static extern uint FormatMessage(</span><br><span class="line">uint dwFlags,</span><br><span class="line">IntPtr lpSource,</span><br><span class="line">uint dwMessageId,</span><br><span class="line">uint dwLanguageId,</span><br><span class="line">StringBuilder lpBuffer,</span><br><span class="line">uint nSize,</span><br><span class="line">IntPtr Arguments);</span><br><span class="line"></span><br><span class="line">// Method for error message</span><br><span class="line">private static string GetErrorMessage(int code)</span><br><span class="line">&#123;</span><br><span class="line">StringBuilder message = new StringBuilder(255);</span><br><span class="line"></span><br><span class="line">FormatMessage(</span><br><span class="line">  FORMAT_MESSAGE_FROM_SYSTEM,</span><br><span class="line">  IntPtr.Zero,</span><br><span class="line">  (uint)code,</span><br><span class="line">  0,</span><br><span class="line">  message,</span><br><span class="line">  (uint)message.Capacity,</span><br><span class="line">  IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">return message.ToString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Method for no seek penalty</span><br><span class="line">private static bool isSSDBySeekPenalty(string logicalDrive)</span><br><span class="line">&#123;</span><br><span class="line">string sDrive = &quot;\\\\.\\&quot; + logicalDrive + &quot;:&quot;;</span><br><span class="line"></span><br><span class="line">SafeFileHandle hDrive = CreateFileW(</span><br><span class="line">sDrive,</span><br><span class="line">0, // No access to drive</span><br><span class="line">FILE_SHARE_READ | FILE_SHARE_WRITE,</span><br><span class="line">IntPtr.Zero,</span><br><span class="line">OPEN_EXISTING,</span><br><span class="line">FILE_ATTRIBUTE_NORMAL,</span><br><span class="line">IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">if (hDrive == null || hDrive.IsInvalid)</span><br><span class="line">&#123;</span><br><span class="line">string message = GetErrorMessage(Marshal.GetLastWin32Error());</span><br><span class="line">Console.WriteLine(&quot;CreateFile failed. &quot; + message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">uint IOCTL_STORAGE_QUERY_PROPERTY = CTL_CODE(</span><br><span class="line">IOCTL_STORAGE_BASE, 0x500,</span><br><span class="line">METHOD_BUFFERED, FILE_ANY_ACCESS); // From winioctl.h</span><br><span class="line"></span><br><span class="line">STORAGE_PROPERTY_QUERY query_seek_penalty = new STORAGE_PROPERTY_QUERY();</span><br><span class="line">query_seek_penalty.PropertyId = StorageDeviceSeekPenaltyProperty;</span><br><span class="line">query_seek_penalty.QueryType = PropertyStandardQuery;</span><br><span class="line"></span><br><span class="line">DEVICE_SEEK_PENALTY_DESCRIPTOR query_seek_penalty_desc = new DEVICE_SEEK_PENALTY_DESCRIPTOR();</span><br><span class="line"></span><br><span class="line">uint returned_query_seek_penalty_size;</span><br><span class="line"></span><br><span class="line">bool query_seek_penalty_result = DeviceIoControl(</span><br><span class="line">hDrive,</span><br><span class="line">IOCTL_STORAGE_QUERY_PROPERTY,</span><br><span class="line">ref query_seek_penalty,</span><br><span class="line">(uint)Marshal.SizeOf(query_seek_penalty),</span><br><span class="line">ref query_seek_penalty_desc,</span><br><span class="line">(uint)Marshal.SizeOf(query_seek_penalty_desc),</span><br><span class="line">out returned_query_seek_penalty_size,</span><br><span class="line">IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">hDrive.Close();</span><br><span class="line"></span><br><span class="line">if (query_seek_penalty_result == false)</span><br><span class="line">&#123;</span><br><span class="line">string message = GetErrorMessage(Marshal.GetLastWin32Error());</span><br><span class="line">Console.WriteLine(&quot;DeviceIoControl failed. &quot; + message);</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">if (query_seek_penalty_desc.IncursSeekPenalty == false)</span><br><span class="line">&#123;</span><br><span class="line">return true;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Method for nominal media rotation rate</span><br><span class="line">// (Administrative privilege is required)</span><br><span class="line">private static bool isSSDByNominalMediaRotationRate(string logicalDrive)</span><br><span class="line">&#123;</span><br><span class="line">string sDrive = &quot;\\\\.\\&quot; + logicalDrive + &quot;:&quot;;</span><br><span class="line">SafeFileHandle hDrive = CreateFileW(</span><br><span class="line">sDrive,</span><br><span class="line">GENERIC_READ | GENERIC_WRITE, // Administrative privilege is required</span><br><span class="line">FILE_SHARE_READ | FILE_SHARE_WRITE,</span><br><span class="line">IntPtr.Zero,</span><br><span class="line">OPEN_EXISTING,</span><br><span class="line">FILE_ATTRIBUTE_NORMAL,</span><br><span class="line">IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">if (hDrive == null || hDrive.IsInvalid)</span><br><span class="line">&#123;</span><br><span class="line">string message = GetErrorMessage(Marshal.GetLastWin32Error());</span><br><span class="line">Console.WriteLine(&quot;CreateFile failed. &quot; + message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">uint IOCTL_ATA_PASS_THROUGH = CTL_CODE(</span><br><span class="line">IOCTL_SCSI_BASE, 0x040b, METHOD_BUFFERED,</span><br><span class="line">FILE_READ_ACCESS | FILE_WRITE_ACCESS); // From ntddscsi.h</span><br><span class="line"></span><br><span class="line">ATAIdentifyDeviceQuery id_query = new ATAIdentifyDeviceQuery();</span><br><span class="line">id_query.data = new ushort[256];</span><br><span class="line"></span><br><span class="line">id_query.header.Length = (ushort)Marshal.SizeOf(id_query.header);</span><br><span class="line">id_query.header.AtaFlags = (ushort)ATA_FLAGS_DATA_IN;</span><br><span class="line">id_query.header.DataTransferLength =</span><br><span class="line">(uint)(id_query.data.Length * 2); // Size of &quot;data&quot; in bytes</span><br><span class="line">id_query.header.TimeOutValue = 3; // Sec</span><br><span class="line">id_query.header.DataBufferOffset = (IntPtr)Marshal.OffsetOf(</span><br><span class="line">typeof(ATAIdentifyDeviceQuery), &quot;data&quot;);</span><br><span class="line">id_query.header.PreviousTaskFile = new byte[8];</span><br><span class="line">id_query.header.CurrentTaskFile = new byte[8];</span><br><span class="line">id_query.header.CurrentTaskFile[6] = 0xec; // ATA IDENTIFY DEVICE</span><br><span class="line"></span><br><span class="line">uint retval_size;</span><br><span class="line"></span><br><span class="line">bool result = DeviceIoControl(</span><br><span class="line">hDrive,</span><br><span class="line">IOCTL_ATA_PASS_THROUGH,</span><br><span class="line">ref id_query,</span><br><span class="line">(uint)Marshal.SizeOf(id_query),</span><br><span class="line">ref id_query,</span><br><span class="line">(uint)Marshal.SizeOf(id_query),</span><br><span class="line">out retval_size,</span><br><span class="line">IntPtr.Zero);</span><br><span class="line"></span><br><span class="line">hDrive.Close();</span><br><span class="line"></span><br><span class="line">if (result == false)</span><br><span class="line">&#123;</span><br><span class="line">string message = GetErrorMessage(Marshal.GetLastWin32Error());</span><br><span class="line">Console.WriteLine(&quot;DeviceIoControl failed. &quot; + message);</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">// Word index of nominal media rotation rate</span><br><span class="line">// (1 means non-rotate device)</span><br><span class="line">const int kNominalMediaRotRateWordIndex = 217;</span><br><span class="line"></span><br><span class="line">if (id_query.data[kNominalMediaRotRateWordIndex] == 1)</span><br><span class="line">&#123;</span><br><span class="line">return true;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      本文介绍了如何用C#来查看硬盘是不是“no seek penalty”，或者nominal media rotation rate是1，从而判断硬盘是不是固态硬盘SSD。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>用C#来查看电脑硬件和系统信息</title>
    <link href="http://fresky.github.io/2015/07/08/know-your-computer-from-csharp/"/>
    <id>http://fresky.github.io/2015/07/08/know-your-computer-from-csharp/</id>
    <published>2015-07-08T14:53:13.000Z</published>
    <updated>2019-12-20T08:29:07.303Z</updated>
    
    <content type="html"><![CDATA[<p>C#中有几个API可以很方便的查看电脑硬件和系统信息。</p><h1 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a><code>Environment</code></h1><p>下面的示例程序展示了从中<a href="https://msdn.microsoft.com/en-us/library/System.Environment%28v=vs.110%29.aspx" target="_blank" rel="noopener"><code>Environment</code></a>我们能拿到哪些东西。比如  </p><ol><li><code>OSVersion</code>告诉我们操作系统的版本号。  </li><li><code>GetLogicalDrives</code>可以告诉我们现在都有哪些盘符了。  </li><li><code>Is64BitOperatingSystem</code>告诉我们是不是64位的系统。  </li><li><code>ProcessorCount</code>告诉我们有几个CPU。  </li><li><code>GetEnvironmentVariables</code>告诉我们现在的环境变量都有哪些，我们也可以只看进程的，用户的，机器的。  </li><li><code>GetFolderPath</code>告诉我们<a href="https://msdn.microsoft.com/en-us/library/system.environment.specialfolder%28v=vs.110%29.aspx" target="_blank" rel="noopener">特殊文件夹（SpecialFolder）</a>的位置，包含<code>Desktop</code>、<code>Favorites</code>、<code>ProgramFilesX86</code>、<code>Recent</code>、<code>SystemX86</code>等。  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Console.WriteLine(&quot;------------------------------------------------------&quot;);</span><br><span class="line">Console.WriteLine(&quot;From Environment:&quot;);</span><br><span class="line">Console.WriteLine(&quot;------------------------------------------------------&quot;);</span><br><span class="line">Console.WriteLine(&quot;CommandLine: &quot; + Environment.CommandLine);</span><br><span class="line">Console.WriteLine(&quot;CurrentDirectory: &quot; + Environment.CurrentDirectory);</span><br><span class="line">Console.WriteLine(&quot;CurrentManagedThreadId: &quot; + Environment.CurrentManagedThreadId);</span><br><span class="line">Console.WriteLine(&quot;ExitCode: &quot; + Environment.ExitCode);</span><br><span class="line">Console.WriteLine(&quot;LogicalDrives: &quot; + string.Join(&quot;,&quot;, Environment.GetLogicalDrives()));</span><br><span class="line">Console.WriteLine(&quot;HasShutdownStarted: &quot; + Environment.HasShutdownStarted);</span><br><span class="line">Console.WriteLine(&quot;Is64BitOperatingSystem: &quot; + Environment.Is64BitOperatingSystem);</span><br><span class="line">Console.WriteLine(&quot;Is64BitProcess: &quot; + Environment.Is64BitProcess);</span><br><span class="line">Console.WriteLine(&quot;MachineName: &quot; + Environment.MachineName);</span><br><span class="line">Console.WriteLine(&quot;OSVersion: &quot; + Environment.OSVersion);</span><br><span class="line">Console.WriteLine(&quot;ProcessorCount: &quot; + Environment.ProcessorCount);</span><br><span class="line">Console.WriteLine(&quot;StackTrace: &quot; + Environment.StackTrace);</span><br><span class="line">Console.WriteLine(&quot;SystemDirectory: &quot; + Environment.SystemDirectory);</span><br><span class="line">Console.WriteLine(&quot;SystemPageSize: &quot; + Environment.SystemPageSize);</span><br><span class="line">Console.WriteLine(&quot;TickCount: &quot; + Environment.TickCount);</span><br><span class="line">Console.WriteLine(&quot;UserDomainName: &quot; + Environment.UserDomainName);</span><br><span class="line">Console.WriteLine(&quot;UserInteractive: &quot; + Environment.UserInteractive);</span><br><span class="line">Console.WriteLine(&quot;UserName: &quot; + Environment.UserName);</span><br><span class="line">Console.WriteLine(&quot;Version: &quot; + Environment.Version);</span><br><span class="line">Console.WriteLine(&quot;WorkingSet: &quot; + Environment.WorkingSet);</span><br><span class="line">Console.WriteLine(&quot;Desktop: &quot; + Environment.GetFolderPath(Environment.SpecialFolder.Desktop));</span><br><span class="line">Console.WriteLine(&quot;EnvironmentVariables:&quot;);</span><br><span class="line">foreach (DictionaryEntry envVar in Environment.GetEnvironmentVariables())</span><br><span class="line">&#123;</span><br><span class="line">   Console.WriteLine(&quot;&#123;0&#125; : &#123;1&#125;&quot;, envVar.Key, envVar.Value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="ManagementClass"><a href="#ManagementClass" class="headerlink" title="ManagementClass"></a><code>ManagementClass</code></h1><p><a href="https://msdn.microsoft.com/en-us/library/system.management.managementclass%28v=vs.110%29.aspx" target="_blank" rel="noopener"><code>ManagementClass</code></a>可以告诉我们关于逻辑磁盘和CPU的更详细的信息，需要添加reference到<code>System.Management</code>。示例代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">private static void Main(string[] args)</span><br><span class="line">&#123;</span><br><span class="line">OutputManagementClass(&quot;Win32_Processor&quot;);</span><br><span class="line">OutputManagementClass(&quot;Win32_LogicalDisk&quot;);</span><br><span class="line">&#125;</span><br><span class="line">private static void OutputManagementClass(string path)</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(&quot;------------------------------------------------------&quot;);</span><br><span class="line">Console.WriteLine(&quot;From &#123;0&#125;&quot;, path);</span><br><span class="line">foreach (var obj in new ManagementClass(path).GetInstances())</span><br><span class="line">&#123;</span><br><span class="line">foreach (var myProperty in new ManagementClass(path).Properties)</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(&quot;&#123;0&#125;: &#123;1&#125;&quot;, myProperty.Name, obj.Properties[myProperty.Name].Value);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>磁盘方面，我们可以拿到关于磁盘总大小，剩余空间大小，文件系统等信息。</p><p>CPU方面，我们可以拿到主频，缓存大小，CPU物理核数和逻辑核数等信息。</p>]]></content>
    
    <summary type="html">
    
      本文介绍了如何用C#通过Environment和ManagementClass来查看操作系统，环境变量，CPU情况，硬盘情况等。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>如何用Windbg找到被catch住的C++的异常</title>
    <link href="http://fresky.github.io/2015/07/04/how-to-find-the-context-record-for-cpp-exception/"/>
    <id>http://fresky.github.io/2015/07/04/how-to-find-the-context-record-for-cpp-exception/</id>
    <published>2015-07-04T09:39:11.000Z</published>
    <updated>2019-12-20T08:29:07.303Z</updated>
    
    <content type="html"><![CDATA[<p>在调试dump时经常会遇到我们找到的异常并不是第一个异常，而是catch别的异常之后又抛出来的。在这种情况下，我们需要找到第一个异常来确定问题究竟出在那里。</p><p>如果是C#的异常，通常比较简单，在我们运行SOS命令<code>!pe</code>之后，会列出<code>InnerException</code>，然后直接在<code>!pe innerexceptionaddress</code>就好了。</p><p>如果是C++的异常，就没有这么直接了，那怎么能找到C++的Inner Exception呢？</p><h1 id="Windows的CONTEXT定义"><a href="#Windows的CONTEXT定义" class="headerlink" title="Windows的CONTEXT定义"></a>Windows的CONTEXT定义</h1><p>有一个小技巧可以很方便的找到异常。这个技巧基于操作系统的一个特性。当Windows操作系统抛出异常时，它会把抛出异常的<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms679284%28v=vs.85%29.aspx" target="_blank" rel="noopener">上下文（CONTEXT）</a>放进栈里面。所以只要我们能够找到这个CONTEXT，我们就能找到异常的调用栈（call stack）了。</p><p>这个CONTEXT的定义可以在<code>winnt.h</code>中找到，我们也可以直接在Windbg中看看。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">0:048&gt; dt nt!_context</span><br><span class="line">ntdll!_CONTEXT</span><br><span class="line">   +0x000 ContextFlags     : Uint4B</span><br><span class="line">   +0x004 Dr0              : Uint4B</span><br><span class="line">   +0x008 Dr1              : Uint4B</span><br><span class="line">   +0x00c Dr2              : Uint4B</span><br><span class="line">   +0x010 Dr3              : Uint4B</span><br><span class="line">   +0x014 Dr6              : Uint4B</span><br><span class="line">   +0x018 Dr7              : Uint4B</span><br><span class="line">   +0x01c FloatSave        : _FLOATING_SAVE_AREA</span><br><span class="line">   +0x08c SegGs            : Uint4B</span><br><span class="line">   +0x090 SegFs            : Uint4B</span><br><span class="line">   +0x094 SegEs            : Uint4B</span><br><span class="line">   +0x098 SegDs            : Uint4B</span><br><span class="line">   +0x09c Edi              : Uint4B</span><br><span class="line">   +0x0a0 Esi              : Uint4B</span><br><span class="line">   +0x0a4 Ebx              : Uint4B</span><br><span class="line">   +0x0a8 Edx              : Uint4B</span><br><span class="line">   +0x0ac Ecx              : Uint4B</span><br><span class="line">   +0x0b0 Eax              : Uint4B</span><br><span class="line">   +0x0b4 Ebp              : Uint4B</span><br><span class="line">   +0x0b8 Eip              : Uint4B</span><br><span class="line">   +0x0bc SegCs            : Uint4B</span><br><span class="line">   +0x0c0 EFlags           : Uint4B</span><br><span class="line">   +0x0c4 Esp              : Uint4B</span><br><span class="line">   +0x0c8 SegSs            : Uint4B</span><br><span class="line">   +0x0cc ExtendedRegisters : [512] UChar</span><br></pre></td></tr></table></figure></p><p>从上面我们可以看到<code>_CONTEXT</code>的开头是<code>ContextFlags</code>，它的定义也可以在<code>winnt.h</code>中找到，对于32位Windows来说，它的值通常是<code>CONTEXT_ALL</code>，就是<code>0x1003f</code>。<code>winnt.h</code>中的定义如下。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONTEXT_i386    0x00010000L    <span class="comment">// this assumes that i386 and</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONTEXT_i486    0x00010000L    <span class="comment">// i486 have identical context records</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// end_wx86</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONTEXT_CONTROL         (CONTEXT_i386 | 0x00000001L) <span class="comment">// SS:SP, CS:IP, FLAGS, BP</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONTEXT_INTEGER         (CONTEXT_i386 | 0x00000002L) <span class="comment">// AX, BX, CX, DX, SI, DI</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONTEXT_SEGMENTS        (CONTEXT_i386 | 0x00000004L) <span class="comment">// DS, ES, FS, GS</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONTEXT_FLOATING_POINT  (CONTEXT_i386 | 0x00000008L) <span class="comment">// 387 state</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONTEXT_DEBUG_REGISTERS (CONTEXT_i386 | 0x00000010L) <span class="comment">// DB 0-3,6,7</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONTEXT_EXTENDED_REGISTERS  (CONTEXT_i386 | 0x00000020L) <span class="comment">// cpu specific extensions</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONTEXT_FULL (CONTEXT_CONTROL | CONTEXT_INTEGER |\</span></span><br><span class="line">                      CONTEXT_SEGMENTS)</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONTEXT_ALL             (CONTEXT_CONTROL | CONTEXT_INTEGER | CONTEXT_SEGMENTS | \</span></span><br><span class="line">                                 CONTEXT_FLOATING_POINT | CONTEXT_DEBUG_REGISTERS | \</span><br><span class="line">                                 CONTEXT_EXTENDED_REGISTERS)</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONTEXT_XSTATE          (CONTEXT_i386 | 0x00000040L)</span></span><br></pre></td></tr></table></figure><h1 id="在栈上搜索0x1003f来找CONTEXT"><a href="#在栈上搜索0x1003f来找CONTEXT" class="headerlink" title="在栈上搜索0x1003f来找CONTEXT"></a>在栈上搜索<code>0x1003f</code>来找CONTEXT</h1><p>Windbg有一个<code>s</code>的命令用来搜索内存，它的格式为<code>s [-[[Flags]Type]] Range Pattern</code>。通过CONTEXT的定义我们知道了Pattern就是<code>CONTEXT_ALL</code>（也就是<code>0x1003f</code>），那怎么给出当前栈的Range呢。</p><p>Windbg中可以用<code>!teb</code>来看线程环境块（Thread Environment Block），输出如下。里面包含栈的开始StackBase和结束地址StackLimit。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">0:048&gt; !teb</span><br><span class="line">TEB at fff23000</span><br><span class="line">    ExceptionList:        296ae06c</span><br><span class="line">    StackBase:            296b0000</span><br><span class="line">    StackLimit:           296a9000</span><br><span class="line">    SubSystemTib:         00000000</span><br><span class="line">    FiberData:            00001e00</span><br><span class="line">    ArbitraryUserPointer: 00000000</span><br><span class="line">    Self:                 fff23000</span><br><span class="line">    EnvironmentPointer:   00000000</span><br><span class="line">    ClientId:             00001dcc . 000009d0</span><br><span class="line">    RpcHandle:            00000000</span><br><span class="line">    Tls Storage:          0cb43f80</span><br><span class="line">    PEB Address:          fffde000</span><br><span class="line">    LastErrorValue:       0</span><br><span class="line">    LastStatusValue:      0</span><br><span class="line">    Count Owned Locks:    0</span><br><span class="line">    HardErrorMode:        0</span><br></pre></td></tr></table></figure></p><p>这样我们就能用下面的命令在栈上搜索CONTEXT了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s -d poi(@$teb+0x8)  poi(@$teb+0x4) 0x1003f</span><br></pre></td></tr></table></figure></p><p>搜索的结果类似如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0:048&gt; s -d poi(@$teb+0x8)  poi(@$teb+0x4) 0x1003f</span><br><span class="line">296ae428  0001007f 00000000 00000000 00000000  ................</span><br></pre></td></tr></table></figure></p><p>这个时候我们只要运行如下命令就能得到这个CONTEXT对应的函数调用栈（call stack）了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.cxr 296ae428</span><br><span class="line">kbn</span><br></pre></td></tr></table></figure></p><h1 id="在栈上搜索-gs-fs-es-ds寄存器来找CONTEXT"><a href="#在栈上搜索-gs-fs-es-ds寄存器来找CONTEXT" class="headerlink" title="在栈上搜索@gs @fs @es @ds寄存器来找CONTEXT"></a>在栈上搜索<code>@gs @fs @es @ds</code>寄存器来找CONTEXT</h1><p>但是有时候<code>ContextFlags</code>不是<code>CONTEXT_ALL</code>（也就是<code>0x1003f</code>）。我就遇到过是<code>CONTEXT_XSTATE</code>（也就是<code>0x1007f</code>）的情况，所以假如你用上面的搜索命令没有找到任何输出，试试下面这个。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s -d poi(@$teb+0x8)  poi(@$teb+0x4) 0x1007f</span><br></pre></td></tr></table></figure></p><p>那有没有更好的办法能肯定找到CONTEXT呢？我们再去看看<code>ntdll!_CONTEXT</code>的结构吧。我们发现在从<code>0x8c</code>开始，它存放了4个寄存器<code>gs</code>，<code>fs</code>，<code>es</code>和<code>ds</code>的地址。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+0x08c SegGs            : Uint4B</span><br><span class="line">+0x090 SegFs            : Uint4B</span><br><span class="line">+0x094 SegEs            : Uint4B</span><br><span class="line">+0x098 SegDs            : Uint4B</span><br></pre></td></tr></table></figure></p><p>所以我们可以用这四个寄存器地址来搜索了，注意这个搜索到的结果需要<code>-0x8c</code>才是CONTEXT的地址。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s -d poi(@$teb+0x8) poi(@$teb+0x4) @gs @fs @es @ds</span><br></pre></td></tr></table></figure></p><h1 id="用-foreach让这个过程自动化"><a href="#用-foreach让这个过程自动化" class="headerlink" title="用.foreach让这个过程自动化"></a>用<code>.foreach</code>让这个过程自动化</h1><p>也可以结合<code>.foreach</code>命令，自动对每一个搜索到的CONTEXT地址运行<code>.cxr</code>和<code>kbn</code>的命令，如下所示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.foreach (context &#123;s -[w1]d poi(@$teb+0x8) poi(@$teb+0x4) @gs @fs @es @ds&#125;) &#123;.cxr context - 8c; kbn&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      本文介绍了如果用windbg的搜索内存的命令s [-[[Flags]Type]] Range Pattern在栈上寻找上下文CONTEXT，然后通过windbg的切换上下文的命令.cxr来找到C++的异常的调用栈（call stack）信息。
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>图示化各种数据结构和算法是怎么实现的</title>
    <link href="http://fresky.github.io/2015/06/28/algo-visualization/"/>
    <id>http://fresky.github.io/2015/06/28/algo-visualization/</id>
    <published>2015-06-28T13:56:26.000Z</published>
    <updated>2019-12-20T08:29:07.303Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.cs.usfca.edu/~galles/visualization/Algorithms.html" target="_blank" rel="noopener">Data Structure Visualizations</a>用图示的方式展示了各种数据结构和算法是怎么实现的，非常直观。它的<a href="http://www.cs.usfca.edu/~galles/visualization/source.html" target="_blank" rel="noopener">Html5/Javascript的源代码</a>是开源的（FreeBSD license），可以基于这个源代码实现新的算法和数据结构。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.cs.usfca.edu/~galles/visualization/Algorithms.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Data Structure Visualizations&lt;/a&gt;用
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>聊聊LAA（LARGE ADDRESS AWARE）</title>
    <link href="http://fresky.github.io/2015/06/25/start-from-LAA/"/>
    <id>http://fresky.github.io/2015/06/25/start-from-LAA/</id>
    <published>2015-06-24T16:46:30.000Z</published>
    <updated>2019-12-20T08:29:07.302Z</updated>
    
    <content type="html"><![CDATA[<h1 id="什么是LAA（LARGE-ADDRESS-AWARE）"><a href="#什么是LAA（LARGE-ADDRESS-AWARE）" class="headerlink" title="什么是LAA（LARGE ADDRESS AWARE）"></a>什么是LAA（LARGE ADDRESS AWARE）</h1><p>如果我们的应用程序是32位的，那么即使在64位的Windows上运行，默认也最多只能用2G的物理内存。升级程序成64位不是一件特别容易的事情，在升级之前，可以用先LAA（LARGE ADDRESS AWARE）技术来让应用程序可以使用4G内存。</p><p><a href="https://msdn.microsoft.com/en-us/library/wz223b1z.aspx" target="_blank" rel="noopener">LAA（LARGE ADDRESS AWARE）</a>是应用程序的一个选项，它告诉操作系统，这个应用程序可以处理大于2G的内存。</p><h1 id="Windows的内存和地址空间限制"><a href="#Windows的内存和地址空间限制" class="headerlink" title="Windows的内存和地址空间限制"></a>Windows的内存和地址空间限制</h1><p><a href="https://msdn.microsoft.com/en-us/library/aa366778.aspx" target="_blank" rel="noopener">Memory Limits for Windows and Windows Server Releases</a>介绍了Windows各个系统上不同内存类型可用的内存限制，下面表格列举了不同位的应用程序在不同位的操作系统上的内存限制。</p><table><br>    <tbody><br>        <tr><br>            <th>内存类型</th><br>            <th>32位Windows操作系统</th><br>            <th>64位Windows操作系统</th><br>        </tr><br>        <tr><br>            <td><br>                <p>32位程序用户态虚拟地址空间</p><br>            </td><br>            <td><br>                <p>2G</p><br>                <p>最多3G（指定IMAGE_FILE_LARGE_ADDRESS_AWARE和4GT）</p><br>            </td><br>            <td><br>                <p>2G (没指定IMAGE_FILE_LARGE_ADDRESS_AWARE） (默认)</p><br>                <p>4G (指定IMAGE_FILE_LARGE_ADDRESS_AWARE）</p><br>            </td><br>        </tr><br>        <tr><br>            <td><br>                <p>64位程序用户态虚拟地址空间</p><br>            </td><br>            <td><br>                <p>不能运行</p><br>            </td><br>            <td><br>                <p>指定IMAGE_FILE_LARGE_ADDRESS_AWARE(默认):</p><br>                <p>x64:&nbsp;&nbsp;8 TB</p><br>                <p>Intel Itanium-based systems:&nbsp;&nbsp;7 TB</p><br>                <p>Windows&nbsp;8.1 and Windows Server&nbsp;2012&nbsp;R2:&nbsp;&nbsp;128 TB</p><br>                <p>2G (没指定IMAGE_FILE_LARGE_ADDRESS_AWARE）</p><br>            </td><br>        </tr><br>        <tr><br>            <td><br>                <p>内核态虚拟地址空间</p><br>            </td><br>            <td><br>                <p>2G</p><br>                <p>1G到2G （指定4GT）</p><br>            </td><br>            <td><br>                <p>8 TB</p><br>                <p>Windows&nbsp;8.1 and Windows Server&nbsp;2012&nbsp;R2:&nbsp;&nbsp;128 TB</p><br>            </td><br>        </tr><br>    </tbody><br></table><h2 id="什么是4GT（4-Gigabyte-Tuning）"><a href="#什么是4GT（4-Gigabyte-Tuning）" class="headerlink" title="什么是4GT（4 Gigabyte Tuning）"></a>什么是4GT（4 Gigabyte Tuning）</h2><p><a href="https://technet.microsoft.com/en-us/library/cc786709%28WS.10%29.aspx" target="_blank" rel="noopener">4GT</a>也叫<strong>/3GB</strong>开关，是一种允许增加用户态应用程序可用内存大小的技术。32位Windows只能使用最多4G内存，一般是2G内存给内核态，2G内存给用户态。4GT技术通过降低内核态使用的内存（最多降到1G）来增大用户态可以使用的内存。</p><p>4GT只适用于32位Windows。</p><h2 id="什么是PAE（Physical-Address-Extension）"><a href="#什么是PAE（Physical-Address-Extension）" class="headerlink" title="什么是PAE（Physical Address Extension）"></a>什么是PAE（Physical Address Extension）</h2><p><a href="https://msdn.microsoft.com/en-us/library/aa366796.aspx" target="_blank" rel="noopener">PAE（Physical Address Extension）</a>是另外一种处理器的功能，它可以允许特定版本的32位Windows使用超过4G的物理内存。</p><p>PAE只适用于32位Windows。</p><h1 id="如何设置LAA（LARGE-ADDRESS-AWARE）"><a href="#如何设置LAA（LARGE-ADDRESS-AWARE）" class="headerlink" title="如何设置LAA（LARGE ADDRESS AWARE）"></a>如何设置LAA（LARGE ADDRESS AWARE）</h1><h2 id="给C-程序设置LAA（LARGE-ADDRESS-AWARE）"><a href="#给C-程序设置LAA（LARGE-ADDRESS-AWARE）" class="headerlink" title="给C++程序设置LAA（LARGE ADDRESS AWARE）"></a>给C++程序设置LAA（LARGE ADDRESS AWARE）</h2><p>在程序的链接选项中制定<strong>Enalbe Large Addresses</strong>，如下图所示。<br><img src="/images/LAA4CPP.png"></p><h2 id="给C-程序设置LAA（LARGE-ADDRESS-AWARE）-1"><a href="#给C-程序设置LAA（LARGE-ADDRESS-AWARE）-1" class="headerlink" title="给C#程序设置LAA（LARGE ADDRESS AWARE）"></a>给C#程序设置LAA（LARGE ADDRESS AWARE）</h2><p>用<code>editbin</code>命令。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">editbin /LARGEADDRESSAWARE &lt;your exe&gt;</span><br></pre></td></tr></table></figure></p><h1 id="设置LAA对程序做了什么（Windows-PE文件格式简介）"><a href="#设置LAA对程序做了什么（Windows-PE文件格式简介）" class="headerlink" title="设置LAA对程序做了什么（Windows PE文件格式简介）"></a>设置LAA对程序做了什么（Windows PE文件格式简介）</h1><p>上面那些设置到底对应用程序做了什么呢？这就需要了解一些<a href="https://en.wikipedia.org/wiki/Portable_Executable" target="_blank" rel="noopener">Windows Portable Executable</a>文件格式了。PE文件包含下面几个组成部分，详细信息可以参见<a href="http://download.microsoft.com/download/e/b/a/eba1050f-a31d-436b-9281-92cdfeae4b45/pecoff.doc" target="_blank" rel="noopener">Microsoft Portable Executable and Common Object File Format Specification</a>。也可以直接看<code>winnt.h</code>头文件，里面有PE格式的详细定义。</p><p><img src="http://wiki.osdev.org/images/d/dd/PEFigure1.jpg" alt="PE figure from osdev"></p><h2 id="DOS-Stub"><a href="#DOS-Stub" class="headerlink" title="DOS Stub"></a>DOS Stub</h2><p>PE文件的第一个部分是DOS Stub，它包含1个DOS头和一个DOS可执行代码。</p><p>DOS头的开始是<code>e_magic</code>，值一定是<code>0x5A4D</code>（是ASCII码的Mark Zbikowski首字母缩写，Mark Zbikowski是DOS系统的架构师）。DOS头偏移0x3C的位置是<code>e_lfanew (File address of new exe header)</code>，它表明了PE头的位置。可以参加<code>_IMAGE_DOS_HEADER</code>的定义。</p><p>DOS的可执行代码就只是简单的输出<code>&quot;This program cannot be run in DOS mode.&quot;</code>。</p><h2 id="PE头"><a href="#PE头" class="headerlink" title="PE头"></a>PE头</h2><p>通过上面的<code>e_lfanew</code>可以找到PE头，它一开始就是一个固定值<code>0x4550</code>。接着是文件头，定义是<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms680313%28v=vs.85%29.aspx" target="_blank" rel="noopener">IMAGE_FILE_HEADER</a>。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">IMAGE_FILE_HEADER</span> &#123;</span></span><br><span class="line">    WORD    Machine;</span><br><span class="line">    WORD    NumberOfSections;</span><br><span class="line">    DWORD   TimeDateStamp;</span><br><span class="line">    DWORD   PointerToSymbolTable;</span><br><span class="line">    DWORD   NumberOfSymbols;</span><br><span class="line">    WORD    SizeOfOptionalHeader;</span><br><span class="line">    WORD    Characteristics;</span><br><span class="line">&#125; IMAGE_FILE_HEADER, *PIMAGE_FILE_HEADER;</span><br></pre></td></tr></table></figure></p><p>PE头的开始表明程序可以运行的机器类型。它的取值范围是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IMAGE_FILE_MACHINE_I386, 0x014c</span><br><span class="line">IMAGE_FILE_MACHINE_IA64, 0x0200</span><br><span class="line">IMAGE_FILE_MACHINE_AMD64, 0x8664</span><br></pre></td></tr></table></figure></p><p>PE头偏移<code>0x12</code>是<code>Characteristics</code>，它表明了这个应用程序的一些属性。其中一个属性就是<code>IMAGE_FILE_LARGE_ADDRESS_AWARE(0x0020)</code>，它表明这个程序可以处理大于2G的内存。</p><p>设置应用程序的LAA（LARGE ADDRESS AWARE）就是在应用程序的PE头里面设置这个属性。</p><h1 id="如何检查应用程序有没有设置LAA（LARGE-ADDRESS-AWARE）"><a href="#如何检查应用程序有没有设置LAA（LARGE-ADDRESS-AWARE）" class="headerlink" title="如何检查应用程序有没有设置LAA（LARGE ADDRESS AWARE）"></a>如何检查应用程序有没有设置LAA（LARGE ADDRESS AWARE）</h1><p>知道了设置LAA（LARGE ADDRESS AWARE）对程序做了什么，那么怎么检查应用程序有没有设置LAA（LARGE ADDRESS AWARE）就非常简单了，我们只需要检查文件的PE头，看看<code>Characteristics</code>里有没有设置<code>IMAGE_FILE_LARGE_ADDRESS_AWARE(0x0020)</code>这个属性。</p><h2 id="用Dumpbin"><a href="#用Dumpbin" class="headerlink" title="用Dumpbin"></a>用Dumpbin</h2><p>首先可以使用<a href="https://msdn.microsoft.com/en-us/library/c1h23y6c.aspx" target="_blank" rel="noopener">DUMPBIN </a>命令。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dumpbin /headers &lt;your exe&gt;</span><br></pre></td></tr></table></figure></p><p>会列出文件的PE头信息，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FILE HEADER VALUES</span><br><span class="line">             14C machine (x86)</span><br><span class="line">               6 number of sections</span><br><span class="line">        557E68AE time date stamp Mon Jun 15 13:54:54 2015</span><br><span class="line">               0 file pointer to symbol table</span><br><span class="line">               0 number of symbols</span><br><span class="line">              E0 size of optional header</span><br><span class="line">             123 characteristics</span><br><span class="line">                   Relocations stripped</span><br><span class="line">                   Executable</span><br><span class="line">                   Application can handle large (&gt;2GB) addresses</span><br><span class="line">                   32 bit word machine</span><br></pre></td></tr></table></figure></p><h2 id="用PE-Insider"><a href="#用PE-Insider" class="headerlink" title="用PE Insider"></a>用PE Insider</h2><p>也可以使用一些专门的查看PE头的工具来看。比如可以用<a href="http://cerbero.io/peinsider/" target="_blank" rel="noopener">PE Insider</a>，它是一个免费的看PE头的工具，非常方便，如下所示。<br><img src="/images/peinsider.png"></p><p>可以点击Description来看具体的<code>Characteristics</code>，如下所示：<br><img src="/images/peinsider_characteristics.png"></p><h2 id="用代码"><a href="#用代码" class="headerlink" title="用代码"></a>用代码</h2><p>当然我们也可以用代码来打开应用程序检查。下面是C#的示例代码。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">isLargeAware</span>(<span class="params"><span class="keyword">string</span> file</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> DOS_MZ_HEADER = <span class="number">0x5A4D</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> PE_HEADER_OFFSET = <span class="number">0x3C</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> NT_HEADER = <span class="number">0x4550</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> CHARACTERISTICS_OFFSET = <span class="number">0x12</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> IMAGE_FILE_LARGE_ADDRESS_AWARE = <span class="number">0x20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> fileStream = File.OpenRead(file))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> binaryReader = <span class="keyword">new</span> BinaryReader(fileStream))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (binaryReader.ReadInt16() != DOS_MZ_HEADER)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">binaryReader.BaseStream.Position = PE_HEADER_OFFSET;</span><br><span class="line"><span class="keyword">var</span> peLocation = binaryReader.ReadInt32();</span><br><span class="line"></span><br><span class="line">binaryReader.BaseStream.Position = peLocation;</span><br><span class="line"><span class="keyword">if</span> (binaryReader.ReadInt32() != NT_HEADER)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">binaryReader.BaseStream.Position += CHARACTERISTICS_OFFSET;</span><br><span class="line"><span class="keyword">return</span> (binaryReader.ReadInt16() &amp; IMAGE_FILE_LARGE_ADDRESS_AWARE) != <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      本文介绍了什么是LAA（LARGE ADDRESS AWARE），怎么设置LAA，怎么检查LAA。并且介绍了Windows PE格式。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>用wow64exts调试64位任务管理器抓取的32位程序的dump</title>
    <link href="http://fresky.github.io/2015/06/23/debug-32bit-application-s-dump-captured-by-64bit-task-manager/"/>
    <id>http://fresky.github.io/2015/06/23/debug-32bit-application-s-dump-captured-by-64bit-task-manager/</id>
    <published>2015-06-23T05:52:54.000Z</published>
    <updated>2019-12-20T08:29:07.302Z</updated>
    
    <content type="html"><![CDATA[<p>我在之前的博客<a href="/2015/03/16/how-to-capture-dump-file/">如何生成Dump文件</a>中提到过，如果要用任务管理器收集32位应用程序dump的话，一定要确保用的是32位的任务管理器。假设用64位的任务管理器的话，用windbg打开，会发现类似如下的call stack。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">0:000&gt; ~*k</span><br><span class="line"></span><br><span class="line">.  0  Id: 1b00.59d0 Suspend: 1 Teb: 00000000`fffdb000 Unfrozen</span><br><span class="line">Child-SP          RetAddr           Call Site</span><br><span class="line">00000000`0008e2e8 00000000`7443aedc wow64win!NtUserGetMessage+0xa</span><br><span class="line">00000000`0008e2f0 00000000`7448d18f wow64win!whNtUserGetMessage+0x30</span><br><span class="line">00000000`0008e350 00000000`74412776 wow64!Wow64SystemServiceEx+0xd7</span><br><span class="line">00000000`0008ec10 00000000`77c301e4 wow64cpu!ServiceNoTurbo+0x2d</span><br><span class="line">00000000`0008ec18 00000000`74480023 ntdll_77c20000!RtlUserThreadStart</span><br><span class="line">00000000`0008ec20 00000000`00000246 wow64!_imp_memcpy &lt;PERF&gt; (wow64+0x23)</span><br><span class="line">00000000`0008ec28 00000000`0018fff0 0x246</span><br><span class="line">00000000`0008ec30 00000000`0008ec60 0x18fff0</span><br><span class="line">00000000`0008ec38 00000000`00390008 0x8ec60</span><br><span class="line">00000000`0008ec40 00000000`00000000 0x390008</span><br><span class="line"></span><br><span class="line">   1  Id: 1b00.6040 Suspend: 1 Teb: 00000000`fffd8000 Unfrozen</span><br><span class="line">Child-SP          RetAddr           Call Site</span><br><span class="line">00000000`003af0f8 00000000`7441283e wow64cpu!CpupSyscallStub+0x9</span><br><span class="line">00000000`003af100 00000000`77c301e4 wow64cpu!WaitForMultipleObjects32+0x3b</span><br><span class="line">00000000`003af108 00000000`00000023 ntdll_77c20000!RtlUserThreadStart</span><br><span class="line">00000000`003af110 00000000`00000246 0x23</span><br><span class="line">00000000`003af118 00000000`042ffff0 0x246</span><br><span class="line">00000000`003af120 00000000`00000000 0x42ffff0</span><br></pre></td></tr></table></figure><p>可以用<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa384163%28v=vs.85%29.aspx" target="_blank" rel="noopener">!wow64exts.sw</a>命令切换到x86模式下，这样可以看到非托管的call stack，也可以看变量值等。</p><p>需要注意的是对于托管代码，还是没用的，sos不能正确加载，所以看不到托管的调用栈信息。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;我在之前的博客&lt;a href=&quot;/2015/03/16/how-to-capture-dump-file/&quot;&gt;如何生成Dump文件&lt;/a&gt;中提到过，如果要用任务管理器收集32位应用程序dump的话，一定要确保用的是32位的任务管理器。假设用64位的任务管理器的话，用wind
      
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>怎么从代码中拿到栈回溯信息（call stack trace）</title>
    <link href="http://fresky.github.io/2015/06/21/how-to-get-the-call-stack-from-code/"/>
    <id>http://fresky.github.io/2015/06/21/how-to-get-the-call-stack-from-code/</id>
    <published>2015-06-21T13:59:37.000Z</published>
    <updated>2019-12-20T08:29:07.302Z</updated>
    
    <content type="html"><![CDATA[<p>在上一篇博客<a href="/2015/06/21/how-to-attack-the-memory-leak-issue/">调试内存泄漏问题的一些经验</a>中提到过通过gflags设置“Create user mode stack trace database”可以存储生成对象的调用栈信息（call stack trace），这样以后可以很方便的看到每个泄漏的对象是怎么产生的。</p><p>假设我们不用gflags的这个设置，自己在代码中得到栈回溯信息，怎么做呢？</p><h1 id="C-35"><a href="#C-35" class="headerlink" title="C&#35;"></a>C&#35;</h1><p>C#实现这个功能很简单，直接使用<a href="https://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace%28v=vs.110%29.aspx" target="_blank" rel="noopener">System.Diagnostics.StackTrace</a>就行了，唯一要注意的是在创建<code>StackTrace</code>时传<code>true</code>作为参数。示例代码如下：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stackTrace = <span class="keyword">new</span> StackTrace(<span class="literal">true</span>); <span class="comment">// true means capturing source information</span></span><br><span class="line">Console.WriteLine(stackTrace);</span><br></pre></td></tr></table></figure><h1 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h1><p>C++中获取栈回溯信息需要使用<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/bb204633%28v=vs.85%29.aspx" target="_blank" rel="noopener">CaptureStackBackTrace</a>。  </p><p>如果只是在Visual Studio中看的话，Visual Studio 2013已经能自动把指令地址转换成函数名，源代码行数显示在Watch窗口中了。也可以<a href="http://blogs.msdn.com/b/vcblog/archive/2014/01/23/examining-stack-traces-of-objects-using-visual-studio-2013.aspx" target="_blank" rel="noopener">写Natvis来使它显示的更加友好</a>。关于Natvis的使用方法，可以参加我的博客<a href="/2015/06/17/customize-your-debugger-for-cpp-object/">用Natvis定制C++对象在Visual Studio调试时如何显示</a>。</p><p>如果我们想自己得到函数名和源代码行数，相对来说就有点麻烦了，需要使用<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms680578%28v=vs.85%29.aspx" target="_blank" rel="noopener">DbgHelp</a>中的下面几个API：</p><ol><li><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms681366%28v=vs.85%29.aspx" target="_blank" rel="noopener">SymSetOptions</a>：设置Symbol选项，我们需要设置<code>SYMOPT_LOAD_LINES</code>来获取源文件行数信息。  </li><li><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms681351%28v=vs.85%29.aspx" target="_blank" rel="noopener">SymInitialize</a>：初始化Symbol，它的构造函数有3个参数。第一个是进程句柄。第二个是Symbol Path，如果这个参数为<code>NULL</code>，那会从当前工作目录，环境变量的<code>_NT_SYMBOL_PATH</code>和<code>_NT_ALTERNATE_SYMBOL_PATH</code>中加载Symbo。第三个参数是<code>fInvadeProcess</code>，如果这个参数是<code>TURE</code>会对所有module自动调用<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms681352(v=vs.85" target="_blank" rel="noopener">SymLoadModule64</a>.aspx)。  </li><li><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms680696%28v=vs.85%29.aspx" target="_blank" rel="noopener">SymCleanup</a>：释放所有资源。   </li><li><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms681323%28v=vs.85%29.aspx" target="_blank" rel="noopener">SymFromAddr</a>：针对给定地址查询Symbol信息。  </li><li><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms681330%28v=vs.85%29.aspx" target="_blank" rel="noopener">SymGetLineFromAddr64</a>：针对给定地址查询源代码行数。<br><strong>注意DbgHelp的所有函数都是单线程的，所以最好在进程启动的时候调用<code>SymInitialize</code>，进程退出的时候调用<code>SymCleanup</code>。其它所有函数调用都要做好同步。</strong> </li></ol><p>示例代码如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib, <span class="meta-string">"dbghelp.lib"</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;DbgHelp.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StackTrace</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> m_MaxFrameCount = <span class="number">62</span>;</span><br><span class="line"><span class="keyword">int</span> m_FrameCount;</span><br><span class="line"><span class="keyword">void</span>* m_Frames[m_MaxFrameCount];</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">StackTrace() &#123;</span><br><span class="line">m_FrameCount = CaptureStackBackTrace(<span class="number">1</span>, m_MaxFrameCount, m_Frames, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">HANDLE process = GetCurrentProcess();</span><br><span class="line"></span><br><span class="line">SymSetOptions(SYMOPT_LOAD_LINES); <span class="comment">// set symbol option to load the source code lines</span></span><br><span class="line">SymInitialize(process, <span class="literal">NULL</span>, TRUE);  <span class="comment">// init symbol</span></span><br><span class="line"></span><br><span class="line">char buffer[sizeof(SYMBOL_INFO) + MAX_SYM_NAME * sizeof(TCHAR)]; // define the PSYMBOL_INFO</span><br><span class="line">PSYMBOL_INFO symbol = (PSYMBOL_INFO)buffer;</span><br><span class="line">symbol-&gt;SizeOfStruct = <span class="keyword">sizeof</span>(SYMBOL_INFO);</span><br><span class="line">symbol-&gt;MaxNameLen = MAX_SYM_NAME;</span><br><span class="line"></span><br><span class="line">IMAGEHLP_LINE64 line; <span class="comment">// define the IMAGEHLP_LINE64</span></span><br><span class="line">line.SizeOfStruct = <span class="keyword">sizeof</span>(IMAGEHLP_LINE64);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m_FrameCount; i++)</span><br><span class="line">&#123;</span><br><span class="line">DWORD64  dw64Displacement;</span><br><span class="line">SymFromAddr(process, (DWORD64)(m_Frames[i]), &amp;dw64Displacement, symbol); <span class="comment">// get symbol info</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; symbol-&gt;Name;</span><br><span class="line">DWORD dwDisplacement;</span><br><span class="line"><span class="keyword">if</span> (SymGetLineFromAddr64(process, (DWORD64)(m_Frames[i]), &amp;dwDisplacement, &amp;line)) <span class="comment">// get line info</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; symbol-&gt;Name &lt;&lt; <span class="string">", "</span> &lt;&lt; line.FileName &lt;&lt; <span class="string">", line "</span> &lt;&lt; line.LineNumber;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SymCleanup(process);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>会打印如下的输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MyObject::DosomethingMyObject::Dosomething, d:\documents\visual studio 2013\projects\demo\cppdemo\cppdemo.cpp, line 69</span><br><span class="line">wmainwmain, d:\documents\visual studio 2013\projects\demo\cppdemo\cppdemo.cpp, line 147</span><br><span class="line">__tmainCRTStartup__tmainCRTStartup, f:\dd\vctools\crt\crtw32\dllstuff\crtexe.c,line 623</span><br><span class="line">wmainCRTStartupwmainCRTStartup, f:\dd\vctools\crt\crtw32\dllstuff\crtexe.c, line 466</span><br><span class="line">BaseThreadInitThunk</span><br><span class="line">RtlInitializeExceptionChain</span><br><span class="line">RtlInitializeExceptionChain</span><br><span class="line">Press any key to continue . . .</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      本文介绍如何在C++和C#代码中得到当前的栈回溯信息（call stack trace）。C#使用了System.Diagnostics.StackTrace，C++使用了CaptureStackBackTrace和DbgHelp中的SymSetOptions，SymInitialize，SymCleanup，SymFromAddr，SymGetLineFromAddr64。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>调试内存泄漏问题的一些经验</title>
    <link href="http://fresky.github.io/2015/06/21/how-to-attack-the-memory-leak-issue/"/>
    <id>http://fresky.github.io/2015/06/21/how-to-attack-the-memory-leak-issue/</id>
    <published>2015-06-21T06:03:45.000Z</published>
    <updated>2019-12-20T08:29:07.301Z</updated>
    
    <content type="html"><![CDATA[<p>内存泄漏（memory leak）是软件中经常遇到的一类问题，这类问题又是比较难以检测的，通常我们在程序遇到<code>Out Of Memory</code>的异常时才会注意到。拿到<code>Out Of Memory</code>的dump文件后，如何分析dump文件找到内存泄漏的线索又是一个难点。这篇文章分享了一些在Windows平台如何调试，检测C++和C#的内存泄漏的一些经验。</p><h1 id="一、内存泄漏的Dump分析"><a href="#一、内存泄漏的Dump分析" class="headerlink" title="一、内存泄漏的Dump分析"></a>一、内存泄漏的Dump分析</h1><p>通常拿到<code>Out Of Memory</code>的dump之后，用windbg打开，抛出异常的call stack一般是在分配内存时，这个call stack其实意义不大，我们需要知道的是内存为什么被用完了。</p><p>一般第一个要运行的命令是<code>!address -summary</code>，它会给出一个内存情况的总结，如下所示。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">0:000&gt; !address -summary</span><br><span class="line"></span><br><span class="line">--- Usage Summary ---------------- RgnCount ----------- Total Size -------- %ofBusy %ofTotal</span><br><span class="line">Heap                                    340          3c876000 ( 968.461 Mb)  48.38%   47.29%</span><br><span class="line">&lt;unknown&gt;                              2001          2c3b5000 ( 707.707 Mb)  35.36%   34.56%</span><br><span class="line">Image                                  1115          119cf000 ( 281.809 Mb)  14.08%   13.76%</span><br><span class="line">Free                                    544           2e40000 (  46.250 Mb)            2.26%</span><br><span class="line">Stack                                   139           2b00000 (  43.000 Mb)   2.15%    2.10%</span><br><span class="line">Other                                    95             8a000 ( 552.000 kb)   0.03%    0.03%</span><br><span class="line">TEB                                      43             2b000 ( 172.000 kb)   0.01%    0.01%</span><br><span class="line">PEB                                       1              1000 (   4.000 kb)   0.00%    0.00%</span><br><span class="line"></span><br><span class="line">--- Type Summary (for busy) ------ RgnCount ----------- Total Size -------- %ofBusy %ofTotal</span><br><span class="line">MEM_PRIVATE                             889          46725000 (   1.101 Gb)  56.31%   55.04%</span><br><span class="line">MEM_MAPPED                             1686          24707000 ( 583.027 Mb)  29.13%   28.47%</span><br><span class="line">MEM_IMAGE                              1159          12384000 ( 291.516 Mb)  14.56%   14.23%</span><br><span class="line"></span><br><span class="line">--- State Summary ---------------- RgnCount ----------- Total Size -------- %ofBusy %ofTotal</span><br><span class="line">MEM_COMMIT                             3425          717c1000 (   1.773 Gb)  90.71%   88.66%</span><br><span class="line">MEM_RESERVE                             309           b9ef000 ( 185.934 Mb)   9.29%    9.08%</span><br><span class="line">MEM_FREE                                544           2e40000 (  46.250 Mb)            2.26%</span><br><span class="line"></span><br><span class="line">--- Protect Summary (for commit) - RgnCount ----------- Total Size -------- %ofBusy %ofTotal</span><br><span class="line">PAGE_READWRITE                         2300          5e7fd000 (   1.477 Gb)  75.54%   73.83%</span><br><span class="line">PAGE_EXECUTE_READ                       201           abb4000 ( 171.703 Mb)   8.58%    8.38%</span><br><span class="line">PAGE_READONLY                           656           616f000 (  97.434 Mb)   4.87%    4.76%</span><br><span class="line">PAGE_WRITECOPY                          125           20d3000 (  32.824 Mb)   1.64%    1.60%</span><br><span class="line">PAGE_READWRITE|PAGE_GUARD                86             bb000 ( 748.000 kb)   0.04%    0.04%</span><br><span class="line">PAGE_EXECUTE_READWRITE                   44             a4000 ( 656.000 kb)   0.03%    0.03%</span><br><span class="line">PAGE_EXECUTE_WRITECOPY                   13             6f000 ( 444.000 kb)   0.02%    0.02%</span><br><span class="line"></span><br><span class="line">--- Largest Region by Usage ----------- Base Address -------- Region Size ----------</span><br><span class="line">Heap                                         7f30000            fd0000 (  15.813 Mb)</span><br><span class="line">&lt;unknown&gt;                                   12670000           4020000 (  64.125 Mb)</span><br><span class="line">Image                                       68f27000           19cb000 (  25.793 Mb)</span><br><span class="line">Free                                        717f2000             7e000 ( 504.000 kb)</span><br><span class="line">Stack                                        2cf0000             fd000 (1012.000 kb)</span><br><span class="line">Other                                       7efb0000             23000 ( 140.000 kb)</span><br><span class="line">TEB                                         7eeb0000              1000 (   4.000 kb)</span><br><span class="line">PEB                                         7efde000              1000 (   4.000 kb)</span><br></pre></td></tr></table></figure></p><p>第一个部分是使用情况，按照大小排序。通常排第一的不是<code>Heap</code>就是<code>&lt;unkown&gt;</code>。<code>Heap</code>是C++的非托管内存，<code>&lt;unkown&gt;</code>是C#的托管内存。</p><p>第二个部分是类型情况，分了3类，分别是：  </p><ol><li><code>MEM_PRIVATE</code>：当前进程独占的内存。  </li><li><code>MEM_MAPPED</code>：映射到文件的内存，这些文件不属于进程程序本身，比如Memory Mapping File。  </li><li><code>MEM_IMAGE</code>：映射到进程程序的内存，比如程序加载的dll。  </li></ol><p>最后一个部分是最大连续内存，比如上图中我们可以看到现在最大的连续可用内存只有500k了。</p><h2 id="非托管（C-）内存泄漏分析"><a href="#非托管（C-）内存泄漏分析" class="headerlink" title="非托管（C++）内存泄漏分析"></a>非托管（C++）内存泄漏分析</h2><p>如果<code>!address -summary</code>的输出中发现<code>Heap</code>被用掉了很多，那很有可能有C++的内存泄漏，我们需要检查堆（heap）来找到可疑的对象。</p><p>1.通过<code>!heap -s</code>来看堆的使用情况，会把堆按照大小列出来，如下所示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">0:000&gt; !heap -s</span><br><span class="line">LFH Key                   : 0x352f041c</span><br><span class="line">Termination on corruption : DISABLED</span><br><span class="line">  Heap     Flags   Reserv  Commit  Virt   Free  List   UCR  Virt  Lock  Fast </span><br><span class="line">                    (k)     (k)    (k)     (k) length      blocks cont. heap </span><br><span class="line">-----------------------------------------------------------------------------</span><br><span class="line">Virtual block: 39ee0000 - 39ee0000 (size 00000000)</span><br><span class="line">00520000 00000002  619112 617928 619112   1712  2165    95    1      0   LFH</span><br><span class="line">00ef0000 00001002    1088    324   1088      6     5     2    0      0   LFH</span><br><span class="line">02590000 00001002    1088    316   1088     12     7     2    0      0   LFH</span><br><span class="line">02aa0000 00001002    1088    256   1088      4     4     2    0      0   LFH</span><br><span class="line">00340000 00001002      64     12     64      1     2     1    0      0</span><br></pre></td></tr></table></figure><p>2.我们用<code>!heap -stat -h &lt;HeapEntry&gt;</code>来看最大的那个堆，它会列出这个堆上分配的所有对象的统计情况。如果幸运的话我们会看到某个大小的对象数目非常大，占用了很多内存。比如下面的例子中大小为<code>1f64</code>的对象有<code>0x76c6</code>个，占了99%的内存。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0:000&gt; !heap -stat -h 00520000</span><br><span class="line"> heap @ 00520000</span><br><span class="line">group-by: TOTSIZE max-display: 20</span><br><span class="line">    size     #blocks     total     ( %) (percent of total busy bytes)</span><br><span class="line">    1f64 76c6 - e905f58  (99.99)</span><br><span class="line">    1800 1 - 1800  (0.00)</span><br><span class="line">    824 2 - 1048  (0.00)</span><br></pre></td></tr></table></figure><p>3.我们可以用<code>!heap -flt s &lt;ObjSize&gt;</code>来列出所有大小是制定大小的对象。输出结果中的<code>UserPtr</code>就是对象的地址，然后可以用<code>d</code>命令来显示这个地址的内容。如果幸运的话，比如这个地址直接存了个字符串，那就好办多了。<br>4.还有一些情况我们可能能猜到是某些对象泄漏了。比如如果在<code>!address -summary</code>的输出里我们看到<code>MEM_MAPPED</code>大的离谱，而我们程序里所有的MemoryMappingFile都继承自某个基类，那么我们就可以直接看看内存中有多少个这类对象。<br>5.用命令<code>x modulename!*classname*table*</code>来找内存中虚表的地址。<br>6.用命令<code>!heap -srch vtableaddress</code>来找到所有的对象。<br>7.用命令<code>dt modulename!classname objectaddress</code>来看对象的内容是什么，接着就能分析出为什么这些对象有这么多。  </p><h2 id="托管（C-）内存泄漏分析"><a href="#托管（C-）内存泄漏分析" class="headerlink" title="托管（C#）内存泄漏分析"></a>托管（C#）内存泄漏分析</h2><p>如果<code>!address -summary</code>的输出中发现<code>&lt;unkown&gt;</code>被用掉了很多，那很有可能有C#的内存泄漏，调试相对简单。</p><p>1.运行<code>loadby sos mscorwks</code>（.net4之前）或者<code>loadby sos clr</code>（.net4及以后）来加载SOS扩展。<br>2.运行<code>!dumpheap -stat</code>来看托管堆的统计信息，输出如下：</p><p><code>total 976456 objectsStatistics:      MT    Count    TotalSize Class Name71497de4        1           12 System.Runtime.Remoting.Channels.Tcp.TcpClientTransportSinkProvider...</code>输出是按照TotalSize的递增顺序显示的，直接翻到最后一行，看看是哪个对象占用了最大的TotalSize。<br>3.运行<code>!dumpheap -mt &lt;mt&gt;</code>来把内存中这个Method Table的所有对象都列出来。结果的第一列就是对象的地址。<br>4.运行<code>!do &lt;address&gt;</code>来看这个对象的内容是什么。<br>5.运行<code>!gcroot &lt;address&gt;</code>来看这些对象是被谁引用的，这样多半就能找到发生内存泄漏的原因了。  </p><h2 id="GDI句柄超过限制"><a href="#GDI句柄超过限制" class="headerlink" title="GDI句柄超过限制"></a>GDI句柄超过限制</h2><p>还有一种发生<code>Out Of Memory</code>异常的情况是GDI句柄超过限制了，可以看到dump中crash的call stack中是有关句柄操作的。默认情况下Windows的每个进程的GDI句柄额度是10000，可以通过注册表<code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsNT\CurrentVersion\Windows\GDIProcessHandleQuota</code>来修改这个值。</p><p>这种情况相对比较好处理，windows上的<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms724291%28v=vs.85%29.aspx" target="_blank" rel="noopener">GDI对象</a>就这些：Bitmap，Brush，DC，Enhanced metafile，Enhanced-metafile DC，Font，Memory DC，Metafile，Metafile DC，Palette，Pen and extended pen，Region。</p><h1 id="二、内存泄漏的实时调试"><a href="#二、内存泄漏的实时调试" class="headerlink" title="二、内存泄漏的实时调试"></a>二、内存泄漏的实时调试</h1><p>如果可以非常容易重现的话，可以实时调试内存泄漏，这样就会容易很多了。</p><h2 id="非托管内存泄漏检测"><a href="#非托管内存泄漏检测" class="headerlink" title="非托管内存泄漏检测"></a>非托管内存泄漏检测</h2><h3 id="使用VLD来检测内存泄漏。"><a href="#使用VLD来检测内存泄漏。" class="headerlink" title="使用VLD来检测内存泄漏。"></a>使用VLD来检测内存泄漏。</h3><p><a href="https://vld.codeplex.com/" target="_blank" rel="noopener">VLD</a>是一个VC++的开源内存泄漏检测工具，非常易于使用。在调试器中运行程序，会在结束时生成一个内存泄漏的报告，包含内存分配的call stack。</p><h3 id="打开“Create-user-mode-stack-trace-database”，分析dump"><a href="#打开“Create-user-mode-stack-trace-database”，分析dump" class="headerlink" title="打开“Create user mode stack trace database”，分析dump"></a>打开“Create user mode stack trace database”，分析dump</h3><p>可以用gflags打开“Create user mode stack trace database”，如下所示，这样就会记录下来每个对象创建的call stack，可以就可以很容易的查到泄漏对象是怎么创建出来的了。<br><img src="/images/gflags_stack.png"></p><h4 id="使用Windbg的-heap-l命令。"><a href="#使用Windbg的-heap-l命令。" class="headerlink" title="使用Windbg的!heap -l命令。"></a>使用Windbg的<code>!heap -l</code>命令。</h4><ol><li>收集dump，用Windbg打开，然后运行命令<code>.logopen d:\leak.txt</code>打开log。  </li><li>运行<code>!heap -l</code>命令，会把所有泄漏的对象列出来，附带创建的call stack。可以很容易的写个程序来分析这个输出，合并重复的对象，计算总大小。  </li></ol><h4 id="使用Windbg的-heap-p-a-lt-address-gt-命令"><a href="#使用Windbg的-heap-p-a-lt-address-gt-命令" class="headerlink" title="使用Windbg的!heap -p -a &lt;address&gt;命令"></a>使用Windbg的<code>!heap -p -a &lt;address&gt;</code>命令</h4><p>按照上面提到的非托管（C++）内存泄漏分析方法来分析dump，最后找到可以的对象时可以直接运行<code>!heap -p -a &lt;address&gt;</code>命令来看到这个地址的对象的创建call stack。</p><h4 id="使用UMDH"><a href="#使用UMDH" class="headerlink" title="使用UMDH"></a>使用UMDH</h4><p><a href="https://msdn.microsoft.com/en-us/library/ff558947%28v=vs.85%29.aspx" target="_blank" rel="noopener">UMDH</a>是Windows Debugging Tools里的，和Windbg在同一个目录里，可以用UMDH收集多个内存的log，然后比较，找出泄漏的对象。</p><h2 id="托管（C-）内存泄漏检测"><a href="#托管（C-）内存泄漏检测" class="headerlink" title="托管（C#）内存泄漏检测"></a>托管（C#）内存泄漏检测</h2><p>Visual Studio 2013加入了<a href="https://msdn.microsoft.com/en-us/library/dn342825.aspx" target="_blank" rel="noopener">调试托管内存</a>的功能，在打开dump文件后可以选择”Debug Managed Memory”，可以看到托管对象的大小，数目，root等信息。</p><p><img src="https://i-msdn.sec.s-msft.com/dynimg/IC720150.png" alt="Debug Managed Memory"></p><p><img src="https://i-msdn.sec.s-msft.com/dynimg/IC750722.png" alt="Managed Object List"></p><p>也可打开多个dump通过选择“Select baseline”进行内存比较，可以看到内存的变化。</p><p><img src="https://i-msdn.sec.s-msft.com/dynimg/IC720152.png" alt="Compare Managed Memory"></p><h2 id="GDI句柄监测"><a href="#GDI句柄监测" class="headerlink" title="GDI句柄监测"></a>GDI句柄监测</h2><p><a href="http://www.nirsoft.net/utils/gdi_handles.html" target="_blank" rel="noopener">GDIView</a>是一个免费的小工具，可以监测GDI使用情况。</p>]]></content>
    
    <summary type="html">
    
      内存泄漏（memory leak）是软件中经常遇到的一类问题，这类问题又是比较难以检测的，通常我们在程序遇到Out Of Memory的异常时才会注意到。拿到Out Of Memory的dump文件后，如何分析dump文件找到内存泄漏的线索又是一个难点。这篇文章分享了一些在Windows平台如何调试，检测C++和C#的内存泄漏的一些经验。Windbg，VLD，gflags，UMDH，Visual Studio。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>用Natvis定制C++对象在Visual Studio调试时如何显示</title>
    <link href="http://fresky.github.io/2015/06/17/customize-your-debugger-for-cpp-object/"/>
    <id>http://fresky.github.io/2015/06/17/customize-your-debugger-for-cpp-object/</id>
    <published>2015-06-17T14:31:12.000Z</published>
    <updated>2019-12-20T08:29:07.301Z</updated>
    
    <content type="html"><![CDATA[<p>我在之前的博客<a href="/2012/07/16/customize-your-own-debugger-visualizer-in-csharp/">定制自己的Visual Studio的Debugger Visualizer</a>和<a href="/2012/07/13/print-message-to-anywhere-in-visual-studio-print-on-breakpoint/">如何把 Visutal studio中的“print-on-breakpoint”消息打印在程序的任何地方</a>中介绍过如何用<a href="https://msdn.microsoft.com/en-us/library/ms228992%28v=vs.110%29.aspx" target="_blank" rel="noopener">Debugger Display Attributes</a>来定制C#的对象在Visual Studio调试时如何显示，今天介绍一下如何通过<a href="https://msdn.microsoft.com/en-us/library/jj620914.aspx" target="_blank" rel="noopener">Natvis</a>对C++的对象做类似的事情。</p><p>首先看我们的示例的C++代码，一个类是用户，有一个成员变量是姓名，一个成员变量是懂得的技术。Main函数就是创建这个类的对象，并且赋值。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">User(<span class="built_in">string</span> name);</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddSkill</span><span class="params">(<span class="built_in">string</span> skill)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="built_in">string</span> m_Name;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; m_Skills;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">User::User(<span class="built_in">string</span> name)</span><br><span class="line">&#123;</span><br><span class="line">m_Name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> User::AddSkill(<span class="built_in">string</span> skill)</span><br><span class="line">&#123;</span><br><span class="line">m_Skills.push_back(skill);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line"><span class="function">User <span class="title">u</span><span class="params">(<span class="string">"Dawei"</span>)</span></span>;</span><br><span class="line">u.AddSkill(<span class="string">"C++"</span>);</span><br><span class="line">u.AddSkill(<span class="string">"C#"</span>);</span><br><span class="line">    </span><br><span class="line"><span class="function">User <span class="title">u2</span><span class="params">(<span class="string">"Tom"</span>)</span></span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在Main函数<code>return</code>的那一行打个断点，并且把<code>u</code>和<code>u2</code>加到Watch窗口，我们可以看到在Visual Studio中显示如下，这就是Visual Studio默认显示一个对象的方式。</p><img src="/images/natvis1.png"><p>为了让这个对象显示的更加友好，我们可以写一个Natvis文件，告诉Visual Studio如何显示这个对象。我们的Natvis内容如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">AutoVisualizer</span> <span class="attr">xmlns</span>=<span class="string">"http://schemas.microsoft.com/vstudio/debugger/natvis/2010"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Type</span> <span class="attr">Name</span>=<span class="string">"User"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">DisplayString</span> <span class="attr">Condition</span>=<span class="string">"m_Skills._Mylast - m_Skills._Myfirst == 0"</span>&gt;</span>&#123;m_Name&#125; has no skill!<span class="tag">&lt;/<span class="name">DisplayString</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">DisplayString</span>&gt;</span>&#123;m_Name&#125; has &#123;m_Skills._Mylast - m_Skills._Myfirst&#125; skills!<span class="tag">&lt;/<span class="name">DisplayString</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Expand</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ArrayItems</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Size</span>&gt;</span>m_Skills._Mylast - m_Skills._Myfirst<span class="tag">&lt;/<span class="name">Size</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ValuePointer</span>&gt;</span>m_Skills._Myfirst<span class="tag">&lt;/<span class="name">ValuePointer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ArrayItems</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Expand</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">AutoVisualizer</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在这个Natvis中：</p><ol><li><code>Type</code>的<code>Name</code>表明这个Natvis针对那个对象，如果有namespace的话需要用<code>::</code>隔开，比如<code>Windows::UI::Xaml::Controls::TextBox</code>。也可以使用通配符*。  </li><li><code>DisplayString</code>表明这个对象应该怎么显示。可以使用成员变量，但是<strong>不能调用方法</strong>，因为调用方法有可能会有副作用。  </li><li><code>DisplayString</code>可以有条件判断，比如在这个例子中如果<code>m_Skills</code>的大小是0，就输出没有技能，如果不是0，就输出有几项技能。  </li><li><code>Expand</code>用来表明如果展开这个对象，怎么显示。在这个例子中通过<code>ArrayItems</code>来把vector的每个元素都显示出来。  </li><li>还有一些别的用法，比如可以用<code>UIVisualizer</code>来定制一个图像显示，就和我之前的那篇博文效果一样了。    </li></ol><p>把这个Natvis存放在如下位置，Visual Studio就能找到了，每次修改之后不需要重启Visual Studio，只需要重新运行一次Debug就行了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">%VSINSTALLDIR%\Common7\Packages\Debugger\Visualizers (requires admin access)</span><br><span class="line">%USERPROFILE%\My Documents\Visual Studio 2013\Visualizers\</span><br></pre></td></tr></table></figure></p><p>如果发现没有起作用，可以在注册表中加入如下的键值，这样在Visual Studio的Output窗口就可以看到加载Natvis时的错误信息了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\12.0_Config\Debugger]</span><br><span class="line">&quot;EnableNatvisDiagnostics&quot;=dword:00000001</span><br></pre></td></tr></table></figure></p><p>加上这个Natvis之后，在Visual Studio中就可以看到如下的显示了。</p><img src="/images/natvis2.png">]]></content>
    
    <summary type="html">
    
      本文介绍如何使用Visual Studio的Natvis来定制如何在调试时显示C++对象。如果是C#对象，可以直接使用Debugger Display Attributes。
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>Moq4在.NET3.5和.NET4版本之间的差异</title>
    <link href="http://fresky.github.io/2015/06/12/difference-between-moq4-net35-and-net4-version/"/>
    <id>http://fresky.github.io/2015/06/12/difference-between-moq4-net35-and-net4-version/</id>
    <published>2015-06-12T03:14:21.000Z</published>
    <updated>2019-12-20T08:29:07.301Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/Moq/moq4" target="_blank" rel="noopener">Moq</a>是应用最广泛的一个C#的Mock框架。它有一个功能是在Mock一个方法时能根据这个方法的输入参数来设置返回值。如下所示：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mock.Setup(x =&gt; x.DoSomething(It.IsAny&lt;<span class="keyword">string</span>&gt;())).Returns((<span class="keyword">string</span> s) =&gt; s.ToLower());</span><br></pre></td></tr></table></figure></p><p>但是在Moq的版本4之前只支持最多4个参数，在版本4中开始支持最多16个参数。它的实现是通过<code>System.Func</code>来实现的，但是因为.NET4之前没有<code>System.Func</code>，所以Moq4的.NET35版本和.NET40版本会有所差异。</p><p>假设我们需要Mock多于4个参数的方法返回值时，比如如下代码：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mock.Setup(</span><br><span class="line">x =&gt;</span><br><span class="line">x.DoSomething(It.IsAny&lt;<span class="keyword">string</span>&gt;(), It.IsAny&lt;<span class="keyword">string</span>&gt;(), It.IsAny&lt;<span class="keyword">string</span>&gt;(), It.IsAny&lt;<span class="keyword">string</span>&gt;(), It.IsAny&lt;<span class="keyword">string</span>&gt;()).Returns((<span class="keyword">string</span> p1, <span class="keyword">string</span> p2, <span class="keyword">string</span> p3, <span class="keyword">string</span> p4, <span class="keyword">string</span> p5) =&gt; p1+p2+p3+p4+p5);</span><br></pre></td></tr></table></figure></p><p>如果我们的测试项目的.NET版本是4以上，但是在编译时引用的是Moq35，那么在编译时会遇到一个如下的编译警告：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">warning CS1685: The predefined type &apos;System.Func&apos; is defined in multiple assemblies in the global alias;</span><br></pre></td></tr></table></figure></p><p>这个原因是因为Moq35的版本中自带了一个<code>System.Func</code>的定义，如下图所示。但是这个在.NET4以上的版本中已经定义过了。</p><img src="/images/moq35.png"><p>我们忽略这个警告，在运行测试时如果用的是Moq35，那么没有问题，可以通过。但是如果运行时使用的是Moq40，就会遇到这样的错误。这是因为在Moq40的dll里并没有包含<code>System.Func</code>的定义。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Test method *** threw exception: </span><br><span class="line">System.TypeLoadException: Could not load type &apos;System.Func`10&apos; from assembly &apos;Moq, Version=4.0.10827.0, Culture=neutral, PublicKeyToken=69f491c39445e920&apos;.</span><br></pre></td></tr></table></figure><p>如果我们在编译时引用的是Moq40，但是在运行时使用的是Moq35，那么会遇到如下的错误：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Test method *** threw exception: System.MissingMethodException: Method not found: </span><br><span class="line">&apos;Moq.Language.Flow.IReturnsResult`1&lt;!0&gt; Moq.Language.IReturns`2.Returns(System.Func`10&lt;!!0,!!1,!!2,!!3,!!4,!!5,!!6,!!7,!!8,!1&gt;)&apos;.</span><br></pre></td></tr></table></figure></p><p>如果想无论编译用的什么版本，运行时是什么版本，测试都能跑过的话，需要手动Mock超过4个参数的函数，比如如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">internal class Mock : Real</span><br><span class="line">&#123;</span><br><span class="line">public override string DoSomething(string p1, string p2, string p3, string p4, string p5)</span><br><span class="line">&#123;</span><br><span class="line">return p1+p2+p3+p4+p5;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>当然了，这么做仅仅需要在一个因为各种原因混用了Moq35和Moq40的情况下才需要。更好的办法是只用一个Moq版本。</p><p><strong>总结一下：</strong></p><p>Moq4为了实现返回值基于参数的功能支持超过4个参数的方法，导致Moq做了2个dll，分别是基于.NET3.5和.NET4。就是我们下载Moq时看到的Moq35和Moq40两个文件夹。这两个dll在大部分情况下可以混用，但是如果测试方法中包含要Mock超过4个参数的方法，并且需要根据参数值来决定返回值时，混用Moq35和Moq40会导致测试失败。</p>]]></content>
    
    <summary type="html">
    
      Moq4为了实现返回值基于参数的功能支持超过4个参数的方法，导致Moq做了2个dll，分别是基于.NET3.5和.NET4。就是我们下载Moq时看到的Moq35和Moq40两个文件夹。这两个dll在大部分情况下可以混用，但是如果测试方法中包含要Mock超过4个参数的方法，并且需要根据参数值来决定返回值时，混用Moq35和Moq40会导致测试失败。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>TDD中的迭代</title>
    <link href="http://fresky.github.io/2015/06/05/tdd-cyles/"/>
    <id>http://fresky.github.io/2015/06/05/tdd-cyles/</id>
    <published>2015-06-05T01:07:35.000Z</published>
    <updated>2019-12-20T08:29:07.301Z</updated>
    
    <content type="html"><![CDATA[<p>一般人讨论TDD主要是集中在先写测试，还是后写测试上，其实我觉得先写后写都无所谓，重要是要写。另外其实TDD还包含很多别的我认为更重要的东西。<a href="http://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html" target="_blank" rel="noopener">The Cycles of TDD</a>是Uncle Bob说的在TDD中包含的迭代。</p><ol><li>秒级迭代（nano-cycle）。TDD的3个定律，就是说必须有失败的测试在线，然后才能写让测试通过的生产代码。  </li><li>分钟级迭代（micro-cycle）。红-&gt;绿-&gt;重构。就是说先让代码是工作的，然后让代码是对的，接着让代码是快的。  </li><li>10分钟级迭代（mili-cycle）。具体-&gt;抽象。就是说测试代码越写越具体，生产代码越写越抽象。  </li><li>小时级迭代（primary-cycle）。就是检查系统的边界，确保我们的架构是很清晰的。  </li></ol><p>这些迭代是一层为下一层服务，最终的目标是让我们的系统有一个清晰的架构。所以我认为先写测试还是后写测试不重要，重要的是重构，抽象，达到具有清晰边界的好的架构。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;一般人讨论TDD主要是集中在先写测试，还是后写测试上，其实我觉得先写后写都无所谓，重要是要写。另外其实TDD还包含很多别的我认为更重要的东西。&lt;a href=&quot;http://blog.cleancoder.com/uncle-bob/2014/12/17/TheCycles
      
    
    </summary>
    
    
      <category term="Development" scheme="http://fresky.github.io/tags/Development/"/>
    
  </entry>
  
  <entry>
    <title>使用ProcDump在程序没有响应时自动收集dump</title>
    <link href="http://fresky.github.io/2015/06/03/use-procdump-to-detect-hung-window/"/>
    <id>http://fresky.github.io/2015/06/03/use-procdump-to-detect-hung-window/</id>
    <published>2015-06-03T09:39:05.000Z</published>
    <updated>2019-12-20T08:29:07.300Z</updated>
    
    <content type="html"><![CDATA[<p>我在<a href="/2015/03/16/how-to-capture-dump-file/">如何生成Dump文件</a>中提到过可以使用<a href="https://technet.microsoft.com/en-us/sysinternals/dd996900.aspx" target="_blank" rel="noopener">ProcDump</a>根据CPU使用情况，异常情况，程序是否没有反应，性能计数等来收集dump。</p><p>今天举个具体的例子看看怎么用ProcDump来自动收集Hung的dump，ProcDump的<code>-h</code>参数会在window不响应window消息（就是我们通常在应用程序标题栏看到提示说没反应了）超过5秒钟时自动收集一个dump。</p><blockquote><p>-h    Write dump if process has a hung window (does not respond to window messages for at least 5 seconds).</p></blockquote><p>先来一个简单的程序，一个Form，第一个按钮是进入无限循环。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">button1_Click</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">count++;</span><br><span class="line">&#125;</span><br><span class="line">MessageBox.Show(count.ToString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二个按钮是触发一个死锁。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">button2_Click</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Thread t1 = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">lock</span> (a)</span><br><span class="line">&#123;</span><br><span class="line">Thread.Sleep(<span class="number">100</span>);</span><br><span class="line"><span class="keyword">lock</span> (b)</span><br><span class="line">&#123;</span><br><span class="line">MessageBox.Show(<span class="string">"1"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Thread t2 = <span class="keyword">new</span> Thread(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">lock</span> (b)</span><br><span class="line">&#123;</span><br><span class="line">Thread.Sleep(<span class="number">100</span>);</span><br><span class="line"><span class="keyword">lock</span> (a)</span><br><span class="line">&#123;</span><br><span class="line">MessageBox.Show(<span class="string">"2"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">t1.Start();</span><br><span class="line">t2.Start();</span><br><span class="line">t1.Join();</span><br><span class="line">t2.Join();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行程序，然后在命令行运行<code>procdump.exe -h form1.vshost.exe</code>。可以看到如下的输出。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">ProcDump v7.1 - Writes process dump files</span><br><span class="line">Copyright (C) 2009-2014 Mark Russinovich</span><br><span class="line">Sysinternals - www.sysinternals.com</span><br><span class="line">With contributions from Andrew Richards</span><br><span class="line"></span><br><span class="line">Process:               Form1.vshost.exe (13088)</span><br><span class="line">CPU threshold:         n/a</span><br><span class="line">Performance counter:   n/a</span><br><span class="line">Commit threshold:      n/a</span><br><span class="line">Threshold seconds:     n/a</span><br><span class="line">Hung window check:     Enabled</span><br><span class="line">Log debug strings:     Disabled</span><br><span class="line">Exception monitor:     Disabled</span><br><span class="line">Exception filter:      *</span><br><span class="line">Terminate monitor:     Disabled</span><br><span class="line">Cloning type:          Disabled</span><br><span class="line">Concurrent limit:      n/a</span><br><span class="line">Avoid outage:          n/a</span><br><span class="line">Number of dumps:       1</span><br><span class="line">Dump folder:           D:\SysinternalsSuite\</span><br><span class="line">Dump filename/mask:    PROCESSNAME_YYMMDD_HHMMSS</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Press Ctrl-C to end monitoring without terminating the process.</span><br></pre></td></tr></table></figure><p>这表明ProdDump开始监测了，点击第一个按钮，程序hung了。可以看到命令行如下的输出，ProcDump帮我们抓了一个dump。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[17:43:54] Hung Window:</span><br><span class="line">[17:43:54] Dump 1 initiated: D:\SysinternalsSuite\Form1.vshost.exe_150603_174354.dmp</span><br><span class="line">[17:43:55] Dump 1 complete: 11 MB written in 0.3 seconds</span><br><span class="line">[17:43:55] Dump count reached.</span><br></pre></td></tr></table></figure><p>如果点击第二个按钮，程序hung了，但是并没有触发ProcDump。所以ProcDump只能处理不响应的window消息的情况，对于死锁就无能为力了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;我在&lt;a href=&quot;/2015/03/16/how-to-capture-dump-file/&quot;&gt;如何生成Dump文件&lt;/a&gt;中提到过可以使用&lt;a href=&quot;https://technet.microsoft.com/en-us/sysinternals/dd99690
      
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>NASA关于如何写出安全代码的10条军规</title>
    <link href="http://fresky.github.io/2015/05/31/10-safety-rules-from-nasa/"/>
    <id>http://fresky.github.io/2015/05/31/10-safety-rules-from-nasa/</id>
    <published>2015-05-31T07:23:18.000Z</published>
    <updated>2019-12-20T08:29:07.300Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://pixelscommander.com/wp-content/uploads/2014/12/P10.pdf" target="_blank" rel="noopener">The Power of Ten – Rules for Developing Safety Critical Code</a>列出了NASA关于如何写出安全代码的10条规则。</p><ol><li>所有的控制流程非常简单，不能有GOTO，不能有直接或间接的递归。  </li><li>所有的循环都必须有一个固定的上届。比如有一个非常简单的静态检查工具可以证明这个上届不会被超过。  </li><li>在初始化之后不能再用动态内存分配。  </li><li>所有函数都必须可以在1页纸打印出来，就是说不能超过60行。  </li><li>每个函数平均要有2个Assert，Assert都不能有副作用，并且定义为布尔值。  </li><li>数据对象的作用域要定义的尽量小。  </li><li>每个函数调用别的非void函数时，必须检查返回值。每个函数内部必须做参数验证。  </li><li>预处理只能用来包含头文件和简单的宏定义。  </li><li>指针的使用要严格限制。不能超过一层的dereference。不能用函数指针。  </li><li>所有代码都需要能编译通过，没有警告。每天都要运行最先进的静态检查工具，不能有任何警告。  </li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://pixelscommander.com/wp-content/uploads/2014/12/P10.pdf&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;The Power of Ten – Rules for Devel
      
    
    </summary>
    
    
      <category term="Development" scheme="http://fresky.github.io/tags/Development/"/>
    
  </entry>
  
  <entry>
    <title>C#和C++中的float类型</title>
    <link href="http://fresky.github.io/2015/05/24/float-in-csharp-and-cplusplus/"/>
    <id>http://fresky.github.io/2015/05/24/float-in-csharp-and-cplusplus/</id>
    <published>2015-05-24T15:43:11.000Z</published>
    <updated>2019-12-20T08:29:07.300Z</updated>
    
    <content type="html"><![CDATA[<h1 id="浮点数介绍"><a href="#浮点数介绍" class="headerlink" title="浮点数介绍"></a>浮点数介绍</h1><p><a href="http://en.wikipedia.org/wiki/Floating_point" target="_blank" rel="noopener">浮点数（Floating Point）</a>是计算机中用二进制表示实数的一种近似表示方式。就是用科学记数法来表示一个实数，分为3个部分，第一个部分是符号位，第二个部分是指数，第三个部分是尾数。</p><p><a href="http://en.wikipedia.org/wiki/IEEE_floating_point" target="_blank" rel="noopener">IEEE 754</a>是IEEE的计算机表示浮点数的标准。它包含下面几种：</p><table><thead><tr><th>Type</th><th>Sign</th><th>Exponent</th><th>Significand field</th><th>Total bits</th><th>Exponent bias</th><th>Bits precision</th><th>Number of decimal digits</th></tr></thead><tbody><tr><td>Half (IEEE 754-2008)</td><td>1</td><td>5</td><td>10</td><td>16</td><td>15</td><td>11</td><td>~3.3</td></tr><tr><td>Single</td><td>1</td><td>8</td><td>23</td><td>32</td><td>127</td><td>24</td><td>~7.2</td></tr><tr><td>Double</td><td>1</td><td>11</td><td>52</td><td>64</td><td>1023</td><td>53</td><td>~15.9</td></tr><tr><td>x86 extended precision</td><td>1</td><td>15</td><td>64</td><td>80</td><td>16383</td><td>64</td><td>~19.2</td></tr><tr><td>Quad</td><td>1</td><td>15</td><td>112</td><td>128</td><td>16383</td><td>113</td><td>~34.0</td></tr></tbody></table><p>最常见的就是单精度（Single）和双精度（Double），就是C++和C#中的float和double。</p><p>先举个用float来表示实数的例子，比如我们要表示<code>100</code>，换算成2进制就是<code>1100100</code>，那么就是<code>1.1001*10^6</code>。所以符号位是0，指数是6加上Exponent bias（127）是<code>133</code>，换算成2进制是<code>10000101</code>，尾数是<code>1001</code>。那么拼一起就是<code>0 10000101 10010000000000000000000</code>。</p><h1 id="浮点数中的特殊值"><a href="#浮点数中的特殊值" class="headerlink" title="浮点数中的特殊值"></a>浮点数中的特殊值</h1><p>接着我们看看根据定义，float中那些特殊值都是啥。看如下的C++程序，把2进制的表示转换成float数值并且打印出来。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>   binaryPresentation;</span><br><span class="line"><span class="keyword">float</span> floatPresentation;</span><br><span class="line"></span><br><span class="line">binaryPresentation = <span class="number">0x42C80000</span>; <span class="comment">// 0 10000101 10010000000000000000000</span></span><br><span class="line">floatPresentation = *(<span class="keyword">float</span> *)&amp;binaryPresentation;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"100: %g\n"</span>, floatPresentation);</span><br><span class="line"></span><br><span class="line">binaryPresentation = <span class="number">0x00000000</span>; <span class="comment">// 0 00000000 00000000000000000000000</span></span><br><span class="line">floatPresentation = *(<span class="keyword">float</span> *)&amp;binaryPresentation;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Positive ZERO: %g\n"</span>, floatPresentation);</span><br><span class="line"></span><br><span class="line">binaryPresentation = <span class="number">0x80000000</span>; <span class="comment">// 1 00000000 00000000000000000000000</span></span><br><span class="line">floatPresentation = *(<span class="keyword">float</span> *)&amp;binaryPresentation;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Negative ZERO: %g\n"</span>, floatPresentation);</span><br><span class="line"></span><br><span class="line">binaryPresentation = <span class="number">0x00000001</span>; <span class="comment">// 0 00000000 00000000000000000000001</span></span><br><span class="line">floatPresentation = *(<span class="keyword">float</span> *)&amp;binaryPresentation;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Positive Min Denorm Float: %g\n"</span>, floatPresentation);</span><br><span class="line"></span><br><span class="line">binaryPresentation = <span class="number">0x007fffff</span>; <span class="comment">// 0 00000000 11111111111111111111111</span></span><br><span class="line">floatPresentation = *(<span class="keyword">float</span> *)&amp;binaryPresentation;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Positive Max Denorm Float: %g\n"</span>, floatPresentation);</span><br><span class="line"></span><br><span class="line">binaryPresentation = <span class="number">0x00800001</span>; <span class="comment">// 0 00000001 00000000000000000000000</span></span><br><span class="line">floatPresentation = *(<span class="keyword">float</span> *)&amp;binaryPresentation;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Positive Min Normalize float: %g\n"</span>, floatPresentation);</span><br><span class="line"></span><br><span class="line">binaryPresentation = <span class="number">0x7f7fffff</span>; <span class="comment">// 0 11111110 11111111111111111111111</span></span><br><span class="line">floatPresentation = *(<span class="keyword">float</span> *)&amp;binaryPresentation;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Positive Max Normalize float: %g\n"</span>, floatPresentation);</span><br><span class="line"></span><br><span class="line">binaryPresentation = <span class="number">0x7F800000</span>; <span class="comment">// 0 11111111 00000000000000000000000 </span></span><br><span class="line">floatPresentation = *(<span class="keyword">float</span> *)&amp;binaryPresentation;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Positive infinite: %g\n"</span>, floatPresentation);</span><br><span class="line"></span><br><span class="line">binaryPresentation = <span class="number">0xFF800000</span>; <span class="comment">// 1 11111111 00000000000000000000000 </span></span><br><span class="line">floatPresentation = *(<span class="keyword">float</span> *)&amp;binaryPresentation;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Negative infinite: %g\n"</span>, floatPresentation);</span><br></pre></td></tr></table></figure><p>输出如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">100: 100</span><br><span class="line">Positive ZERO: 0</span><br><span class="line">Negative ZERO: -0</span><br><span class="line">Positive Min Denorm Float: 1.4013e-045</span><br><span class="line">Positive Max Denorm Float: 1.17549e-038</span><br><span class="line">Positive Min Normalize float: 1.17549e-038</span><br><span class="line">Positive Max Normalize float: 3.40282e+038</span><br><span class="line">Positive infinite: 1.#INF</span><br><span class="line">Negative infinite: -1.#INF</span><br></pre></td></tr></table></figure><h1 id="C-中的浮点数特殊值"><a href="#C-中的浮点数特殊值" class="headerlink" title="C++中的浮点数特殊值"></a>C++中的浮点数特殊值</h1><p>接着看看C++中的浮点数特殊值是怎么定义的：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"denorm_min: %g\n"</span>, <span class="built_in">std</span>::numeric_limits&lt;<span class="keyword">float</span>&gt;::denorm_min());</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"epsilon: %g\n"</span>, <span class="built_in">std</span>::numeric_limits&lt;<span class="keyword">float</span>&gt;::epsilon());</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"infinity: %g\n"</span>, <span class="built_in">std</span>::numeric_limits&lt;<span class="keyword">float</span>&gt;::infinity());</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"lowest: %g\n"</span>, <span class="built_in">std</span>::numeric_limits&lt;<span class="keyword">float</span>&gt;::lowest());</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"max: %g\n"</span>, <span class="built_in">std</span>::numeric_limits&lt;<span class="keyword">float</span>&gt;::max());</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"min: %g\n"</span>, <span class="built_in">std</span>::numeric_limits&lt;<span class="keyword">float</span>&gt;::min());</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"quiet_NaN: %g\n"</span>, <span class="built_in">std</span>::numeric_limits&lt;<span class="keyword">float</span>&gt;::quiet_NaN());</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"signaling_NaN: %g\n"</span>, <span class="built_in">std</span>::numeric_limits&lt;<span class="keyword">float</span>&gt;::signaling_NaN());</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"round_error: %g\n"</span>, <span class="built_in">std</span>::numeric_limits&lt;<span class="keyword">float</span>&gt;::round_error());</span><br></pre></td></tr></table></figure><p>输出如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">denorm_min: 1.4013e-045</span><br><span class="line">epsilon: 1.19209e-007</span><br><span class="line">infinity: 1.#INF</span><br><span class="line">lowest: -3.40282e+038</span><br><span class="line">max: 3.40282e+038</span><br><span class="line">min: 1.17549e-038</span><br><span class="line">quiet_NaN: 1.#QNAN</span><br><span class="line">signaling_NaN: 1.#QNAN</span><br><span class="line">round_error: 0.5</span><br></pre></td></tr></table></figure></p><h1 id="CSharp中的浮点数特殊值"><a href="#CSharp中的浮点数特殊值" class="headerlink" title="CSharp中的浮点数特殊值"></a>CSharp中的浮点数特殊值</h1><p>再来看看C#中的浮点数特殊值是怎么定义的：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Console.WriteLine(<span class="string">"Epsilon:"</span> + <span class="keyword">float</span>.Epsilon);</span><br><span class="line">Console.WriteLine(<span class="string">"MaxValue:"</span> + <span class="keyword">float</span>.MaxValue);</span><br><span class="line">Console.WriteLine(<span class="string">"MinValue:"</span> + <span class="keyword">float</span>.MinValue);</span><br><span class="line">Console.WriteLine(<span class="string">"NaN:"</span> + <span class="keyword">float</span>.NaN);</span><br><span class="line">Console.WriteLine(<span class="string">"PositiveInfinity:"</span> + <span class="keyword">float</span>.PositiveInfinity);</span><br><span class="line">Console.WriteLine(<span class="string">"NegativeInfinity:"</span> + <span class="keyword">float</span>.NegativeInfinity);</span><br></pre></td></tr></table></figure><p>输出如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Epsilon:1.401298E-45</span><br><span class="line">MaxValue:3.402823E+38</span><br><span class="line">MinValue:-3.402823E+38</span><br><span class="line">NaN:NaN</span><br><span class="line">PositiveInfinity:Infinity</span><br><span class="line">NegativeInfinity:-Infinity</span><br></pre></td></tr></table></figure></p><p>可以看出来C#和C++中关于Epsilon和MinValue的定义是不一样的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;浮点数介绍&quot;&gt;&lt;a href=&quot;#浮点数介绍&quot; class=&quot;headerlink&quot; title=&quot;浮点数介绍&quot;&gt;&lt;/a&gt;浮点数介绍&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Floating_point&quot; targ
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>避免在C#中使用析构函数Finalizer</title>
    <link href="http://fresky.github.io/2015/05/22/avoid-finalizer-in-cshapr/"/>
    <id>http://fresky.github.io/2015/05/22/avoid-finalizer-in-cshapr/</id>
    <published>2015-05-22T13:14:04.000Z</published>
    <updated>2019-12-20T08:29:07.300Z</updated>
    
    <content type="html"><![CDATA[<p>Eric Lippert在When everything you know is wrong <a href="http://ericlippert.com/2015/05/18/when-everything-you-know-is-wrong-part-one/" target="_blank" rel="noopener">part one</a>和<a href="http://ericlippert.com/2015/05/21/when-everything-you-know-is-wrong-part-two/" target="_blank" rel="noopener">part two</a>中列举了一堆关于Finalizer的<strong>错误</strong>认识。</p><ol><li>把一个变量赋值为<code>null</code>会调用它之前指向的对象的Finalizer。  </li><li>调用一个对象的<code>Dispose()</code>函数会调用它的Finalizer。  </li><li>调用<code>GC.Collect()</code>会调用Finalizer。  </li><li>只要一个对象有Finalizer，Finalizer就一定会被调到。  </li><li>只要一个对象有Finalizer，并且没有调过<code>SuppressFinalize</code>，Finalizer就一定会被调到。  </li><li>没有被任何对象引用的对象的Finalizer就一定会被调到。  </li><li>如果一个对象被GC认为没有被任何对象引用，它的Finalizer就一定会被调到。  </li><li>如果对象已经被放到了finalized queue，并且finalize线程已经被调度了，那它的Finalizer就一定会被调到。  </li><li>如果对象已经被放到了finalized queue，并且finalize线程已经被调度了，并且finalizer都运行的很快，而且没有抛出异常，那它的Finalizer就一定会被调到。  </li><li>局部变量只有在出了作用域它的Finalizer才可能会被调到。关于这个，可以参见我的博文<a href="/2013/06/20/where-is-my-timer-csharp-gc/">谁动了我的timer？C#的垃圾回收和调试</a>  </li><li>Finalizer不可能被调用多次。看看这个API：<a href="https://msdn.microsoft.com/en-us/library/system.gc.reregisterforfinalize%28v=vs.110%29.aspx" target="_blank" rel="noopener">GC.ReRegisterForFinalize</a>。  </li><li>被调到Finalizer的对象是死对象。  </li><li>被调到Finalizer的对象是不能被别的对象在指到的。</li><li>运行Finalizer的线程就是创建这个对象的线程。通常都在Finalize线程释放，但是COM的STA对象必须在STA线程释放，这个可以参见我的博文<a href="/2015/03/20/how-to-check-the-finalizer-thread-is-blocked/">如何判断C#的Finalizer线程有没有被阻塞</a>。    </li><li>运行Finalizer的线程就是GC线程。  </li><li>GC判断一个对象是死对象时就会调用它的Finalizer。  </li><li>Finalizer从来不会死锁。  </li><li>Fianlizer的运行顺序是可以预计的。  </li><li>一个被调到Finalizer的对象可以安全访问其它对象。 </li><li>运行Finalizer会释放内存。  </li><li>被调到Finalizer的对象肯定是完全创建好的对象。  </li></ol><p>再次强调一下，上面列举的这些都是<strong>错误</strong>的。Finalizer的坑这么多，那就还是不要用了。</p>]]></content>
    
    <summary type="html">
    
      C#的析构函数Finalizer坑太多，就不要用了。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>C#性能优化的一些技巧</title>
    <link href="http://fresky.github.io/2015/05/17/tips-about-csharp-optimization/"/>
    <id>http://fresky.github.io/2015/05/17/tips-about-csharp-optimization/</id>
    <published>2015-05-17T15:22:22.000Z</published>
    <updated>2019-12-20T08:29:07.299Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.dotnetperls.com/optimization" target="_blank" rel="noopener">.NET Perls: Optimization</a>列举了一些关于C#如何做性能优化的技巧和示例，我挑了几个列在下面，关于范例请参看原文。要注意的是这里提到的一些做法会导致程序可读性和可维护性变差，所以一定要在必要的时候再使用，对大部分非hot path的程序来说，可读性和可维护性通常比性能更重要。</p><ol><li>静态方法，静态成员。非inline的实例方法总是比非inline的静态方法慢。  </li><li>减少函数参数。函数的参数会在函数被调用时复制。  </li><li>使用常量。常量的值会直接放到指令里。  </li><li>inline。.NET 4.5可以用<code>AggressiveInlining</code>来告诉编译器尽量inline。  </li><li><code>switch</code>。<code>switch</code>通常比<code>if</code>快。  </li><li>扁平化数组。一维数组比二维数组快，可以自己计算下标来用一维数组模拟二维数组。  </li><li><code>StringBuilder</code>。如果要把一些字符串连起来，<code>StringBuilder</code>通常会快一些。  </li><li>字符数组。通常使用字符数组比使用字符串快。  </li><li>Byte数组。如果只需要存储ASCII字符，Byte数组会节省空间。  </li><li>数组。直接操作数组通常会比其他集合快。  </li><li>容量。初始化集合是给一个容量会减少扩展集合的开销。  </li><li>避免把<code>Struct</code>作为函数参数。  </li><li>使用查找表。  </li><li>针对<code>int</code>做字符串表示的缓存。如果程序需要经常调用<code>int</code>的<code>ToString</code>，这么做会节省很多时间。  </li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.dotnetperls.com/optimization&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;.NET Perls: Optimization&lt;/a&gt;列举了一些关于C#如何做性能优化的技巧和示例，我挑了几个
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>从bug中学习怎么写代码</title>
    <link href="http://fresky.github.io/2015/05/17/error-database-of-static-analysis-by-pvs-studio/"/>
    <id>http://fresky.github.io/2015/05/17/error-database-of-static-analysis-by-pvs-studio/</id>
    <published>2015-05-17T12:22:25.000Z</published>
    <updated>2019-12-20T08:29:07.299Z</updated>
    
    <content type="html"><![CDATA[<p>我在之前的<a href="/2014/12/22/cpp-quiz-from-pvs-studio/">来试试这个来自静态代码分析工具PVS Studio提供C++的小测验吧</a>中介绍过一个PVS Studio提供的关于C++的小测试，今天再介绍一个PVS Studio提供的bug数据库<a href="http://www.viva64.com/en/examples/" target="_blank" rel="noopener">Errors detected in Open Source projects by the PVS-Studio developers through static analysis </a>。</p><p>这个bug数据库是用PVS Studio来扫描开源项目，然后记录发现的各种bug，可以看看，从bug中学习怎么写代码。</p><p>比如下面几个常见的错误。</p><ol><li>V511，<code>sizeof()</code>运算符返回的是指针的大小，而不是数组的大小。  </li><li>V503，比较一个指针&lt;0。</li></ol>]]></content>
    
    <summary type="html">
    
      从PVS Studio的一个通过静态检查开源项目发现的bug数据库中学习怎么写代码。
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>Code Smell那么多，应该先改哪一个？</title>
    <link href="http://fresky.github.io/2015/05/03/code-smell-priority/"/>
    <id>http://fresky.github.io/2015/05/03/code-smell-priority/</id>
    <published>2015-05-03T01:32:50.000Z</published>
    <updated>2019-12-20T08:29:07.299Z</updated>
    
    <content type="html"><![CDATA[<p>我的日常工作就是对付一个大型的遗留系统，Code Smell遍地都是，但是在有限的时间内，先修改哪些Code Semll更有意义呢？<a href="http://fagblogg.mesan.no/how-bad-is-smelly-code/" target="_blank" rel="noopener">How bad is smelly code?</a>是基于2009年<a href="http://www.simula.no/" target="_blank" rel="noopener">Simula Research Laboratory</a>的一次实验统计出来的一个关于衡量Code Smell的影响的一个报告。他们的实验方法是在历时3个月的项目中，每天访问开发者，并且在开发者的IDE中安装了插件来统计花费在修改每个文件以及搜索、浏览每个文件花费的时间，还有每个文件引入的bug。</p><p>这个统计报告的结果如下：</p><ol><li>God Class非常坏！统计发现大于1844行的文件比600行以内的文件要多花费10倍时间来阅读来修改。所以我们应该把大文件分割成小文件，每个文件最好不要超过1000行。唉，想想我的代码库中动辄上万行的文件。。。  </li><li>Data Clumps还行，坏处不大，建议就先不管了。  </li><li>要坚持接口分离（Interface Segregation）原则，建议把大的接口按照功能分到不同的小的接口。  </li><li>Code Smell经常组团出现，所以建议在修改一个Code Smell之后看看这个文件有没有别的Code Smell，有一个Code Smell的关系图如下。  </li></ol><img src="/images/CodeSmellRelations.jpg">]]></content>
    
    <summary type="html">
    
      God Class和违反Interface Segregation是最严重的两个Code Smell，应该首先改善。
    
    </summary>
    
    
      <category term="Development" scheme="http://fresky.github.io/tags/Development/"/>
    
  </entry>
  
  <entry>
    <title>Windows上常见的集中布尔类型的比较</title>
    <link href="http://fresky.github.io/2015/05/01/compare-of-different-bool-in-windows/"/>
    <id>http://fresky.github.io/2015/05/01/compare-of-different-bool-in-windows/</id>
    <published>2015-05-01T01:53:06.000Z</published>
    <updated>2019-12-20T08:29:07.299Z</updated>
    
    <content type="html"><![CDATA[<p><a href="blogs.msdn.com/b/oldnewthing/archive/2004/12/22/329884.aspx">BOOL vs. VARIANT_BOOL vs. BOOLEAN vs. bool</a>解释了这几种布尔类型的来龙去脉。</p><p>写Windows1.0的时候C风头正盛，所以最老的<code>BOOL</code>是C风格的，它的定义如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">typedef int BOOL;</span><br></pre></td></tr></table></figure></p><p>接着OS/2 NT的开发人员引入了<code>BOOLEAN</code>，定义如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">typedef BYTE BOOLEAN;</span><br></pre></td></tr></table></figure></p><p>然后Visual Basic的人引入了<code>VARIANT_BOOL</code>，定义如下：<strong>注意<code>VARIANT_TRUE</code>是-1！</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">typedef short VARIANT_BOOL;</span><br><span class="line">#define VARIANT_TRUE ((VARIANT_BOOL)-1)</span><br><span class="line">#define VARIANT_FALSE ((VARIANT_BOOL)0)</span><br></pre></td></tr></table></figure></p><p><code>bool</code>是C++的数据类型，但是在Win32中基本看不见，因为Window2是C兼容的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;blogs.msdn.com/b/oldnewthing/archive/2004/12/22/329884.aspx&quot;&gt;BOOL vs. VARIANT_BOOL vs. BOOLEAN vs. bool&lt;/a&gt;解释了这几种布尔类型的来龙去脉。&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>编程语言的类型系统比较</title>
    <link href="http://fresky.github.io/2015/04/29/compare-of-programming-typing-system/"/>
    <id>http://fresky.github.io/2015/04/29/compare-of-programming-typing-system/</id>
    <published>2015-04-29T15:00:30.000Z</published>
    <updated>2019-12-20T08:29:07.298Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.smashingmagazine.com/2013/04/18/introduction-to-programming-type-systems/" target="_blank" rel="noopener">An Introduction To Programming Type Systems</a>比较了一下编程语言中的类型系统。</p><ul><li>没类型： 比如汇编语言，没有类型的概念，所有都只是一个数字  </li><li>弱静态类型： 比如C语言，可以定义类型，但是不强制执行，在不同类型之间自动转换  </li><li>强静态类型： 比如Java，定义类型，并且用虚拟机检查类型  </li><li>强动态类型： 比如Python，JavaScript和Ruby，动态推断类型而不需要定义，然后解释器会强制执行。所有的动态语言必须就是强的，因为不然的话就没有办法解析对象类型了。  </li><li>弱动态类型： 没有。</li></ul><table><thead><tr><th>静态类型说</th><th>动态类型说</th></tr></thead><tbody><tr><td>静态类型编译时就能发现问题，帮你解决麻烦</td><td>静态类型只能检查一部分错误，不能只靠编译器来替代测试</td></tr><tr><td>静态类型因为显示定义了类型，所以易读</td><td>动态类型因为需要写的代码少所以易读</td></tr><tr><td>至少我知道我的代码可以编译</td><td>能编译不代表能运行</td></tr><tr><td>我信任静态类型来保证我的团队写出好的代码</td><td>编译器不能阻止你写烂代码</td></tr><tr><td>没办法调试一个不知道类型的对象</td><td>调试过于复杂的对象等级是不能忍受的</td></tr><tr><td>编译器能发现的bug发生上午，在我的公司，运行时bug发生在半夜，客户那里</td><td>不能缺少测试，单元测试比编译器更可靠</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.smashingmagazine.com/2013/04/18/introduction-to-programming-type-systems/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;An Introduc
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>提问的艺术</title>
    <link href="http://fresky.github.io/2015/04/26/how-to-ask-questions/"/>
    <id>http://fresky.github.io/2015/04/26/how-to-ask-questions/</id>
    <published>2015-04-26T03:46:23.000Z</published>
    <updated>2019-12-20T08:29:07.298Z</updated>
    
    <content type="html"><![CDATA[<p>我们每天都会问别人很多问题，也会被别人问到很多问题，在处理这些问题的时候，我们常常会发现有些问题特别好，可以带来提问者和被问者的深刻思考和非常有建设性的讨论，最后提问者和被问者都得到了学习和提高。而有些问题质量很差，通常提问者和被提问者讨论了半天都不知所云。那么怎么才能提一个好问题呢？怎么才能让自己的问题很快的得到回答？怎么才能让自己的问题对自己和对别人都有用处呢？</p><p>本文参考了这几篇非常有名的关于如何提问的文章，<a href="http://catb.org/esr/faqs/smart-questions.html" target="_blank" rel="noopener">How To Ask Questions The Smart Way</a>（<a href="https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way" target="_blank" rel="noopener">中文版：提問的智慧</a>），<a href="http://xyproblem.info/" target="_blank" rel="noopener">The XY Problem</a>，<a href="http://blogs.msmvps.com/jonskeet/2010/08/29/writing-the-perfect-question/" target="_blank" rel="noopener">Writing the perfect question</a>，结合自己的一些感受做个简单的总结。</p><h1 id="提问前应该做什么"><a href="#提问前应该做什么" class="headerlink" title="提问前应该做什么"></a>提问前应该做什么</h1><ol><li>尝试用在网上搜索一下，起码在问别人之前应该问一下google。如果在一个论坛上提问，搜一下这个问题之前有没有人问过，别让别人回答你<strong>STFW（Search The Fucking Web）</strong>。  </li><li>阅读一下帮助文档，常见问题FAQ和源代码（如果有的话），别让别人回答你<strong>RTFM （Read The Fucking Manual）</strong>。比如<em>函数x是干啥用的？</em>就是一个烂问题。一个好一点的问题是，<em>我看了函数x的代码，看起来它是干yyy的，但是我实际运行的结果发现它干了zzz，请问我是漏掉了什么吗？</em>。  </li><li>如果可以的话，自己应该试一试。比如<em>x和y哪个快？</em>就是一个烂问题。一个好一点的问题是，<em>基于zzzz，我认为x应该比y快，但是我在tttt环境下的测试结果是x比y慢，为什么呢？</em>。  </li></ol><h1 id="怎么提问"><a href="#怎么提问" class="headerlink" title="怎么提问"></a>怎么提问</h1><ol><li>使用描述明确的标题，比如可以使用目标-差异形式的标题。使用准确的分类，标签（tag）等。  </li><li>把你的问题写下来，站在一个被问者的角度看看自己能不能看懂自己的问题。我经常发现当我花时间组织自己的语言来描述清楚自己问题的时候，我已经知道我的答案是什么了，或者至少对如何找到答案有了新的想法。  </li><li>如果是书面提问，斟酌一下字句，最好别有错别字、语法错误。更重要的是，如果粘贴代码，确保你的代码能<strong>编译通过</strong>！！！（除非你标明是伪代码）如果要写输入输出，确保他们是对的！！！  </li><li>注意格式，特别是代码格式。  </li><li>明确标明哪些是症状，哪些是你的猜测。  </li><li>简短，别说废话！！！  </li><li>除非非常肯定，别动辄就说找到了bug，什么东西设计的很烂等等，更可能的情况是你漏掉了什么东西。  </li><li>找到合适的人或者论坛发问。现在<a href="http://stackoverflow.com/" target="_blank" rel="noopener">Stack Overflow</a>已经是提问编程技术类问题的主要管道了。如果是电脑问题，可以去<a href="http://superuser.com/" target="_blank" rel="noopener">superuser</a>，如果是服务器和网管，可以去<a href="http://serverfault.com/" target="_blank" rel="noopener">serverfault</a>。如果针对这个具体问题有相关的论坛、邮件列表的，可以去那里。   </li><li>要有礼貌，没有人有义务回答你的问题（除非你付钱）。  </li></ol><h1 id="问题应该包含什么"><a href="#问题应该包含什么" class="headerlink" title="问题应该包含什么"></a>问题应该包含什么</h1><ol><li>包含问题的背景知识，帮助别人理解你的真正问题。比如你要解决X问题，发现它的一个子问题Y问题你不知道，那么在问Y问题说一下X问题。比如你要解决X问题，你想到了一个解决方案Y，但是你不知道Y怎么做，那么在问Y时说一下你的X问题。  </li><li>包含问题发生的环境（机器配置、操作系统（版本）、编程语言（版本）、IDE（版本）、调试器等和问题相关的一切信息）。  </li><li>包含一个最小的可以重现你的问题的步骤。  </li><li>包含自己尝试了哪些诊断方法，得到了什么输出。尝试过哪些解决方案，遇到的问题分别是什么。自己学到了哪些东西，有哪些是可供被问者参考的。  </li><li>如果自己已经排除了一些解决方案，说明这些解决方案为什么会被排除，这会有利于别人更好的理解你的需求。  </li></ol><h1 id="怎么对待别的人回答"><a href="#怎么对待别的人回答" class="headerlink" title="怎么对待别的人回答"></a>怎么对待别的人回答</h1><ol><li>问题解决后，给出一个总结，这样是对所有帮过你的人的表示尊重，同时也会帮到以后遇到同样问题的人。  </li><li>如果别人的回答你没看懂，在继续追问前先做上面提到的<strong>提问前应该做什么</strong>。</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;我们每天都会问别人很多问题，也会被别人问到很多问题，在处理这些问题的时候，我们常常会发现有些问题特别好，可以带来提问者和被问者的深刻思考和非常有建设性的讨论，最后提问者和被问者都得到了学习和提高。而有些问题质量很差，通常提问者和被提问者讨论了半天都不知所云。那么怎么才能提一
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>来看看破解你的密码需要多长时间</title>
    <link href="http://fresky.github.io/2015/04/26/how-long-to-break-your-password/"/>
    <id>http://fresky.github.io/2015/04/26/how-long-to-break-your-password/</id>
    <published>2015-04-26T02:14:27.000Z</published>
    <updated>2019-12-20T08:29:07.298Z</updated>
    
    <content type="html"><![CDATA[<p>Jeff Atwood的<a href="http://blog.codinghorror.com/your-password-is-too-damn-short/" target="_blank" rel="noopener">Your Password is Too Damn Short</a>再次强调了密码长度的重要性，如果你的密码长度不超过12，那么你的密码就是不安全的。</p><p>可以来<a href="https://www.grc.com/haystack.htm" target="_blank" rel="noopener">GRC’s Interactive Brute Force Password “Search Space” Calculator</a>来看看你的密码需要多长时间被破解。</p><img src="/images/passwordsearchspace.png">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Jeff Atwood的&lt;a href=&quot;http://blog.codinghorror.com/your-password-is-too-damn-short/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Your Password is Too D
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>为什么在Windows有两个临时文件夹的环境变量Temp和Tmp？</title>
    <link href="http://fresky.github.io/2015/04/18/why-there-are-temp-and-tmp-env-variables-in-windows/"/>
    <id>http://fresky.github.io/2015/04/18/why-there-are-temp-and-tmp-env-variables-in-windows/</id>
    <published>2015-04-18T09:58:43.000Z</published>
    <updated>2019-12-20T08:29:07.298Z</updated>
    
    <content type="html"><![CDATA[<p>如果看看windows的环境变量，可以看到<code>Temp</code>和<code>Tmp</code>同时存在，为啥会有两个呢？我们应该使用哪个呢？昨天The Old New Thing的博文<a href="http://blogs.msdn.com/b/oldnewthing/archive/2015/04/17/10608077.aspx" target="_blank" rel="noopener">Why are there both TMP and TEMP environment variables, and which one is right?</a>讲了讲这段历史。</p><p>在MS-DOS之前的操作系统是没有环境变量的，尽管MS-DOS已经有了环境变量的概念，但是因为之前的程序员都没用过，所以刚开始大家都没有用。随着时间的发展，程序员们发现可以用环境变量来存储一些东西比如配置文件，所以不同的先行者们就是用了<code>TEMP</code>和<code>TMP</code>两个不同的环境变量来指明临时文件夹的位置。</p><p>MS-DOS 2.0引入了管道的概念，所以需要有临时文件夹来存放前一个程序的输出，作为第二个程序的输入。MS-DOS的作者选择了使用<code>TEMP</code>来作为临时文件夹的环境变量。当然了，MS-DOS怎么做并不影响别的程序员的行为，还是有人使用<code>TMP</code>。所以很多程序员就想在找临时文件夹时同时看这两个环境变量，比如<code>DISKCOPY</code>和<code>EDIT</code>就会先看<code>TEMP</code>，再看<code>TMP</code>。</p><p>Windows做了差不多的事情，只不过Windows的<code>GetTempFileName</code>函数的作者决定先看<code>TMP</code>，再看<code>TEMP</code>！！！所以现在Windows上的程序员如果使用<code>GetTempFileName</code>函数的话，我们找到的的是<code>TMP</code>这个环境变量。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;如果看看windows的环境变量，可以看到&lt;code&gt;Temp&lt;/code&gt;和&lt;code&gt;Tmp&lt;/code&gt;同时存在，为啥会有两个呢？我们应该使用哪个呢？昨天The Old New Thing的博文&lt;a href=&quot;http://blogs.msdn.com/b/oldn
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>10个提高效率的小技巧</title>
    <link href="http://fresky.github.io/2015/04/16/10-ways-to-improve-productivity/"/>
    <id>http://fresky.github.io/2015/04/16/10-ways-to-improve-productivity/</id>
    <published>2015-04-16T05:11:05.000Z</published>
    <updated>2019-12-20T08:29:07.297Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.dailyinfographic.com/10-days-to-better-productivity-infographic" target="_blank" rel="noopener">10 Days To Better Productivity</a>介绍了10个提高效率的小技巧。</p><ol><li>停止多线程。经常切换任务可以导致效率下降40%。  </li><li>睡足。缺觉1.5小时相当于白天降低32%的警惕性。  </li><li>吃零食。可以提高20%的效率。  </li><li>避免社交媒体。现在每4.5分钟就会有1分钟花在社交媒体上。  </li><li>放些绿植。多放绿植可以提高38%的效率，45%的创造力，47%的舒适度。  </li><li>使用番茄时间，就是工作25分钟，休息5分钟。有86%的人认为多休息会提高效率，但是只有不到25%的人能做。  </li><li>晒晒太阳。可以提高15%的效率，降低25%的病假时间。  </li><li>嚼口香糖。可以降低10%的紧张焦虑。  </li><li>听自己喜欢的音乐。  </li><li>闻柠檬的味道。闻柠檬的味道可以提高54%的效率，闻茉莉花的味道可以提高33%，闻薰衣草可以提高20%。</li></ol><p><img src="http://www.dailyinfographic.com/wp-content/uploads/2015/04/ProductivityTips.jpg" alt="10 Days To Better Productivity"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.dailyinfographic.com/10-days-to-better-productivity-infographic&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;10 Days To Better Pro
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>如何调试msbuild？</title>
    <link href="http://fresky.github.io/2015/04/15/how-to-debug-msbuild/"/>
    <id>http://fresky.github.io/2015/04/15/how-to-debug-msbuild/</id>
    <published>2015-04-15T15:34:28.000Z</published>
    <updated>2019-12-20T08:29:07.297Z</updated>
    
    <content type="html"><![CDATA[<p>有没有想过调试<code>msbuild</code>呢？可以参考<a href="http://blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-visual-studio.aspx" target="_blank" rel="noopener">Debugging MSBuild script with Visual Studio</a>，<a href="http://blogs.msdn.com/b/visualstudio/archive/2010/07/09/debugging-msbuild-script-with-visual-studio-2.aspx" target="_blank" rel="noopener">part2</a>，<a href="http://blogs.msdn.com/b/visualstudio/archive/2010/07/09/debugging-msbuild-script-with-visual-studio-3.aspx" target="_blank" rel="noopener">part3</a>。</p><h1 id="前期准备工作"><a href="#前期准备工作" class="headerlink" title="前期准备工作"></a>前期准备工作</h1><ol><li>修改注册表，在键值<code>HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\MSBuild\4.0</code>下添加<code>String Value</code>，名字是<strong> DebuggerEnabled</strong>，值是<strong>true</strong>。（注意区分32位和64位，我给出的例子是32位的）  </li><li>在命令行运行<code>msbuild /?</code>，可以看到多了一个<code>/debug</code>的选项，它的解释是：<blockquote><pre><code>Causes a debugger prompt to appear immediately so thatVisual Studio can be attached for you to debug theMSBuild XML and any tasks and loggers it uses.  </code></pre></blockquote></li><li>确认Visual Studio是exception handler。就是确认注册表的<code>HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows NT\CurrentVersion\AeDebug\Debugger</code>的值是<code>vsjitdebugger.exe -p %ld -e %ld</code>。或者直接在命令行运行<code>vsjitdebugger.exe /regserver</code>。</li></ol><h1 id="编译单个项目"><a href="#编译单个项目" class="headerlink" title="编译单个项目"></a>编译单个项目</h1><p>在命令行运行<code>msbuild /t:rebuild /debug Demo.csproj</code>就会在刚刚启动<code>msbuild</code>时弹出Visual Studio的Attach窗口，接着就能F10，F11一步步的看<code>.csproj</code>这个文件是怎么执行的了，还可以在Locals窗口看到局部变量的值。</p><h1 id="编译整个solution"><a href="#编译整个solution" class="headerlink" title="编译整个solution"></a>编译整个solution</h1><ol><li>生成<code>*.sln.metaproj</code>文件。<br>因为<code>msbuild</code>缺省不支持编译<code>sln</code>，我们需要首先设置环境变量<code>set MSBUILDEMITSOLUTION=1</code>，这样用<code>msbuild</code>编译<code>sln</code>时就会生成一个<code>*.sln.metaproj</code>的文件。  </li><li>在命令行运行<code>msbuild /t:rebuild /debug Demo.sln.metaproj</code>就可以编译整个solution了，可以在每一个项目文件的开头打上断点看编译是怎么执行的。</li></ol>]]></content>
    
    <summary type="html">
    
      本文介绍了如何调试msbuild，以及如何让msbuild编译solution文件sln。
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>在C#中我们能调用一个类的私有方法吗</title>
    <link href="http://fresky.github.io/2015/04/03/can-we-call-a-private-method-of-csharp-class/"/>
    <id>http://fresky.github.io/2015/04/03/can-we-call-a-private-method-of-csharp-class/</id>
    <published>2015-04-02T17:03:09.000Z</published>
    <updated>2019-12-20T08:29:07.297Z</updated>
    
    <content type="html"><![CDATA[<p>在C#中我们能调用一个类的私有方法吗？当然我们要排除掉用反射的方式：）直觉应该是不能。那我们来看一段代码吧。下面的代码修改自Eric Lippert的<a href="http://blog.coverity.com/2013/10/09/interface-implementation/" target="_blank" rel="noopener">Interface implementation in C# and VB</a>。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">MyInterface</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Foo</span>(<span class="params"></span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MyClass</span> : <span class="title">MyInterface</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">void</span> MyInterface.Foo() <span class="comment">// private by default</span></span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"MyClass Foo"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">MyClass myClass = <span class="keyword">new</span> MyClass();</span><br><span class="line"><span class="comment">//myClass.Foo();  // 编译错误</span></span><br><span class="line">MyInterface myClass2 = <span class="keyword">new</span> MyClass();</span><br><span class="line">myClass2.Foo();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>只要我们用接口，就能访问<code>MyClass</code>的似有函数<code>Foo</code>了。这个稍微有点反直观，那么我们来看一个温和点的例子。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">MyClass2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Action <span class="title">GetPrivateFoo</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> Action(Foo);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Foo</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"MyClass2 Foo!"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">var</span> foo = MyClass2.GetPrivateFoo();</span><br><span class="line">foo();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个有点好理解了，我们用一个公有方法把一个私有方法返回了出去，这样外面就能调用私有方法了。上面那个接口的例子其实和这个很类似。</p><p>那么<code>private</code>到底是什么意思呢？</p><p><strong><code>private</code>表示这个方法不能被这个类之外通过查名字的方式看到，也就是说，<code>private</code>只是作为名字查找(name resolution)的输入，而不是一个成员能否被调用的限制。</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在C#中我们能调用一个类的私有方法吗？当然我们要排除掉用反射的方式：）直觉应该是不能。那我们来看一段代码吧。下面的代码修改自Eric Lippert的&lt;a href=&quot;http://blog.coverity.com/2013/10/09/interface-impleme
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>什么时候应该使用C#的属性</title>
    <link href="http://fresky.github.io/2015/04/02/when-use-property-in-csharp/"/>
    <id>http://fresky.github.io/2015/04/02/when-use-property-in-csharp/</id>
    <published>2015-04-02T09:44:29.000Z</published>
    <updated>2019-12-20T08:29:07.297Z</updated>
    
    <content type="html"><![CDATA[<p>看看Eric Lippert关于什么时候应该使用C#的属性的建议<a href="http://ericlippert.com/2014/05/19/when-should-i-write-a-property/" target="_blank" rel="noopener">When should I write a property?</a>。</p><ol><li>逻辑上是一个类的属性。  </li><li>属性应该比较稳定，不应该自己变化。 作者指出<code>DateTime.Now</code>违反了这两条。  </li><li>属性读和写所花的时间应该和成员变量的读和写差不多，不能超过10倍。  </li><li>一个常用的属性的模式是用来缓存一个花费时间较多，可以延迟计算的值。但是要小心，特别是需要做到线程安全时更要小心。想想单例模式怎么做到多线程安全吧。  </li><li>属性的读操作不应该改变对象的状态。（除非是上面那条）  </li><li>属性的读操作应该永远成功，不能抛异常。  </li><li>当用调试器调试程序时，如果用调试器看一个对象的状态，默认会调用这个属性的读操作，所以如果读操作会改变对象状态的话，说明调试程序会改变程序状态！  </li><li>不要让属性的读操作返回一个数组或者list。  </li><li>属性的读操作不要返回一个可变的值类型。因为值类型会拷贝一份，你其实没有改变原来的值。</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;看看Eric Lippert关于什么时候应该使用C#的属性的建议&lt;a href=&quot;http://ericlippert.com/2014/05/19/when-should-i-write-a-property/&quot; target=&quot;_blank&quot; rel=&quot;noopener
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>Unicode和字符集小结</title>
    <link href="http://fresky.github.io/2015/04/01/unicode-and-character-set/"/>
    <id>http://fresky.github.io/2015/04/01/unicode-and-character-set/</id>
    <published>2015-04-01T14:52:46.000Z</published>
    <updated>2019-12-20T08:29:07.296Z</updated>
    
    <content type="html"><![CDATA[<p>今天又读了一遍Joel Spolsky的<a href="http://www.joelonsoftware.com/articles/Unicode.html" target="_blank" rel="noopener">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</a>，记一下笔记吧。</p><h1 id="ASCII字符集"><a href="#ASCII字符集" class="headerlink" title="ASCII字符集"></a>ASCII字符集</h1><p>ASCII字符集由95个可打印字符（0×20-0x7E）和33个控制字符（0×00-0×19，0x7F）组成。</p><h1 id="OEM字符集"><a href="#OEM字符集" class="headerlink" title="OEM字符集"></a>OEM字符集</h1><p>一个字节是8位，如果用一个字节来表示ASCII字符集，那么多余的128个数字可以用来表示别的字符，所以128-255被称为OEM字符集，各种乱用，导致两台机器之间可能不能交流文档。</p><p>另外亚洲语言有上千个字符，根本不可能放进一个字节。通常通过双字节DBCS（Double Byte Character Set）来解决，有的字符用一个字节表示，有的用两个字节表示。</p><h1 id="ANSI标准"><a href="#ANSI标准" class="headerlink" title="ANSI标准"></a>ANSI标准</h1><p>为了标准化，有了ANSI标准，128以上怎么使用取决于代码页（Code Page），从<a href="http://en.wikipedia.org/wiki/Code_page" target="_blank" rel="noopener">Code Page</a>可以查到各种语言的code page，比如中文就是936。</p><h1 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h1><p>Unicode可以表示人类使用的所有字符，每个字符都由一个字符码（code point）来表示，在windows上可以用charmap这个小工具来看。</p><h1 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h1><h2 id="UCS-2-UTF-16"><a href="#UCS-2-UTF-16" class="headerlink" title="UCS-2/UTF-16"></a>UCS-2/UTF-16</h2><p>如果我们用2个字节来表示Unicode，那么叫做UCS-2或者UTF-16（其实它是变长的，也可以是4个字节）。</p><p>为了区分大小端，引入了Unicode Byte Order Mark (BOM)，在Unicode字符串的开头加上FEFF。参见<a href="http://en.wikipedia.org/wiki/Byte_order_mark" target="_blank" rel="noopener">Byte order mark</a></p><h2 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h2><p>因为英语文本中会引入很多00，所以就发明了UTF-8，0-127都还是用一个字节表示，所以英文在UTF-8和ASSCII，包括ANSI，OEM字符集的编码下看起来是一样的，而且还和以0作为字符串结尾兼容。</p><h2 id="UTF-7"><a href="#UTF-7" class="headerlink" title="UTF-7"></a>UTF-7</h2><p>UTF-7和UTF-8类似，但是保证最高位永远是0。</p><h2 id="UCS-4"><a href="#UCS-4" class="headerlink" title="UCS-4"></a>UCS-4</h2><p>UCS-4用4个字节表示，好处是任何字符的编码长度都是一样的。</p><p>传统的编码系统只能保存部分的code points，对于其他的code points，就会显示成问号。比如Windows-1252和ISO-8859-1（也就是Latin-1）。而UTF-7,8,16,32可以很好的存储任何的code points。</p><p><strong>如果给了一个字符串，但是没有给出他的编码方式，那是没有意义的。</strong></p><p>所以邮件就在邮件头中写明了编码方式，比如：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Type: text/plain; charset="UTF-8"。</span><br></pre></td></tr></table></figure></p><p>对于网页，不能由网站在http头中写编码方式，因为一个网站有很多网页，可能每个网页的编码方式是不一样的，所以就需要写在html中。但是这就是鸡和蛋的关系了，需要知道编码方式从而来读取html，但是又需要读取html来获得编码方式。解决办法就是大家都遵守如下的约定，这样我们就能用ASCII码的方式来得到编码方式。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>但是假设你写网页的时候没有这么写，那么浏览器就只能猜了。如果没有猜对，用户可以通过浏览器菜单来选择编码方式。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天又读了一遍Joel Spolsky的&lt;a href=&quot;http://www.joelonsoftware.com/articles/Unicode.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;The Absolute Minimum Eve
      
    
    </summary>
    
    
      <category term="Development" scheme="http://fresky.github.io/tags/Development/"/>
    
  </entry>
  
  <entry>
    <title>C#编译器怎么检查代码是否会执行</title>
    <link href="http://fresky.github.io/2015/03/31/csharp-reachability/"/>
    <id>http://fresky.github.io/2015/03/31/csharp-reachability/</id>
    <published>2015-03-31T14:48:33.000Z</published>
    <updated>2019-12-20T08:29:07.296Z</updated>
    
    <content type="html"><![CDATA[<p>今天翻了一篇Eric Lippert的旧文章<a href="http://blog.coverity.com/2013/11/06/c-reachability/" target="_blank" rel="noopener">C# Reachability</a>，里面详细解释了C#编译器是怎么判断代码是否可达（Unreachable code）的。</p><p>文章开始于一个问题，为什么下面的代码在编译时只有<code>Condition()</code>不可达的警告，但那时没有<code>Alternative()</code>不可达的警告。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span> || Condition())</span><br><span class="line">  Consequence();</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  Alternative();</span><br></pre></td></tr></table></figure><p>原因在于C#编译器对于可达性的检查大概是这样子的。</p><ol><li>基于编译时常量检查的结果做可达性检查，如果不可达就给出警告。</li></ol><p>常量检查的前提是<strong>每个部分都是常量</strong>。这就是上面的例子为什么<code>Condition()</code>有不可达的警告。 </p><ol start="2"><li><p>优化（如果用户开优化了），包含算数优化，比如<code>(123 != 0 * someIntegerLocalVariable)</code>会被优化成true。</p></li><li><p>基于上面优化的结果在做一个可达性检查，对于不可达的代码不会产生编译结果，但是这时不会有不可达的警告。</p></li></ol><p>至于为什么上面第三条不给出不可达的警告主要原因在于，如果用户没有开优化，那么这个不可达检查不会发生。如果这个也给出警告的话，就会导致用户开没开优化得到的警告不一致。</p><p>另外，C#编译器会放松对第一次不可达检查时找出的不可达代码的检查，比如下面的代码不会报错。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> a;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">false</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> b = m(a);</span><br><span class="line">Console.WriteLine(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Console.WriteLine();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">m</span>(<span class="params"><span class="keyword">int</span> i</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是如果改成下面这个样子，就会报错了，<strong>Use of unassigned local variable ‘a’</strong>。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">bool</span> condition = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">int</span> a;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">false</span>&amp;&amp;condition)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> b = m(a);</span><br><span class="line">Console.WriteLine(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Console.WriteLine();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">m</span>(<span class="params"><span class="keyword">int</span> i</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      本文介绍了C#编译器是怎么检查代码是否可达的，C# Reachability。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>C#中如何操作2个list</title>
    <link href="http://fresky.github.io/2015/03/30/how-to-manipulate-2-lists/"/>
    <id>http://fresky.github.io/2015/03/30/how-to-manipulate-2-lists/</id>
    <published>2015-03-30T09:24:36.000Z</published>
    <updated>2019-12-20T08:29:07.296Z</updated>
    
    <content type="html"><![CDATA[<p>假设我们有两个list，一个是{1,2,3}，一个是{4,5,6}，如果我们想让每个元素分别相乘，然后生成一个新的list{4,10,18}，如何写呢？</p><p>最直观的做法：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="keyword">int</span>&gt; a = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;()&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">List&lt;<span class="keyword">int</span>&gt; b = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;()&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">List&lt;<span class="keyword">int</span>&gt; c = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.Count; i++)</span><br><span class="line">&#123;</span><br><span class="line">c.Add(a[i]*b[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果到了.NET 3.5的Linq，那么我们可以用<a href="https://msdn.microsoft.com/en-us/library/vstudio/system.linq.enumerable.select%28v=vs.110%29.aspx" target="_blank" rel="noopener">Enumerable.Select</a>。<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="keyword">int</span>&gt; a = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;()&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">List&lt;<span class="keyword">int</span>&gt; b = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;()&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = a.Select((x, i) =&gt; b[i] * x);</span><br></pre></td></tr></table></figure></p><p>如果到了.NET 4，我们可以用<a href="https://msdn.microsoft.com/en-us/library/vstudio/dd267698%28v=vs.110%29.aspx" target="_blank" rel="noopener">Enumerable.Zip</a></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="keyword">int</span>&gt; a = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;()&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">List&lt;<span class="keyword">int</span>&gt; b = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;()&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = a.Zip(b, (x, y) =&gt; x*y);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      本文介绍了在C#中如何用Enumerable.Select和Enumerable.Zip来简化操作2个list。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>用Windbg来看看CLR的JIT是什么时候发生的</title>
    <link href="http://fresky.github.io/2015/03/28/use-windbg-to-see-when-jit/"/>
    <id>http://fresky.github.io/2015/03/28/use-windbg-to-see-when-jit/</id>
    <published>2015-03-28T11:09:23.000Z</published>
    <updated>2019-12-20T08:29:07.296Z</updated>
    
    <content type="html"><![CDATA[<p>C#的程序一个可能遇到的性能问题就是启动时间可能会太长，这是因为C#编译后会成为IL，在第一次运行时会由JIT即时编译编译为机器代码，然后运行。<a href="http://blogs.msdn.com/b/abhinaba/archive/2014/09/29/net-just-in-time-compilation-and-warming-up-your-system.aspx" target="_blank" rel="noopener">.NET Just in Time Compilation and Warming up Your System</a>介绍了作者对于JIT的一些经验，其中谈到了如何通过Windbg来看JIT究竟是什么时候发生的，很有意思。下面我们也就拿段小程序用Windbg看看。</p><p>假设有如下一个简单的程序，编译成Demo.exe。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Demo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">MyClass</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">a</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                b(i++);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">b</span>(<span class="params"><span class="keyword">int</span> i</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            MyClass mc = <span class="keyword">new</span> MyClass();</span><br><span class="line">            mc.a();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后我们打开Windbg，按快捷键<code>Ctrl+E</code>，或者点击File-&gt;Open Executable，然后选择刚才编译好的Demo.exe。这样就用Windbg把Demo.exe运行起来了。</p><p>接着在Windbg里运行下面的命令来让Windbg在Demo.exe加载clr时停下来。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sxe ld:clr</span><br></pre></td></tr></table></figure><p>然后输入<code>g</code>命令，很快Windbg就会停下来，这时敲<code>k</code>命令可以看到如下的输出，正在加载clr。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">0:000&gt; k</span><br><span class="line">ChildEBP RetAddr  </span><br><span class="line">0018f6fc 7796bf70 ntdll!ZwMapViewOfSection+0x12</span><br><span class="line">0018f750 7796c5fb ntdll!LdrpMapViewOfSection+0xc7</span><br><span class="line">0018f844 7796c42c ntdll!LdrpFindOrMapDll+0x333</span><br><span class="line">0018f9c4 7796c558 ntdll!LdrpLoadDll+0x2b2</span><br><span class="line">0018f9fc 755b2ca2 ntdll!LdrLoadDll+0xaa</span><br><span class="line">0018fa38 74045ba3 KERNELBASE!LoadLibraryExW+0x1f1</span><br><span class="line">0018fb9c 7404b32c mscoreei!RuntimeDesc::LoadLibrary+0xcf</span><br><span class="line">0018fbd8 740468f7 mscoreei!RuntimeDesc::LoadMainRuntimeModuleHelper+0x96</span><br><span class="line">0018fc1c 7404a70a mscoreei!RuntimeDesc::LoadMainRuntimeModule+0x1b8</span><br><span class="line">0018fc74 7404a877 mscoreei!RuntimeDesc::EnsureLoaded+0x8e</span><br><span class="line">0018fc8c 7404a960 mscoreei!RuntimeDesc::GetProcAddressInternal+0xe</span><br><span class="line">0018fce0 7404ff19 mscoreei!CLRRuntimeInfoImpl::GetProcAddress+0x48</span><br><span class="line">0018fd28 7404ffaf mscoreei!GetCorExeMainEntrypoint+0xe9</span><br><span class="line">0018fd68 74267f16 mscoreei!_CorExeMain+0x54</span><br><span class="line">0018fd78 74264de3 MSCOREE!ShellShim__CorExeMain+0x99</span><br><span class="line">0018fd80 7544338a MSCOREE!_CorExeMain_Exported+0x8</span><br><span class="line">0018fd8c 77969f72 KERNEL32!BaseThreadInitThunk+0xe</span><br><span class="line">0018fdcc 77969f45 ntdll!__RtlUserThreadStart+0x70</span><br><span class="line">0018fde4 00000000 ntdll!_RtlUserThreadStart+0x1b</span><br></pre></td></tr></table></figure><p>这时我们在Windbg里运行命令<code>.loadby sos clr</code>来加载sos，然后运行命令<code>!bpmd Demo.exe Demo.Program.Main</code>在Main函数上加一个断点，然后运行命令<code>g</code>继续，一会儿就会停在Main函数上。这个时候再运行<code>!bpmd Demo.exe Demo.MyClass.a</code>加一个断点在函数a上，运行命令<code>g</code>继续，等停下来之后运行命令<code>!dso</code>来看看当前都有什么对象，命令输出如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">0:000&gt; !dso</span><br><span class="line">OS Thread Id: 0x1978 (0)</span><br><span class="line">ESP/REG  Object   Name</span><br><span class="line">ecx      020f230c Demo.MyClass</span><br><span class="line">0018F2C4 020f230c Demo.MyClass</span><br><span class="line">0018F2DC 020f230c Demo.MyClass</span><br><span class="line">0018F2E0 020f230c Demo.MyClass</span><br><span class="line">0018F2E4 020f22fc System.Object[]    (System.String[])</span><br><span class="line">0018F360 020f22fc System.Object[]    (System.String[])</span><br><span class="line">0018F4BC 020f22fc System.Object[]    (System.String[])</span><br><span class="line">0018F4EC 020f22fc System.Object[]    (System.String[])</span><br><span class="line">0018FA20 020f1238 System.SharedStatics</span><br></pre></td></tr></table></figure><p>找到我们需要的<code>Demo.MyClass</code>的地址<code>020f230c</code>，运行命令<code>!do 020f230c</code>来找到<code>Demo.MyClass</code>的MethodTable，输出如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">0:000&gt; !do 020f230c </span><br><span class="line">Name:        Demo.MyClass</span><br><span class="line">MethodTable: 00293898</span><br><span class="line">EEClass:     002914a0</span><br><span class="line">Size:        12(0xc) bytes</span><br><span class="line">File:        D:\Documents\Visual Studio 2013\Projects\Demo\bin\Debug\Demo.exe</span><br><span class="line">Fields:</span><br><span class="line">None</span><br></pre></td></tr></table></figure><p>运行命令<code>!dumpmt -md 00293898</code>来看看<code>Demo.MyClass</code>的函数，输出如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">0:000&gt; !dumpmt -md 00293898</span><br><span class="line">EEClass:         002914a0</span><br><span class="line">Module:          00292edc</span><br><span class="line">Name:            Demo.MyClass</span><br><span class="line">mdToken:         02000002</span><br><span class="line">File:            D:\Documents\Visual Studio 2013\Projects\Demo\bin\Debug\Demo.exe</span><br><span class="line">BaseSize:        0xc</span><br><span class="line">ComponentSize:   0x0</span><br><span class="line">Slots in VTable: 7</span><br><span class="line">Number of IFaces in IFaceMap: 0</span><br><span class="line">--------------------------------------</span><br><span class="line">MethodDesc Table</span><br><span class="line">   Entry MethodDe    JIT Name</span><br><span class="line">7290952c 7262612c PreJIT System.Object.ToString()</span><br><span class="line">7291ec30 72626134 PreJIT System.Object.Equals(System.Object)</span><br><span class="line">7291e860 72626154 PreJIT System.Object.GetHashCode()</span><br><span class="line">7291e2a0 72626168 PreJIT System.Object.Finalize()</span><br><span class="line">004800b0 00293890    JIT Demo.MyClass..ctor()</span><br><span class="line">004800e8 00293878    JIT Demo.MyClass.a()</span><br><span class="line">0029c041 00293884   NONE Demo.MyClass.b(Int32)</span><br></pre></td></tr></table></figure><p>这里我们可以清楚地看到<code>Demo.MyClass.a</code>已经被JIT了，而<code>Demo.MyClass.b</code>还没有。所以<strong>JIT的粒度是函数级的</strong>。</p><p><strong>所以我们在写C#的代码时要尽量做到模块化，特别是有一些很少会用到的代码，比如异常处理和日志，一定不要直接放在Main函数里，把他们抽到别的函数里就可以保证在需要他们的时候才JIT，从而不会影响到启动性能。</strong></p><p>我们也可以直接在JIT一个方法的入口函数<code>clr!UnsafeJitFunction</code>上加个断点，<code>bp clr!UnsafeJitFunction</code>，然后继续运行<code>g</code>，等断点出发后我们看看callstack，运行<code>!dumpstack</code>，输出如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">0:000&gt; !dumpstack</span><br><span class="line">OS Thread Id: 0x1978 (0)</span><br><span class="line">Current frame: clr!UnsafeJitFunction</span><br><span class="line">ChildEBP RetAddr  Caller, Callee</span><br><span class="line">0018f0d0 739d878c clr!MethodDesc::MakeJitWorker+0x36e, calling clr!UnsafeJitFunction</span><br><span class="line">0018f0f8 77963cfe ntdll!RtlAllocateHeap+0x23a, calling ntdll!RtlpAllocateHeap</span><br><span class="line">0018f1ac 73ae97b5 clr!MethodDesc::DoPrestub+0x598, calling clr!MethodDesc::MakeJitWorker</span><br><span class="line">0018f1f8 739ba4e5 clr!ETWTraceStartup::ETWTraceStartup+0x37, calling clr!ETWTraceStartup::StartupTraceEvent</span><br><span class="line">0018f208 739ba33b clr!MethodDesc::CheckRestore+0x23, calling clr!MethodTable::IsFullyLoaded</span><br><span class="line">0018f224 739bb02b clr!PreStubWorker+0xf0, calling clr!MethodDesc::DoPrestub</span><br><span class="line">0018f28c 739a2a0c clr!ThePreStub+0x16, calling clr!PreStubWorker</span><br><span class="line">0018f2bc 0048012f (MethodDesc 00293878 +0x47 Demo.MyClass.a()), calling 0029c041</span><br><span class="line">0018f2d4 00480099 (MethodDesc 002937e0 +0x49 Demo.Program.Main(System.String[])), calling (MethodDesc 00293878 +0 Demo.MyClass.a())</span><br></pre></td></tr></table></figure><p>从这里我们可以看到<strong>JIT发生在函数调用的同一个线程里</strong>。</p><p>另外，提高系统启动性能通常的做法有</p><ol><li><p><a href="https://msdn.microsoft.com/en-us/library/6t9t5wcf.aspx" target="_blank" rel="noopener">Ngen.exe (Native Image Generator)</a>，参见我的博文<a href="/2012/12/18/using-mpgo-and-ngen-to-optimize-csharp-app-starting-performance/">使用MPGO和NGEN来优化C#桌面程序的启动性能</a>。</p></li><li><p>强制JIT，下面是一段示例代码来通过<a href="http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.runtimehelpers.preparemethod(v=vs.110" target="_blank" rel="noopener">RuntimeHelpers.PrepareMethod</a>.aspx)API强制JIT。</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Reflection;</span><br><span class="line">namespace Demo</span><br><span class="line">&#123;</span><br><span class="line">    class Program</span><br><span class="line">    &#123;</span><br><span class="line">        static private void ForceJit(Assembly assembly)</span><br><span class="line">        &#123;</span><br><span class="line">            var types = assembly.GetTypes();</span><br><span class="line"></span><br><span class="line">            foreach (Type type in types)</span><br><span class="line">            &#123;</span><br><span class="line">                var ctors = type.GetConstructors(BindingFlags.NonPublic</span><br><span class="line">                                            | BindingFlags.Public</span><br><span class="line">                                            | BindingFlags.Instance</span><br><span class="line">                                            | BindingFlags.Static);</span><br><span class="line"></span><br><span class="line">                foreach (var ctor in ctors)</span><br><span class="line">                &#123;</span><br><span class="line">                    JitMethod(assembly, ctor);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                var methods = type.GetMethods(BindingFlags.DeclaredOnly</span><br><span class="line">                                       | BindingFlags.NonPublic</span><br><span class="line">                                       | BindingFlags.Public</span><br><span class="line">                                       | BindingFlags.Instance</span><br><span class="line">                                       | BindingFlags.Static);</span><br><span class="line">                </span><br><span class="line">                foreach (var method in methods)</span><br><span class="line">                &#123;</span><br><span class="line">                    JitMethod(assembly, method);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        static private void JitMethod(Assembly assembly, MethodBase method)</span><br><span class="line">        &#123;</span><br><span class="line">            if (method.IsAbstract || method.ContainsGenericParameters)</span><br><span class="line">            &#123;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            System.Runtime.CompilerServices.RuntimeHelpers.PrepareMethod(method.MethodHandle);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        static void Main(string[] args)</span><br><span class="line">        &#123;</span><br><span class="line">            ForceJit(Assembly.LoadFile(@&quot;d:\Scratch\asm.dll&quot;));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>小结一下本文用到的Windbg命令。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sxe ld:clr                        // 当加载clr时break</span><br><span class="line">!bpmd Demo.exe Demo.Program.Main  // 在Main函数上加断点</span><br><span class="line">!dumpmt -md                       // 看类的函数具体信息，有没有被JIT</span><br><span class="line">bp clr!UnsafeJitFunction          // 在JIT函数入口加断点</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      本文用Windbg来调试看C#的程序在运行时JIT发生在什么时候。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>如何调试什么时候SaveFileDialog会被Dispose</title>
    <link href="http://fresky.github.io/2015/03/25/how-to-debug-when-savefiledialog-is-disposed/"/>
    <id>http://fresky.github.io/2015/03/25/how-to-debug-when-savefiledialog-is-disposed/</id>
    <published>2015-03-25T11:37:30.000Z</published>
    <updated>2019-12-20T08:29:07.295Z</updated>
    
    <content type="html"><![CDATA[<p>今天又看到一个Coverity报出的问题，说<code>SaveFileDialog</code>在使用完之后没有<code>Dispose</code>。想起了之前写的一篇博文<a href="/2015/01/12/do-we-need-dispose-after-show-and-showdialog/">你知道Form.Show()和Form.ShowDialog()的区别吗？</a>。那篇文章总结起来就是说，调用<code>Form.Show()</code>不需要显示的<code>Dispose</code>，但是调用<code>Form.ShowDialog()</code>需要显示的<code>Dispose</code>。那么回到今天的这个问题，<code>SaveFileDialog</code>在使用完之后需要显示的<code>Dispose</code>吗？如果看看MSDN的<a href="https://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog%28v=vs.110%29.aspx" target="_blank" rel="noopener">示例代码</a>，其实它是没有显示<code>Dispose</code>的。那究竟需不需要呢？</p><p>还是写段程序来检查一下吧，看看什么时候<code>SaveFileDialog</code>会被<code>Dispose</code>。写一个WinForm，然后加2个按钮，它们对应的响应事件如下：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">button1_Click</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">SaveFileDialog s = <span class="keyword">new</span> SaveFileDialog();</span><br><span class="line"><span class="keyword">if</span> (DialogResult.OK == s.ShowDialog())</span><br><span class="line">MessageBox.Show(<span class="string">"OK"</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">MessageBox.Show(<span class="string">"Not OK"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//s.Dispose();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">button2_Click</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">GC.Collect();</span><br><span class="line">GC.WaitForPendingFinalizers();</span><br><span class="line">GC.Collect();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后在Visual Studio中加一个函数断点<code>System.ComponentModel.Component.Dispose</code>，因为<code>SaveFileDialog</code>继承自<code>Component</code>，所以当<code>SaveFileDialog</code>被<code>Dispose</code>时，这个断点应该会被触发。</p><p>运行这个程序，点第一个按钮，点完之后发现断点没有被触发。这个时候关掉程序，发现断点被触发了，这个时候要注意看是不是<code>SaveFileDialog</code>，因为好多都是从<code>Component</code>继承下来的，也可以在断点上加一个条件，这样就比较容易观察了。这说明<code>SaveFileDialog</code>在使用完后没有直接被<code>Dispose</code>，一直呆到了程序结束。</p><p>再次运行这个程序，点第一个按钮，然后点第二个按钮，这是发现断点被触发了，说明GC会帮我们清理这个没用到的局部变量。</p><p>如果把上面代码中的<code>Dispose</code>去掉注释，发现在第一个按钮按完之后就会被<code>Dispose</code>了。</p><p>综上，对于<code>SaveFileDialog</code>，我们还是应该在使用完后就显示的<code>Dispose</code>。</p>]]></content>
    
    <summary type="html">
    
      本文介绍了如何通过加函数断点的方式调试什么时候SaveFileDialog会被Dispose，然后通过调试结果说明我们在使用完SaveFileDialog后应该显示的Dispose。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>针对C#程序做性能测试的一些基本准则</title>
    <link href="http://fresky.github.io/2015/03/24/csharp-performance-benchmar/"/>
    <id>http://fresky.github.io/2015/03/24/csharp-performance-benchmar/</id>
    <published>2015-03-24T15:20:20.000Z</published>
    <updated>2019-12-20T08:29:07.295Z</updated>
    
    <content type="html"><![CDATA[<p>Eric Lippert在他的<a href="http://tech.pro/blog/1293/c-performance-benchmark-mistakes-part-one" target="_blank" rel="noopener">C# Performance Benchmark Mistakes, part1</a>，<a href="http://tech.pro/tutorial/1295/c-performance-benchmark-mistakes-part-two" target="_blank" rel="noopener">part2</a>，<a href="http://tech.pro/tutorial/1317/c-performance-benchmark-mistakes-part-three" target="_blank" rel="noopener">part3</a>，<a href="http://tech.pro/tutorial/1433/performance-benchmark-mistakes-part-four" target="_blank" rel="noopener">part4</a>中介绍了一些最基本的针对C#的程序做性能测试的准则，要点如下：</p><ol><li>选择正确的衡量标准。  </li><li>在做子系统局部性能测试的同时不要忘记花点时间做整个系统的端到端的性能测试。  </li><li>不要在debugger中做性能测试。  </li><li>不要在debug编译模式下做性能测试。  </li><li>使用Stopwatch，不要使用DateTime。  </li><li>在性能测试时要对第一次运行区别对待，因为第一次运行会牵扯到JIT即时编译。如果要测试启动性能，那么只需要测试第一次运行时。  </li><li>在和软件最终运行环境一样的软硬件条件下做性能测试。这点和第3、4点其实说的是一个道理，测试环境要和软件真正的工作环境一致。  </li><li>考虑垃圾回收带来的影响，一个可能的做法是在每次测试之前和之后用下面的代码强制调用一下GC。  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.GC.Collect();</span><br><span class="line">System.GC.WaitForPendingFinalizers();</span><br><span class="line">System.GC.Collect();</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Eric Lippert在他的&lt;a href=&quot;http://tech.pro/blog/1293/c-performance-benchmark-mistakes-part-one&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;C# Performanc
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
  </entry>
  
  <entry>
    <title>要注意null合并运算符的优先级比+还要低</title>
    <link href="http://fresky.github.io/2015/03/23/null-coalescing-operator-precedence-is-lower-than-addition/"/>
    <id>http://fresky.github.io/2015/03/23/null-coalescing-operator-precedence-is-lower-than-addition/</id>
    <published>2015-03-23T14:18:41.000Z</published>
    <updated>2019-12-20T08:29:07.295Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://msdn.microsoft.com/en-us/library/ms173224.aspx" target="_blank" rel="noopener">null合并运算符</a>是一个非常有用的运算符，有了它可以让代码非常简洁，省去了很多繁琐的空检查，但是有一点要注意的是它的优先级比加号还要低，可以参见Eric Lippert写的这篇<a href="http://blog.coverity.com/2013/10/23/null-coalescing-bugs/#.VRAepOFqP7G" target="_blank" rel="noopener">Null Coalescing Bugs in C#</a>，所以在和别的运算符用在一起时要记得加括号。</p><p>假设有如下的代码：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>? a = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">int</span>? b = <span class="literal">null</span>;</span><br><span class="line">Console.WriteLine(a ?? <span class="number">1</span> + b ?? <span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>他的输出结果是2，而不是3！原因就是因为<code>??</code>的优先级比<code>+</code>还要低，所以上面的语句相当于<code>a ??( (1 + b) ?? 2)</code>。就是说，首先看<code>a</code>是<code>null</code>，所以应该取<code>(1 + b) ?? 2</code>。而<code>(1 + b)</code>还是<code>null</code>，所以结果是2。</p><p>如果想让结果为3，需要这么写<code>(a ?? 1) + (b ?? 2)</code>。</p>]]></content>
    
    <summary type="html">
    
      C#的null合并运算符的优先级比加号还要低，注意在和别的运算符用在一起时要记得加括号。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>实现GetHashCode时要遵循的规则</title>
    <link href="http://fresky.github.io/2015/03/22/the-rules-and-guidelines-of-gethashcode/"/>
    <id>http://fresky.github.io/2015/03/22/the-rules-and-guidelines-of-gethashcode/</id>
    <published>2015-03-22T15:45:17.000Z</published>
    <updated>2019-12-20T08:29:07.294Z</updated>
    
    <content type="html"><![CDATA[<p>Eric Lippert的<a href="http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx" target="_blank" rel="noopener">Guidelines and rules for GetHashCode</a>介绍了实现GetHashCode时需要遵循的规则和指导原则，摘要如下：</p><p>规则1：相等的对象必须要有一样的哈希值。</p><p>规则2：GetHashCode返回的整数在这个对象存储在一个依赖哈希值的数据结构中不能变化。</p><p>规则3：GetHashCode的使用者不能假定哈希值不会随着时间变化，也不能假定跨AppDomain之后哈希值还保持不变。</p><p>规则4：GetHashCode永远不能抛异常，而且必须返回。</p><p>指导原则1：GetHashCode的实现必须非常快。</p><p>指导原则2：哈希值的分布必须是随机的。</p><p>安全因素1：如果攻击者能够选择哈希值，那就非常危险了。</p><p>安全因素2：GetHashCode不能用来干别的事情，它只能用来使得哈希表分布比较均匀。它不能用来1）给对象提供一个唯一的表示。2）不具备密码功能。3）不能用来做校验。</p>]]></content>
    
    <summary type="html">
    
      本文介绍了Eric Lippert给出的实现GetHashCode时需要遵循的规则。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>如何判断C#的Finalizer线程有没有被阻塞</title>
    <link href="http://fresky.github.io/2015/03/20/how-to-check-the-finalizer-thread-is-blocked/"/>
    <id>http://fresky.github.io/2015/03/20/how-to-check-the-finalizer-thread-is-blocked/</id>
    <published>2015-03-20T12:33:58.000Z</published>
    <updated>2019-12-20T08:29:07.294Z</updated>
    
    <content type="html"><![CDATA[<p>这两天在清理我的firefox打开的800多个页面，其中有很多已经是很早的，翻到了这个网页<a href="http://dotnetdebug.net/2005/06/22/blocked-finalizer-thread/" target="_blank" rel="noopener">Blocked Finalizer Thread</a>。依稀让我想起了以前遇到的那个由于GDI导致的OutOfMemory的crash。</p><p>我们知道Windows上每个进程最多能创建1万(10000)个Handle，参见<a href="http://blogs.msdn.com/b/oldnewthing/archive/2007/07/18/3926581.aspx" target="_blank" rel="noopener">这里</a>。所以如果你的进程创建的GDI对象达到1万的限制时就会抛出OutOfMemory的异常。我遇到的那个问题是一个Tree的每个节点上都会设置字体，但是每次都是new一个，然后会有一些情况导致这个树频繁刷新，就导致生成了很多的Font，但是为啥他们没有被垃圾回收呢？就和我上面列到的那篇文章有点关系了。</p><p>我们知道C#会用一个单独的Finalize线程来执行Finalize方法（根据程序不同的GC模型，也可能会有多个Finalize线程）。如果有什么问题导致这个线程被阻塞的话，就会导致积压了很多等待调用Finalize的对象，在我遇到的那个例子里，就是因为Finalize线程被阻塞了，导致Font的个数超过了进程限制。</p><p>什么原因会导致Finalize线程阻塞呢？很简单，就是Finalize方法被阻塞了。比如如果某个对象的Finalize方法中使用了同步对象，可以是Critical Section，Mutex，Semaphore等，但是这个对象被别的线程占用着，那么就会阻塞整个Finalize线程。另外一个中常见的问题是COM，一个STA的COM对象比如在STA线程进行释放，在C#中就是说这个COM对象必须在STA线程进行释放，如果STA线程在忙别的事情，就有可能导致Finalize线程被阻塞，我遇到的那个问题就是这个原因导致的。</p><p>那么怎么来检查Finalize线程有没有被阻塞呢？打开Windbg，可以attach到进程或者打开dump，然后加载SOS扩展，运行命令<code>!FinalizeQueue</code>，就可以列出所有等在Finalize Queue里的对象，如果在程序的多个时间抓取dump，看到这个数目在逐渐增多，就可以怀疑我们的Finalize线程被阻塞了。</p><p>如果想要确认的话，就需要切换到Finalize线程，运行<code>!threads</code>命令，然后在列出的线程中找到以<code>(Finalizer)</code>结尾的线程，然后切换过去，运行<code>k</code>命令列出call stack，如果看到例如<code>ZwWaitForSingleObject</code>或者<code>ZwWaitForMultipleObjects</code>的，基本就是在等待别的东西了，这个时候就可以去找找在等什么东西。另外也别忘了用<code>!clrstack</code>看看C#的call stack，有可能使用的是<code>Monitor.Enter</code>。如果在call stack中看到了<code>GetToSTA</code>，那就说明是上面提到的COM对象的情况。</p><p>对于这个问题怎么解决，在我的那个例子里，就共享了几个字体，没有每次都创建。对于其他的问题，首先一个是能不用Finalize方法就不用Finalize方法，如果是COM的话，可以显式的调用<code>Marshal.ReleaseComObject</code>来释放COM对象，这样就不需要劳驾Finalize线程来释放了。</p><p>下面再附一小段代码，它可以查看当前进程的Handle数目。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Runtime.InteropServices;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">StreamWrite.Proceedings.Client</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HWndCounter</span></span><br><span class="line">    &#123;</span><br><span class="line">        [<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">extern</span> IntPtr <span class="title">GetCurrentProcess</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">DllImport(<span class="meta-string">"user32.dll"</span>)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">uint</span> <span class="title">GetGuiResources</span>(<span class="params">IntPtr hProcess, <span class="keyword">uint</span> uiFlags</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">enum</span> ResourceType</span><br><span class="line">        &#123;</span><br><span class="line">            Gdi = <span class="number">0</span>,</span><br><span class="line">            User = <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">GetWindowHandlesForCurrentProcess</span>(<span class="params">IntPtr hWnd</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            IntPtr processHandle = GetCurrentProcess();</span><br><span class="line">            <span class="keyword">uint</span> gdiObjects = GetGuiResources(processHandle, (<span class="keyword">uint</span>)ResourceType.Gdi);</span><br><span class="line">            <span class="keyword">uint</span> userObjects = GetGuiResources(processHandle, (<span class="keyword">uint</span>)ResourceType.User);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> Convert.ToInt32(gdiObjects + userObjects);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      本文介绍了如果判断C#的Finalizer线程有没有被阻塞。给出了一个由于Finalizer线程阻塞导致的句柄（Handle）数目超出Windows限制导致的崩溃问题，还附上了一小段代码用来查看当前进程Handle数目。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>通过Mouse Without Borders在多台机器上共享键盘鼠标</title>
    <link href="http://fresky.github.io/2015/03/18/work-with-2-computers-with-mouse-without-borders/"/>
    <id>http://fresky.github.io/2015/03/18/work-with-2-computers-with-mouse-without-borders/</id>
    <published>2015-03-18T02:41:28.000Z</published>
    <updated>2019-12-20T08:29:07.294Z</updated>
    
    <content type="html"><![CDATA[<p>现在用多台电脑办公的情况越来越多，一般我们都用远程桌面来控制另外一台电脑，但是这会有一些小问题，比如显示啊，复制粘贴啊，而且会浪费一个笔记本的屏幕。可以尝试一下微软车库的这个小工具<a href="http://www.microsoft.com/en-us/download/details.aspx?id=35460" target="_blank" rel="noopener">Mouse Without Borders</a>，安装之后可以用把键盘鼠标穿过屏幕边缘滑倒另外一台机器上，也支持复制粘贴等，非常方便。</p>]]></content>
    
    <summary type="html">
    
      通过Mouse Without Borders在多台机器上共享键盘鼠标
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>用VerbalExpressions来帮助我们写正则表达式</title>
    <link href="http://fresky.github.io/2015/03/16/build-regular-expressions-with-the-help-from-verbalexpressions/"/>
    <id>http://fresky.github.io/2015/03/16/build-regular-expressions-with-the-help-from-verbalexpressions/</id>
    <published>2015-03-16T11:42:00.000Z</published>
    <updated>2019-12-20T08:29:07.294Z</updated>
    
    <content type="html"><![CDATA[<p>正则表达式是一个非常强大的工具，如果能够正确的使用它会大大提高文本处理的效率。我在之前的博文<a href="/2013/06/04/d-0-9-difference-in-regex/">正则表达式中\d和[0-9]有什么区别</a>和<a href="/2012/11/19/match-all-printable-character-in-regex/">[ -~] 所有的可打印字符</a>中也提到过一些关于正则表达式的用法。但是正则表达式的语法就不是那么友好了，如果不常用的话经常忘记，需要查帮助。</p><p>现在给大家推荐一个叫做<a href="http://verbalexpressions.github.io/" target="_blank" rel="noopener">VerbalExpressions</a>的小工具，用它可以用类似自然语言的方式帮我们写出正则表达式来。他有很多语言的版本，<a href="https://github.com/VerbalExpressions/CSharpVerbalExpressions" target="_blank" rel="noopener">这是C#的</a>，<a href="https://github.com/VerbalExpressions/CppVerbalExpressions" target="_blank" rel="noopener">这是C++的</a>。</p><p>下面是一个C#的示例代码，很容易用吧：）</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> verbEx = <span class="keyword">new</span> VerbalExpressions()</span><br><span class="line">.StartOfLine()</span><br><span class="line">.Then(<span class="string">"http"</span>)</span><br><span class="line">.Maybe(<span class="string">"s"</span>)</span><br><span class="line">.Then(<span class="string">"://"</span>)</span><br><span class="line">.Maybe(<span class="string">"www."</span>)</span><br><span class="line">.AnythingBut(<span class="string">" "</span>)</span><br><span class="line">.EndOfLine();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create an example URL</span></span><br><span class="line"><span class="keyword">var</span> testMe = <span class="string">"https://www.google.com"</span>;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(verbEx.Test(testMe));</span><br><span class="line">Console.WriteLine(verbEx);</span><br></pre></td></tr></table></figure><p>输出结果为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">True</span><br><span class="line">^(http)(s)?(://)(www\.)?([^\ ]*)$</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      使用VerbalExpressions可以在多种语言，包括C++和C#中用非常直观的方式来帮助我们写正则表达式。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Regex" scheme="http://fresky.github.io/tags/Regex/"/>
    
  </entry>
  
  <entry>
    <title>如何生成Dump文件</title>
    <link href="http://fresky.github.io/2015/03/16/how-to-capture-dump-file/"/>
    <id>http://fresky.github.io/2015/03/16/how-to-capture-dump-file/</id>
    <published>2015-03-15T16:52:11.000Z</published>
    <updated>2019-12-20T08:29:07.294Z</updated>
    
    <content type="html"><![CDATA[<p>在windows平台部署完应用后，如果出现了程序崩溃的问题，我们首先需要的就是要生成一个dump文件，这样我们才能知道当时发生了什么，本文就简单总结一下如何生成Dump文件。</p><ol><li><p>Windbg/ADPlus的<code>.dump</code>命令。如果要带heap信息的话，就需要用<code>/ma</code>参数。</p></li><li><p>Visual Studio的”Save Dump As …”命令，在弹出的保存对话框中可以选择要不要保存heap信息。</p></li><li><p>任务管理器，可以直接在对应的进程上点右键，”Create Dump File”。但是这个要注意的是如果你的系统是64位的，那么默认的任务管理就是64位的，这样就算你选中的是32位的程序，生成的dump也会使64位的。如果想生成32位的dump，需要找到32位的任务管理器。</p></li><li><p>用<a href="http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx" target="_blank" rel="noopener">Process Explorer</a>，和任务管理器差不多，在进程上点右键菜单，选择”Create Dump”，然后可以选择是mini dump还是full dump。</p></li><li><p>直接使用Windows的API——<a href="https://msdn.microsoft.com/en-us/library/ms680360.aspx" target="_blank" rel="noopener">MiniDumpWriteDump</a>。</p></li><li><p>使用<a href="https://technet.microsoft.com/en-us/sysinternals/dd996900.aspx" target="_blank" rel="noopener">ProcDump</a>，这个工具可以根据CPU使用情况，异常情况，程序是否没有反应，性能计数等来收集dump。</p></li><li><p>使用<a href="http://www.microsoft.com/en-us/download/details.aspx?id=26798" target="_blank" rel="noopener">DebugDiag</a>，它可以监控内存泄露，另外它自动分析dump的结果也很友好。</p></li><li><p>Windows Error Reporting（WER），就是大家看到windows蓝屏后自动收集的那种dump，这个需要到<a href="https://msdn.microsoft.com/en-us/library/windows/hardware/dn641144.aspx" target="_blank" rel="noopener">微软网站</a>上注册。</p></li></ol>]]></content>
    
    <summary type="html">
    
      本文总结了在windows平台下可以生成dump的工具，包括Windbg, Visual Studio，任务管理器，Process Explorer，Windows的API，ProcDump，DebugDiag和WER。
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>判断this指针是不是null有什么意义呢</title>
    <link href="http://fresky.github.io/2015/02/10/what-s-the-mean-of-compare-this-to-null/"/>
    <id>http://fresky.github.io/2015/02/10/what-s-the-mean-of-compare-this-to-null/</id>
    <published>2015-02-10T10:32:02.000Z</published>
    <updated>2019-12-20T08:29:07.293Z</updated>
    
    <content type="html"><![CDATA[<p>今天看到一篇文章<a href="http://www.viva64.com/en/b/0226/" target="_blank" rel="noopener">Still Comparing “this” Pointer to Null?</a>，批评了判断this指针是不是null的做法。</p><p>文章中首先给出了如下的代码示例：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CWindow</span> &#123;</span></span><br><span class="line">    HWND handle;</span><br><span class="line">    <span class="function">HWND <span class="title">GetSafeHandle</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">this</span> == <span class="number">0</span> ? <span class="number">0</span> : handle;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>这段代码看起来很奇怪，貌似目的只是为了允许一个空的<code>CWindow*</code>指针调用<code>GetSafeHandle</code>方法。</p><p>但是我们不应该这么做，首先C++的标准说明通过一个空指针调用非静态函数是未定义的行为。不过如下的代码可能能正常运行。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Class</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">DontAccessMembers</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ::Sleep(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Class* object = <span class="number">0</span>;</span><br><span class="line">    object-&gt;DontAccessMembers();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因为这个方法并没有使用任何成员变量，那么看起来它和静态函数差不多，所以调用可能是没问题的。</p><p>但是编译器可能会优化，比如最开头举得那个例子，可能编译器会认为this指针永远不会是null，这样就可能把判断this指针是不是空的判断优化掉。就像优化如下的if检查一样。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> divideBy = ...;</span><br><span class="line">whatever = <span class="number">3</span> / divideBy;</span><br><span class="line"><span class="keyword">if</span>( divideBy == <span class="number">0</span> ) &#123;</span><br><span class="line">    <span class="comment">// THIS IS IMPOSSIBLE</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>所以，你需要确保你的编译器不会做这样的优化，当然现在还没有任何编译器做这样的优化，但是未来不好说：）</p><p>另外，你如果看看如下代码的输出，估计会疯掉了：）</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FirstBase</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> firstBaseData;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SecondBase</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Method</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"this == 0\r\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"this != 0 (value: %p)\r\n"</span>, <span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Composed1</span> :</span> <span class="keyword">public</span> FirstBase, <span class="keyword">public</span> SecondBase &#123;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Composed2</span> :</span> <span class="keyword">public</span> SecondBase, <span class="keyword">public</span> FirstBase &#123;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Composed1* object1 = <span class="number">0</span>;</span><br><span class="line">    object1-&gt;Method();</span><br><span class="line"></span><br><span class="line">    Composed2* object2 = <span class="number">0</span>;</span><br><span class="line">    object2-&gt;Method();</span><br><span class="line"></span><br><span class="line">    SecondBase* object3 = <span class="keyword">reinterpret_cast</span>&lt;Composed1*&gt;(<span class="number">0</span>);</span><br><span class="line">    object3-&gt;Method();</span><br><span class="line"></span><br><span class="line">    SecondBase* object4 = <span class="keyword">reinterpret_cast</span>&lt;Composed1*&gt;(<span class="number">1</span>);</span><br><span class="line">    object4-&gt;Method();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Visual Studio 2013的输出结果是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">this != 0 (value: 00000004)</span><br><span class="line">this == 0</span><br><span class="line">this == 0</span><br><span class="line">this != 0 (value: 00000005)</span><br><span class="line">Press any key to continue . . .</span><br></pre></td></tr></table></figure><p>object1的this居然不是0，而是4，这是因为FirstBase有一个int的成员变量，在调用SecondBase的Method时，指针向后移了4！</p><p>object2的this就是0了，因为不需要向后移。</p><p>关于object3和object4的输出，就需要看看reinterpret_cast的汇编了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SecondBase* object = reinterpret_cast&lt;Composed1*&gt;( rand() );</span><br><span class="line">010C1000  call        dword ptr [__imp__rand (10C209Ch)] </span><br><span class="line">010C1006  test        eax,eax</span><br><span class="line">010C1008  je          wmain+0Fh (10C100Fh) </span><br><span class="line">010C100A  add         eax,4 </span><br><span class="line">object-&gt;Method();</span><br><span class="line">010C100D  jne         wmain+20h (10C1020h) </span><br><span class="line">010C100F  push        offset string &quot;this == 0&quot; (10C20F4h) </span><br><span class="line">010C1014  call        dword ptr [__imp__printf (10C20A4h)] </span><br><span class="line">010C101A  add         esp,4</span><br></pre></td></tr></table></figure><p>可以看到那个je指令，如果是0，就会jump，这样就不会加4，如果不是0，就会加4。所以object3的输出是0，object4的输出是5。彻底崩溃了吧。</p><p>所以总结一下，不要在非静态函数中判断this指针是不是null，如果想支持空指针也能调用这个函数，就把这个函数定义为静态的。</p>]]></content>
    
    <summary type="html">
    
      不要在非静态函数中判断this指针是不是null，如果想支持空指针也能调用这个函数，就把这个函数定义为静态的。
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>看看科技公司多快能到10亿美金的规模</title>
    <link href="http://fresky.github.io/2015/02/06/how-fast-tech-company-reach-1-billion/"/>
    <id>http://fresky.github.io/2015/02/06/how-fast-tech-company-reach-1-billion/</id>
    <published>2015-02-06T08:39:36.000Z</published>
    <updated>2019-12-20T08:29:07.293Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://dailyinfographic.com/the-race-to-one-billion-dollars-how-fast-tech-companies-grow-infographic" target="_blank" rel="noopener">The Race To One Billion Dollars: How Fast Tech Companies Grow</a>比较了传统行业和科技公司到达10亿美金所花的时间，非常有趣，比如Prada花了98年，而Youtube只花了1年。</p><p><img src="http://dailyinfographic.com/wp-content/uploads/2015/01/OneBillionDollar-Optimized.jpg" alt></p>]]></content>
    
    <summary type="html">
    
      比较了传统行业和科技公司到达10亿美金所花的时间。
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>SmartbBear给出的11条代码审查最佳实践</title>
    <link href="http://fresky.github.io/2015/02/04/code-review-practices-from-smartbear/"/>
    <id>http://fresky.github.io/2015/02/04/code-review-practices-from-smartbear/</id>
    <published>2015-02-04T15:32:47.000Z</published>
    <updated>2019-12-20T08:29:07.293Z</updated>
    
    <content type="html"><![CDATA[<p>代码审查（Code Review）的作用毋庸置疑，但是如何高效地做好代码审查，是一个需要不断尝试，不断提高的过程。我之前的一篇博客 <a href="/2013/07/08/code-workshop-instead-of-code-review/">用code workshop取代code review</a>提到过Box公司是怎么用workshop的形式来做code review的，今天再分享一个SmartBear通过在思科10个月的代码审查总结出来的一个代码审查的建议<a href="http://www2.smartbear.com/Best-Practices-Peer-Code-Review.html" target="_blank" rel="noopener">11 Best Practices of Peer Code Review</a>。</p><ol><li>每次审查200-400行代码。  </li><li>代码审查的速度控制在每小时300-500行以下。  </li><li>分配足够的时间来慢慢的做代码审查，但是不要超过60-90分钟。  </li><li>代码的作者需要在审查之前对代码做一些解释。这个除了可以帮助审查者更快的理解代码之外，一般人在第二次看自己的代码时，并且给别人讲解时可以发现自己在第一次写代码时考虑不周之处。  </li><li>记录每次代码审查的结果，并建议一个可以量化的目标，从而可以不断改进。  </li><li>代码审查的Check List非常重要。  </li><li>保证代码审查发现的问题之后被修复了。  </li><li>老板要营造一个好的代码审查的氛围，鼓励找到问题。  </li><li>考虑“老大在看着你”效应。老板必须持续的表明找到问题是好事，在代码中找到问题和个人能力之间没有必然联系。  </li><li>个人荣誉。知道自己的代码会被审查，每个人都会在写代码时三思而后写。  </li><li>轻量级的代码审查通常更有效。</li></ol>]]></content>
    
    <summary type="html">
    
      代码审查（Code Review）的作用毋庸置疑，分享一个SmartBear通过在思科10个月的代码审查总结出来的一个代码审查的建议-11 Best Practices of Peer Code Review。
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>为什么Form.Timer的event handler在Form被Dispose之后还是被调到了？</title>
    <link href="http://fresky.github.io/2015/01/14/form-timer-callback-is-called-after-the-form-disposed/"/>
    <id>http://fresky.github.io/2015/01/14/form-timer-callback-is-called-after-the-form-disposed/</id>
    <published>2015-01-14T11:26:23.000Z</published>
    <updated>2019-12-20T08:29:07.292Z</updated>
    
    <content type="html"><![CDATA[<p>之前在我的博客<a href="/2013/06/20/where-is-my-timer-csharp-gc/">谁动了我的timer？C#的垃圾回收和调试</a>中举了一个使用<code>Threading.Timer</code>局部变量导致可能被垃圾回收，从而它对应的event handler不能被调用的问题。今天再分享一个Form已经被Dispose了，但是它的<code>Form.Timer</code>的event handler还是被调到的问题。C#中各种<code>Timer</code>的区别，可以参见博客<a href="/2013/07/09/compare-of-5-timers-in-csharp/">C#中5种timer的比较</a>。</p><h1 id="首先应该在Form被Dispose时也Dispose它的Timer"><a href="#首先应该在Form被Dispose时也Dispose它的Timer" class="headerlink" title="首先应该在Form被Dispose时也Dispose它的Timer"></a>首先应该在Form被Dispose时也Dispose它的Timer</h1><p>如果是通过Designer拽进来的，那么它在创建时会写成：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.timer1 = <span class="keyword">new</span> System.Windows.Forms.Timer(<span class="keyword">this</span>.components);</span><br></pre></td></tr></table></figure></p><p>这样Form在Dispose时会Dispose这个Timer，没有问题。但是如果是我们自己手写的，写成了<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.timer1 = <span class="keyword">new</span> System.Windows.Forms.Timer();</span><br></pre></td></tr></table></figure></p><p>那在Form关闭Dispose时，Timer并不会被自动的Dispose，这样就会导致Timer的event handler还能被调到。</p><h1 id="其次，就算Despose了，也不能保证它的event-handler不会被调到"><a href="#其次，就算Despose了，也不能保证它的event-handler不会被调到" class="headerlink" title="其次，就算Despose了，也不能保证它的event handler不会被调到"></a>其次，就算Despose了，也不能保证它的event handler不会被调到</h1><p>在我遇到的这个问题里，可以看到Form已经被Dispose了，这个可以通过windbg的<code>!do</code>命令来看Form的成员变量<code>state</code>，我的dump里<code>!do</code>的部分结果如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">      MT    Field   Offset                 Type VT     Attr    Value Name</span><br><span class="line">...</span><br><span class="line">6d5f3aa4  40001c0       4c         System.Int32  1 instance 17434636 state</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>翻开C#的源代码可以看到state的定义如下：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_CREATED                = <span class="number">0x00000001</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_VISIBLE                = <span class="number">0x00000002</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_ENABLED                = <span class="number">0x00000004</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_TABSTOP                = <span class="number">0x00000008</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_RECREATE               = <span class="number">0x00000010</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_MODAL                  = <span class="number">0x00000020</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_ALLOWDROP              = <span class="number">0x00000040</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_DROPTARGET             = <span class="number">0x00000080</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_NOZORDER               = <span class="number">0x00000100</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_LAYOUTDEFERRED         = <span class="number">0x00000200</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_USEWAITCURSOR          = <span class="number">0x00000400</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_DISPOSED               = <span class="number">0x00000800</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_DISPOSING              = <span class="number">0x00001000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_MOUSEENTERPENDING      = <span class="number">0x00002000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_TRACKINGMOUSEEVENT     = <span class="number">0x00004000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_THREADMARSHALLPENDING  = <span class="number">0x00008000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_SIZELOCKEDBYOS         = <span class="number">0x00010000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_CAUSESVALIDATION       = <span class="number">0x00020000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_CREATINGHANDLE         = <span class="number">0x00040000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_TOPLEVEL               = <span class="number">0x00080000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_ISACCESSIBLE           = <span class="number">0x00100000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_OWNCTLBRUSH            = <span class="number">0x00200000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_EXCEPTIONWHILEPAINTING = <span class="number">0x00400000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_LAYOUTISDIRTY          = <span class="number">0x00800000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_CHECKEDHOST            = <span class="number">0x01000000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_HOSTEDINDIALOG         = <span class="number">0x02000000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_DOUBLECLICKFIRED       = <span class="number">0x04000000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_MOUSEPRESSED           = <span class="number">0x08000000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_VALIDATIONCANCELLED    = <span class="number">0x10000000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_PARENTRECREATING       = <span class="number">0x20000000</span>;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">const</span> <span class="keyword">int</span> STATE_MIRRORED               = <span class="number">0x40000000</span>;</span><br></pre></td></tr></table></figure></p><p>把dump里的state和表明Disposed的2048<code>&amp;</code>一下，就能看出来这个Form已经被Dispose掉了。然后<code>!do</code>这个Form的Timer，有如下结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">0:000&gt; !do 1b0ef780 </span><br><span class="line">Name:        System.Windows.Forms.Timer</span><br><span class="line">MethodTable: 6a21234c</span><br><span class="line">EEClass:     69ff114c</span><br><span class="line">Size:        48(0x30) bytes</span><br><span class="line">File:        C:\windows\Microsoft.Net\assembly\GAC_MSIL\System.Windows.Forms\v4.0_4.0.0.0__b77a5c561934e089\System.Windows.Forms.dll</span><br><span class="line">Fields:</span><br><span class="line">      MT    Field   Offset                 Type VT     Attr    Value Name</span><br><span class="line">6d5f25e8  4000199        4        System.Object  0 instance 00000000 __identity</span><br><span class="line">6b99afd0  40002d2        8 ...ponentModel.ISite  0 instance 00000000 site</span><br><span class="line">6b99921c  40002d3        c ....EventHandlerList  0 instance 00000000 events</span><br><span class="line">6d5f25e8  40002d1       e0        System.Object  0   static 021719d8 EventDisposed</span><br><span class="line">6d5f3aa4  4001f87       20         System.Int32  1 instance    35000 interval</span><br><span class="line">6d5e8138  4001f88       24       System.Boolean  1 instance        0 enabled</span><br><span class="line">6d5e96c8  4001f89       10  System.EventHandler  0 instance 1b4dbfb0 onTimer</span><br><span class="line">6d5f0be0  4001f8a       28 ...Services.GCHandle  1 instance 1b0ef7a8 timerRoot</span><br><span class="line">6a2116bc  4001f8b       14 ...TimerNativeWindow  0 instance 00000000 timerWindow</span><br><span class="line">6d5f25e8  4001f8c       18        System.Object  0 instance 00000000 userData</span><br><span class="line">6d5f25e8  4001f8d       1c        System.Object  0 instance 1b0ef7b0 syncObj</span><br></pre></td></tr></table></figure><p>其中的<code>timerWindow</code>是null，从C#的Timer源代码中可以看到这表明这个Timer也被Dispose了。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"><span class="keyword">bool</span> disposing</span>)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (disposing) &#123;                </span><br><span class="line"><span class="keyword">if</span> (timerWindow != <span class="literal">null</span>) &#123;</span><br><span class="line">timerWindow.StopTimer();                    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Enabled = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">timerWindow = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">base</span>.Dispose(disposing);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>所以不能假设Timer的event handler在Timer Dispose后就一定不会调到了。</p>]]></content>
    
    <summary type="html">
    
      Form的Timer在Form Dispose时一定要Dispose，而且不能假设Timer的event handler在Timer Dispose后就一定不会调到了。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>你知道Form.Show()和Form.ShowDialog()的区别吗？</title>
    <link href="http://fresky.github.io/2015/01/12/do-we-need-dispose-after-show-and-showdialog/"/>
    <id>http://fresky.github.io/2015/01/12/do-we-need-dispose-after-show-and-showdialog/</id>
    <published>2015-01-12T12:21:16.000Z</published>
    <updated>2019-12-20T08:29:07.292Z</updated>
    
    <content type="html"><![CDATA[<p>在我的博文<a href="/2014/12/22/cpp-quiz-from-pvs-studio/">来试试这个来自静态代码分析工具PVS Studio提供C++的小测验吧</a>提到过静态检查工具可以帮助我们找到很多的编程问题，但是在修改这些小问题时也要小心，弄清楚问题的来龙去脉，不能随便凭感觉改，否则会引入新的问题，最近就遇到这样的一个例子。</p><h1 id="问题描述：Form-Show没有Dispose的警告"><a href="#问题描述：Form-Show没有Dispose的警告" class="headerlink" title="问题描述：Form.Show没有Dispose的警告"></a>问题描述：Form.Show没有Dispose的警告</h1><p>先看示例代码吧，很简单，就是在点击一个按钮时弹出一个<code>Form</code>。Coverity报错，说这个<code>Form2</code>创建之后在出作用域之前没有<code>Dispose</code>。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">button1_Click</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Form2 f = <span class="keyword">new</span> Form2();</span><br><span class="line">f.Show();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第一次修改"><a href="#第一次修改" class="headerlink" title="第一次修改"></a>第一次修改</h2><p>既然没有<code>Dispose</code>，那么标准Fix当然是使用<code>Using</code>。于是第一个修改就诞生了，如下所示：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">button1_Click</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">using</span> (Form2 f = <span class="keyword">new</span> Form2())</span><br><span class="line">&#123;</span><br><span class="line">f.Show();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>嗯，Coverity不再报错了，可是一运行代码发现，不对啊，怎么这个对话框闪退呢……</p><p>原因很清晰了，打开了一个<code>Form</code>，但是紧接着就把它<code>Dispose</code>掉了，当然就关掉了。呵呵，想起了我曾经写过的博客<a href="/2013/06/20/where-is-my-timer-csharp-gc/">谁动了我的timer？C#的垃圾回收和调试</a>，是不是有点异曲同工：）</p><h2 id="这个Coverity的警告是对的吗？"><a href="#这个Coverity的警告是对的吗？" class="headerlink" title="这个Coverity的警告是对的吗？"></a>这个Coverity的警告是对的吗？</h2><p>我觉得这个Coeverity警告是一个False Positive，因为Form调用完Show()之后用户关掉时会调用Dispose，具体可以参见<a href="http://msdn.microsoft.com/en-us/library/system.windows.forms.control.show%28v=vs.110%29.aspx" target="_blank" rel="noopener">MSDN</a>的示例代码。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">menuItemHelpAbout_Click</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="comment">// Create and display a modless about dialog box.</span></span><br><span class="line">   AboutDialog about = <span class="keyword">new</span> AboutDialog();</span><br><span class="line">   about.Show();</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Draw a blue square on the form. </span></span><br><span class="line">   <span class="comment">/* <span class="doctag">NOTE:</span> This is not a persistent object, it will no longer be</span></span><br><span class="line"><span class="comment">      * visible after the next call to OnPaint. To make it persistent, </span></span><br><span class="line"><span class="comment">      * override the OnPaint method and draw the square there */</span></span><br><span class="line">   Graphics g = about.CreateGraphics();</span><br><span class="line">   g.FillRectangle(Brushes.Blue, <span class="number">10</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="再来看看Form-ShowDialog有没有什么不同"><a href="#再来看看Form-ShowDialog有没有什么不同" class="headerlink" title="再来看看Form.ShowDialog有没有什么不同"></a>再来看看Form.ShowDialog有没有什么不同</h1><p>假如我们用的是模态对话框，那么代码是下面这样的：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">button1_Click</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Form2 f = <span class="keyword">new</span> Form2();</span><br><span class="line">f.ShowDialog();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>那估计Coverity还是会报一个警告，说创建完对象没有<code>Dispose</code>，那么这个警告是False Positive吗？继续翻<a href="http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx" target="_blank" rel="noopener">MSDN</a>吧，写着如下说明：</p><blockquote><p>When a form is displayed as a modal dialog box, clicking the Close button (the button with an X at the upper-right corner of the form) causes the form to be hidden and the DialogResult property to be set to DialogResult.Cancel. <strong>Unlike non-modal forms</strong>, the Close method is not called by the .NET Framework when the user clicks the close form button of a dialog box or sets the value of the DialogResult property. Instead the form is hidden and can be shown again without creating a new instance of the dialog box. Because a form displayed as a dialog box is hidden instead of closed, you <strong>must call the Dispose method</strong> of the form when the form is no longer needed by your application.</p></blockquote><p>MSDN上的示例代码如下：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ShowMyDialogBox</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   Form2 testDialog = <span class="keyword">new</span> Form2();</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Show testDialog as a modal dialog and determine if DialogResult = OK. </span></span><br><span class="line">   <span class="keyword">if</span> (testDialog.ShowDialog(<span class="keyword">this</span>) == DialogResult.OK)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="comment">// Read the contents of testDialog's TextBox. </span></span><br><span class="line">      <span class="keyword">this</span>.txtResult.Text = testDialog.TextBox1.Text;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">   &#123;</span><br><span class="line">      <span class="keyword">this</span>.txtResult.Text = <span class="string">"Cancelled"</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   testDialog.Dispose();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>所以如果用<code>ShowDialog</code>，就需要这样写了：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">button1_Click</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">using</span> (Form2 f = <span class="keyword">new</span> Form2())</span><br><span class="line">&#123;</span><br><span class="line">f.ShowDialog();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="试试GC能帮什么忙吧"><a href="#试试GC能帮什么忙吧" class="headerlink" title="试试GC能帮什么忙吧"></a>试试GC能帮什么忙吧</h1><p>虽然<code>ShowDialog()</code>不能<code>Dispose</code>，但是因为这个Form是个局部变量，出了作用域应该就可以被回收了吧，我们试试看强制调用<code>GC.Collect()</code>会怎样。于是我加了个按钮，就是去强制垃圾回收，一切符合预期，这个<code>Form</code>确实被<code>Dispose</code>掉了。</p><p>那回过头来再试试<code>Show()</code>，假如我这样写：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">button1_Click</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Form2 f = <span class="keyword">new</span> Form2();</span><br><span class="line">f.Show();</span><br><span class="line">f.Hide();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>那么这个窗口还是会闪退，出了这个作用域，调用GC试试看吧。Oops！！！<code>Dispose</code>没有被调到，什么情况？这个Form究竟还被谁引用这呢？只好祭出windbg了，attach，然后敲<code>!gcroot</code>命令，得到了如下的输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">0:005&gt; !gcroot 02241e6c </span><br><span class="line">HandleTable:</span><br><span class="line">    000a13e8 (pinned handle)</span><br><span class="line">    -&gt; 03205390 System.Object[]</span><br><span class="line">    -&gt; 02227480 System.Collections.Generic.Dictionary`2[[System.Object, mscorlib],[System.Collections.Generic.List`1[[Microsoft.Win32.SystemEvents+SystemEventInvokeInfo, System]], mscorlib]]</span><br><span class="line">    -&gt; 02227a30 System.Collections.Generic.Dictionary`2+Entry[[System.Object, mscorlib],[System.Collections.Generic.List`1[[Microsoft.Win32.SystemEvents+SystemEventInvokeInfo, System]], mscorlib]][]</span><br><span class="line">    -&gt; 02228fb4 System.Collections.Generic.List`1[[Microsoft.Win32.SystemEvents+SystemEventInvokeInfo, System]]</span><br><span class="line">    -&gt; 02228fdc System.Object[]</span><br><span class="line">    -&gt; 02242354 Microsoft.Win32.SystemEvents+SystemEventInvokeInfo</span><br><span class="line">    -&gt; 02242334 Microsoft.Win32.UserPreferenceChangedEventHandler</span><br><span class="line">    -&gt; 02241e6c Form1.Form2</span><br><span class="line"></span><br><span class="line">    000a13ec (pinned handle)</span><br><span class="line">    -&gt; 03203390 System.Object[]</span><br><span class="line">    -&gt; 0222d7a4 System.Windows.Forms.FormCollection</span><br><span class="line">    -&gt; 0222d7bc System.Collections.ArrayList</span><br><span class="line">    -&gt; 0222d7d4 System.Object[]</span><br><span class="line">    -&gt; 02241e6c Form1.Form2</span><br><span class="line"></span><br><span class="line">Found 2 unique roots (run &apos;!GCRoot -all&apos; to see all roots).</span><br></pre></td></tr></table></figure><p>这个<code>UserPreferenceChangedEventHandler</code>又是什么呢？它是一个静态的系统事件，具体参见StackOverflow上的这个<a href="http://stackoverflow.com/a/1147729/304115" target="_blank" rel="noopener">回答</a>。因为是静态的，所以这个<code>Form</code>还被引用，所以不能释放。</p><p>那问题又来了，为啥<code>ShowDialog</code>可以被垃圾回收呢？翻开C#的源代码，找到<code>ShowDialog</code>方法，可以看到最后如下的代码：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">if</span> (IsHandleCreated) &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">DestroyHandle();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个会调到<code>Control</code>的<code>OnHandleDestroyed</code>，然后会注销事件。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnHandleDestroyed</span>(<span class="params">EventArgs e</span>)</span> &#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">if</span> (!RecreatingHandle) &#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">ListenToUserPreferenceChanged(<span class="literal">false</span> <span class="comment">/*listen*/</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ListenToUserPreferenceChanged</span>(<span class="params"><span class="keyword">bool</span> listen</span>)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (GetState2(STATE2_LISTENINGTOUSERPREFERENCECHANGED)) &#123;</span><br><span class="line"><span class="keyword">if</span> (!listen) &#123;</span><br><span class="line">SetState2(STATE2_LISTENINGTOUSERPREFERENCECHANGED, <span class="literal">false</span>);</span><br><span class="line">SystemEvents.UserPreferenceChanged -= <span class="keyword">new</span> UserPreferenceChangedEventHandler(<span class="keyword">this</span>.UserPreferenceChanged);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (listen) &#123;</span><br><span class="line">SetState2(STATE2_LISTENINGTOUSERPREFERENCECHANGED, <span class="literal">true</span>);</span><br><span class="line">SystemEvents.UserPreferenceChanged += <span class="keyword">new</span> UserPreferenceChangedEventHandler(<span class="keyword">this</span>.UserPreferenceChanged);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>嗯，绕了一大圈，你搞明白<code>Form.Show()</code>和<code>Form.ShowDialog()</code>的区别了吗？简单的说，就是调用<code>Form.Show()</code>不需要显示的<code>Dispose</code>，但是调用<code>Form.ShowDialog()</code>需要显示的<code>Dispose</code>。</p>]]></content>
    
    <summary type="html">
    
      本文解析了Form.Show()和Form.ShowDialog()的区别，简单的说，就是调用Form.Show()不需要显示的Dispose，但是调用Form.ShowDialog()需要显示的Dispose。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>查找无用代码Dead Code的一些心得</title>
    <link href="http://fresky.github.io/2015/01/09/how-to-detect-dead%20-code/"/>
    <id>http://fresky.github.io/2015/01/09/how-to-detect-dead -code/</id>
    <published>2015-01-09T08:55:02.000Z</published>
    <updated>2019-12-20T08:29:07.292Z</updated>
    
    <content type="html"><![CDATA[<p>一个系统开发久了难免会有一些没用的代码Dead Code。把这些没用的代码删除对提高代码质量，降低维护成本都有很大的好处。本文就简单总结一下我认为有效的可以找到无用代码的一些心得。</p><h1 id="使用工具帮助查找无用代码"><a href="#使用工具帮助查找无用代码" class="headerlink" title="使用工具帮助查找无用代码"></a>使用工具帮助查找无用代码</h1><h2 id="Resharper——收费，只适用于C-。"><a href="#Resharper——收费，只适用于C-。" class="headerlink" title="Resharper——收费，只适用于C#。"></a>Resharper——收费，只适用于C#。</h2><p><a href="http://www.jetbrains.com/resharper/" target="_blank" rel="noopener">Resharper</a>是一个C#开发必备神器了。它能检查出很多代码问题，包含一些无用代码，参见下图。</p><img src="/images/resharperdeadcode.png"><h2 id="Visual-Studio的Code-Analysis-FXCop-——集成在Visual-Studio中，只适用于C-。"><a href="#Visual-Studio的Code-Analysis-FXCop-——集成在Visual-Studio中，只适用于C-。" class="headerlink" title="Visual Studio的Code Analysis (FXCop)——集成在Visual Studio中，只适用于C#。"></a>Visual Studio的Code Analysis (FXCop)——集成在Visual Studio中，只适用于C#。</h2><p><a href="http://msdn.microsoft.com/en-us/library/ee1hzekz.aspx" target="_blank" rel="noopener">Code Analysis for Managed Code Warnings</a>可以针对C#做很多检查，其中和Dead Code相关的检查有如下几个：</p><ol><li><a href="http://msdn.microsoft.com/en-us/library/ms182268.aspx" target="_blank" rel="noopener">CA1801: Review unused parameters</a>  </li><li><a href="http://msdn.microsoft.com/en-us/library/ms182278.aspx" target="_blank" rel="noopener">CA1804: Remove unused locals</a>  </li><li><a href="http://msdn.microsoft.com/en-us/library/ms182264.aspx" target="_blank" rel="noopener">CA1811: Avoid uncalled private code</a>  </li><li><a href="http://msdn.microsoft.com/en-us/library/ms182265.aspx" target="_blank" rel="noopener">CA1812: Avoid uninstantiated internal classes</a>  </li><li><a href="http://msdn.microsoft.com/en-us/library/ms245042.aspx" target="_blank" rel="noopener">CA1823: Avoid unused private fields</a>  </li></ol><p>可以在Visual Studio中自己创建一个RuleSet，只包含这几个规章，然后跑一遍就行了，参见下图。</p><img src="/images/fxcop1.png"><img src="/images/fxcop2.png"><img src="/images/fxcop3.png"><h1 id="通过测试覆盖率Code-Coverage寻找潜在的无用代码"><a href="#通过测试覆盖率Code-Coverage寻找潜在的无用代码" class="headerlink" title="通过测试覆盖率Code Coverage寻找潜在的无用代码"></a>通过测试覆盖率Code Coverage寻找潜在的无用代码</h1><p>如果一段代码的测试覆盖率是0，那它有可能就是Dead Code。当然这条规则只在测试覆盖率很高，而且测试质量很高的情况下才有效。这个测试覆盖率可以是单元测试加上集成测试，再加上UI自动化测试。测试质量越高，越能容易的发现潜在的Dead Code。所以如果严格按照TDD的流程进行开发，理论上就不应该有无用代码，当然前提是驱动开发的那个测试是有用的：）。</p><h1 id="查找重复的代码"><a href="#查找重复的代码" class="headerlink" title="查找重复的代码"></a>查找重复的代码</h1><p>我认为重复代码也是一种无用代码，而且可能比无用代码危害还大。查找重复代码相对来说比查找无用代码容易一些，也有很多的工具可以使用，比如：</p><h2 id="Visual-Studio-——-只适用于C-。"><a href="#Visual-Studio-——-只适用于C-。" class="headerlink" title="Visual Studio —— 只适用于C#。"></a>Visual Studio —— 只适用于C#。</h2><p>我之前的博客<a href="/2012/08/21/find-cloned-code-in-csharp-with-visual-studio-2012/">VS2012很cool的新功能：检查重复代码</a>介绍过，参加下图。</p><img src="/images/vscodeclone.png"><h2 id="Simian-——-非商用免费，商用收费"><a href="#Simian-——-非商用免费，商用收费" class="headerlink" title="Simian —— 非商用免费，商用收费"></a>Simian —— 非商用免费，商用收费</h2><p><a href="http://www.harukizaemon.com/simian/index.html" target="_blank" rel="noopener">Simian</a>支持Java, C#, C, C++, COBOL, Ruby, JSP, ASP, HTML, XML, Visual Basic, Groovy。</p><h1 id="阅读代码，理解代码"><a href="#阅读代码，理解代码" class="headerlink" title="阅读代码，理解代码"></a>阅读代码，理解代码</h1><p>这个不用说了，什么工具都比不上熟悉代码的你：）</p>]]></content>
    
    <summary type="html">
    
      把这些没用的代码删除对提高代码质量，降低维护成本都有很大的好处。本文就简单总结一下我认为有效的可以找到无用代码的一些心得：1. 使用工具帮助查找无用代码。2. 通过测试覆盖率Code Coverage寻找潜在的无用代码。3. 查找重复的代码。4. 阅读代码，理解代码。
    
    </summary>
    
    
      <category term="Refactoring" scheme="http://fresky.github.io/tags/Refactoring/"/>
    
  </entry>
  
  <entry>
    <title>Firefox 34的&quot;Manage Search Engine&quot;去哪了？</title>
    <link href="http://fresky.github.io/2015/01/08/how-to-manage-the-search-engine-in-firefox-34/"/>
    <id>http://fresky.github.io/2015/01/08/how-to-manage-the-search-engine-in-firefox-34/</id>
    <published>2015-01-08T10:22:38.000Z</published>
    <updated>2019-12-20T08:29:07.291Z</updated>
    
    <content type="html"><![CDATA[<p>我在之前的博客<a href="/2014/04/30/use-ready2search-to-customize-your-search-plugin-in-firefox-and-chrome/">使用Ready2Search来定制Firefox和Chrome的搜索框</a>介绍过如何定制Firefox的搜索框，在设置完关键字之后就能直接在地址栏选择搜索引擎，非常方便。但是我更新了Firefox的最新版本34之后，发现搜索框被“加强”了。没有那个”Manage Search Engine“的按钮，这样在新加搜索引擎后就不能设置关键字了。</p><p>解决办法是在firefox中打开这个地址<a href="chrome://browser/content/search/engineManager.xul" target="_blank" rel="noopener">chrome://browser/content/search/engineManager.xul</a>，这样就可以看到那个熟悉的界面了。</p>]]></content>
    
    <summary type="html">
    
      本文介绍了如何在Firefox的最新版本34上打开”Manage Search Engine“的按钮，这样在新加搜索引擎后就可以继续设置关键字了。
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>来试试这个来自静态代码分析工具PVS Studio提供C++的小测验吧</title>
    <link href="http://fresky.github.io/2014/12/22/cpp-quiz-from-pvs-studio/"/>
    <id>http://fresky.github.io/2014/12/22/cpp-quiz-from-pvs-studio/</id>
    <published>2014-12-22T09:52:59.000Z</published>
    <updated>2019-12-20T08:29:07.291Z</updated>
    
    <content type="html"><![CDATA[<p>静态代码分析工具<a href="http://www.viva64.com/en/pvs-studio/" target="_blank" rel="noopener">PVS-Sudio</a>以他们检查开源代码库发现的问题作为题库，随机的抽取15道题，组成了这个<a href="http://q.viva64.com/" target="_blank" rel="noopener">C++ Quiz: are you a code guru?</a>，每道题有1分钟的时间限制，通过这个可以看看自己C++的code review的功底咋样。</p><p>自从项目用了<a href="http://www.coverity.com/" target="_blank" rel="noopener">coverity</a>发现了各种各样的问题之后，我就觉得静态分析工具真的是一个好东西，可以从WikiPedia的<a href="http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis" target="_blank" rel="noopener">List of tools for static code analysis</a>上看到静态分析工具的列表。</p>]]></content>
    
    <summary type="html">
    
      静态代码分析工具以他们检查开源代码库发现的问题作为题库，做了一个C++的小测验。
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>用Wix#可以直接写C#代码来生成Wix的MSI安装文件</title>
    <link href="http://fresky.github.io/2014/12/22/use-csharp-to-build-msi-with-wix-sharp/"/>
    <id>http://fresky.github.io/2014/12/22/use-csharp-to-build-msi-with-wix-sharp/</id>
    <published>2014-12-22T09:33:28.000Z</published>
    <updated>2019-12-20T08:29:07.291Z</updated>
    
    <content type="html"><![CDATA[<p>如果不想写Wix的XML文件并且熟悉C#，那么现在有了一个新选择-<a href="https://wixsharp.codeplex.com/" target="_blank" rel="noopener">Wix#</a>。有了它，可以直接写C#代码来生成Wix的MSI安装文件。Wix#的作者Oleg Shilo 就是CS-Script的作者，我在之前的博客<a href="/2014/03/31/make-your-notepadd-plus-plus-as-csharp-ide-with-intellisense-and-code-execution/">用CS-Script把Notepad++变身支持智能提示和运行代码的C#集成开发环境</a>介绍过。</p><p>使用方法非常简单，在C#的项目中添加nuget的Wixsharp依赖，会在你的项目中添加一个setup.cs包含示例代码，语法非常简洁明了。如下的示例代码在msi中加了2个文件，并且添加了一个customaction。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Project project =</span><br><span class="line"><span class="keyword">new</span> Project(<span class="string">"MyProduct"</span>,</span><br><span class="line"><span class="keyword">new</span> Dir(<span class="string">@"%ProgramFiles%\My Company\My Product"</span>,</span><br><span class="line"><span class="keyword">new</span> File(<span class="string">@"Files\Bin\MyApp.exe"</span>),</span><br><span class="line"><span class="keyword">new</span> Dir(<span class="string">@"Docs\Manual"</span>,</span><br><span class="line"><span class="keyword">new</span> File(<span class="string">@"Files\Docs\Manual.txt"</span>))),</span><br><span class="line"><span class="keyword">new</span> ManagedAction(<span class="string">"MyAction"</span>));</span><br><span class="line"></span><br><span class="line">project.UI = WUI.WixUI_InstallDir;</span><br><span class="line">project.GUID = <span class="keyword">new</span> Guid(<span class="string">"6f330b47-2577-43ad-9095-1861ba25889b"</span>);</span><br><span class="line"></span><br><span class="line">Compiler.BuildMsi(project);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      如果不想写Wix的XML文件并且熟悉C#，那么现在有了一个新选择-Wix#。有了它，可以直接写C#代码来生成Wix的MSI安装文件。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>你真的知道C#的TryParse吗？</title>
    <link href="http://fresky.github.io/2014/12/18/do-you-really-know-c-tryparse/"/>
    <id>http://fresky.github.io/2014/12/18/do-you-really-know-c-tryparse/</id>
    <published>2014-12-18T11:00:03.000Z</published>
    <updated>2019-12-20T08:29:07.291Z</updated>
    
    <content type="html"><![CDATA[<p>前段时间遇到一个问题，在一个UI上需要显示两个值的差值，所以在代码中使用了<code>Convert.ToDouble</code>，这个相当于<code>Double.Parse(String)</code>。一直工作的很好，直到有一天发现有应用给的这两个输入值是“1, 2”之类的字符串，并不是一个double数值了，于是程序就Crash了。</p><p>所以改成了<code>Double.TryParse</code>，这样如果失败就放弃，不计算差值。嗯，问题解决，不会crash了。接着就加了几个测试来覆盖这段逻辑，但是在测试过程中，发现如果输入是“1,2”，这个TryParse是返回true的，生成的double数值是12。这就有趣了，第一个猜测就是<code>Double.TryParse</code>把逗号当成了千位数的分隔符，直接去掉了。</p><p>翻翻MSDN找到了有两个重载的，一个是<code>Double.TryParse(String, Double)</code>，一个是<code>Double.TryParse(String, NumberStyles, IFormatProvider, Double)</code>。<code>Double.TryParse(String, Double)</code>中使用的NumberStyles是<code>NumberStyles.Float</code>和<code>NumberStyles.AllowThousands</code>。其中<code>NumberStyles.AllowThousands</code>就是表明支持用逗号作为千位数的分隔符。所以如果真的是需要处理浮点数，应该用如下的格式：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> d;</span><br><span class="line"><span class="keyword">bool</span> b = <span class="keyword">double</span>.TryParse(s, NumberStyles.Number, CultureInfo.InvariantCulture, <span class="keyword">out</span> d);</span><br></pre></td></tr></table></figure><p>从<a href="http://msdn.microsoft.com/en-us/library/system.globalization.numberstyles.aspx" target="_blank" rel="noopener">NumberStyles Enumeration</a>可以找到所有可能的NumberStyles。</p><p>在这个页面前面列出的允许的数字类型，包括<br>AllowCurrencySymbol，<br>AllowDecimalPoint，<br>AllowExponent，<br>AllowHexSpecifier，<br>AllowLeadingSign，<br>AllowLeadingWhite，<br>AllowParentheses，<br>AllowThousands，<br>AllowTrailingSign，<br>AllowTrailingWhite。</p><p>后面是一些常用的组合：</p><table><thead><tr><th>组合名</th><th>描述</th></tr></thead><tbody><tr><td>Any</td><td>除AllowHexSpecifier之外所有的格式</td></tr><tr><td>Currency</td><td>除AllowExponent 和 AllowHexSpecifier之外所有的格式</td></tr><tr><td>Float</td><td>AllowLeadingWhite, AllowTrailingWhite, AllowLeadingSign, AllowDecimalPoint, AllowExponent</td></tr><tr><td>HexNumber</td><td>AllowLeadingWhite, AllowTrailingWhite, AllowHexSpecifier</td></tr><tr><td>Integer</td><td>AllowLeadingWhite, AllowTrailingWhite, AllowLeadingSign。Int.TryParse的默认NumberStyles就是NumberStyles.Integer</td></tr><tr><td>None</td><td>只能包含数字</td></tr><tr><td>Number</td><td>AllowLeadingWhite, AllowTrailingWhite, AllowLeadingSign, AllowTrailingSign, AllowDecimalPoint, AllowThousands</td></tr></tbody></table><p>可以根据自己的需要选择合适的NumberStyles。当然如果想让AllowThousands真的只能表示千位分隔符，就必须祭出正则表达式了，比如<code>@&quot;^-?\d{1,3}(,\d\d\d)*&quot;</code>。</p>]]></content>
    
    <summary type="html">
    
      本文从解决一个C#Double.TryParse的bug谈起，介绍了TryParse的缺省参数NumberStyles和IFormatProvider。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>用gooreplacer来加速你的浏览器</title>
    <link href="http://fresky.github.io/2014/10/13/gooreplacer-speed-up-your-browser-in-china/"/>
    <id>http://fresky.github.io/2014/10/13/gooreplacer-speed-up-your-browser-in-china/</id>
    <published>2014-10-13T02:49:00.000Z</published>
    <updated>2019-12-20T08:29:07.290Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://liujiacai.net/gooreplacer/" target="_blank" rel="noopener">gooreplacer</a>是一款能够自动替换掉网页中的 Google fonts、apis、themes 为中国科学技术大学镜像资源的 Chrome、Firefox 扩展，主要替换一下内容：</p><blockquote><p>fonts.googleapis.com ————–&gt; fonts.lug.ustc.edu.cn<br>ajax.googleapis.com —————&gt; ajax.lug.ustc.edu.cn<br>themes.googleusercontent.com –&gt; google-themes.lug.ustc.edu.cn<br>fonts.gstatic.com —————–&gt; fonts-gstatic.lug.ustc.edu.cn</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://liujiacai.net/gooreplacer/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;gooreplacer&lt;/a&gt;是一款能够自动替换掉网页中的 Google fonts、apis、themes 为中国科学技术
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>微软的.NET示例代码放在Github上了</title>
    <link href="http://fresky.github.io/2014/09/24/dot-net-samples-in-github-now/"/>
    <id>http://fresky.github.io/2014/09/24/dot-net-samples-in-github-now/</id>
    <published>2014-09-24T09:28:00.000Z</published>
    <updated>2019-12-20T08:29:07.290Z</updated>
    
    <content type="html"><![CDATA[<p>微软的.NET Samples放在<a href="https://github.com/Microsoft/dotnetsamples" target="_blank" rel="noopener">Github</a>上了，都是MIT License。包含CLR MD的示例代码<a href="https://github.com/Microsoft/dotnetsamples/tree/master/Microsoft.Diagnostics.Runtime/CLRMD" target="_blank" rel="noopener">CLR MD</a>。CLR MD在我之前的博文<a href="/2014/02/17/use-clrmd-to-create-your-own-csharp-debugger/">使用CLRMD编写一个自己的C#调试器</a>和<a href="/2014/02/18/clrmd-find-dac-location-from-symbol-server/">使用CLRMD时通过Symbol Server找Dac的位置来初始化ClrRuntime</a>提到过。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;微软的.NET Samples放在&lt;a href=&quot;https://github.com/Microsoft/dotnetsamples&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Github&lt;/a&gt;上了，都是MIT License。包含CLR MD的
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>如何在Windows中打开多个Windows Media Player</title>
    <link href="http://fresky.github.io/2014/08/11/how-to-launch-multiple-windows-media-players/"/>
    <id>http://fresky.github.io/2014/08/11/how-to-launch-multiple-windows-media-players/</id>
    <published>2014-08-11T03:54:00.000Z</published>
    <updated>2019-12-20T08:29:07.290Z</updated>
    
    <content type="html"><![CDATA[<p>在很多情况下我们需要保证我们的应用只有一个实例在运行，要实现这个目的有很多种做法，比如  </p><ol><li>我们可以在启动程序时遍历现在运行的进程列表，来看看我们这个进程是不是已经在运行了，如果已经在运行了就直接退出。  </li><li>我们可以在启动程序时在硬盘生成一个文件，下次启动时来检查这个文件。  </li><li>等等。。。  </li></ol><p>我们知道在windows中是不能打开多个Windows Media Player的，下面来看看Windows Media Player是怎么做的。</p><p>打开一个Windows Media Player，然后用<a href="http://technet.microsoft.com/en-US/sysinternals" target="_blank" rel="noopener">Process Explorer</a>来看看Windows Media Player这个进程下的句柄，如下图所示：</p><img src="/images/wmp_mutex.png"><p>可以看到wmplayer.exe这个进程有一个Mutant，名字是Mcirosoft_WMP_70_CheckForOtherInstanceMutex，从名字也能猜到这个Mutex是干啥用的。原来Windows Media Player是使用Mutex来保证只有一个Windows Media Player的实例。</p><p>我们来验证一下，在这个句柄上点右键，然后点击“Close Handle”，把这个handle关掉。然后在运行wmplayer.exe，这个时候就可以看到我们可以打开第二个Windows Media Player了。</p><p>下面简单对比一下Windows中的Mutex、Semaphore、Event和Critical Section。</p><ol><li>Mutext，也叫做Mutant。只允许一个线程进入，这个进入的线程被认为是Mutex的所有者。所有者可以重入。Mutex的所有者需要在操作完成后释放这个Mutex，如果没有释放就结束了，操作系统会释放这个Mutex，但是会设置成<strong>Abandoned Mutex</strong>。</li><li>Semaphore。维护了一个计数器，每当一个线程获取这个Semaphore，就会减一。当线程释放这个Semaphore，就会加一。<strong>Semaphore不维护所有者信息</strong>。</li><li>Event。维护一个布尔标志。分为自动和手动两种。</li><li>Critical Section。和Mutex类似，但是是<strong>用户态</strong>的对象，前面3个都是内核态的。只能用在进程内。线程退出前必须释放（LeaveCriticalSection），否则其他等待这个Critical Section的线程会永远等待下去。</li></ol><p>顺便说一下Windows的API：WaitForSingleObject或者WaitForMultipleObjects中所谓的Signaled在不同的对象中指的是什么意思：</p><ol><li>进程（线程），Signaled指的是进程（线程）结束了。</li><li>Mutex，Signaled指的是Mutex是Free的。</li><li>Event，Signaled指的是Event flag is raised。</li><li>Semaphore，Signaled指的是Semaphore的count大于0.</li><li>文件，Signaled指的是I/O操作结束了。</li><li>Timer，Signaled指的是过期了。</li></ol>]]></content>
    
    <summary type="html">
    
      如何在Windows中打开多个Windows Media Player，本文介绍了Windows中的Mutex、Semaphore、Event和Critical Section的区别。
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>Windows平台Atom编辑器的常用快捷键小抄Cheat sheet</title>
    <link href="http://fresky.github.io/2014/07/16/atom-cheat-sheet-for-windows/"/>
    <id>http://fresky.github.io/2014/07/16/atom-cheat-sheet-for-windows/</id>
    <published>2014-07-16T00:46:00.000Z</published>
    <updated>2019-12-20T08:29:07.289Z</updated>
    
    <content type="html"><![CDATA[<p>Github推出了一个类似于<a href="http://www.sublimetext.com/" target="_blank" rel="noopener">Sublime</a>的编辑器<a href="https://atom.io/" target="_blank" rel="noopener">Atom</a>，现在可以直接从官网下载Windows平台的zip包，也可以用<a href="http://chocolatey.org/packages/atom" target="_blank" rel="noopener">Chocolatey</a>来安装。我在之前的博客<a href="/2013/06/28/windows-application-management-tools/">Windows的应用管理工具 PortableApps，Chocolatey和Ninite</a>中介绍过。</p><p>我总结了一些常用到的Atom的快捷键，列在这里，供大家参考。可以从<a href="https://raw.github.com/fresky/fresky.github.io/source/images/Atom_Cheat_Sheet.pdf" target="_blank" rel="noopener">这里</a>下载pdf版本。</p><hr><h1 id="General"><a href="#General" class="headerlink" title="General"></a>General</h1><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>Ctrl + Shift + p</td><td>Toggle command palette</td></tr><tr><td>Ctrl + ,</td><td>Setting</td></tr></tbody></table><hr><h1 id="View"><a href="#View" class="headerlink" title="View"></a>View</h1><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>Ctrl + \</td><td>Toggle tree view and side bar</td></tr><tr><td>Ctrl + 0</td><td>Focus on the tree view</td></tr><tr><td>F11</td><td>Toggle full screen</td></tr><tr><td>Ctrl + Shift + m</td><td>Toggle markdown preview</td></tr></tbody></table><hr><h1 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h1><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>Ctrl + f</td><td>Find in file</td></tr><tr><td>Ctrl + Shift + f</td><td>Find in project</td></tr><tr><td>Alt + F3</td><td>Find and highlight all</td></tr><tr><td>Ctrl + g</td><td>Go to line</td></tr><tr><td>Ctrl + r</td><td>Toggle file symbol</td></tr><tr><td>Ctrl + Shift + r</td><td>Toggle project symbol</td></tr><tr><td>Ctrl + m</td><td>Go to matching bracket</td></tr><tr><td>Ctrl + Alt + [</td><td>Fold current row</td></tr><tr><td>Ctrl + Alt + ]</td><td>Unfold current row</td></tr><tr><td>Ctrl + Alt + Shift + [</td><td>Fold all</td></tr><tr><td>Ctrl + Alt + Shift + ]</td><td>Unfold all</td></tr></tbody></table><hr><h1 id="File"><a href="#File" class="headerlink" title="File"></a>File</h1><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>Ctrl + t (Ctrl + p)</td><td>Open file in current project</td></tr><tr><td>Ctrl + b</td><td>Open file in current buffer</td></tr><tr><td>Ctrl + k, left/right/up/down</td><td>Split pane left/right/up/down</td></tr><tr><td>Ctrl + k, Ctrl + left/right/up/down</td><td>Focus pane left/right/up/down</td></tr></tbody></table><hr><h1 id="Edit"><a href="#Edit" class="headerlink" title="Edit"></a>Edit</h1><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>Ctrl + Space</td><td>Show available auto-completions</td></tr><tr><td>Ctrl + /</td><td>Toggle line comment</td></tr><tr><td>Ctrl + up/down</td><td>Move line up/down</td></tr><tr><td>Ctrl + Delete</td><td>Delete following word</td></tr><tr><td>Ctrl + Backsapce</td><td>Delete previous word</td></tr><tr><td>Ctrl + Shift + k</td><td>Delete current line</td></tr><tr><td>Ctrl + Shift + d</td><td>Duplicate current line</td></tr><tr><td>Ctrl + j</td><td>Join current and next line</td></tr><tr><td>Ctrl + d</td><td>Select current word</td></tr><tr><td>Ctrl + Shift + c</td><td>Copy current file path</td></tr><tr><td>Ctrl + Alt + .</td><td>Close current tag</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      本文总结了Windows平台Atom编辑器的常用快捷键小抄cheat sheet。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>遇到Class not registered的COM异常怎么办</title>
    <link href="http://fresky.github.io/2014/06/23/how-to-fix-class-not-registered-exception-for-com/"/>
    <id>http://fresky.github.io/2014/06/23/how-to-fix-class-not-registered-exception-for-com/</id>
    <published>2014-06-23T09:13:00.000Z</published>
    <updated>2019-12-20T08:29:07.289Z</updated>
    
    <content type="html"><![CDATA[<p>我通常遇到Class not registered的异常有如下3种原因：</p><ol><li>真的是COM注册有问题。</li><li>COM对象的构造函数或者FinalConstruct有问题。</li><li>COM对象所在的DLL没有被正确的加载进来。</li></ol><p>一般遇到Class not registered的异常，会写一个如下的C++小程序，只是调用<code>CoCreateInstance</code>，同时在COM对象的构造函数里打个断点，然后跑跑看返回的<code>HRESULT</code>是什么。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdafx.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">::CoInitialize(<span class="literal">NULL</span>);</span><br><span class="line">CComPtr&lt;IUnknown&gt; comObject;</span><br><span class="line">HRESULT hr = comObject.CoCreateInstance(<span class="string">L"Progid"</span>);</span><br><span class="line">::CoUninitialize();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果是上面说的第一个种错误，那么COM对象的构造函数的断点进不去。这种比较好修复，直接运行<code>regsvr32 target.dll</code>就好了。</p><p>如果是上面说的第二种错误，那么COM对象的构造函数能够进去，这个时候如果打开exception的话，应该可以看到构造函数或者FinalConstruct里抛出了什么异常，修改这个异常就好了。</p><p>如果是上面说的第三种错误，那么这个C++小程序可以正确的运行，并且返回S_OK，这就有点郁闷了。我遇到的例子是在crash之后用windbg打开dump，运行<code>lm</code>命令，可以看到这个COM对象所在的module没有被加载，如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Unloaded modules:</span><br><span class="line">???????? ????????   mydll.dll</span><br></pre></td></tr></table></figure></p><p>如果dll没有正确的被加载，也是会抛出这个Class not registered的异常的。如何进一步验证呢，这个就又要求助于我在上篇文章<a href="/2014/06/20/using-gflags-to-catch-dump-for-the-disappeared-process/">消失的进程——谁是凶手?</a>中提到的gflags了，这次需要使用的功能是<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff556886%28v=vs.85%29.aspx" target="_blank" rel="noopener">Show loader snaps</a>，如下图所示：</p><img src="/images/gflags_loader_snaps.png"><p>这样程序运行后，windbg会自动attach上去，然后就可以在windbg的窗口看到所有加载和卸载module的详细信息，比如在我遇到的这个问题里面会发现如下的错误信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- LdrpGenericExceptionFilter - ERROR: Function LdrpSnapIAT raised exception 0xc0000139</span><br></pre></td></tr></table></figure><p>0xc0000139的意思是说Entry point not found，通过这些详细信息应该可以定位到为什么dll没有加载成功。</p>]]></content>
    
    <summary type="html">
    
      本文总结了3种可能导致COM的Class not registered的异常的情况，并且分别给出了解决办法。
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>消失的进程——谁是凶手?</title>
    <link href="http://fresky.github.io/2014/06/20/using-gflags-to-catch-dump-for-the-disappeared-process/"/>
    <id>http://fresky.github.io/2014/06/20/using-gflags-to-catch-dump-for-the-disappeared-process/</id>
    <published>2014-06-20T08:10:00.000Z</published>
    <updated>2019-12-20T08:29:07.289Z</updated>
    
    <content type="html"><![CDATA[<p>最近遇到一个奇怪的问题，在用TestComplete进行自动化测试时，一个进程莫名其妙的退出了，没有留下任何痕迹。首先想到的是用Windbg attach到这个进程尝试看看是什么原因导致进程退出。但是一旦用Windbg attach，就不能重现了。于是就需要祭出本文的主角：<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/ff549557%28v=vs.85%29.aspx" target="_blank" rel="noopener">gflags</a>。gflags可以开启或者关闭很多调试开关，本文就介绍一下gflags的<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/jj602791%28v=vs.85%29.aspx" target="_blank" rel="noopener">Monitoring Silent Process Exit</a>的功能。</p><p>从Windows7开始，可以使用gflags的Monitoring Silent Process Exit设置来监视进程因为如下两个原因退出。  </p><ul><li>自己终结。进程自己调用了<code>ExitProcess</code>。可以通过设置Ignore Self Exits来忽略这种情况的退出。  </li><li>跨进程终结。别的进程调用了<code>TerminateProcess</code>。</li></ul><p>使用方法很简单，打开gflags，点击Monitoring Silent Process Exit页面，输入想监视的进程，然后敲击tab，把Enable Monitoring Silent Process Exit Monitoring打勾就行了，如下图所示。</p><img src="/images/gflags.png"><p>gflags可以设置3种报告模式：  </p><ul><li>Launch monitor process：启动一个监视进程，例如可以在进程退出时启动windbg。用<code>windbg -p %e</code>来打开windbg，并且attach到目标进程上。    </li><li>Enable dump collection：自动收集dump。  </li><li>Enable notification：桌面通知。   </li></ul><p>配置好这些之后，在进程退出时就能收到通知，并且调试了。也会在Event Viewer里记录一条记录，也可以通过打开<code>eventvwr.msc</code>，在Windows Logs &gt; Application中找Source是Process Exit Monitor的。</p>]]></content>
    
    <summary type="html">
    
      使用gflags的Monitoring Silent Process Exit在进程退出前抓取dump，分析进程神秘消失的原因。
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>在COM接口中不要使用同时出现只是大小写不同的名字作为属性名、函数名或者参数名</title>
    <link href="http://fresky.github.io/2014/05/23/do-not-use-same-names-in-com-interface-which-only-different-in-capitalizatoin/"/>
    <id>http://fresky.github.io/2014/05/23/do-not-use-same-names-in-com-interface-which-only-different-in-capitalizatoin/</id>
    <published>2014-05-23T00:49:00.000Z</published>
    <updated>2019-12-20T08:29:07.288Z</updated>
    
    <content type="html"><![CDATA[<p>昨天被一个编译错误折磨了很久，从中学到了这个教训：<strong>在COM接口中不要使用同时出现只是大小写不同的名字作为属性名、函数名或者参数名</strong>。</p><p>在一个.h文件中有2个接口如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">__interface A : IUnknown</span><br><span class="line">&#123;</span><br><span class="line">    …</span><br><span class="line">    [propget, helpstring(<span class="string">"property Name"</span>)]</span><br><span class="line">    <span class="function">HRESULT <span class="title">Name</span><span class="params">( [out, retval] BSTR* pName)</span></span>;</span><br><span class="line">…</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">__interface B : IUnknown</span><br><span class="line">&#123;</span><br><span class="line">    …</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>我在接口B中新加了一个方法如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">__interface B : IUnknown</span><br><span class="line">&#123;</span><br><span class="line">    …</span><br><span class="line">    [helpstring(<span class="string">"method SetName"</span>)]</span><br><span class="line">    <span class="function">HRESULT <span class="title">SetName</span><span class="params">([in] BSTR name)</span></span>;</span><br><span class="line">…</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>结果编译别的使用A的工程时遇到了如下的错误：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1&gt; error C2039: <span class="string">'get_Name'</span> : is not a member of <span class="string">'ATL::_NoAddRefReleaseOnCComPtr&lt;T&gt;'</span></span><br><span class="line">1&gt;          with</span><br><span class="line">1&gt;          [</span><br><span class="line">1&gt;              T=A</span><br><span class="line">1&gt;          ]</span><br></pre></td></tr></table></figure></p><p>打开对应.tlb后发现，接口A的方法变成了<strong>get_name</strong>。应该是<strong>get_Name</strong>。</p><p>从MSDN的<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff637359%28v=vs.85%29.aspx" target="_blank" rel="noopener">COM Technical Overview</a>可以找到如下关于命名的说明：</p><blockquote><p>Names are <strong>stored with case preserved</strong>, but they are <strong>compared as case-insensitive</strong>. Applications that define storage element names must choose names that work in either situation.</p></blockquote><p>就是说当Visual Studio生成.tlb文件的时候，认为属性名Name和参数名name是一样的。所以生成get方法时就使用了小写的n。</p><p>如果把新加的B的接口改成如下就没有错误了。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">__interface B : IUnknown</span><br><span class="line">&#123;</span><br><span class="line">    …</span><br><span class="line">    [helpstring(<span class="string">"method SetName"</span>)]</span><br><span class="line">    <span class="function">HRESULT <span class="title">SetName</span><span class="params">([in] BSTR paraName)</span></span>;</span><br><span class="line">…</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>所以：<strong>在COM接口中不要使用同时出现只是大小写不同的名字作为属性名、函数名或者参数名</strong>。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;昨天被一个编译错误折磨了很久，从中学到了这个教训：&lt;strong&gt;在COM接口中不要使用同时出现只是大小写不同的名字作为属性名、函数名或者参数名&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;在一个.h文件中有2个接口如下：&lt;br&gt;&lt;figure class=&quot;highlight c+
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>C#中只使用Invokerequired来判断是不是UI线程可靠吗？</title>
    <link href="http://fresky.github.io/2014/05/14/is-invokerequired-reliable/"/>
    <id>http://fresky.github.io/2014/05/14/is-invokerequired-reliable/</id>
    <published>2014-05-14T11:16:00.000Z</published>
    <updated>2019-12-20T08:29:07.288Z</updated>
    
    <content type="html"><![CDATA[<p>今天遇到一个C#的Crash，用windbg打开dump，加载sos之后一看，在4号线程出了一个<code>System.InvalidOperationException</code>，在这个地址上调用<code>!pe</code>。可以看到如下的异常信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Exception object:</span><br><span class="line">Exception type: System.InvalidOperationException</span><br><span class="line">Message: The calling thread cannot access this object because a different thread owns it.</span><br><span class="line">InnerException: &lt;none&gt;</span><br><span class="line">StackTrace (generated):</span><br></pre></td></tr></table></figure><p>这个异常很常见了，就是非UI线程操作UI控件导致的。我们知道在C#中只有UI线程才能操作UI控件，如果一个工作线程操作UI控件，就会抛这个异常。通常的解决办法很简单，就是使用<code>Invokerequired</code>。如果返回True，说明不在UI线程，需要调用<code>Invoke</code>或者<code>BeginInvoke</code>来扔给UI线程操作。</p><p>可是打开call stack对应的代码，已经检查过<code>Invokerequired</code>了！！！这是怎么回事，是说<code>Invokerequired</code>不靠谱吗？</p><p>于是又回到MSDN的<a href="http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired%28v=vs.110%29.aspx" target="_blank" rel="noopener">Invokerequired</a>，找到了如下的说明：</p><blockquote><p>This means that InvokeRequired can return false if Invoke is not required (the call occurs on the same thread), <strong>or if the control was created on a different thread but the control’s handle has not yet been created</strong>.</p></blockquote><blockquote><p>You can protect against this case by also checking the value of IsHandleCreated when InvokeRequired returns false on a background thread.</p></blockquote><p>这就清楚了，如果Handle还没有创建好，那么即使在后台工作线程，<code>Invokerequired</code>也返回False。用如下的一个小程序来测试一下，代码很简单，就是在一个Form的构造函数里创建一个Timer，然后在这个Timer的Callback里面打印<code>Invokerequired</code>和<code>IsHandleCreated</code>的值。请注意这里一定要用<code>System.Threading.Timer</code>，因为Form里的那个Timer是运行在UI线程里的，不能用，具体参见我的博客<a href="/2013/07/09/compare-of-5-timers-in-csharp/">C#中5种timer的比较</a>。另外关于这个<code>System.Threading.Timer</code>有一个坑，参见博客<a href="/2013/06/20/where-is-my-timer-csharp-gc/">谁动了我的timer？C#的垃圾回收和调试</a>。关于<code>System.Timers.Timer</code>，也有一个坑，参见我的博客<a href="/2011/06/23/dot-net-2-timer-elapsed-event-will-catch-all-exception-for-you/">.NET 2.0的Timer elapsed event 会自动catch住所有的exception</a>。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">using</span> Timer = System.Threading.Timer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Form1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">Form1</span> : <span class="title">Form</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> Timer m_Timer;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Form1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            m_Timer = <span class="keyword">new</span> Timer(timer_callback, <span class="literal">null</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">            InitializeComponent();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">timer_callback</span>(<span class="params"><span class="keyword">object</span> state</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Debug.WriteLine(<span class="string">"IsHandleCreated: &#123;0&#125;"</span>, IsHandleCreated);</span><br><span class="line">            Debug.WriteLine(<span class="string">"InvokeRequired: &#123;0&#125;"</span>, InvokeRequired);</span><br><span class="line">            Debug.WriteLine(<span class="string">"Thread ID: &#123;0&#125;"</span>, Thread.CurrentThread.ManagedThreadId);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出如下：（这个输出比较随机）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IsHandleCreated: False</span><br><span class="line">InvokeRequired: False</span><br><span class="line">Thread ID: 5</span><br></pre></td></tr></table></figure><p>所以正确的写法是：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(control.IsDisposed || !control.IsHandleCreated)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// UI is not ready, do something special here!!!</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(control.InvokeRequired)</span><br><span class="line">&#123;</span><br><span class="line">    control.Invoke(action);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    action();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天遇到一个C#的Crash，用windbg打开dump，加载sos之后一看，在4号线程出了一个&lt;code&gt;System.InvalidOperationException&lt;/code&gt;，在这个地址上调用&lt;code&gt;!pe&lt;/code&gt;。可以看到如下的异常信息：&lt;/p&gt;
&lt;
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>如何给Windows添加自动启动的程序</title>
    <link href="http://fresky.github.io/2014/05/05/where-to-add-the-windows-startup-programe/"/>
    <id>http://fresky.github.io/2014/05/05/where-to-add-the-windows-startup-programe/</id>
    <published>2014-05-05T10:13:00.000Z</published>
    <updated>2019-12-20T08:29:07.288Z</updated>
    
    <content type="html"><![CDATA[<p>本文总结了一下在Windows中可以添加自动启动的程序的地方。起因是有些软件在安装完后会在Windows中加一些自动启动的程序，我非常的不能忍。非常不巧的是我经常需要重新安装的一个软件也有这个毛病，于是今天就想写个小脚本每次安装完后把自动启动的程序去掉。</p><ul><li><p>文件夹  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\&lt;USER&gt;\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup</span><br><span class="line">C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup</span><br></pre></td></tr></table></figure></li><li><p>注册表（<code>HKEY_CURRENT_USER</code>和<code>HKEY_LOCAL_MACHINE</code>）  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Software\Microsoft\Windows\CurrentVersion\Run</span><br><span class="line">Software\Microsoft\Windows\CurrentVersion\RunOnce</span><br><span class="line">Software\Microsoft\Windows\CurrentVersion\RunOnceEx </span><br><span class="line">Software\Microsoft\Windows\CurrentVersion\RunServices</span><br><span class="line">Software\Microsoft\Windows\CurrentVersion\RunServicesOnce</span><br><span class="line">SOFTWARE\Microsoft\Shared Tools\MSConfig\startupreg</span><br><span class="line">SOFTWARE\Microsoft\Shared Tools\MSConfig\startupfolder</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;本文总结了一下在Windows中可以添加自动启动的程序的地方。起因是有些软件在安装完后会在Windows中加一些自动启动的程序，我非常的不能忍。非常不巧的是我经常需要重新安装的一个软件也有这个毛病，于是今天就想写个小脚本每次安装完后把自动启动的程序去掉。&lt;/p&gt;
&lt;ul&gt;

      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>使用Camstudio和KeyCastOW来录屏制作软件Demo视频</title>
    <link href="http://fresky.github.io/2014/05/04/using-camstudio-and-keycastow-to-record-demo-video/"/>
    <id>http://fresky.github.io/2014/05/04/using-camstudio-and-keycastow-to-record-demo-video/</id>
    <published>2014-05-04T05:45:00.000Z</published>
    <updated>2019-12-20T08:29:07.288Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://camstudio.org/" target="_blank" rel="noopener">CamStudio</a>是一个开源免费的录屏录音软件，可以生成avi、mp4或者flash，非常适合做软件的demo。也可以使用<a href="http://www.cockos.com/licecap/" target="_blank" rel="noopener">LICEcap</a>，可以生成gif文件，非常适合放在网站上。</p><p>今天又发现了一个小工具<a href="https://brookhong.github.io/2014/04/28/keycast-on-windows.html" target="_blank" rel="noopener">KeyCastOW</a>，可以把键盘的敲击可视化，这样在demo软件的时候就不需要再额外的说明使用的快捷键了，配合CamStudio使用很方便。下面是网站提供的一个效果截图。</p><p><img src="http://drp.io/files/5357c687a659a.gif" alt="KeyCastOW"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://camstudio.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CamStudio&lt;/a&gt;是一个开源免费的录屏录音软件，可以生成avi、mp4或者flash，非常适合做软件的demo。也可以使用&lt;a href=&quot;
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>如何记日志</title>
    <link href="http://fresky.github.io/2014/05/04/how-to-logging/"/>
    <id>http://fresky.github.io/2014/05/04/how-to-logging/</id>
    <published>2014-05-04T01:30:00.000Z</published>
    <updated>2019-12-20T08:29:07.287Z</updated>
    
    <content type="html"><![CDATA[<p>在我之前的博客<a href="/2014/04/30/how-to-minimize-the-unreproducible-bugs/">如何减少不能重现的Bug</a>提到要遵守好的日志规范，今天就在介绍一下另外一篇文章<a href="http://googletesting.blogspot.com/2013/06/optimal-logging.html" target="_blank" rel="noopener">Optimal Logging</a>。要点如下：</p><h3 id="日志中需要记录的："><a href="#日志中需要记录的：" class="headerlink" title="日志中需要记录的："></a>日志中需要记录的：</h3><hr><ul><li>重要的启动配置  </li><li>错误  </li><li>警告  </li><li>对持久化数据的改变  </li><li>主要系统模块之间的请求和应答  </li><li>显著的状态变化  </li><li>用户交互  </li><li>已知有失败风险的调用  </li><li>等待一个需要很长时间才能完成的条件  </li><li>长时间运行的任务顶起的进度更新  </li><li>显著改变逻辑分支的条件  </li><li>宏观的处理步骤或者事件的总结（避免记录微观函数复杂流程的每一步）  </li></ul><h3 id="日志中可能需要记录性能信息："><a href="#日志中可能需要记录性能信息：" class="headerlink" title="日志中可能需要记录性能信息："></a>日志中可能需要记录性能信息：</h3><hr><ul><li>显著的系统调用  </li><li>网络请求  </li><li>CPU密集的操作  </li><li>于连接设备的交互  </li><li>事务  </li></ul><h3 id="日志中最好不要记录的："><a href="#日志中最好不要记录的：" class="headerlink" title="日志中最好不要记录的："></a>日志中最好不要记录的：</h3><hr><ul><li>函数入口（除非这个函数非常重要或者是在记录debug层的信息）  </li><li>循环中的数据（除非是小循环，或者是一个大循环中定期的记录一些信息）  </li><li>大消息或者文件的内容（截断或者总结来帮助调试）  </li><li>良性错误（比如认为是正常流程的异常处理，容易迷惑读日志的人）  </li><li>重复的错误</li></ul><h3 id="分层记录日志"><a href="#分层记录日志" class="headerlink" title="分层记录日志"></a>分层记录日志</h3><hr><p>典型的分层方式为： </p><ul><li>Debug：在debug过程中会用到的信息  </li><li>Info：最常用的  </li><li>Warning：奇怪或者非预期的状态，但是可以接受  </li><li>Error：出错了，但是程序可以恢复  </li><li>Critical：程序不能恢复，必须重启或者关闭  </li></ul><p>两种配置：  </p><ul><li>生产环境：除了Debug，别的全部打开  </li><li>开发调试环境：全部打开  </li></ul><h3 id="日志也需要测试！！！"><a href="#日志也需要测试！！！" class="headerlink" title="日志也需要测试！！！"></a>日志也需要测试！！！</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在我之前的博客&lt;a href=&quot;/2014/04/30/how-to-minimize-the-unreproducible-bugs/&quot;&gt;如何减少不能重现的Bug&lt;/a&gt;提到要遵守好的日志规范，今天就在介绍一下另外一篇文章&lt;a href=&quot;http://googletes
      
    
    </summary>
    
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
      <category term="Design" scheme="http://fresky.github.io/tags/Design/"/>
    
  </entry>
  
  <entry>
    <title>如何减少不能重现的Bug</title>
    <link href="http://fresky.github.io/2014/04/30/how-to-minimize-the-unreproducible-bugs/"/>
    <id>http://fresky.github.io/2014/04/30/how-to-minimize-the-unreproducible-bugs/</id>
    <published>2014-04-30T09:08:00.000Z</published>
    <updated>2019-12-20T08:29:07.287Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.anthonysapps.com/anthony" target="_blank" rel="noopener">Anthony Vallone</a>在Google的测试博客上的这篇文章<a href="http://googletesting.blogspot.ca/2014/02/minimizing-unreproducible-bugs.html" target="_blank" rel="noopener">Minimizing Unreproducible Bugs</a>中介绍了一些他的经验来减少不能重现的Bug，要点如下：</p><hr><p><strong>避免，并且测试race condition，死锁，timing issue，memory corruption，非初始化的内存访问，内存泄漏和资源问题。</strong></p><h5 id="开发"><a href="#开发" class="headerlink" title="开发"></a>开发</h5><ul><li>简化同步逻辑。  </li><li>永远用相同的顺序来加锁。  </li><li>不要为了优化而创建很多细粒度的锁，除非你证明了他们是必须的。  </li><li>避免共享内存。  </li></ul><h5 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h5><ul><li>有规律的进行压力测试  </li><li>测试超时的情况  </li><li>测试debug和release版本  </li><li>在限制资源的情况测试  </li><li>长时间的测试  </li><li>用动态分析工具检查  </li></ul><hr><h5 id="开发-1"><a href="#开发-1" class="headerlink" title="开发"></a>开发</h5><ul><li>在函数开头对输入进行检查，验证前提条件是否成立  </li></ul><hr><h5 id="开发-2"><a href="#开发-2" class="headerlink" title="开发"></a>开发</h5><ul><li>defensive programming  <h5 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h5></li><li>fuzz testing  </li></ul><hr><p><strong>不要对用户隐藏所有的错误</strong> </p><h5 id="开发-3"><a href="#开发-3" class="headerlink" title="开发"></a>开发</h5><ul><li>只有在确定错误不会影响系统状态或者用户时才对用户隐藏  </li><li>任何对用户有影响的错误都应该汇报给用户，并且提供下一步的指示  </li></ul><hr><p><strong>测试错误处理</strong></p><h5 id="开发-4"><a href="#开发-4" class="headerlink" title="开发"></a>开发</h5><ul><li>永远测试错误处理代码  </li><li>检查所有错误类型对应的日志质量  </li></ul><hr><p><strong>检查重复的键值</strong></p><h5 id="开发-5"><a href="#开发-5" class="headerlink" title="开发"></a>开发</h5><ul><li>努力保证所有键值的唯一性  </li><li>当不能保证时，在使用前先检查是否已经使用过这个键值  </li><li>小心可能的race condition  </li></ul><hr><p><strong>测试并发的数据访问</strong></p><h5 id="测试-2"><a href="#测试-2" class="headerlink" title="测试"></a>测试</h5><ul><li>如果系统需要并发数据访问，就测试它  </li></ul><hr><p><strong>远离未定义的行为和不确定的数据访问</strong></p><h5 id="开发-6"><a href="#开发-6" class="headerlink" title="开发"></a>开发</h5><ul><li>理解使用的API或者操作在什么情况下会引发未定义的行为  </li><li>不要依赖数据结构的顺序（除非你保证他们的顺序）  </li></ul><hr><p><strong>在发生错误时记录详细的日志</strong></p><h5 id="开发-7"><a href="#开发-7" class="headerlink" title="开发"></a>开发</h5><ul><li>遵守好的<a href="http://googletesting.blogspot.com/2013/06/optimal-logging.html" target="_blank" rel="noopener">日志规范</a>  </li><li>如果日志在用户的机器上，提供一种简单的方式是你能够拿到日志  </li></ul><h5 id="测试-3"><a href="#测试-3" class="headerlink" title="测试"></a>测试</h5><ul><li>保存测试产生的日志  </li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.anthonysapps.com/anthony&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Anthony Vallone&lt;/a&gt;在Google的测试博客上的这篇文章&lt;a href=&quot;http://googlet
      
    
    </summary>
    
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
      <category term="Design" scheme="http://fresky.github.io/tags/Design/"/>
    
  </entry>
  
  <entry>
    <title>使用Ready2Search来定制Firefox和Chrome的搜索框</title>
    <link href="http://fresky.github.io/2014/04/30/use-ready2search-to-customize-your-search-plugin-in-firefox-and-chrome/"/>
    <id>http://fresky.github.io/2014/04/30/use-ready2search-to-customize-your-search-plugin-in-firefox-and-chrome/</id>
    <published>2014-04-30T05:07:00.000Z</published>
    <updated>2019-12-20T08:29:07.287Z</updated>
    
    <content type="html"><![CDATA[<p>我一直是用Firefox作为我的主浏览器，可以在Firefox中定制搜索插件，这样就能在地址栏很方便敲搜索关键词调用相应的搜索插件。以前都是手动的写<code>xml</code>文件来加搜索插件，今天发现了一个网站<a href="http://ready.to/search/en/" target="_blank" rel="noopener">Ready2Search</a>可以很方便的自动定制Firefox或者Chrome的搜索框。</p><p>使用很简单，打开网站<a href="http://ready.to/search/en/" target="_blank" rel="noopener">Ready2Search</a>，输入名字和搜索链接，以豆瓣搜索为例，链接就是<code>http://www.douban.com/search?q=</code>。在网站右边还能添加图标，我就是直接下载豆瓣的<a href="http://img3.douban.com/favicon.ico" target="_blank" rel="noopener">Favicon</a>。然后点击<code>Make Search plug-in</code>按钮就行了。</p><p>原理很简单，就是在Firefox的<code>profile\searchplugins\</code>目录下增加一个搜索的<code>douban.xml</code>。</p><p>生成的豆瓣对应的文件内容如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">SearchPlugin</span> <span class="attr">xmlns</span>=<span class="string">"http://www.mozilla.org/2006/browser/search/"</span> <span class="attr">xmlns:os</span>=<span class="string">"http://a9.com/-/spec/opensearch/1.1/"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">os:ShortName</span>&gt;</span>Douban<span class="tag">&lt;/<span class="name">os:ShortName</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">os:Description</span>&gt;</span>Douban search<span class="tag">&lt;/<span class="name">os:Description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">os:InputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">os:InputEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">os:Image</span> <span class="attr">width</span>=<span class="string">"16"</span> <span class="attr">height</span>=<span class="string">"16"</span>&gt;</span>data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADlSURBVDhPY7CY6MpQLkgkAilGEyKMgNhjVvB/IgBQGVSDUot+3bY2ggioDKoBiATKpIhBCA3WE9yBlv779w9EoiIIACqAqETRcOfNPb95IZ7TPT1nB3jOCvCc6Q1kAwXhGkCWIGt4/Ok5f4kUGrr44jpODUDD9Hts0BA+G/AAdA1AlvtMUGz8+fdXr8PKrNcZiIAMoMjXX9+BUiClaBqA6N7bB3/+/kH2AFADUBCuAKEBgrr3TwaqyFhZBFENZAC5QEGILELD5MOzgBIEAVAZSCcQhy9OWnZmDUEEVAbSQFrynugKAKSaaH1V3D9GAAAAAElFTkSuQmCC<span class="tag">&lt;/<span class="name">os:Image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">os:Url</span> <span class="attr">type</span>=<span class="string">"text/html"</span> <span class="attr">method</span>=<span class="string">"GET"</span> <span class="attr">template</span>=<span class="string">"http://www.douban.com/search?q=&#123;searchTerms&#125;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">os:Url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">SearchPlugin</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      使用Ready2Search来定制Firefox和Chrome的搜索框
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>在C#中如何确定一个文件是不是文本文件，以及如何确定一个文件的类型</title>
    <link href="http://fresky.github.io/2014/04/21/how-to-determine-the-file-type-in-csharp/"/>
    <id>http://fresky.github.io/2014/04/21/how-to-determine-the-file-type-in-csharp/</id>
    <published>2014-04-21T10:43:00.000Z</published>
    <updated>2019-12-20T08:29:07.286Z</updated>
    
    <content type="html"><![CDATA[<p>今天需要从一个文本文件中读取信息，就想到如果用户选择的不是一个文本文件，遍历这个文件就是做无用功，于是就想能不能有一种方式可以判断文件是不是文本文件。在网上找到了一个方法，通过判断文件中有没有<code>\0</code>，如果有的话就一定不是文本文件。代码如下：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">IsTextFile</span>(<span class="params"><span class="keyword">string</span> path</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// only check 32 char here, can increase to achieve higher accuracy</span></span><br><span class="line"><span class="keyword">var</span> buf = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">32</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> reader = <span class="keyword">new</span> StreamReader(path))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> readint = reader.ReadBlock(buf, <span class="number">0</span>, buf.Length);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; readint; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (buf[i] == <span class="string">'\0'</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception ex)</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(ex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>针对一个更普遍的问题，如何根据文件内容来确定文件的格式，在网上找了另一个方法。读取文件的前两个字节，然后根据这个字节的值来做判断。代码如下：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> FileExtension <span class="title">CheckFileType</span>(<span class="params"><span class="keyword">string</span> path</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">string</span> header = <span class="keyword">string</span>.Empty;</span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> fs = <span class="keyword">new</span> FileStream(path, FileMode.Open, FileAccess.Read))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> r = <span class="keyword">new</span> BinaryReader(fs))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">byte</span> buffer = r.ReadByte();</span><br><span class="line">header = buffer.ToString();</span><br><span class="line">buffer = r.ReadByte();</span><br><span class="line">header += buffer.ToString();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception ex)</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(ex.Message);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> (FileExtension) <span class="keyword">int</span>.Parse(header);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> FileExtension</span><br><span class="line">&#123;</span><br><span class="line">JPG = <span class="number">255216</span>,</span><br><span class="line">GIF = <span class="number">7173</span>,</span><br><span class="line">BMP = <span class="number">6677</span>,</span><br><span class="line">PNG = <span class="number">13780</span>,</span><br><span class="line">COM = <span class="number">7790</span>,</span><br><span class="line">EXE = <span class="number">7790</span>,</span><br><span class="line">DLL = <span class="number">7790</span>,</span><br><span class="line">RAR = <span class="number">8297</span>,</span><br><span class="line">ZIP = <span class="number">8075</span>,</span><br><span class="line">XML = <span class="number">6063</span>,</span><br><span class="line">HTML = <span class="number">6033</span>,</span><br><span class="line">ASPX = <span class="number">239187</span>,</span><br><span class="line">CS = <span class="number">117115</span>,</span><br><span class="line">JS = <span class="number">119105</span>,</span><br><span class="line">TXT = <span class="number">210187</span>,</span><br><span class="line">SQL = <span class="number">255254</span>,</span><br><span class="line">BAT = <span class="number">64101</span>,</span><br><span class="line">BTSEED = <span class="number">10056</span>,</span><br><span class="line">RDP = <span class="number">255254</span>,</span><br><span class="line">PSD = <span class="number">5666</span>,</span><br><span class="line">PDF = <span class="number">3780</span>,</span><br><span class="line">CHM = <span class="number">7384</span>,</span><br><span class="line">LOG = <span class="number">70105</span>,</span><br><span class="line">REG = <span class="number">8269</span>,</span><br><span class="line">HLP = <span class="number">6395</span>,</span><br><span class="line">DOC = <span class="number">208207</span>,</span><br><span class="line">XLS = <span class="number">208207</span>,</span><br><span class="line">DOCX = <span class="number">208207</span>,</span><br><span class="line">XLSX = <span class="number">208207</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是这个方法有时候都不靠谱，比如我试了一个<code>.docx</code>的文件，返回值是<code>.zip</code>。不过我试了几个<code>.jpg</code>、<code>.exe</code>、<code>.dll</code>的都还行。另外我从网上搜了半天也没有搜到一个正儿八经的关于这两个字节和类型对应关系的出处，只是看到有很多网站用这个方法来判断用户上传的文件是不是图片。</p>]]></content>
    
    <summary type="html">
    
      本文介绍如何在C#中通过检查文件中有没有\0来判断是不是文本文件，并且通过文件的前两个字节来判断文件类型。需要注意的是这两个方法都不是很准确。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>如何解决因为找不到Notepad++的安装路径而导致的不能更新CS-Script的问题</title>
    <link href="http://fresky.github.io/2014/04/21/fix-cannot-find-notepad-plus-plus-installation-issue-of-cs-script/"/>
    <id>http://fresky.github.io/2014/04/21/fix-cannot-find-notepad-plus-plus-installation-issue-of-cs-script/</id>
    <published>2014-04-21T09:05:00.000Z</published>
    <updated>2019-12-20T08:29:07.286Z</updated>
    
    <content type="html"><![CDATA[<p>我之前的博客<a href="/2014/03/31/make-your-notepadd-plus-plus-as-csharp-ide-with-intellisense-and-code-execution/">用CS-Script把Notepad++变身支持智能提示和运行代码的C#集成开发环境</a>介绍过CS-Script这个超级好用的Notepad++插件，但是我在使用过程中发现了一个小问题。如果使用的Notepad++是Potable绿色版的，在更新CS-Script，或者安装msi时会报出如下的一个错误对话框。</p><blockquote><p><em>cannot find notepad++ installation</em><br><em>不能找到notepad++的安装路径</em></p></blockquote><img src="/images/csscriptinstallfail.png"><p>这估计是插件作者在制作msi安装文件的时候从注册表里取Notepad++的安装路径，但是如果用Potable绿色版的话就没有相应的注册表键值。</p><p>解决这个问题的方法很简单，在注册表中加上如下的键值。<br>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\notepad++.exe<br>它的Default Value写上notepad++.exe的全路径即可。</p>]]></content>
    
    <summary type="html">
    
      如何通过添加注册表键值（HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\notepad++.exe），解决因为找不到Notepad++的安装路径（cannot find notepad++ installation）而导致的不能更新CS-Script的问题。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>一个使用C#的TPL Dataflow Library的例子：分析文本文件中词频</title>
    <link href="http://fresky.github.io/2014/04/11/tpl-dataflow-example-to-analyze-text-file/"/>
    <id>http://fresky.github.io/2014/04/11/tpl-dataflow-example-to-analyze-text-file/</id>
    <published>2014-04-11T08:21:00.000Z</published>
    <updated>2019-12-20T08:29:07.286Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://msdn.microsoft.com/en-us/library/hh228603%28v=vs.110%29.aspx" target="_blank" rel="noopener">TPL Dataflow Library</a>是微软提供的一个关于并发的类库。它主要想解决的就是工作流的问题。比如我们的目标任务需要有一系列的模块来一次完成，前一个模块的输出是后一个模块的输入，这样就构成了一个管道，利用TPL Dataflow Library可以很方便的实现这个功能。</p><p>我在之前的博客<a href="/2013/06/18/how-to-analyze-text-file-with-linux-command-line-tools/">使用Linux的命令行工具做简单的文本分析</a>中介绍过如何用Linux的命令行工具找出一个文章中的词频分布，下面我们用TPL Dataflow和普通的Task和ContinueWith来分别实现，看看其中的区别。</p><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>首先描述一下我们的问题，我们有一个文件夹，里面放了一些文本文件，我们需要找出每个文件中词频最高的前5个词。把这个问题分解成几个子模块，分别是： </p><ol><li>从文件中读取字符串  </li><li>创建文字列表  </li><li>过滤文字列表统计词频  </li><li>打印出现频率最高的5个词  </li></ol><h2 id="子问题解决"><a href="#子问题解决" class="headerlink" title="子问题解决"></a>子问题解决</h2><p> 1 . 从文件中读取字符串<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">readFileText</span>(<span class="params"><span class="keyword">string</span> fileName</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"Reading '&#123;0&#125;'..."</span>, fileName);</span><br><span class="line"><span class="keyword">return</span> File.ReadAllText(fileName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p> 2 . 创建文字列表<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">string</span>[] <span class="title">createWordList</span>(<span class="params"><span class="keyword">string</span> text</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"Creating word list..."</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Remove common punctuation by replacing all non-letter characters  </span></span><br><span class="line"><span class="comment">// with a space character to. </span></span><br><span class="line"><span class="keyword">char</span>[] tokens = text.ToArray();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tokens.Length; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">char</span>.IsLetter(tokens[i]))</span><br><span class="line">tokens[i] = <span class="string">' '</span>;</span><br><span class="line">&#125;</span><br><span class="line">text = <span class="keyword">new</span> <span class="keyword">string</span>(tokens);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Separate the text into an array of words. </span></span><br><span class="line"><span class="keyword">return</span> text.Split(<span class="keyword">new</span> <span class="keyword">char</span>[] &#123;<span class="string">' '</span>&#125;,</span><br><span class="line">StringSplitOptions.RemoveEmptyEntries);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p> 3 . 过滤文字列表统计词频<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Dictionary&lt;<span class="keyword">string</span>, <span class="keyword">int</span>&gt; <span class="title">fileterWordList</span>(<span class="params"><span class="keyword">string</span>[] words</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"Group and ordering word list..."</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> words.Where(word =&gt; word.Length &gt; <span class="number">3</span>).GroupBy(word =&gt; word)</span><br><span class="line">.OrderByDescending(<span class="keyword">group</span> =&gt; <span class="keyword">group</span>.Count())</span><br><span class="line">.ToDictionary(<span class="keyword">group</span> =&gt; <span class="keyword">group</span>.Key, <span class="keyword">group</span> =&gt; <span class="keyword">group</span>.Count());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p> 4 . 打印出现频率最高的5个词<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printWordFrequency</span>(<span class="params">Dictionary&lt;<span class="keyword">string</span>, <span class="keyword">int</span>&gt; dic</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"Top 5:"</span>);</span><br><span class="line"><span class="keyword">int</span> top = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> pair <span class="keyword">in</span> dic)</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"&#123;0&#125;   :   &#123;1&#125;"</span>, pair.Key, pair.Value);</span><br><span class="line"><span class="keyword">if</span> (++top &gt; <span class="number">5</span>)</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="使用Task实现多线程"><a href="#使用Task实现多线程" class="headerlink" title="使用Task实现多线程"></a>使用Task实现多线程</h2><p>单线程没啥好说的，直接连起来调用就行了，不多废话。</p><p>如果要多线程，可以直接用Task。使用<code>ContinueWith</code>。<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getWordFrequencyWithTask</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">List&lt;Task&gt; allFinalTasks = <span class="keyword">new</span> List&lt;Task&gt;();</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> fileName <span class="keyword">in</span> Directory.GetFiles(<span class="string">@"D:\Temp\test"</span>))</span><br><span class="line">&#123;</span><br><span class="line">allFinalTasks.Add(Task&lt;<span class="keyword">string</span>&gt;.Factory.StartNew(() =&gt; readFileText(fileName))</span><br><span class="line">.ContinueWith&lt;<span class="keyword">string</span>[]&gt;(t =&gt; createWordList(t.Result))</span><br><span class="line">.ContinueWith&lt;Dictionary&lt;<span class="keyword">string</span>, <span class="keyword">int</span>&gt;&gt;(t =&gt; fileterWordList(t.Result))</span><br><span class="line">.ContinueWith(t =&gt; printWordFrequency(t.Result)));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">Task.WaitAll(allFinalTasks.ToArray());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="使用TPL的Dataflow"><a href="#使用TPL的Dataflow" class="headerlink" title="使用TPL的Dataflow"></a>使用TPL的Dataflow</h2><p>首先要注意的是Dataflow需要用Nuget加进来。用到的类和函数如下：</p><ol><li><code>TransformBlock</code>：有输入有输出，一般用于非最后一个处理模块。  </li><li><code>ActionBlock</code>：只有输入，没有输出，一般用于最后一个处理模块。  </li><li><code>LinkTo</code>：把模块关联起来。  </li><li><code>Completion.ContinueWith</code>：表明这个模块完成后标识下一个模块完成。  </li><li><code>Complete()</code>：告诉第一个模块已经没有新的输入了。  </li></ol><p>代码如下：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getWordFrequencyWithTPLDataflow</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 1st, Read the files to strings</span></span><br><span class="line"><span class="keyword">var</span> read = <span class="keyword">new</span> TransformBlock&lt;<span class="keyword">string</span>, <span class="keyword">string</span>&gt;(fileName =&gt; readFileText(fileName));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2nd, Separates the specified text into an array of words. </span></span><br><span class="line"><span class="keyword">var</span> create = <span class="keyword">new</span> TransformBlock&lt;<span class="keyword">string</span>, <span class="keyword">string</span>[]&gt;(text =&gt; Program.createWordList(text));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3rd, Removes short words, orders the resulting words by frequency. </span></span><br><span class="line"><span class="keyword">var</span> filter = <span class="keyword">new</span> TransformBlock&lt;<span class="keyword">string</span>[], Dictionary&lt;<span class="keyword">string</span>, <span class="keyword">int</span>&gt;&gt;(words =&gt; fileterWordList(words));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4th, Prints the provided palindrome to the console.     </span></span><br><span class="line"><span class="keyword">var</span> print = <span class="keyword">new</span> ActionBlock&lt;Dictionary&lt;<span class="keyword">string</span>, <span class="keyword">int</span>&gt;&gt;(dic =&gt; printWordFrequency(dic));</span><br><span class="line"></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// Connect the dataflow blocks to form a pipeline. </span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line">read.LinkTo(create);</span><br><span class="line">create.LinkTo(filter);</span><br><span class="line">filter.LinkTo(print);</span><br><span class="line"></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// For each completion task in the pipeline, create a continuation task </span></span><br><span class="line"><span class="comment">// that marks the next block in the pipeline as completed. </span></span><br><span class="line"><span class="comment">// A completed dataflow block processes any buffered elements, but does </span></span><br><span class="line"><span class="comment">// not accept new elements. </span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line">read.Completion.ContinueWith(t =&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (t.IsFaulted) ((IDataflowBlock) create).Fault(t.Exception);</span><br><span class="line"><span class="keyword">else</span> create.Complete();</span><br><span class="line">&#125;);</span><br><span class="line">create.Completion.ContinueWith(t =&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (t.IsFaulted) ((IDataflowBlock) filter).Fault(t.Exception);</span><br><span class="line"><span class="keyword">else</span> filter.Complete();</span><br><span class="line">&#125;);</span><br><span class="line">filter.Completion.ContinueWith(t =&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (t.IsFaulted) ((IDataflowBlock)print).Fault(t.Exception);</span><br><span class="line"><span class="keyword">else</span> print.Complete();</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> fileName <span class="keyword">in</span> Directory.GetFiles(<span class="string">@"D:\Temp\test"</span>))</span><br><span class="line">&#123;</span><br><span class="line">read.Post(fileName);</span><br><span class="line">&#125;</span><br><span class="line">read.Complete();</span><br><span class="line">print.Completion.Wait();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>完整代码参见<a href="https://gist.github.com/fresky/10632899" target="_blank" rel="noopener">Gist</a></p>]]></content>
    
    <summary type="html">
    
      使用Task.ContinueWith和TPL的Dataflow来解决工作流（管道）问题。在本文的例子中是分析文本文件中词频。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>一个分门别列介绍JavaScript各种常用工具的脑图</title>
    <link href="http://fresky.github.io/2014/04/11/a-list-of-foundational-javascript-tools/"/>
    <id>http://fresky.github.io/2014/04/11/a-list-of-foundational-javascript-tools/</id>
    <published>2014-04-11T02:36:00.000Z</published>
    <updated>2019-12-20T08:29:07.285Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/codefellows/jstools" target="_blank" rel="noopener">A List of Foundational JavaScript Tools</a>介绍了一些JavaScript的常用工具，并且分门别列介绍，做了一个如下的脑图。</p><p><img src="https://github.com/codefellows/jstools/raw/master/JavaScriptTools.png" alt="JavaScript tools"></p>]]></content>
    
    <summary type="html">
    
      一个分门别列介绍JavaScript各种常用工具的脑图。
    
    </summary>
    
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
  </entry>
  
  <entry>
    <title>MiniCodeEditor：只有168字节的在线Html/CSS/JavaScript编辑器</title>
    <link href="http://fresky.github.io/2014/04/09/minicodeeditor-168-bytes-online-html-slash-js-slash-css-editor/"/>
    <id>http://fresky.github.io/2014/04/09/minicodeeditor-168-bytes-online-html-slash-js-slash-css-editor/</id>
    <published>2014-04-09T05:45:00.000Z</published>
    <updated>2019-12-20T08:29:07.285Z</updated>
    
    <content type="html"><![CDATA[<p><a href="xem.github.io/miniCodeEditor/">MiniCodeEditor</a>是一个只有168字节的在线Html/CSS/JavaScript编辑器。你可以把如下的代码存成一个html文件，双击它，你就有了一个在线Html/CSS/JavaScript编辑器。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">oninput</span>=<span class="string">'e.firstChild.srcdoc=t2[v="value"]+"&lt;script&gt;"+t0[v]+"&lt;/script&gt;&lt;style&gt;"+t1[v]'</span><span class="attr">onload</span>=<span class="string">'for(i=3;i--;)e.innerHTML+="&lt;textarea id=t"+i+" rows=9&gt;"'</span><span class="attr">id</span>=<span class="string">e</span>&gt;</span><span class="tag">&lt;<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      MiniCodeEditor：只有168字节的在线Html/CSS/JavaScript编辑器
    
    </summary>
    
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
  </entry>
  
  <entry>
    <title>值得记录的工具和网站</title>
    <link href="http://fresky.github.io/2014/04/09/good-tools-and-websites/"/>
    <id>http://fresky.github.io/2014/04/09/good-tools-and-websites/</id>
    <published>2014-04-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.285Z</updated>
    
    <content type="html"><![CDATA[<p>打算用这篇博客记录一下平时遇到的好的工具和网站，会随时更新。</p><h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><h2 id="编程"><a href="#编程" class="headerlink" title="编程"></a>编程</h2><h3 id="C"><a href="#C" class="headerlink" title="C#"></a>C#</h3><ul><li>根据C#源代码创建网站静态页面<a href="https://github.com/KirillOsenkov/SourceBrowser" target="_blank" rel="noopener">SourceBrowser</a>  </li><li>托管代码帮助文件生成：<a href="http://shfb.codeplex.com/" target="_blank" rel="noopener">Sandcastle Help File Builder</a>  </li><li>C#的IOC框架：<a href="http://docs.structuremap.net/" target="_blank" rel="noopener">StructureMap</a>， <a href="http://unity.codeplex.com/" target="_blank" rel="noopener">Unity</a>， <a href="http://code.google.com/p/autofac/" target="_blank" rel="noopener">autofac</a>  </li><li>C#的unit test的3个A中的第一个Arrange框架：<a href="https://github.com/AutoFixture" target="_blank" rel="noopener">AutoFixture</a>  </li><li>C#的mutation测试框架：<a href="http://www.mutation-testing.net" target="_blank" rel="noopener">NinjaTurtles</a>  </li><li>WPF应用的spy工具，可以看运行的WPF程序的控件树并且修改属性：<a href="http://snoopwpf.codeplex.com/" target="_blank" rel="noopener">Snoop</a>  </li><li>.NET的一些开源框架Castle：<a href="http://www.castleproject.org/" target="_blank" rel="noopener">Castle Project</a>  </li><li><a href="https://github.com/praeclarum/Netjs" target="_blank" rel="noopener">Netjs</a>：一个开源工具可以把<code>.NET</code>编译成<code>TypeScript</code>或者<code>JavaScript</code>。  </li><li>直接在C#应用中生成pddf文件：<a href="http://www.codeproject.com/Articles/570682/PDF-File-Writer-Csharp-Class-Library-Version" target="_blank" rel="noopener">PDF File Writer C# Class Library</a>  </li><li>安装和更新：<a href="https://autoupdaterdotnet.codeplex.com/" target="_blank" rel="noopener">AutoUpdater.NET</a>, <a href="https://github.com/Squirrel/Squirrel.Windows" target="_blank" rel="noopener">Squirrel</a>  </li></ul><h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><ul><li>Google的开源html5 解析器：<a href="https://github.com/google/gumbo-parser" target="_blank" rel="noopener">google/gumbo-parser</a>  </li><li><a href="http://developer.yahoo.com/yslow/smushit/" target="_blank" rel="noopener">Smush.it</a>： 网站图像优化工具。  </li><li><a href="http://developer.yahoo.com/yslow/" target="_blank" rel="noopener">YSlow</a>：网站性能优化工具。  </li><li>测试你的网站是否符合现代标准：<a href="http://modern.ie/en-us" target="_blank" rel="noopener">Modern.IE</a></li><li><a href="http://epiceditor.com/" target="_blank" rel="noopener">EpicEditor</a>：可嵌入的JavaScript的Markdown编辑器。  </li><li><a href="http://yahoo.github.io/gifshot/index.html" target="_blank" rel="noopener">GifShot</a>：一个javascript的库，可以从摄像头，视频或者图片中生成gif文件。  </li></ul><h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><ul><li><a href="http://bonobogitserver.com/" target="_blank" rel="noopener">Bonobog Git Server for Windows</a>  </li><li><a href="https://www.gitlab.com/" target="_blank" rel="noopener">GitLab</a>，<a href="/2013/07/16/how-to-install-gitlab-in-windows-github-open-source-alternative/">在windows安装GitLab</a>  </li><li><a href="https://github.com/gogits/gogs" target="_blank" rel="noopener">Gogs - Go Git Service</a>  </li></ul><h2 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h2><ul><li>优化学习过程的闪卡工具：<a href="http://mnemosyne-proj.org/" target="_blank" rel="noopener">Mnemosyne</a></li></ul><h2 id="书籍"><a href="#书籍" class="headerlink" title="书籍"></a>书籍</h2><ul><li><a href="http://www.gitbook.io/" target="_blank" rel="noopener">GitBook</a>，从git/github和markdown生成书籍（支持静态网页、pdf、电子书等格式）的命令行工具（也是一个Node.js库）。</li></ul><h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><ul><li>直接把截图复制到硬盘：<a href="http://screenshot2disk.codeplex.com/" target="_blank" rel="noopener">Screenshot2Disk</a>  </li><li>资源管理器增强软件，使用后走一下它的那个tutorial，就知道有多强大了。：<a href="http://www.listary.com/" target="_blank" rel="noopener">Listary</a>  </li><li>多台电脑共享鼠标键盘：<a href="http://synergy-foss.org/" target="_blank" rel="noopener">Synergy</a></li><li>直接在图片中选取文字：<a href="http://projectnaptha.com/" target="_blank" rel="noopener">Naptha</a>  </li><li>同步文件夹：<a href="http://metrobackup.codeplex.com/" target="_blank" rel="noopener">MetroBackUp</a>  </li><li>斧子演示（类似Prezi）：(<a href="http://www.axeslide.com/" target="_blank" rel="noopener">http://www.axeslide.com/</a>)</li></ul><h1 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h1><h2 id="工具-1"><a href="#工具-1" class="headerlink" title="工具"></a>工具</h2><h3 id="在线IDE"><a href="#在线IDE" class="headerlink" title="在线IDE"></a>在线IDE</h3><p><a href="http://www.regexr.com/" target="_blank" rel="noopener">RegExr</a><br><a href="http://ideone.com/" target="_blank" rel="noopener">IDEOne</a><br><a href="pythonfiddle.com">pythonfiddle</a>  </p><h3 id="在线编译器"><a href="#在线编译器" class="headerlink" title="在线编译器"></a>在线编译器</h3><p><a href="http://compileonline.com/" target="_blank" rel="noopener">compileonline</a>  </p><h3 id="在线C-编译器"><a href="#在线C-编译器" class="headerlink" title="在线C++编译器"></a>在线C++编译器</h3><ul><li><a href="http://liveworkspace.org/" target="_blank" rel="noopener">LiveWorkspace</a> (Clang 3.2, GCC 4.6.3 4.7.2)</li><li><a href="http://gcc.godbolt.org/" target="_blank" rel="noopener">gcc.godbolt.org</a> (Clang 3.0, GCC 4.5.3 4.8.0 prerelease, Intel ICC 13.0.1)</li><li><a href="http://rise4fun.com/vcpp" target="_blank" rel="noopener">Rise4Fun</a> (Microsoft VC++ 2012 and November 2012 CTP)</li><li><a href="http://stacked-crooked.com/" target="_blank" rel="noopener">Stacked-Crooked</a> (GCC 4.7)</li><li><a href="http://ideone.com/" target="_blank" rel="noopener">ideone.com</a> (GCC 4.3.4 and 4.5.1)</li><li><a href="http://comeaucomputing.com/tryitout/" target="_blank" rel="noopener">Comeau Test Drive</a> (EDG 4.3.3)  </li></ul><h3 id="帮助文档"><a href="#帮助文档" class="headerlink" title="帮助文档"></a>帮助文档</h3><ul><li><a href="http://explainshell.com/" target="_blank" rel="noopener">Explain Shell</a></li></ul><h2 id="在线学习"><a href="#在线学习" class="headerlink" title="在线学习"></a>在线学习</h2><ul><li><a href="https://cpp.zeef.com/faraz.fallahi" target="_blank" rel="noopener">Awesome list of C++ resources</a>  </li><li><a href="http://exercism.io" target="_blank" rel="noopener">exercism</a>  </li><li><a href="https://www.edx.org/" target="_blank" rel="noopener">edx</a></li><li><a href="https://www.udacity.com/" target="_blank" rel="noopener">Udacity</a></li><li><a href="https://www.coursera.org/" target="_blank" rel="noopener">Coursera</a></li><li><a href="http://pcottle.github.io/learnGitBranching/" target="_blank" rel="noopener">LearnGitBranching</a>：可视化的学习Git。  </li><li><a href="http://tryregex.com/" target="_blank" rel="noopener">TryRegex</a>, <a href="http://regexcrossword.com/" target="_blank" rel="noopener">Regex Crossword</a> (学习正则表达式的游戏网站，用正则表达式玩Crossword)  </li><li><a href="http://www.codecademy.com/" target="_blank" rel="noopener">Codecademy</a>：在线编程学习网站，目前支持JavaScript，HTML/CSS，PHP，Python，Ruby。  </li><li><a href="http://www.checkio.org/" target="_blank" rel="noopener">CheckiO</a>：练习Python的网站，用Python完成任务来玩游戏。  </li><li><a href="http://www.syncfusion.com/resources/techportal/ebooks" target="_blank" rel="noopener">Syncfusion Succinctly系列电子书</a>：非常简捷明了，比如<a href="http://www.syncfusion.com/resources/techportal/ebooks/cplusplus" target="_blank" rel="noopener">C++</a>的也就100多页，坐几次地铁就看完了。  </li><li><a href="http://try.jquery.com/" target="_blank" rel="noopener">Try jQuery</a>  </li><li><a href="http://wix.tramontana.co.hu/tutorial" target="_blank" rel="noopener">WiX Tutorial</a>  </li><li><a href="http://adriann.github.io/programming_problems.html" target="_blank" rel="noopener">Simple Programming Problems</a>  </li><li><a href="http://superherojs.com/" target="_blank" rel="noopener">Superhero.js</a>：关于如何创建、测试、维护大型Javascript项目的一系列最佳实践、视频和演讲。  </li><li><a href="http://devdocs.io/" target="_blank" rel="noopener">DevDoc</a>：组合了很多API文档，而且能够快速搜索。支持CSS、DOM、HTML、HTTP、Javascript等。  </li><li><a href="http://codecondo.com/10-ways-to-learn-python/" target="_blank" rel="noopener">10 Resources to Learn Python</a>：10个学习Python的资源。    </li><li><a href="http://www.valleytalk.org/2014/03/18/%E6%9E%97%E4%BB%95%E9%BC%8E-%E3%80%82-%E3%80%8A%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E9%A2%86%E5%9F%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AD%A6%E4%B9%A0%E6%9D%90%E6%96%99%E3%80%8B/" target="_blank" rel="noopener">系统架构领域的一些学习材料</a>  </li><li><a href="https://github.com/papers-we-love/papers-we-love" target="_blank" rel="noopener">Papers We Love</a>  </li><li><a href="http://isocpp.org/faq" target="_blank" rel="noopener">C++ FAQ</a>  </li><li><a href="http://cppquiz.org/" target="_blank" rel="noopener">CPP Quiz</a>  </li></ul><h2 id="书籍-1"><a href="#书籍-1" class="headerlink" title="书籍"></a>书籍</h2><ul><li><a href="https://github.com/vhf/free-programming-books/blob/master/free-programming-books.md" target="_blank" rel="noopener">free-programming-books</a>  </li><li><a href="https://github.com/julycoding/The-Art-Of-Programming-by-July" target="_blank" rel="noopener">The-Art-Of-Programming-By-July</a>,<a href="http://blog.csdn.net/v_JULY_v/article/details/6460494" target="_blank" rel="noopener">程序员编程艺术</a>  </li><li><a href="https://github.com/qyuhen/book" target="_blank" rel="noopener">C/Go/Python学习笔记</a>  </li><li><a href="https://github.com/kirang89/pycrumbs/blob/master/pycrumbs.md" target="_blank" rel="noopener">Bits and Bytes of Python from the Internet</a>  </li><li><a href="https://github.com/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers" target="_blank" rel="noopener">Bayesian Methods for Hackers</a>  </li><li><a href="http://dirlt.com/" target="_blank" rel="noopener">marathon’s reading and summary</a>  </li><li><a href="http://www.e-booksdirectory.com/mathematics.php" target="_blank" rel="noopener">Free Mathematics Books</a></li><li><a href="http://www.freeprogrammingbook.com/" target="_blank" rel="noopener">Free Programming Books Collections </a></li><li><a href="http://www.efytimes.com/e1/creativenews.asp?edid=119319" target="_blank" rel="noopener">500 Free eBooks On Programming</a></li><li><a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000" target="_blank" rel="noopener">Python新手教程</a></li><li><a href="http://www.microsoftvirtualacademy.com/ebooks#?fbid=X761K25-L20" target="_blank" rel="noopener">Free ebooks from Microsoft Press</a>  </li><li><a href="https://code.csdn.net/JustJavaC/free-programming-books-zh_cn" target="_blank" rel="noopener">免费的中文书籍索引</a></li><li><a href="http://architect.97things.oreilly.com/wiki/index.php/97_Things_Every_Software_Architect_Should_Know_-_The_Book" target="_blank" rel="noopener">97 Things Every Software Architect Should Know</a>  </li><li><a href="http://herbsutter.com/2010/09/24/effective-concurrency-know-when-to-use-an-active-object-instead-of-a-mutex/" target="_blank" rel="noopener">Herb Sutter’s concurrency articles</a>  </li><li><a href="http://docs.python-guide.org/en/latest/" target="_blank" rel="noopener">The Hitchhiker’s Guide to Python!</a>  </li><li><a href="http://www.fullstackpython.com/" target="_blank" rel="noopener">Full Stack Python</a>  </li></ul><h2 id="找工作相关"><a href="#找工作相关" class="headerlink" title="找工作相关"></a>找工作相关</h2><ul><li><a href="http://www.careercup.com/" target="_blank" rel="noopener">Careercup</a>  </li><li><a href="http://www.glassdoor.com" target="_blank" rel="noopener">Glassdoor</a>  </li><li><a href="http://www.geekinterview.com/" target="_blank" rel="noopener">GeekInterview</a>  </li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;打算用这篇博客记录一下平时遇到的好的工具和网站，会随时更新。&lt;/p&gt;
&lt;h1 id=&quot;工具&quot;&gt;&lt;a href=&quot;#工具&quot; class=&quot;headerlink&quot; title=&quot;工具&quot;&gt;&lt;/a&gt;工具&lt;/h1&gt;&lt;h2 id=&quot;编程&quot;&gt;&lt;a href=&quot;#编程&quot; class=&quot;he
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>使用C++的开源序列化(Serialization)库cereal</title>
    <link href="http://fresky.github.io/2014/04/04/serialization-in-cpp-with-open-source-header-only-lib-cereal/"/>
    <id>http://fresky.github.io/2014/04/04/serialization-in-cpp-with-open-source-header-only-lib-cereal/</id>
    <published>2014-04-04T02:26:00.000Z</published>
    <updated>2019-12-20T08:29:07.284Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://uscilab.github.io/cereal/index.html" target="_blank" rel="noopener">cereal</a>是一个开源的（BSD License），轻量级的C++序列化库。它只有头文件，支持序列化成binary，xml，JSON。</p><p>下面是一个小例子：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Serialization</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="function">ofstream <span class="title">os</span><span class="params">(<span class="string">"data.xml"</span>)</span></span>;</span><br><span class="line">        cereal::<span class="function">XMLOutputArchive <span class="title">archive</span><span class="params">(os)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> Age = <span class="number">30</span>;</span><br><span class="line">        <span class="built_in">string</span> str = <span class="string">"Dawei"</span>;</span><br><span class="line"></span><br><span class="line">        archive(CEREAL_NVP(Age), cereal::make_nvp(<span class="string">"Name"</span>, str));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="function">ifstream <span class="title">is</span><span class="params">(<span class="string">"data.xml"</span>)</span></span>;</span><br><span class="line">        cereal::<span class="function">XMLInputArchive <span class="title">archive</span><span class="params">(is)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> age;</span><br><span class="line">        <span class="built_in">string</span> name;</span><br><span class="line"></span><br><span class="line">        archive(age, name);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Age: "</span> &lt;&lt; age &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">"Name: "</span> &lt;&lt; name &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>生成的xml文件如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cereal</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Age</span>&gt;</span>30<span class="tag">&lt;/<span class="name">Age</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Name</span>&gt;</span>Dawei<span class="tag">&lt;/<span class="name">Name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">cereal</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      cereal是一个开源的（BSD License），轻量级的C++序列化库。它只有头文件，支持序列化成binary，xml，JSON。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>推荐一个可以直接在Visual Studio中看到complexity的插件CodeMaid</title>
    <link href="http://fresky.github.io/2014/04/02/see-code-complexity-in-visual-studio-with-extension-codemaid/"/>
    <id>http://fresky.github.io/2014/04/02/see-code-complexity-in-visual-studio-with-extension-codemaid/</id>
    <published>2014-04-02T08:52:00.000Z</published>
    <updated>2019-12-20T08:29:07.284Z</updated>
    
    <content type="html"><![CDATA[<p>推荐一个Visual Studio的插件<a href="http://www.codemaid.net/" target="_blank" rel="noopener">CodeMaid</a>，它有很多的功能，比如可以自动清理代码，帮助我们浏览代码。</p><p>我最喜欢的功能是直接在Visual Studio中看到complexity，这样在重构时就可以有的放矢，避免老打开<a href="http://www.campwoodsw.com/sourcemonitor.html" target="_blank" rel="noopener">SourceMonitor</a>了。</p><p>下图是一个截图。<br><img src="/images/codemaidexample.png"></p>]]></content>
    
    <summary type="html">
    
      推荐一个Visual Studio的插件CodeMaid，可以自动清理代码，帮助我们浏览代码，我最喜欢的功能是直接在Visual Studio中看到complexity，这样在重构时就可以有的放矢，避免老打开SourceMonitor了。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>用CS-Script把Notepad++变身支持智能提示和运行代码的C#集成开发环境</title>
    <link href="http://fresky.github.io/2014/03/31/make-your-notepadd-plus-plus-as-csharp-ide-with-intellisense-and-code-execution/"/>
    <id>http://fresky.github.io/2014/03/31/make-your-notepadd-plus-plus-as-csharp-ide-with-intellisense-and-code-execution/</id>
    <published>2014-03-31T04:17:00.000Z</published>
    <updated>2019-12-20T08:29:07.284Z</updated>
    
    <content type="html"><![CDATA[<p>Visual Studio很好很强大，但是如果只是想试一个简单的C#语句运行结果，打开Visual Studio，新建一个Project就有点太杀鸡用牛刀了。我以前常用<a href="http://www.linqpad.net/" target="_blank" rel="noopener">LINQPad</a>的<a href="http://www.linqpad.net/CodeSnippetIDE.aspx" target="_blank" rel="noopener">LINQPad as a Code Scratchpad</a>，但是LINQPad的免费版本不支持智能提示。我也用过<a href="/2013/05/16/use-csharp-as-script-language/">把C#当作脚本语言来用</a>，也不是很方便。</p><p>最近发现了一个Notepad++的插件<a href="http://www.csscript.net/npp/" target="_blank" rel="noopener">CS-Script tools for Notepad++</a>，可以直接把Notepad++变身支持智能提示和运行代码的C#集成开发环境。这对于一直开着Notepad++的我来说简直太方便了。</p><p>可以看看主页的智能提示例子：</p><p><img src="http://www.csscript.net/npp/css_npp.gif" alt=" C# intellisense for Notepad++ "></p><p>再看看Project窗口和Output窗口：</p><p><img src="http://www.csscript.net/npp/CSScript.png" alt=" Managing C# scripts in Notepad++"></p>]]></content>
    
    <summary type="html">
    
      用CS-Script把Notepad++变身支持智能提示和运行代码的C#集成开发环境。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>在C#中用Linq从属性文件中读取键值对Key-Value Pair</title>
    <link href="http://fresky.github.io/2014/03/28/read-key-value-pair-from-property-file-with-linq-in-csharp/"/>
    <id>http://fresky.github.io/2014/03/28/read-key-value-pair-from-property-file-with-linq-in-csharp/</id>
    <published>2014-03-28T00:41:00.000Z</published>
    <updated>2019-12-20T08:29:07.283Z</updated>
    
    <content type="html"><![CDATA[<p>我们经常需要读取一些如下的属性文件，然后把他们放到一个Dictionary里面。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Name = Dawei XU</span><br><span class="line">Email = dawei.xu@gmail.com</span><br></pre></td></tr></table></figure></p><p>在C#中可以用Linq很方便的实现这个功能。先看代码：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">File.ReadAllLines(fileName)</span><br><span class="line">.Select(line =&gt; line.Split(<span class="keyword">new</span>[] &#123;<span class="string">'='</span>&#125;, <span class="number">2</span>, StringSplitOptions.RemoveEmptyEntries))</span><br><span class="line">.Where(split =&gt; split.Length == <span class="number">2</span>)</span><br><span class="line">.ToDictionary(split =&gt; split[<span class="number">0</span>].Trim(), split =&gt; split[<span class="number">1</span>].Trim());</span><br></pre></td></tr></table></figure><p>用到了如下Linq扩展方法：</p><ul><li><a href="http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select.aspx" target="_blank" rel="noopener">Enumerable.Select</a>，用来对每一行做split操作，分隔出Key和Value。注意这里要写上分隔成两段。另外要<code>StringSplitOptions.RemoveEmptyEntries</code>。</li><li><a href="http://msdn.microsoft.com/en-us/library/system.linq.enumerable.where%28v=vs.110%29.aspx" target="_blank" rel="noopener">Enumerable.Where</a>，用来过滤到不符合Key-Value的行。</li><li><a href="http://msdn.microsoft.com/en-us/library/system.linq.enumerable.todictionary%28v=vs.110%29.aspx" target="_blank" rel="noopener">Enumerable.ToDictionary</a>，把分隔成两段的第一段作为Key，第二个作为Value存在Dictionary里面。</li></ul><p>但是这个做法有一个潜在的问题，就是如果属性文件中有重复的Key出现，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Email = dawei.xu@hotmail.com</span><br><span class="line">Name = Dawei XU</span><br><span class="line">Email = dawei.xu@gmail.com</span><br></pre></td></tr></table></figure></p><p>就会抛出<a href="http://msdn.microsoft.com/en-us/library/system.argumentexception.aspx" target="_blank" rel="noopener">ArgumentException</a></p><blockquote><p>An element with the same key already exists in the Dictionary&lt;TKey, TValue&gt;.</p></blockquote><p>解决办法就是用<a href="http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby%28v=vs.110%29.aspx" target="_blank" rel="noopener">Enumerable.GroupBy</a>把重复的Key合并在一起，然后可以根据需要使用第一次出现的或者最后一次出现的，下面的例子是采用最后一次出现的。同时因为用了<code>GroupBy</code>，最后的<code>ToDictionary</code>需要做一些相应的修改。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">File.ReadAllLines(fileName)</span><br><span class="line">.Select(line =&gt; line.Split(<span class="keyword">new</span>[] &#123;<span class="string">'='</span>&#125;, <span class="number">2</span>, StringSplitOptions.RemoveEmptyEntries))</span><br><span class="line">.Where(split =&gt; split.Length == <span class="number">2</span>)</span><br><span class="line">.GroupBy(split=&gt;split[<span class="number">0</span>].Trim())</span><br><span class="line">.ToDictionary(<span class="keyword">group</span> =&gt; <span class="keyword">group</span>.Key.Trim(), <span class="keyword">group</span> =&gt; <span class="keyword">group</span>.Last().Last().Trim());</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      在C#中用Linq从属性文件中读取键值对Key-Value Pair。使用Select, Where, GroupBy, ToDictionary。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>推荐一个markdown编辑器-Haroopad</title>
    <link href="http://fresky.github.io/2014/03/19/markdown-editor-haroopad/"/>
    <id>http://fresky.github.io/2014/03/19/markdown-editor-haroopad/</id>
    <published>2014-03-19T01:17:00.000Z</published>
    <updated>2019-12-20T08:29:07.283Z</updated>
    
    <content type="html"><![CDATA[<p>在我之前的博客<a href="/2013/07/12/markdown-editor-markdownpad/">推荐一个markdown编辑器-MarkdownPad</a>中推荐过MarkdownPad，今天再推荐一个<a href="http://pad.haroopress.com/user.html" target="_blank" rel="noopener">Haroopad</a>。可以到主页看一下feature，比较吸引我的有</p><ul><li>跨平台，支持Windows，Linux，Mac。</li><li>支持Github Flavored Markdown。</li><li>支持数学公式。</li></ul>]]></content>
    
    <summary type="html">
    
      推荐一个支持Windows, mac, linux的markdown编辑器-Haroopad，支持Github Flavored Markdown和数学公式。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>值得记录的工具和网站</title>
    <link href="http://fresky.github.io/2014/03/15/good-tools-and-websites/"/>
    <id>http://fresky.github.io/2014/03/15/good-tools-and-websites/</id>
    <published>2014-03-14T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.283Z</updated>
    
    <content type="html"><![CDATA[<p>打算用这篇博客记录一下平时遇到的好的工具和网站，会随时更新。</p><h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><h2 id="编程"><a href="#编程" class="headerlink" title="编程"></a>编程</h2><h3 id="C"><a href="#C" class="headerlink" title="C#"></a>C#</h3><p>托管代码帮助文件生成：<a href="http://shfb.codeplex.com/" target="_blank" rel="noopener">Sandcastle Help File Builder</a></p><p>C#的IOC框架：<a href="http://docs.structuremap.net/" target="_blank" rel="noopener">StructureMap</a>， <a href="http://unity.codeplex.com/" target="_blank" rel="noopener">Unity</a>， <a href="http://code.google.com/p/autofac/" target="_blank" rel="noopener">autofac</a></p><p>C#的unit test的3个A中的第一个Arrange框架：<a href="https://github.com/AutoFixture" target="_blank" rel="noopener">AutoFixture</a></p><p>C#的mutation测试框架：<a href="http://www.mutation-testing.net" target="_blank" rel="noopener">NinjaTurtles</a></p><p>WPF应用的spy工具，可以看运行的WPF程序的控件树并且修改属性：<a href="http://snoopwpf.codeplex.com/" target="_blank" rel="noopener">Snoop</a></p><p>.NET的一些开源框架Castle：<a href="http://www.castleproject.org/" target="_blank" rel="noopener">Castle Project</a></p><h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><p>Google的开源html5 解析器：<a href="https://github.com/google/gumbo-parser" target="_blank" rel="noopener">google/gumbo-parser</a><br><a href="http://developer.yahoo.com/yslow/smushit/" target="_blank" rel="noopener">Smush.it</a>： 网站图像优化工具。<br><a href="http://developer.yahoo.com/yslow/" target="_blank" rel="noopener">YSlow</a>：网站性能优化工具。</p><p>测试你的网站是否符合现代标准：<a href="http://modern.ie/en-us" target="_blank" rel="noopener">Modern.IE</a></p><h2 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h2><p>优化学习过程的闪卡工具：<a href="http://mnemosyne-proj.org/" target="_blank" rel="noopener">Mnemosyne</a></p><h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p>直接把截图复制到硬盘：<a href="http://screenshot2disk.codeplex.com/" target="_blank" rel="noopener">Screenshot2Disk</a></p><p>资源管理器增强软件，使用后走一下它的那个tutorial，就知道有多强大了。：<a href="http://www.listary.com/" target="_blank" rel="noopener">Listary</a></p><p>多台电脑共享鼠标键盘：<a href="http://synergy-foss.org/" target="_blank" rel="noopener">Synergy</a></p><h1 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h1><h2 id="工具-1"><a href="#工具-1" class="headerlink" title="工具"></a>工具</h2><h3 id="在线C-编译器"><a href="#在线C-编译器" class="headerlink" title="在线C++编译器"></a>在线C++编译器</h3><ul><li><a href="http://liveworkspace.org/" target="_blank" rel="noopener">LiveWorkspace</a> (Clang 3.2, GCC 4.6.3 4.7.2)</li><li><a href="http://gcc.godbolt.org/" target="_blank" rel="noopener">gcc.godbolt.org</a> (Clang 3.0, GCC 4.5.3 4.8.0 prerelease, Intel ICC 13.0.1)</li><li><a href="http://rise4fun.com/vcpp" target="_blank" rel="noopener">Rise4Fun</a> (Microsoft VC++ 2012 and November 2012 CTP)</li><li><a href="http://stacked-crooked.com/" target="_blank" rel="noopener">Stacked-Crooked</a> (GCC 4.7)</li><li><a href="http://ideone.com/" target="_blank" rel="noopener">ideone.com</a> (GCC 4.3.4 and 4.5.1)</li><li><a href="http://comeaucomputing.com/tryitout/" target="_blank" rel="noopener">Comeau Test Drive</a> (EDG 4.3.3)</li></ul><h2 id="在线学习"><a href="#在线学习" class="headerlink" title="在线学习"></a>在线学习</h2><p><a href="http://pcottle.github.io/learnGitBranching/" target="_blank" rel="noopener">LearnGitBranching</a>：可视化的学习Git。</p><p><a href="http://tryregex.com/" target="_blank" rel="noopener">TryRegex</a>, <a href="http://regexcrossword.com/" target="_blank" rel="noopener">Regex Crossword</a><br>(学习正则表达式的游戏网站，用正则表达式玩Crossword)</p><p><a href="http://www.codecademy.com/" target="_blank" rel="noopener">Codecademy</a>：在线编程学习网站，目前支持JavaScript，HTML/CSS，PHP，Python，Ruby。</p><p><a href="https://developers.google.com/edu/python/" target="_blank" rel="noopener">Google的免费Python课程</a><br><a href="http://www.checkio.org/" target="_blank" rel="noopener">CheckiO</a>：练习Python的网站，用Python完成任务来玩游戏。</p><p><a href="http://www.syncfusion.com/resources/techportal/ebooks" target="_blank" rel="noopener">Syncfusion Succinctly系列电子书</a>：非常简捷明了，比如<a href="http://www.syncfusion.com/resources/techportal/ebooks/cplusplus" target="_blank" rel="noopener">C++</a>的也就100多页，坐几次地铁就看完了。</p><p><a href="http://try.jquery.com/" target="_blank" rel="noopener">Try jQuery</a></p><p><a href="http://wix.tramontana.co.hu/tutorial" target="_blank" rel="noopener">WiX Tutorial</a><br><a href="https://github.com/vhf/free-programming-books/blob/master/free-programming-books.md?utm_campaign=Manong_Weekly_Issue_5&amp;utm_medium=EDM&amp;utm_source=Manong_Weekly#net-c--vb--nemerle--visual-studio" target="_blank" rel="noopener">Github上的免费电子书</a></p><h2 id="找工作相关"><a href="#找工作相关" class="headerlink" title="找工作相关"></a>找工作相关</h2><p><a href="http://www.careercup.com/" target="_blank" rel="noopener">Careercup</a><br><a href="http://www.glassdoor.com" target="_blank" rel="noopener">Glassdoor</a><br><a href="http://www.geekinterview.com/" target="_blank" rel="noopener">GeekInterview</a>  </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;打算用这篇博客记录一下平时遇到的好的工具和网站，会随时更新。&lt;/p&gt;
&lt;h1 id=&quot;工具&quot;&gt;&lt;a href=&quot;#工具&quot; class=&quot;headerlink&quot; title=&quot;工具&quot;&gt;&lt;/a&gt;工具&lt;/h1&gt;&lt;h2 id=&quot;编程&quot;&gt;&lt;a href=&quot;#编程&quot; class=&quot;he
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>推荐一个可视化的学习Git的好网站：LearnGitBranching</title>
    <link href="http://fresky.github.io/2014/03/11/learn-git-visually-by-learngitbranching/"/>
    <id>http://fresky.github.io/2014/03/11/learn-git-visually-by-learngitbranching/</id>
    <published>2014-03-11T01:29:00.000Z</published>
    <updated>2019-12-20T08:29:07.282Z</updated>
    
    <content type="html"><![CDATA[<p>推荐一个可视化的学习Git的好网站：<a href="http://pcottle.github.io/learnGitBranching/" target="_blank" rel="noopener">LearnGitBranching</a>。可以把它当成一个游戏，一共33关。把Git的常见命令讲解的非常清楚，配上可视化的效果动画，学习起来事半功倍，欲罢不能。</p>]]></content>
    
    <summary type="html">
    
      推荐一个可视化的学习Git的好网站：LearnGitBranching
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>用Android++在Visual Studio中用C/C++开发Android应用</title>
    <link href="http://fresky.github.io/2014/03/03/develop-android-app-in-visual-studio-with-android-plus-plus/"/>
    <id>http://fresky.github.io/2014/03/03/develop-android-app-in-visual-studio-with-android-plus-plus/</id>
    <published>2014-03-03T05:22:00.000Z</published>
    <updated>2019-12-20T08:29:07.282Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://android-plus-plus.com/" target="_blank" rel="noopener">Android++</a>是一个免费的Visual Studio插件，安装之后可以在Visual Studio中用C/C++来开发Android应用。</p>]]></content>
    
    <summary type="html">
    
      Android++是一个免费的Visual Studio插件，安装之后可以在Visual Studio中用C/C++来开发Androi应用。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>实时的.NET程序错误监控产品Exceptionless开源了</title>
    <link href="http://fresky.github.io/2014/03/02/real-time-net-error-reporting-service-exceptionless-is-open-source-now/"/>
    <id>http://fresky.github.io/2014/03/02/real-time-net-error-reporting-service-exceptionless-is-open-source-now/</id>
    <published>2014-03-02T07:47:00.000Z</published>
    <updated>2019-12-20T08:29:07.282Z</updated>
    
    <content type="html"><![CDATA[<p>实时的.NET程序错误监控产品<a href="http://exceptionless.com/" target="_blank" rel="noopener">Exceptionless</a>开源在<a href="https://github.com/exceptionless/Exceptionless" target="_blank" rel="noopener">Github</a>上了。Exceptionless可以对ASP.NET, Web API, WebForms, WPF, Console, 和 MVC 应用提供错误监控、上传、报表服务。</p><p>使用时需要在Exceptionless上免费注册一个账号，然后用nuget下载Exceptionless的依赖，照着这个<a href="http://docs.exceptionless.com/contents/gettingstarted/" target="_blank" rel="noopener">Getting Started</a>一步步来就行了。也可以自己搭建一个web服务器，让这些出错信息传到自己的web服务器上，可以参考Github上的这个<a href="https://github.com/exceptionless/Exceptionless" target="_blank" rel="noopener">Readme</a>。</p>]]></content>
    
    <summary type="html">
    
      实时的.NET程序错误监控产品Exceptionless开源了。Exceptionless可以对ASP.NET, Web API, WebForms, WPF, Console, 和 MVC 应用提供错误监控，上传，报表服务。
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>在code.org上自己写一个flappy bird游戏</title>
    <link href="http://fresky.github.io/2014/03/01/write-your-own-flappy-bird-in-code-dot-org/"/>
    <id>http://fresky.github.io/2014/03/01/write-your-own-flappy-bird-in-code-dot-org/</id>
    <published>2014-03-01T09:44:00.000Z</published>
    <updated>2019-12-20T08:29:07.282Z</updated>
    
    <content type="html"><![CDATA[<p>随着Flappy Bird的大热，每个人都对每天5万美金的广告收入垂涎欲滴。<a href="http://code.org/" target="_blank" rel="noopener">Code.org</a>做了一个关于Flappy Bird的<a href="http://learn.code.org/s/6/level/148" target="_blank" rel="noopener">教学</a>，可以让小孩子们也写一个自己的Flappy Bird游戏，只有8个步骤，大家也可以写写玩玩。这是我的<a href="http://learn.code.org/sh/14435174" target="_blank" rel="noopener">Flappy Bird</a>。</p>]]></content>
    
    <summary type="html">
    
      在code.org上自己写一个flappy bird游戏
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>如何在google test中指定只运行一部分测试</title>
    <link href="http://fresky.github.io/2014/02/28/how-to-run-subset-of-tests-in-google-test/"/>
    <id>http://fresky.github.io/2014/02/28/how-to-run-subset-of-tests-in-google-test/</id>
    <published>2014-02-28T00:47:00.000Z</published>
    <updated>2019-12-20T08:29:07.282Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://code.google.com/p/googletest/" target="_blank" rel="noopener">Google Test</a>是一个很流行的C++测试框架，在使用google test的过程中，如果遇到了一个或者几个测试失败了，在调试的过程中，我们只想运行这些失败的测试，这个时候就可以用<code>::testing::FLAGS_gtest_filter</code>来指定。</p><p>在你的google test的<code>main</code>函数里写成如下代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> _tmain(<span class="keyword">int</span> argc, _TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line">    ::testing::InitGoogleMock(&amp;argc, argv);</span><br><span class="line">::testing::FLAGS_gtest_filter = <span class="string">"MyClassTest.testMyMethod*"</span>;</span><br><span class="line">    <span class="keyword">return</span> RUN_ALL_TESTS();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      如何在google test中用::testing::FLAGS_gtest_filter指定只运行一部分测试
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
  </entry>
  
  <entry>
    <title>在网上浏览.NET的所有代码，并且让你的Visual Studio的go to definition(F12)指向在线代码</title>
    <link href="http://fresky.github.io/2014/02/27/see-dot-net-source-code-in-web-and-integrate-with-visual-studio-go-to-definition/"/>
    <id>http://fresky.github.io/2014/02/27/see-dot-net-source-code-in-web-and-integrate-with-visual-studio-go-to-definition/</id>
    <published>2014-02-27T04:47:00.000Z</published>
    <updated>2019-12-20T08:29:07.281Z</updated>
    
    <content type="html"><![CDATA[<p>现在可以在<a href="http://referencesource-beta.microsoft.com/" target="_blank" rel="noopener">Microsoft Reference Source</a>看所有的.net framework的代码，而且搜索超级方便。过了beta期会移到<a href="http://referencesource.microsoft.com/" target="_blank" rel="noopener">Microsoft Reference Source Code Center</a>。</p><p>同时还有一个Visual Studio的扩展<a href="http://visualstudiogallery.msdn.microsoft.com/f89b27c5-7d7b-4059-adde-7ccc709fa86e" target="_blank" rel="noopener">Ref12</a>，适用于Visual Studio 2010， 2012， 2013。装了这个扩展之后在.net的代码上按F12（Go To Definition）可以直接打开网页代码。这样看代码就很太方便了：）</p><p>另外也可以<a href="http://referencesource-beta.microsoft.com/download.html" target="_blank" rel="noopener">下载</a>所有的代码，然后拿Visual Studio打开，这样可以在网络情况不好的条件下看代码了。</p>]]></content>
    
    <summary type="html">
    
      在网上浏览.NET的所有代码，并且用Visual Studio的扩展Ref12让你的Visual Studio的go to definition(F12)指向在线代码
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>使用CLRMD时通过Symbol Server找Dac的位置来初始化ClrRuntime</title>
    <link href="http://fresky.github.io/2014/02/18/clrmd-find-dac-location-from-symbol-server/"/>
    <id>http://fresky.github.io/2014/02/18/clrmd-find-dac-location-from-symbol-server/</id>
    <published>2014-02-18T06:38:00.000Z</published>
    <updated>2019-12-20T08:29:07.281Z</updated>
    
    <content type="html"><![CDATA[<p>在我昨天的博客<a href="/2014/02/17/use-clrmd-to-create-your-own-csharp-debugger/">使用CLRMD编写一个自己的C#调试器</a>介绍了一下如果使用CLRMD的API，其中第二个例子是打开一个CLR的dump，来遍历所有线程，把call stack打印出来，类似在每个线程上运行<code>!clrstack</code>命令。</p><p>昨天的那个小例子有一个潜在的问题，就是如果dump是别的机器生成的，自己机器上没有装匹配的clr时，函数<code>TryGetDacLocation</code>会返回<code>null</code>。这样就不能正确的初始化<code>ClrRuntime</code>了。</p><p><a href="http://winterdom.com/2013/05/clrmd-fetching-dac-libraries-from-symbol-servers" target="_blank" rel="noopener">ClrMD: Fetching DAC Libraries From Symbol Servers</a>介绍了如果通过使用<code>dbghelp.dll</code>（在安装windbg或者debugdia时会装在你的电脑上）来从symbol路径里面找Dac。我参考这篇文章写了一个读取dump，打印异常的小程序。</p><p>先看输出吧，和在windbg里面用sos扩展敲<code>!pe</code>的效果很类似，不过自动把inner exception也打印出来了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">ThreadID: 11EC</span><br><span class="line">Managed ThreadID: 1</span><br><span class="line">Exception Address: 244A086C</span><br><span class="line">Exception Type: System.Reflection.TargetInvocationException</span><br><span class="line">Message: Exception has been thrown by the target of an invocation.</span><br><span class="line">Call stack:</span><br><span class="line">           SP           IP Function</span><br><span class="line">            0            0 System.RuntimeMethodHandle._InvokeMethodFast(System.Object, System.Object[], System.SignatureStruct ByRef, System.Reflection.MethodAttributes, System.RuntimeTypeHandle)</span><br><span class="line">       33E458     6FD15637 System.RuntimeMethodHandle.InvokeMethodFast(System.Object, System.Object[], System.Signature, System.Reflection.MethodAttributes, System.RuntimeTypeHandle)</span><br><span class="line">...</span><br><span class="line">HResult: 80131604</span><br><span class="line">Inner Exception:</span><br><span class="line">Exception Type: System.OutOfMemoryException</span><br><span class="line">Message: Out of memory.</span><br><span class="line">Call stack:</span><br><span class="line">           SP           IP Function</span><br><span class="line">       33CD04     6F313341 System.Drawing.Graphics.FromHdcInternal(IntPtr)</span><br><span class="line">       33CD14     6F2115F0 System.Drawing.Font.ToLogFont(System.Object)</span><br><span class="line">       33CD44     6F211538 System.Drawing.Font.ToHfont()</span><br><span class="line">       33CD74     6E7E37DE System.Windows.Forms.Control+FontHandleWrapper..ctor(System.Drawing.Font)</span><br><span class="line">       33CD80     6EEAB7FA System.Windows.Forms.OwnerDrawPropertyBag.get_FontHandle()</span><br><span class="line">       33CD90     6F04AEA3 System.Windows.Forms.TreeView.CustomDraw(System.Windows.Forms.Message ByRef)</span><br><span class="line">       33CEA8     6E80C16C System.Windows.Forms.TreeView.WmNotify(System.Windows.Forms.Message ByRef)</span><br><span class="line">       33CF28     6E80BDB6 System.Windows.Forms.TreeView.WndProc(System.Windows.Forms.Message ByRef)</span><br><span class="line">...</span><br><span class="line">HResult: 8007000E</span><br><span class="line">Press any key to <span class="built_in">continue</span> . . .</span><br></pre></td></tr></table></figure><p>加载dump的代码：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">LoadDump</span>(<span class="params"><span class="keyword">string</span> file</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">using</span> (DataTarget dataTarget = DataTarget.LoadCrashDump(file))</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// use microsoft public symbol server to find the DAC</span></span><br><span class="line"><span class="keyword">string</span> symcache = <span class="string">@"D:\NotBackedUp\SymCache"</span>;</span><br><span class="line">DacLocator dacloc = DacLocator.FromPublicSymbolServer(symcache);</span><br><span class="line"><span class="keyword">string</span> dacLocation = dacloc.FindDac(dataTarget.ClrVersions[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">ClrRuntime runtime = dataTarget.CreateRuntime(dacLocation);</span><br><span class="line"><span class="keyword">foreach</span> (ClrThread thread <span class="keyword">in</span> runtime.Threads)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (thread.CurrentException != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">"ThreadID: &#123;0:X&#125;"</span>, thread.OSThreadId);</span><br><span class="line">Console.WriteLine(<span class="string">"Managed ThreadID: &#123;0:X&#125;"</span>, thread.ManagedThreadId);</span><br><span class="line">Console.WriteLine(<span class="string">"Exception Address: &#123;0:X&#125;"</span>, thread.CurrentException.Address);</span><br><span class="line"></span><br><span class="line">ClrException ex = thread.CurrentException;</span><br><span class="line">PrintException(ex);</span><br><span class="line"><span class="keyword">if</span> (ex.Inner !=<span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"Inner Exception:"</span>);</span><br><span class="line">PrintException(ex.Inner);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>打印exception的代码：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PrintException</span>(<span class="params">ClrException ex</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"Exception Type: &#123;0&#125;"</span>, ex.Type.Name);</span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"Message: &#123;0&#125;"</span>, ex.Message);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span></span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"Message: No Message due to mini dump!"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">"Call stack:"</span>);</span><br><span class="line">Console.WriteLine(<span class="string">" &#123;0,12:X&#125; &#123;1,12:X&#125; &#123;2&#125;"</span>, <span class="string">"SP"</span>, <span class="string">"IP"</span>, <span class="string">"Function"</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> frame <span class="keyword">in</span> ex.StackTrace)</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">" &#123;0,12:X&#125; &#123;1,12:X&#125; &#123;2&#125;"</span>, frame.StackPointer, frame.InstructionPointer, frame.DisplayString);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"HResult: &#123;0:X&#125;"</span>, ex.HResult);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span></span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>注意这里有两个try，是因为我发现如果打开的mini dump，在拿Messages和HResult时会出exception。</p><p>通过symbol路径寻找Dac的代码如下：（主要是上面提到的那篇文章的代码）<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DacLocator</span> : <span class="title">IDisposable</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> sfImage = <span class="number">0</span>;</span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"dbghelp.dll"</span>, SetLastError = true)</span>]</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">bool</span> <span class="title">SymInitialize</span>(<span class="params">IntPtr hProcess, String symPath, <span class="keyword">bool</span> fInvadeProcess</span>)</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"dbghelp.dll"</span>, SetLastError = true)</span>]</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">bool</span> <span class="title">SymCleanup</span>(<span class="params">IntPtr hProcess</span>)</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"dbghelp.dll"</span>, SetLastError = true)</span>]</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">bool</span> <span class="title">SymFindFileInPath</span>(<span class="params">IntPtr hProcess, String searchPath, String filename, <span class="keyword">uint</span> id, <span class="keyword">uint</span> two, <span class="keyword">uint</span> three, <span class="keyword">uint</span> flags, StringBuilder filePath, IntPtr callback, IntPtr context</span>)</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>, SetLastError = true)</span>]</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">extern</span> LibrarySafeHandle <span class="title">LoadLibrary</span>(<span class="params">String name</span>)</span>;</span><br><span class="line"></span><br><span class="line">[<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>, SetLastError = true)</span>]</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">bool</span> <span class="title">FreeLibrary</span>(<span class="params">IntPtr hModule</span>)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String searchPath;</span><br><span class="line"><span class="keyword">private</span> LibrarySafeHandle dbghelpModule;</span><br><span class="line"><span class="keyword">private</span> Process ourProcess;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">DacLocator</span>(<span class="params">String searchPath</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">this</span>.searchPath = searchPath;</span><br><span class="line">ourProcess = Process.GetCurrentProcess();</span><br><span class="line">dbghelpModule = LoadLibrary(<span class="string">"dbghelp.dll"</span>);</span><br><span class="line"><span class="keyword">if</span> (dbghelpModule.IsInvalid)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> Win32Exception(String.Format(<span class="string">"Could not load dbghelp.dll: &#123;0&#125;"</span>, Marshal.GetLastWin32Error()));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!SymInitialize(ourProcess.Handle, searchPath, <span class="literal">false</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> Win32Exception(String.Format(<span class="string">"SymInitialize() failed: &#123;0&#125;"</span>, Marshal.GetLastWin32Error()));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DacLocator <span class="title">FromPublicSymbolServer</span>(<span class="params">String localCache</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> DacLocator(String.Format(<span class="string">"SRV*&#123;0&#125;*http://msdl.microsoft.com/download/symbols"</span>, localCache));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DacLocator <span class="title">FromEnvironment</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">String ntSymbolPath = Environment.GetEnvironmentVariable(<span class="string">"_NT_SYMBOL_PATH"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> DacLocator(ntSymbolPath);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DacLocator <span class="title">FromSearchPath</span>(<span class="params">String searchPath</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> DacLocator(searchPath);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">FindDac</span>(<span class="params">ClrInfo clrInfo</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">String dac = clrInfo.TryGetDacLocation();</span><br><span class="line"><span class="keyword">if</span> (String.IsNullOrEmpty(dac))</span><br><span class="line">&#123;</span><br><span class="line">dac = FindDac(clrInfo.DacInfo.FileName, clrInfo.DacInfo.TimeStamp, clrInfo.DacInfo.FileSize);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> dac;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">FindDac</span>(<span class="params">String dacname, <span class="keyword">uint</span> timestamp, <span class="keyword">uint</span> fileSize</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// attempt using the symbol server</span></span><br><span class="line">StringBuilder symbolFile = <span class="keyword">new</span> StringBuilder(<span class="number">2048</span>);</span><br><span class="line"><span class="keyword">if</span> (SymFindFileInPath(ourProcess.Handle, searchPath, dacname,</span><br><span class="line">timestamp, fileSize, <span class="number">0</span>, <span class="number">0x02</span>, symbolFile, IntPtr.Zero, IntPtr.Zero))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> symbolFile.ToString();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> Win32Exception(String.Format(<span class="string">"SymFindFileInPath() failed: &#123;0&#125;"</span>, Marshal.GetLastWin32Error()));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (ourProcess != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">SymCleanup(ourProcess.Handle);</span><br><span class="line">ourProcess = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (dbghelpModule != <span class="literal">null</span> &amp;&amp; !dbghelpModule.IsClosed)</span><br><span class="line">&#123;</span><br><span class="line">dbghelpModule.Dispose();</span><br><span class="line">dbghelpModule = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">LibrarySafeHandle</span> : <span class="title">SafeHandleZeroOrMinusOneIsInvalid</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LibrarySafeHandle</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">: <span class="title">base</span>(<span class="params"><span class="literal">true</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LibrarySafeHandle</span>(<span class="params">IntPtr handle</span>)</span></span><br><span class="line"><span class="function">: <span class="title">base</span>(<span class="params"><span class="literal">true</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">this</span>.SetHandle(handle);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">bool</span> <span class="title">ReleaseHandle</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> FreeLibrary(<span class="keyword">this</span>.handle);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      使用CLRMD时通过Symbol Server找Dac的位置来初始化ClrRuntime
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>使用CLRMD编写一个自己的C#调试器</title>
    <link href="http://fresky.github.io/2014/02/17/use-clrmd-to-create-your-own-csharp-debugger/"/>
    <id>http://fresky.github.io/2014/02/17/use-clrmd-to-create-your-own-csharp-debugger/</id>
    <published>2014-02-17T11:33:00.000Z</published>
    <updated>2019-12-20T08:29:07.281Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.nuget.org/packages/Microsoft.Diagnostics.Runtime" target="_blank" rel="noopener">CLR Memory Diagnostics (ClrMD)</a>是微软提供的一个库，可以使用这个库的API来分析CLR的dump文件，或者直接attach到一个CLR的进程上。使用这些API可以实现和Windbg的SOS扩展类似的功能。</p><p>使用起来非常简单，可以通过nuget把这个reference加上，然后就是<code>DataTarget</code>，<code>ClrRuntime</code>，<code>ClrHeap</code>，<code>ClrType</code>这几个类，API都很清楚。下面是两个小的例子。</p><p>第一个是attach到一个进程上，然后把这个进程内的所有字符串打印出来，这样如果一个程序没有对密码加密，就能很容易的被看到的。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> (DataTarget dataTarget = DataTarget.AttachToProcess(pid, <span class="number">5000</span>))</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine();</span><br><span class="line"><span class="keyword">string</span> dacLocation = dataTarget.ClrVersions[<span class="number">0</span>].TryGetDacLocation();</span><br><span class="line">ClrRuntime runtime = dataTarget.CreateRuntime(dacLocation);</span><br><span class="line">ClrHeap heap = runtime.GetHeap();</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">ulong</span> obj <span class="keyword">in</span> heap.EnumerateObjects())</span><br><span class="line">&#123;</span><br><span class="line">ClrType type = heap.GetObjectType(obj);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> (<span class="keyword">string</span>).ToString().Equals(type.Name))</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(type.GetValue(obj));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二个是打开一个dump，遍历所有线程，把call stack打印出来。<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> (DataTarget dataTarget = DataTarget.LoadCrashDump(file))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">string</span> dacLocation = dataTarget.ClrVersions[<span class="number">0</span>].TryGetDacLocation();</span><br><span class="line">ClrRuntime runtime = dataTarget.CreateRuntime(dacLocation);</span><br><span class="line"><span class="keyword">foreach</span> (ClrThread thread <span class="keyword">in</span> runtime.Threads)</span><br><span class="line">&#123;</span><br><span class="line">Console.WriteLine(<span class="string">"ThreadID: &#123;0:X&#125;"</span>, thread.OSThreadId);</span><br><span class="line">Console.WriteLine(<span class="string">"Callstack:"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (ClrStackFrame frame <span class="keyword">in</span> thread.StackTrace)</span><br><span class="line">Console.WriteLine(<span class="string">"&#123;0,12:X&#125; &#123;1,12:X&#125; &#123;2&#125;"</span>, frame.InstructionPointer, frame.StackPointer,</span><br><span class="line">frame.DisplayString);</span><br><span class="line">Console.WriteLine();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      使用CLRMD编写一个自己的C#调试器
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>在IDE中用Bing Code Search直接查找代码片段并且插入</title>
    <link href="http://fresky.github.io/2014/02/14/csharp-code-nippets-on-demand-by-bing-code-search/"/>
    <id>http://fresky.github.io/2014/02/14/csharp-code-nippets-on-demand-by-bing-code-search/</id>
    <published>2014-02-14T01:46:00.000Z</published>
    <updated>2019-12-20T08:29:07.281Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://codesnippet.research.microsoft.com/" target="_blank" rel="noopener">Bing Code Search: C# code snippets on-demand</a>可以用三个斜杠///作为注释，然后按下tab，就能用bing的code search搜索相关的代码片段，直接回车插入到进来。<br>主流IDE的插件正在开发，可以在网页中先试试，挺好用的。</p>]]></content>
    
    <summary type="html">
    
      在IDE中用Bing Code Search直接查找代码片段并且插入
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>Thoughtworks的技术雷达</title>
    <link href="http://fresky.github.io/2014/02/10/technology-radar-from-thoughtworks/"/>
    <id>http://fresky.github.io/2014/02/10/technology-radar-from-thoughtworks/</id>
    <published>2014-02-10T07:47:00.000Z</published>
    <updated>2019-12-20T08:29:07.280Z</updated>
    
    <content type="html"><![CDATA[<p>可以看看Thoughtworks在今年1月份发布的<a href="http://www.thoughtworks.com/radar/?mkt_tok=3RkMMJWWfF9wsRohv6TKZKXonjHpfsX66%2B0uX6W1lMI%2F0ER3fOvrPUfGjI4HSsZnI%2BSLDwEYGJlv6SgFS7nMMbFk37gPUhA%3D#/" target="_blank" rel="noopener">技术雷达</a>，挺有趣的。</p>]]></content>
    
    <summary type="html">
    
      Thoughtworks的技术雷达
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>Stackdump: 一个可以离线看stackoverflow的工具</title>
    <link href="http://fresky.github.io/2014/02/10/offline-brower-for-stack-overflow/"/>
    <id>http://fresky.github.io/2014/02/10/offline-brower-for-stack-overflow/</id>
    <published>2014-02-10T02:31:00.000Z</published>
    <updated>2019-12-20T08:29:07.280Z</updated>
    
    <content type="html"><![CDATA[<p>我最早用第一代iphone的时候用过一个神器，可以把整个wikipedia下载在iphone上，这样就能离线看了。我记得当时英文的全部下载下来需要4、5个G，对于8G的iphone压力山大，不过我还是装了很长时间，觉得很好用。</p><p>今天发现了一个可以离线看stackoverflow的工具，<a href="http://stackapps.com/questions/3610/stackdump-an-offline-browser-for-stackexchange-sites" target="_blank" rel="noopener">Stackdump</a>，可以把stackoverflow下载到电脑上，这样在不联网的时候也能看了，作者介绍说下载全部的stackoverflow数据需要20-30g的空间，大概10个小时。</p>]]></content>
    
    <summary type="html">
    
      Stackdump 一个可以离线看stackoverflow的工具
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>我最喜欢的visual studio 2013的新特性</title>
    <link href="http://fresky.github.io/2014/01/26/my-favorite-visual-studio-2013-feature/"/>
    <id>http://fresky.github.io/2014/01/26/my-favorite-visual-studio-2013-feature/</id>
    <published>2014-01-26T06:07:00.000Z</published>
    <updated>2019-12-20T08:29:07.280Z</updated>
    
    <content type="html"><![CDATA[<p>用visual studio 2013也有段时间了，下面列举一下我最喜欢的一些新特性。</p><ol><li>Code lens</li><li>Peeking definition, Alt+F12</li><li>Scroll bar</li><li>Navigate to, Ctrl + ,</li><li>Ctrl+K, Ctrl+O (switch .h .cpp file)</li><li>Move lines, Alt + Up, Alt + Down</li><li>Retuned values when debugging</li><li>Edit and Continue(both 32bit and 64bit)</li><li>Feedback</li><li>Test explorer category, code coverage</li><li>Debug managed memory (need .NET 4.5 dump)</li><li>Quick Launch, Search in Options (VS 2012 also)</li><li>Code map debugger (VS 2012 also)</li><li>Dependency diagram (VS 2012 also)</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;用visual studio 2013也有段时间了，下面列举一下我最喜欢的一些新特性。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Code lens&lt;/li&gt;
&lt;li&gt;Peeking definition, Alt+F12&lt;/li&gt;
&lt;li&gt;Scroll bar&lt;/li&gt;
&lt;li&gt;Navi
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>把用octopress最新发布的博文同步到提供metaweblog API的博客（例如博客园）上</title>
    <link href="http://fresky.github.io/2014/01/24/sync-lastest-post-from-octopress-to-metaweblog/"/>
    <id>http://fresky.github.io/2014/01/24/sync-lastest-post-from-octopress-to-metaweblog/</id>
    <published>2014-01-24T00:43:00.000Z</published>
    <updated>2019-12-20T08:29:07.280Z</updated>
    
    <content type="html"><![CDATA[<p>最近逐渐开始用octopress在github pages上写博客，之前每次发完博客都用我自己写的那个windows live writer的<a href="/2013/07/16/windows-live-writer-plugin-markdowninlivewriter/">markdown插件</a>发布到博客园上，但是觉得很麻烦，今天就动手写了个小程序SyncPost自动把最近的一篇博文同步到博客园上，使用metaweblog API。</p><p>程序很简单，使用前请先配置<code>SyncPost.exe.config</code>，就把主博客域名，本地的<code>octopress</code>的<code>_posts</code>目录，需要同步到的博客metaweblog地址，用户名和密码。如果关心信息安全，可以不写密码，这样程序在运行时会要求输入密码。</p><p>代码很少，可以到<a href="https://github.com/fresky/SyncPost" target="_blank" rel="noopener">Github</a>上看看。</p><p>下面简单介绍一下。</p><hr><p>读密码，在控制台提示用户输入密码，然后用*遮盖，同时支持退格键，代码如下：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">string</span> <span class="title">getPassword</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">string</span> password = System.Configuration.ConfigurationManager.AppSettings[<span class="string">"Password"</span>];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">string</span>.IsNullOrEmpty(password))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Console.Write(<span class="string">"Password: "</span>);</span><br><span class="line">    ConsoleKeyInfo key;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        key = Console.ReadKey(<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">if</span> (key.Key != ConsoleKey.Backspace &amp;&amp; key.Key != ConsoleKey.Enter)</span><br><span class="line">        &#123;</span><br><span class="line">            password += key.KeyChar;</span><br><span class="line">            Console.Write(<span class="string">"*"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (key.Key == ConsoleKey.Backspace &amp;&amp; password.Length &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                password = password.Substring(<span class="number">0</span>, (password.Length - <span class="number">1</span>));</span><br><span class="line">                Console.Write(<span class="string">"\b \b"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">while</span> (key.Key != ConsoleKey.Enter);</span><br><span class="line">    <span class="keyword">return</span> password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><hr><p>从markdown中提取博文标题，根据文件名生成博文地址。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getLastestBlog</span>(<span class="params"><span class="keyword">out</span> <span class="keyword">string</span> title, <span class="keyword">out</span> <span class="keyword">string</span> body</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    title = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">string</span> date = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">string</span> fromBlog = System.Configuration.ConfigurationManager.AppSettings[<span class="string">"FromBlog"</span>];</span><br><span class="line">    <span class="keyword">string</span> postDir = System.Configuration.ConfigurationManager.AppSettings[<span class="string">"PostDir"</span>];</span><br><span class="line">    DirectoryInfo di = <span class="keyword">new</span> DirectoryInfo(postDir);</span><br><span class="line">    FileInfo latestInfo = di.GetFiles(<span class="string">"*.markdown"</span>).OrderByDescending(fi =&gt; fi.Name).First();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">using</span> (StreamReader sr = <span class="keyword">new</span> StreamReader(latestInfo.FullName))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (!sr.EndOfStream)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">string</span> line = sr.ReadLine();</span><br><span class="line">            <span class="keyword">if</span> (line.StartsWith(<span class="string">"title: "</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                title = line.Substring(<span class="number">8</span>, line.Length - <span class="number">9</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (line.StartsWith(<span class="string">"date: "</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                date = line.Substring(<span class="number">6</span>, <span class="number">10</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">string</span> address = <span class="keyword">string</span>.Format(<span class="string">"&#123;0&#125;blog/&#123;1&#125;/&#123;2&#125;/"</span>, fromBlog, date.Replace(<span class="string">'-'</span>, <span class="string">'/'</span>),</span><br><span class="line">        Path.GetFileNameWithoutExtension(latestInfo.Name).Substring(<span class="number">11</span>));</span><br><span class="line">    body =</span><br><span class="line">        <span class="keyword">string</span>.Format(</span><br><span class="line">            <span class="string">@"&lt;p&gt;博客搬到了&lt;a href=""http://fresky.github.io/""&gt;fresky.github.io - Dawei XU&lt;/a&gt;，请各位看官挪步。最新的一篇是：&lt;a href=""&#123;0&#125;""&gt;&#123;1&#125;&lt;/a&gt;。&lt;/p&gt;"</span>,</span><br><span class="line">            address, title);</span><br><span class="line">    Console.WriteLine(<span class="string">"Original Link: &#123;0&#125;"</span>, address);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>发布。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">postLastestBlog</span>(<span class="params"><span class="keyword">string</span> password, <span class="keyword">string</span> title, <span class="keyword">string</span> body</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">string</span> username = System.Configuration.ConfigurationManager.AppSettings[<span class="string">"UserName"</span>];</span><br><span class="line">    <span class="keyword">string</span> blogMetweblogUrl = System.Configuration.ConfigurationManager.AppSettings[<span class="string">"ToBlog"</span>];</span><br><span class="line">    <span class="keyword">var</span> blogcon = <span class="keyword">new</span> BlogConnectionInfo(</span><br><span class="line">        <span class="keyword">string</span>.Empty,</span><br><span class="line">        blogMetweblogUrl,</span><br><span class="line">        <span class="keyword">string</span>.Empty,</span><br><span class="line">        username,</span><br><span class="line">        password);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> client = <span class="keyword">new</span> Client(blogcon);</span><br><span class="line">    client.NewPost(title, body, <span class="keyword">new</span> List&lt;<span class="keyword">string</span>&gt;(), <span class="literal">true</span>, <span class="literal">null</span>);</span><br><span class="line">    Console.WriteLine(<span class="string">"Done!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      把用octopress最新发布的博文同步到提供metaweblog API的博客（例如博客园）上，在csharp的console application中读取密码。
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Github" scheme="http://fresky.github.io/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>Visual Studio的插件Pdbproj可以把pdb转换成C++项目</title>
    <link href="http://fresky.github.io/2014/01/17/visual-studio-extension-pdbproj-load-project-from-pdb/"/>
    <id>http://fresky.github.io/2014/01/17/visual-studio-extension-pdbproj-load-project-from-pdb/</id>
    <published>2014-01-17T06:23:00.000Z</published>
    <updated>2019-12-20T08:29:07.279Z</updated>
    
    <content type="html"><![CDATA[<p>今天发现了一个有趣的visual studio的插件<a href="http://visualstudiogallery.msdn.microsoft.com/952cac4e-fe4d-40a8-9656-9ae863bedbff" target="_blank" rel="noopener">PdbProject for VS2012</a>，可以用open project的方式打开一个pdb，它会把这个pdb转换成vcproj，这样你就能用visual studio来看了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天发现了一个有趣的visual studio的插件&lt;a href=&quot;http://visualstudiogallery.msdn.microsoft.com/952cac4e-fe4d-40a8-9656-9ae863bedbff&quot; target=&quot;_blank&quot; re
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>runnable:在线IDE+代码片段分享</title>
    <link href="http://fresky.github.io/2014/01/09/runnable-online-ide-plus-code-snippet/"/>
    <id>http://fresky.github.io/2014/01/09/runnable-online-ide-plus-code-snippet/</id>
    <published>2014-01-09T14:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.279Z</updated>
    
    <content type="html"><![CDATA[<p>在我之前的博客<a href="/2012/11/17/blogpost/">20个最好的在线IDE</a>中列举过很多在线IDE，可以很方便的在云端执行代码，这样在你手头没有编译器时想试个小程序会非常有用。</p><p>今天介绍的这个网站<a href="http://runnable.com/" target="_blank" rel="noopener">runnable</a>把在线IDE和代码片段结合了起来，你可以在上面搜索代码片段，比如<a href="http://runnable.com/UZKDAYo3XEw2AACX/how-to-upload-a-file-using-jquery-for-php" target="_blank" rel="noopener">How to upload a file using jQuery [PHP]</a>。然后可以自己修改修改在网站上运行一下，看看结果是不是你想要的。</p><p>我把我前几天写的CRTP的例子<a href="/2014/01/03/cpp-static-dispatch-crtp-vs-dynamic-dispatch-virtual-method/">C++的静态分发(CRTP)和动态分发(虚函数多态)的比较</a>和<a href="/2014/01/06/crtp-static-polymorphism-in-c-plus-plus/">用CRTP在C++中实现静态函数的多态</a>放在了<a href="http://runnable.com/Us9FB7khfiNWAARY/static-dispatch-by-crtp-curiously-recurring-template-pattern-in-c%2B%2B" target="_blank" rel="noopener">Static dispatch by CRTP(Curiously Recurring Template Pattern) in C++</a>，大家可以直接点击运行来看结果。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在我之前的博客&lt;a href=&quot;/2012/11/17/blogpost/&quot;&gt;20个最好的在线IDE&lt;/a&gt;中列举过很多在线IDE，可以很方便的在云端执行代码，这样在你手头没有编译器时想试个小程序会非常有用。&lt;/p&gt;
&lt;p&gt;今天介绍的这个网站&lt;a href=&quot;http://
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>用LINQPad加上Tx驱动来分析log</title>
    <link href="http://fresky.github.io/2014/01/09/parse-logs-in-linqpad-with-tx-driver/"/>
    <id>http://fresky.github.io/2014/01/09/parse-logs-in-linqpad-with-tx-driver/</id>
    <published>2014-01-09T04:09:00.000Z</published>
    <updated>2019-12-20T08:29:07.279Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://tx.codeplex.com/" target="_blank" rel="noopener">Tx (LINQ to Logs and Traces)</a>是<a href="http://blogs.msdn.com/b/interoperability/archive/2014/01/06/new-release-tx-linq-to-logs-and-traces.aspx" target="_blank" rel="noopener">微软发布的开源工具</a>。可以用这个工具来使用LINQ分析日志，包括</p><ol><li>Event Tracing for Windows (ETW)</li><li>Event Logs (.etvtx)</li><li>Performance counters from files (.blg, .csv, .tsv)</li><li>IIS text logs in W3C format</li><li>SQL Server Extended Events (XEvent)</li></ol><p>可以自己写代码通过NuGet加上Tx相关的reference，或者更方便的使用<a href="http://www.linqpad.net/" target="_blank" rel="noopener">LINQPad</a>。在LINQPad中加上Tx的驱动，就可以使用了，具体参见<a href="http://tx.codeplex.com/wikipage?title=LINQPad%20Driver&amp;referringTitle=Documentation" target="_blank" rel="noopener">LINQPad driver for Tx</a>，还可以下载一个Tx的Sample来学习。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://tx.codeplex.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Tx (LINQ to Logs and Traces)&lt;/a&gt;是&lt;a href=&quot;http://blogs.msdn.com/b/intero
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>编码规范</title>
    <link href="http://fresky.github.io/2014/01/07/coding-style/"/>
    <id>http://fresky.github.io/2014/01/07/coding-style/</id>
    <published>2014-01-07T06:26:00.000Z</published>
    <updated>2019-12-20T08:29:07.279Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://google-styleguide.googlecode.com/svn/trunk/" target="_blank" rel="noopener">Google编码规范</a>，包含C++，Java，R，Python，HTML/CSS，Javascript，JSON，Lisp，Objective-C，Shell，XML。<br><a href="http://msdn.microsoft.com/en-us/library/ff926074.aspx" target="_blank" rel="noopener">C#编码规范（微软）</a>。<br>在制定自己的编码规范时可以参考一下。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://google-styleguide.googlecode.com/svn/trunk/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Google编码规范&lt;/a&gt;，包含C++，Java，R，Python，HTML/CSS，J
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>用CRTP在C++中实现静态函数的多态</title>
    <link href="http://fresky.github.io/2014/01/06/crtp-static-polymorphism-in-c-plus-plus/"/>
    <id>http://fresky.github.io/2014/01/06/crtp-static-polymorphism-in-c-plus-plus/</id>
    <published>2014-01-06T02:50:00.000Z</published>
    <updated>2019-12-20T08:29:07.278Z</updated>
    
    <content type="html"><![CDATA[<p>我上一篇博客<a href="/2014/01/03/cpp-static-dispatch-crtp-vs-dynamic-dispatch-virtual-method/">C++的静态分发(CRTP)和动态分发(虚函数多态)的比较</a>介绍了如何用CRTP(Curiously Recurring Template Pattern)实现静态分发，今天再讲另外一个CRTP的例子。在C++中静态函数是不能设成virtual的，但是用CRTP可以实现静态函数的多态。</p><p>先看代码:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Derived&gt;  <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">SayHi</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">static_cast</span>&lt;Derived*&gt;(<span class="keyword">this</span>)-&gt;SayHiImpl();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="keyword">static</span> <span class="title">SayHiStatic</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Derived::SayHiStatic();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">SayHiImpl</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"hi, i'm default!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildA</span> :</span><span class="keyword">public</span> Parent&lt;ChildA&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">SayHiImpl</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"hi, i'm child A!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="keyword">static</span> <span class="title">SayHiStatic</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Static hi from Child A"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildB</span> :</span><span class="keyword">public</span> Parent&lt;ChildB&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="keyword">static</span> <span class="title">SayHiStatic</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Static hi from Child B"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>和上次的代码类似，这次父类有一个静态的interface，两个子类分别实现了自己的静态实现。</p><p>再看调用静态<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>template<typename derived> void CRTP(Parent<derived>&amp; p)<br>{<br>    p.SayHiStatic();<br>}</derived></typename></p><p>int _tmain(int argc, TCHAR* argv[])<br>{<br>    ChildA a;<br>    CRTP(a);<br>    cout &lt;&lt; “size of ChildA: “ &lt;&lt; sizeof(a) &lt;&lt; endl;</p><pre><code>ChildB b;CRTP(b);cout &lt;&lt; &quot;size of ChildB: &quot; &lt;&lt; sizeof(b) &lt;&lt; endl;return 0;</code></pre><p>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">运行可以得到如下输出：</span><br></pre></td></tr></table></figure></p><p>Static hi from Child A<br>size of ChildA: 1<br>Static hi from Child B<br>size of ChildB: 1<br><code>`</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;我上一篇博客&lt;a href=&quot;/2014/01/03/cpp-static-dispatch-crtp-vs-dynamic-dispatch-virtual-method/&quot;&gt;C++的静态分发(CRTP)和动态分发(虚函数多态)的比较&lt;/a&gt;介绍了如何用CRTP(Curi
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>C++的静态分发(CRTP)和动态分发(虚函数多态)的比较</title>
    <link href="http://fresky.github.io/2014/01/03/cpp-static-dispatch-crtp-vs-dynamic-dispatch-virtual-method/"/>
    <id>http://fresky.github.io/2014/01/03/cpp-static-dispatch-crtp-vs-dynamic-dispatch-virtual-method/</id>
    <published>2014-01-03T10:27:00.000Z</published>
    <updated>2019-12-20T08:29:07.278Z</updated>
    
    <content type="html"><![CDATA[<p>虚函数是C++实现多态的工具，在运行时根据虚表决定调用合适的函数。这被称作动态分发。虚函数很好的实现了多态的要求，但是在运行时引入了一些开销，包括：  </p><ol><li>对每一个虚函数的调用都需要额外的指针寻址  </li><li>虚函数通常不能被inline，当虚函数都是小函数时会有比较大的性能损失  </li><li>每个对象都需要有一个额外的指针指向虚表  </li></ol><p>所以如果是一个对性能要求非常严格的场合，我们就需要用别的方式来实现分发，这就是今天这篇博客的主角<a href="http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern" target="_blank" rel="noopener">CRTP</a>。</p><p>CRTP通过模板实现了静态分发，会带来很多性能的好处。可以参见<a href="http://eli.thegreenplace.net/2013/12/05/the-cost-of-dynamic-virtual-calls-vs-static-crtp-dispatch-in-c/" target="_blank" rel="noopener">The cost of dynamic (virtual calls) vs. static (CRTP) dispatch in C++</a>看一下性能比较。</p><p>下面简单介绍一下怎么实现CRTP。</p><p>首先看我们的父类：<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Derived&gt;  <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">SayHi</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">static_cast</span>&lt;Derived*&gt;(<span class="keyword">this</span>)-&gt;SayHiImpl();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">SayHiImpl</span><span class="params">()</span> <span class="comment">// no need if no need the default implementation</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"hi, i'm default!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>它是一个模板类，它有一个需要接口函数是<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">再来看看它的子类：</span><br><span class="line"></span><br><span class="line">```cpp</span><br><span class="line">class ChildA :public Parent&lt;ChildA&gt;</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    void SayHiImpl()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;hi, i&apos;m child A!&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class ChildB :public Parent&lt;ChildB&gt;</span><br><span class="line">&#123;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>我们可以看到<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">在写一个普通的用虚函数实现分发的类：</span><br><span class="line"></span><br><span class="line">```cpp</span><br><span class="line">class ParentB</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    void virtual SayHi()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;hi, i&apos;m default!&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class ChildC : public ParentB</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    void SayHi()</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; &quot;hi, i&apos;m ChildC!&quot; &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class ChildD : public ParentB</span><br><span class="line">&#123;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>然后是调用这两个父类的函数：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Derived&gt; <span class="function"><span class="keyword">void</span> <span class="title">CRTP</span><span class="params">(Parent&lt;Derived&gt;&amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    p.SayHi();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dynamic</span><span class="params">(ParentB&amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    p.SayHi();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>再来看看<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```cpp</span><br><span class="line">int _tmain(int argc, TCHAR* argv[])</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    ChildA a;</span><br><span class="line">    CRTP(a);</span><br><span class="line">    cout &lt;&lt; &quot;size of ChildA: &quot; &lt;&lt; sizeof(a) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    ChildB b;</span><br><span class="line">    CRTP(b);</span><br><span class="line">    cout &lt;&lt; &quot;size of ChildB: &quot; &lt;&lt; sizeof(b) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    ChildC c;</span><br><span class="line">    Dynamic(c);</span><br><span class="line">    cout &lt;&lt; &quot;size of ChildC: &quot; &lt;&lt; sizeof(c) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    ChildD d;</span><br><span class="line">    Dynamic(d);</span><br><span class="line">    cout &lt;&lt; &quot;size of ChildD: &quot; &lt;&lt; sizeof(d) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>如果运行这个程序，可以看到如下的输出，可以看到CRTP可以实现和虚函数一样的功能，但是内存大小会有很大优势，关于对象内存可以参见我之前的博客<a href="/2012/12/23/blogpost/">怎么看C++对象的内存结构 和 怎么解密C++的name Mangling</a>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hi, i&apos;m child A!</span><br><span class="line">size of ChildA: 1</span><br><span class="line">hi, i&apos;m default!</span><br><span class="line">size of ChildB: 1</span><br><span class="line">hi, i&apos;m ChildC!</span><br><span class="line">size of ChildC: 4</span><br><span class="line">hi, i&apos;m default!</span><br><span class="line">size of ChildD: 4</span><br><span class="line">Press any key to continue . . .</span><br></pre></td></tr></table></figure><p>完整代码参见<a href="https://gist.github.com/fresky/8237006" target="_blank" rel="noopener">gist</a>。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;虚函数是C++实现多态的工具，在运行时根据虚表决定调用合适的函数。这被称作动态分发。虚函数很好的实现了多态的要求，但是在运行时引入了一些开销，包括：  &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;对每一个虚函数的调用都需要额外的指针寻址  &lt;/li&gt;
&lt;li&gt;虚函数通常不能被inline，
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>用Y分钟学会X</title>
    <link href="http://fresky.github.io/2013/12/31/learn-x-in-y-minute/"/>
    <id>http://fresky.github.io/2013/12/31/learn-x-in-y-minute/</id>
    <published>2013-12-31T09:40:00.000Z</published>
    <updated>2019-12-20T08:29:07.277Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://learnxinyminutes.com/" target="_blank" rel="noopener">Learn X in Y minutes</a>是一个有趣的网站，里面列举了对很多编程语言和工具的极简教程，有各种语言版本的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://learnxinyminutes.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Learn X in Y minutes&lt;/a&gt;是一个有趣的网站，里面列举了对很多编程语言和工具的极简教程，有各种语言版本的。&lt;/p&gt;
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>看看你能认出多少种编程语言</title>
    <link href="http://fresky.github.io/2013/12/31/whats-the-programming-language/"/>
    <id>http://fresky.github.io/2013/12/31/whats-the-programming-language/</id>
    <published>2013-12-31T02:26:00.000Z</published>
    <updated>2019-12-20T08:29:07.278Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://wtpl.heroku.com/" target="_blank" rel="noopener">What’s the programming language?</a>会列出一段程序来让你猜是什么编程语言。来看看你能答对几题吧：）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://wtpl.heroku.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;What’s the programming language?&lt;/a&gt;会列出一段程序来让你猜是什么编程语言。来看看你能答对几题吧：）&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>Linux无处不在</title>
    <link href="http://fresky.github.io/2013/12/30/linux-is-everywhere/"/>
    <id>http://fresky.github.io/2013/12/30/linux-is-everywhere/</id>
    <published>2013-12-30T01:26:00.000Z</published>
    <updated>2019-12-20T08:29:07.277Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.linuxfederation.com/linux-everywhere/" target="_blank" rel="noopener">Linux is Everywhere</a>从政府、教育、商业和非盈利组织、科研机构几个方面展示了现在都有哪些地方用了Linux。</p><p><img src="http://www.linuxfederation.com/wp-content/uploads/2013/12/open-source-world-1024x640.jpg" alt="The World is Open Source"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.linuxfederation.com/linux-everywhere/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Linux is Everywhere&lt;/a&gt;从政府、教育、商业和非盈利组织、科研机构几个方面
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>github简历</title>
    <link href="http://fresky.github.io/2013/11/20/github-resume/"/>
    <id>http://fresky.github.io/2013/11/20/github-resume/</id>
    <published>2013-11-20T03:08:00.000Z</published>
    <updated>2019-12-20T08:29:07.277Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://resume.github.io/" target="_blank" rel="noopener">My GitHub Resume</a>可以帮你生成一份github简历，你只需要输入你的github用户名。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://resume.github.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;My GitHub Resume&lt;/a&gt;可以帮你生成一份github简历，你只需要输入你的github用户名。&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
      <category term="Github" scheme="http://fresky.github.io/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>IT工作中工资最高和增长最快的是什么</title>
    <link href="http://fresky.github.io/2013/11/19/it-salary/"/>
    <id>http://fresky.github.io/2013/11/19/it-salary/</id>
    <published>2013-11-19T02:04:00.000Z</published>
    <updated>2019-12-20T08:29:07.277Z</updated>
    
    <content type="html"><![CDATA[<p>Staff在博客<a href="http://www.staff.com/blog/it-jobs-with-the-highest-pay-and-fastest-growth-infographic/" target="_blank" rel="noopener">IT Jobs with the Highest Pay and Fastest Growth</a>中画了个图说明IT工作中工资最高和增长最快的是什么。</p><p><img src="http://www.staff.com/blog/wp-content/uploads/2013/05/Staff-infograph_IT-jobs.jpg" alt="Staff-infograph_IT-jobs"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Staff在博客&lt;a href=&quot;http://www.staff.com/blog/it-jobs-with-the-highest-pay-and-fastest-growth-infographic/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;I
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>Windows操作系统的历史</title>
    <link href="http://fresky.github.io/2013/11/19/windows-history/"/>
    <id>http://fresky.github.io/2013/11/19/windows-history/</id>
    <published>2013-11-19T01:23:00.000Z</published>
    <updated>2019-12-20T08:29:07.277Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://winsource.com/2013/11/12/windows-through-the-years/" target="_blank" rel="noopener">30 years ago Windows was first released, see how much it has changed</a>回顾了Windows操作系统的历史。</p><img src="/images/windowslogos.png"><h3 id="1985-Windows-1-0"><a href="#1985-Windows-1-0" class="headerlink" title="1985, Windows 1.0"></a>1985, Windows 1.0</h3><img src="/images/windows1.0.png"><h3 id="1987-Windows-2-0"><a href="#1987-Windows-2-0" class="headerlink" title="1987, Windows 2.0"></a>1987, Windows 2.0</h3><img src="/images/windows2.0.png"><h3 id="1990-Windows-3-0"><a href="#1990-Windows-3-0" class="headerlink" title="1990, Windows 3.0"></a>1990, Windows 3.0</h3><img src="/images/Windows3.0.png"><h3 id="1995-Windows-95"><a href="#1995-Windows-95" class="headerlink" title="1995, Windows 95"></a>1995, Windows 95</h3><img src="/images/Windows95.png"><h3 id="1998-Windows-98"><a href="#1998-Windows-98" class="headerlink" title="1998, Windows 98"></a>1998, Windows 98</h3><img src="/images/Win98.png"><h3 id="2000-Windows-ME"><a href="#2000-Windows-ME" class="headerlink" title="2000, Windows ME"></a>2000, Windows ME</h3><img src="/images/windowsme.gif"><h3 id="2001-Windows-XP"><a href="#2001-Windows-XP" class="headerlink" title="2001, Windows XP"></a>2001, Windows XP</h3><img src="/images/windowsxp.png"><h3 id="2007-Windows-Vista"><a href="#2007-Windows-Vista" class="headerlink" title="2007, Windows Vista"></a>2007, Windows Vista</h3><img src="/images/windowsvista.png"><h3 id="2009-Windows-7"><a href="#2009-Windows-7" class="headerlink" title="2009, Windows 7"></a>2009, Windows 7</h3><img src="/images/windows7.jpg"><h3 id="2012-Windows-8"><a href="#2012-Windows-8" class="headerlink" title="2012, Windows 8"></a>2012, Windows 8</h3><img src="/images/windows8.jpg">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://winsource.com/2013/11/12/windows-through-the-years/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;30 years ago Windows was first releas
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>看看程序员都是哪些人</title>
    <link href="http://fresky.github.io/2013/11/18/who-are-developers/"/>
    <id>http://fresky.github.io/2013/11/18/who-are-developers/</id>
    <published>2013-11-18T04:56:00.000Z</published>
    <updated>2019-12-20T08:29:07.276Z</updated>
    
    <content type="html"><![CDATA[<p>drdobbs上有篇文章<a href="http://www.drdobbs.com/architecture-and-design/who-are-software-developers/240162014" target="_blank" rel="noopener">谁是软件工程师</a>，针对程序员做了一些统计，有一些有趣的结论。比如一个典型的程序员是已婚中年男子，有2到3个子女。</p><p>程序员更顾家，71%的人结婚，只有3%的人离婚。</p><p>程序员85%有本科学历，40%是硕士，5%是博士。</p><p>程序员大部分并不是为了钱才从事这份工作，参加下图：<br><img src="http://twimgs.com/ddj/images/article/2013/1013/who2.gif" alt="Why developer?"></p><p>下图是程序员平均年龄在这几年的变化趋势。<br><img src="http://twimgs.com/ddj/images/article/2013/1013/who1.gif" alt="Median Age by Region"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;drdobbs上有篇文章&lt;a href=&quot;http://www.drdobbs.com/architecture-and-design/who-are-software-developers/240162014&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>github pages简易指南</title>
    <link href="http://fresky.github.io/2013/11/12/github-pages-guide/"/>
    <id>http://fresky.github.io/2013/11/12/github-pages-guide/</id>
    <published>2013-11-12T06:22:00.000Z</published>
    <updated>2019-12-20T08:29:07.276Z</updated>
    
    <content type="html"><![CDATA[<p>在我之前的博客用Octopress在Github pages上写博客（<a href="http://www.cnblogs.com/fresky/p/3326100.html" target="_blank" rel="noopener">博客园上</a>，<a href="/2013/09/15/blog-in-github-pages-with-octopress/">github pages上</a>）中介绍了怎么在Github Pages上写博客，今天发现了一个很不错的github pages的<a href="http://www.thinkful.com/learn/a-guide-to-using-github-pages/" target="_blank" rel="noopener">建议指南</a>，一步步手把手的教你怎么在github pages上建立个人主页和项目主页。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在我之前的博客用Octopress在Github pages上写博客（&lt;a href=&quot;http://www.cnblogs.com/fresky/p/3326100.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;博客园上&lt;/a&gt;，&lt;a href
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
      <category term="Github" scheme="http://fresky.github.io/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>一个免费的自动化跨平台测试JavaScript的工具——BrowserSwarm</title>
    <link href="http://fresky.github.io/2013/11/11/browserswarm-a-tool-that-automates-your-testing-of-javascript-across-browsers/"/>
    <id>http://fresky.github.io/2013/11/11/browserswarm-a-tool-that-automates-your-testing-of-javascript-across-browsers/</id>
    <published>2013-11-11T08:59:00.000Z</published>
    <updated>2019-12-20T08:29:07.276Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.browserswarm.com/" target="_blank" rel="noopener">BrowserSwarm</a>是一个免费工具，能够自动化跨平台测试JavaScript。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.browserswarm.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;BrowserSwarm&lt;/a&gt;是一个免费工具，能够自动化跨平台测试JavaScript。&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
  </entry>
  
  <entry>
    <title>用APK Downloader直接从Google Play上下载apk</title>
    <link href="http://fresky.github.io/2013/11/04/apk-downloader/"/>
    <id>http://fresky.github.io/2013/11/04/apk-downloader/</id>
    <published>2013-11-04T07:41:00.000Z</published>
    <updated>2019-12-20T08:29:07.276Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://apps.evozi.com/apk-downloader/" target="_blank" rel="noopener">APK Downloader</a>可以直接从Google Play上下载apk，相比较其他软件，这个不需要提供Google ID，对于没有刷机的同学还是有些帮助的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://apps.evozi.com/apk-downloader/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;APK Downloader&lt;/a&gt;可以直接从Google Play上下载apk，相比较其他软件，这个不需要提供Go
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>Pencil-一个开源免费的UI原型工具，自带ios和android模板</title>
    <link href="http://fresky.github.io/2013/10/21/pencil-open-source-gui-prototyping-tool/"/>
    <id>http://fresky.github.io/2013/10/21/pencil-open-source-gui-prototyping-tool/</id>
    <published>2013-10-21T01:37:00.000Z</published>
    <updated>2019-12-20T08:29:07.276Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://pencil.evolus.vn/" target="_blank" rel="noopener">Pencil</a>是一个开源免费的UI原型工具，自带ios和android模板，可以很方便的做mockup。</p><p>下图是一个官方展示的模板：</p><p><img src="http://pencil.evolus.vn/images/stencils/ios-hifi.png" alt="IOS">  <img src="http://pencil.evolus.vn/images/stencils/android4.png" alt="Androd"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://pencil.evolus.vn/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Pencil&lt;/a&gt;是一个开源免费的UI原型工具，自带ios和android模板，可以很方便的做mockup。&lt;/p&gt;
&lt;p&gt;下图是一个官方展
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>一个很cool的C#的高性能数学库</title>
    <link href="http://fresky.github.io/2013/10/17/math-library-for-c-number/"/>
    <id>http://fresky.github.io/2013/10/17/math-library-for-c-number/</id>
    <published>2013-10-17T08:50:00.000Z</published>
    <updated>2019-12-20T08:29:07.275Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://ilnumerics.net/" target="_blank" rel="noopener">High Performance Math Library for C# and .NET</a>是一个很cool的C#的高性能数学库，3D效果也很不错，下图是首页上的一个例子。他也有一个<a href="http://ilnumerics.net/ilnumerics-interactive-web-component.html" target="_blank" rel="noopener">交互的网页</a>，你可以自己写代码实时看到输出。它的开源license是GPLv3，如果商用有商用版本可以购买。</p><p><img src="http://ilnumerics.net/ilcf/ce/1dc4/out.png" alt="3D graph"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://ilnumerics.net/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;High Performance Math Library for C# and .NET&lt;/a&gt;是一个很cool的C#的高性能数学库，3D效果也
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>C++标准的时间线</title>
    <link href="http://fresky.github.io/2013/10/16/c-plus-plus-timeline/"/>
    <id>http://fresky.github.io/2013/10/16/c-plus-plus-timeline/</id>
    <published>2013-10-16T03:01:00.000Z</published>
    <updated>2019-12-20T08:29:07.275Z</updated>
    
    <content type="html"><![CDATA[<p>Herb Sutter在他的<a href="http://herbsutter.com/2013/10/03/trip-report-fall-iso-c-standards-meeting/" target="_blank" rel="noopener">博客</a>上贴出了一个C++的timeline，如下所示：</p><p><img src="http://isocpp.org/files/img/wg21-timeline.png" alt="c++ timeline"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Herb Sutter在他的&lt;a href=&quot;http://herbsutter.com/2013/10/03/trip-report-fall-iso-c-standards-meeting/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;博客&lt;/a&gt;上
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>在octopress中gist tab不能正确的插入gist代码</title>
    <link href="http://fresky.github.io/2013/09/26/gist-tab-not-work-for-octopress/"/>
    <id>http://fresky.github.io/2013/09/26/gist-tab-not-work-for-octopress/</id>
    <published>2013-09-25T16:09:00.000Z</published>
    <updated>2019-12-20T08:29:07.275Z</updated>
    
    <content type="html"><![CDATA[<p>今天尝试用Octopress的<a href="http://octopress.org/docs/plugins/gist-tag/" target="_blank" rel="noopener">gits tab</a>插件来把gist插入到博客中，但是发现没有插入成功，调用<figure class="highlight plain"><figcaption><span>generate```报如下的错误：</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`Gist replied with 404 for https://raw.github.com/gist/6700691/ClassHierarchy.cpp`</span><br><span class="line"></span><br><span class="line">我看了一下这个url，确实是404。于是就到了自己的gist页面看了看，发现应该用如下的url：  </span><br><span class="line">`https://gist.github.com/6700691#ClassHierarchy.cpp`</span><br><span class="line"></span><br><span class="line">但是其实这个url也会重定向到：</span><br><span class="line"></span><br><span class="line">`https://gist.github.com/fresky/6700691#ClassHierarchy.cpp`</span><br><span class="line"></span><br><span class="line">于是就把`plugins\gist_tag.rb`的代码改了改，改成如下：</span><br><span class="line"></span><br><span class="line">```ruby</span><br><span class="line">    def get_gist_url_for(gist, file)</span><br><span class="line">      &quot;https://gist.github.com/#&#123;gist&#125;##&#123;file&#125;&quot;</span><br><span class="line">    end</span><br></pre></td></tr></table></figure></p><p>另外如果html返回302，不报异常：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">get_gist_from_web</span><span class="params">(gist, file)</span></span></span><br><span class="line">    gist_url          = get_gist_url_for gist, file</span><br><span class="line">    raw_uri           = URI.parse gist_url</span><br><span class="line">    proxy             = ENV[<span class="string">'http_proxy'</span>]</span><br><span class="line">    <span class="keyword">if</span> proxy</span><br><span class="line">      proxy_uri       = URI.parse(proxy)</span><br><span class="line">      https           = Net::HTTP::Proxy(proxy_uri.host, proxy_uri.port).new raw_uri.host, raw_uri.port</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      https           = Net::HTTP.new raw_uri.host, raw_uri.port</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    https.use_ssl     = <span class="literal">true</span></span><br><span class="line">    https.verify_mode = OpenSSL::SSL::VERIFY_NONE</span><br><span class="line">    request           = Net::HTTP::Get.new raw_uri.request_uri</span><br><span class="line">    data              = https.request request</span><br><span class="line">    <span class="keyword">if</span> data.code.to_i != <span class="number">200</span> <span class="keyword">and</span> data.code.to_i != <span class="number">302</span></span><br><span class="line">      raise RuntimeError, <span class="string">"Gist replied with <span class="subst">#&#123;data.code&#125;</span> for <span class="subst">#&#123;gist_url&#125;</span>"</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    data              = data.body</span><br><span class="line">    cache gist, file, data <span class="keyword">unless</span> @cache_disabled</span><br><span class="line">    data</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>这样gist就能正确的插入了，但是显示还有些问题，代码字体太大，和行数不能匹配，这个下次有机会在看看吧。显示效果可以参看<a href="/2013/09/11/why-have-Run-Time-Check-Failure-0-The-value-of-ESP-was-not-properly-saved-across-a-function-call-error/">C++程序在debug模式下遇到Run-Time Check Failure #0 - the Value of ESP Was Not Properly Saved Across a Function Call问题</a>。</p><p>完整代码参加<a href="https://gist.github.com/fresky/6702098" target="_blank" rel="noopener">gist</a>。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天尝试用Octopress的&lt;a href=&quot;http://octopress.org/docs/plugins/gist-tag/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;gits tab&lt;/a&gt;插件来把gist插入到博客中，但是发现没有插入成功
      
    
    </summary>
    
    
      <category term="Ruby" scheme="http://fresky.github.io/tags/Ruby/"/>
    
      <category term="Github" scheme="http://fresky.github.io/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>从博客园搬家到Github Pages</title>
    <link href="http://fresky.github.io/2013/09/24/convert-metaweblog-posts-to-octropress/"/>
    <id>http://fresky.github.io/2013/09/24/convert-metaweblog-posts-to-octropress/</id>
    <published>2013-09-24T09:01:00.000Z</published>
    <updated>2019-12-20T08:29:07.275Z</updated>
    
    <content type="html"><![CDATA[<p>前段时间开始在Github Pages上用Octopress写博客，可以参见<a href="/2013/09/15/blog-in-github-pages-with-octopress/">用octopress在Github pages上写博客</a>。于是就想着把自己之前在博客园写的<a href="http://www.cnblogs.com/fresky/" target="_blank" rel="noopener">博客</a>也同步到Github上，就做了一个小工具<a href="https://github.com/fresky/Blog2Github" target="_blank" rel="noopener">Blog2Github</a>。</p><h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><ol><li>下载<a href="https://raw.github.com/fresky/Blog2Github/master/Blog2Github.zip" target="_blank" rel="noopener">Blog2Github</a>，解压缩，运行Blog2Github.exe。</li><li>如果使用的是博客园，就选择”cnblogs”。如果不是博客园，是其他的MetaWeblog，就选择其他，需要在下面的MetaWeblog URL里写明自己的博客的MetaWeblog地址.  </li><li>输入博客的用户名和密码。  </li><li>输入你想要迁移的博客文章数量。</li><li>输入输出文件夹，通常应该是你的Octopress的source\_deploy目录，比如<strong>d:\fresky.github.io\source\_posts</strong>)。</li><li>点击”Generate”按钮，这样就会把你的博文以Octopress认识的格式存放在上面制定的输出目录。</li><li>运行<strong>rake deploy</strong>命令来发布到Github Pages上。</li></ol><p>参加下图：</p><p><img src="https://raw.github.com/fresky/Blog2Github/master/screenshot.png" alt="Blog2Github screenshot"></p><h1 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h1><p>这个小工具的工作原理很简单，就是通过MetaWeblog的API把你制定的博客文章都下载下来，然后在文章的开头插入Octopress需要的前缀如下，把博客标题和时间填上，这样Octopress就认识了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: post</span><br><span class="line">title: &quot;从博客园搬家到Github Pages&quot;</span><br><span class="line">date: 2013-09-24 17:01</span><br><span class="line">comments: true</span><br><span class="line">tags: </span><br><span class="line">---</span><br></pre></td></tr></table></figure></p><p>我用的是<a href="http://metaweblogsharp.codeplex.com/" target="_blank" rel="noopener">MetaWeblogSharp</a>提供的API，非常简单易用。</p><p>可以访问我的<a href="/archives/">博客</a>看一下效果。</p><h1 id="已知问题"><a href="#已知问题" class="headerlink" title="已知问题"></a>已知问题</h1><p>这个工具其实就是简单的把html写在了markdown文件里，大部分情况都能正确的处理，我遇到之前高亮过的代码因为可能html比较乱，markdown在处理的时候有些问题。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;前段时间开始在Github Pages上用Octopress写博客，可以参见&lt;a href=&quot;/2013/09/15/blog-in-github-pages-with-octopress/&quot;&gt;用octopress在Github pages上写博客&lt;/a&gt;。于是就想着把自己
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Github" scheme="http://fresky.github.io/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>来看看Github上流行的编码规范</title>
    <link href="http://fresky.github.io/2013/09/18/popular-coding-convention-on-github/"/>
    <id>http://fresky.github.io/2013/09/18/popular-coding-convention-on-github/</id>
    <published>2013-09-18T03:08:00.000Z</published>
    <updated>2019-12-20T08:29:07.274Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://sideeffect.kr/popularconvention/" target="_blank" rel="noopener">Popular Coding Convention on Github</a>是一个有趣的网站，它根据Github的代码提交情况分析了几种语言流行的代码规范，目前支持对JavaScript，Java，Python，Scala和Ruby进行统计分析。<br>下图是一个针对Python的统计截图。<br><img src="/images/20130918PythonConventionGithub.PNG"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://sideeffect.kr/popularconvention/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Popular Coding Convention on Github&lt;/a&gt;是一个有趣的网站，它根据Githu
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>用octopress在Github pages上写博客</title>
    <link href="http://fresky.github.io/2013/09/15/blog-in-github-pages-with-octopress/"/>
    <id>http://fresky.github.io/2013/09/15/blog-in-github-pages-with-octopress/</id>
    <published>2013-09-15T13:16:00.000Z</published>
    <updated>2019-12-20T08:29:07.274Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装Git环境"><a href="#安装Git环境" class="headerlink" title="安装Git环境"></a>安装Git环境</h1><ol><li>下载<a href="https://code.google.com/p/msysgit/downloads/list" target="_blank" rel="noopener">msysgit(git for windows)</a>，并安装。</li><li>可以选择安装<a href="http://code.google.com/p/tortoisegit/" target="_blank" rel="noopener">TortoiseGit</a>，这个在windows的资源管理器里装了很多git的右键菜单，对git命令行不熟悉的同学用起来很方便。</li></ol><h1 id="安装Ruby环境"><a href="#安装Ruby环境" class="headerlink" title="安装Ruby环境"></a>安装Ruby环境</h1><ol><li>从<a href="http://www.rubyinstaller.org/downloads/" target="_blank" rel="noopener">RubyInstaller</a>下载RubyInstaller，直接安装。</li><li>从<a href="http://www.rubyinstaller.org/downloads/" target="_blank" rel="noopener">RubyInstaller</a>下载Devkit。<br>注意下载合适的版本：  <ul><li>Ruby 1.8.6 to 1.9.3: tdm-32-4.5.2</li><li>Ruby 2.0.0: mingw64-32-4.7.2</li><li>Ruby 2.0.0 x64 (64bits): mingw64-64-4.7.2</li></ul></li><li>下载的Devkit其实就是7zip的压缩包，双击时候选择解压位置，比如<code>c:\devkit</code>。</li><li>在命令行运行如下命令安装devkit：  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd DevKit  </span><br><span class="line">ruby dk.rb init  </span><br><span class="line">ruby dk.rb install</span><br><span class="line">```  </span><br><span class="line">注意如果安装失败（不是两个[INFO]），可以在跑完`ruby dk.rb init`之后跑一下`ruby dk.rb review`来看看生成的`.yml`文件对不对，如果没有正确的找到ruby的安装目录，就手动加在下面。</span><br><span class="line">5. 可以把gem的源更换到淘宝的镜像，这样比较快。</span><br></pre></td></tr></table></figure></li></ol><p>gem sources -a <a href="http://ruby.taobao.org/" target="_blank" rel="noopener">http://ruby.taobao.org/</a><br>gem sources -r <a href="https://rubygems.org/" target="_blank" rel="noopener">https://rubygems.org/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">然后可以`gem sources -l`看看结果。</span><br><span class="line"></span><br><span class="line"># 安装Octorpress</span><br><span class="line"></span><br><span class="line"> 1 . 首先把Octopress的代码拿到本地。</span><br></pre></td></tr></table></figure></p><p>git clone git://github.com/imathis/octopress.git blog<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 . 修改Octopress目录下的Gemfile文件，将第一行的`http://rubygems.org/` 修改为`http://ruby.taobao.org/`  </span><br><span class="line"></span><br><span class="line">3 . 然后进入文件夹，安装Octopress。</span><br></pre></td></tr></table></figure></p><p>gem install bundler<br>bundle install<br>rake install<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">4 . 解决中文问题。  </span><br><span class="line"></span><br><span class="line">  * 在环境变量中设置下面的键值对：</span><br></pre></td></tr></table></figure></p><p>LANG=zh_CN.UTF-8<br>LC_ALL=zh_CN.UTF-8<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* 含有中文的文件需要保存为UTF-8无BOM格式编码。  </span><br><span class="line">* 在Ruby的安装路径找到文件convertible.rb，将27行修改为：</span><br></pre></td></tr></table></figure></p><p>self.content = File.read(File.join(base, name), :encoding =&gt; ‘utf-8’)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5 . 配置Octopress，修改`_config.yml`。重点修改如下几个：</span><br></pre></td></tr></table></figure></p><p>url: <a href="http://fresky.github.io">http://fresky.github.io</a><br>title: Flying in the free sky<br>subtitle: Dawei’s Blog<br>author: Dawei XU<br>simple_search: <a href="http://google.com/search" target="_blank" rel="noopener">http://google.com/search</a><br>description:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 写博客</span><br><span class="line"></span><br><span class="line">博客必须存放在`source/_posts`目录下，并且满足[Jekyll](http://jekyllrb.com/)的命名规范：`YYYY-MM-DD-post-title.markdown`。</span><br><span class="line">    </span><br><span class="line">1 . 用`rake new_post[&quot;Title of the post&quot;]`自动生成一个新的符合命名规范的博文。注意这里的标题不能有中文。</span><br><span class="line"></span><br><span class="line">2 . 这个自动生成的文件的开头如下：</span><br></pre></td></tr></table></figure></p><hr><p>layout: post<br>title: “Tutorial: Create a blog with octopress and host it in github pages”<br>date: 2013-04-22T21:24:21+02:00<br>comments: true</p><h2 id="tags-ruby-octopress"><a href="#tags-ruby-octopress" class="headerlink" title="tags: [ruby,octopress]"></a>tags: [ruby,octopress]</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">在这里可以修改title为中文。</span><br><span class="line"></span><br><span class="line">3 . 用你喜欢的编辑器编辑Markdown文本。我用的是[MarkdownPad](http://markdownpad.com/)。    </span><br><span class="line"></span><br><span class="line">4 . 编辑完之后可以运行`rake preview`来预览自己的博客（本地机器4000端口）。</span><br><span class="line"></span><br><span class="line"># 发布到Github Pages上</span><br><span class="line"></span><br><span class="line">1 . 在Github上创建一个新的repository，名字叫做`your-username.github.io`。名字一定要符合这个规范。  </span><br><span class="line"></span><br><span class="line">2 . 运行命令绑定到Github Pages上：</span><br></pre></td></tr></table></figure><p>rake setup_github_pages[<a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:fresky/fresky.github.com.git(reponame)]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Github pages需要有2个分支，一个是`main`，一个是`source`。`main`上的内容用来显示。  </span><br><span class="line"></span><br><span class="line">3 . 运行命令来发布：`rake deploy`</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">4 . 调用`git push origin source`来把你的博文的markdown也放到github上。</span><br><span class="line"></span><br><span class="line"># 在另一台机器上发布博文</span><br><span class="line"></span><br><span class="line">Octopress的repository有2个分支，一个是`source`，相当于源代码，包含我们写的博文等文件，这些文件会被处理然后用来生成blog。另一个是`main`,包含博客本身。  </span><br><span class="line">`main`分支存储在`_deploy`的目录下，这个目录以下划线开头，所以在`git push origin source`时会被忽略掉。当运行`rake deploy`时，会提交`master`。</span><br><span class="line">所以我们要做的就是在新机器上重建一个Octopress的repository。</span><br><span class="line"></span><br><span class="line">  1 . 克隆`source`到一个本地目录。</span><br></pre></td></tr></table></figure></p><p>$ git clone -b source <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:fresky/fresky.github.com.git blog<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2 . 克隆`master`到`_deploy`目录。</span><br></pre></td></tr></table></figure></p><p>$ cd blog<br>$ git clone <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:fresky/fresky.github.com.git _deploy<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3  . 运行rake来配置</span><br></pre></td></tr></table></figure></p><p>$ gem install bundler<br>$ bundle install<br>$ rake setup_github_pages<br><code>`</code><br>跟上面的步骤一样。<br>这样就在一个新的机器上设置好了Octopress的环境。</p><p>如果在多台机器上用，需要每次发布前都pull，发布完都push两个分支。</p><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ol><li><a href="http://miguelcamba.com/blog/2013/04/22/tutorial-create-a-blog-with-octopress-and-host-it-in-github-pages/" target="_blank" rel="noopener">Tutorial: Create a Blog With Octopress and Host It in Github Pages</a>  </li><li><a href="http://blog.zerosharp.com/clone-your-octopress-to-blog-from-two-places/" target="_blank" rel="noopener">Clone Your Octopress to Blog From Two Places</a>  </li><li><a href="http://www.cnblogs.com/oec2003/archive/2013/05/27/3100896.html" target="_blank" rel="noopener">Windows下搭建Octopress博客</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;安装Git环境&quot;&gt;&lt;a href=&quot;#安装Git环境&quot; class=&quot;headerlink&quot; title=&quot;安装Git环境&quot;&gt;&lt;/a&gt;安装Git环境&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;下载&lt;a href=&quot;https://code.google.com/p/msysgit
      
    
    </summary>
    
    
      <category term="Github" scheme="http://fresky.github.io/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>C++程序在debug模式下遇到Run-Time Check Failure #0 - The value of ESP was not properly saved across a function call问题</title>
    <link href="http://fresky.github.io/2013/09/11/why-have-Run-Time-Check-Failure-0-The-value-of-ESP-was-not-properly-saved-across-a-function-call-error/"/>
    <id>http://fresky.github.io/2013/09/11/why-have-Run-Time-Check-Failure-0-The-value-of-ESP-was-not-properly-saved-across-a-function-call-error/</id>
    <published>2013-09-10T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.274Z</updated>
    
    <content type="html"><![CDATA[<p>今天遇到一个Access Violation的crash，只看crash call stack没有找到更多的线索，于是在debug模式下又跑了一遍，遇到了如下的一个debug的错误提示框：</p>  <p><a href="http://images.cnitblog.com/blog/163228/201309/11150255-8d44d6fb8f3942dc925c47a4f4291b2b.png" target="_blank" rel="noopener"><img title="runtimecheckfailureESP" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="runtimecheckfailureESP" src="http://images.cnitblog.com/blog/163228/201309/11150257-27be9445885646ac853bf1e6c3ea0861.png" width="411" height="308"></a></p>  <p>这个是什么原因呢？我们来看一个简单的例子来重现这个错误。</p>  <p>假设我们有2个父类，分别是BaseA和BaseB。有一个子类Child，继承自BaseA和BaseB。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseA</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span>=<span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseB</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">bar</span><span class="params">(<span class="keyword">int</span> a)</span></span>=<span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span>:</span> <span class="keyword">public</span> BaseA, <span class="keyword">public</span> BaseB</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"i'm foo in Child!"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">bar</span><span class="params">(<span class="keyword">int</span> a)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"i'm bar in Child!"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>假设我们有如下的main函数：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  BaseB* b = <span class="keyword">new</span> Child();</span><br><span class="line">  BaseA* a = (BaseA*)b;</span><br><span class="line">  BaseA* a2 = <span class="keyword">dynamic_cast</span>&lt;BaseA*&gt; (b);</span><br><span class="line">  <span class="comment">// This is actually calling bar(),</span></span><br><span class="line">  <span class="comment">// and will cause Runtime check failure about ESP if the foo and bar have different signature.</span></span><br><span class="line">  a-&gt;foo();</span><br><span class="line">  a2-&gt;foo();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个main函数里a是通过C-Style的强转转来的，a2是通过dynamic_cast转换来的。如果我们运行这个程序，在release下就会报access violation的crash，在debug下就会出上面列的ESP错误的对话框。</p><p>函数的输出如下图所示：</p><p><a href="http://images.cnitblog.com/blog/163228/201309/11150258-615ef9ad31c64a598c35bb7adc170bde.png" target="_blank" rel="noopener"><img title="espoutput" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="espoutput" src="http://images.cnitblog.com/blog/163228/201309/11150300-fbca0f8bad97479ab07bd8d0d53b6e08.png" width="244" height="92"></a></p><p>这就能解释为什么会出这个ESP的错误了，因为我们想调用foo，但是实际上调用的bar，但是foo和bar的函数签名不一样，所以导致了出现那个debug版本下的ESP的错误提示。但是加入我们把bar（int a）中的参数去掉，这样foo和bar就有一样的函数签名了，这样及时在debug版本下也不会出这个ESP的提示，在release或者debug模式下都不会报任何错误，但是我们在runtime调用了错误的函数！！！</p><p>可以看看下图回忆一下vtable是怎么回事：）</p><p><a href="http://images.cnitblog.com/blog/163228/201309/11150301-4e8c130427464fc7ba196fb2f84f13c6.png" target="_blank" rel="noopener"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201309/11150303-2008ada2678c49a5a1c1052b06dc916f.png" width="621" height="253"></a></p><p>&#160;</p><p>也可以参考<a href="/2012/12/23/how-to-dump-cpp-objects-memory-layout-and-crack-name-mangling/">怎么看C++对象的内存结构 和 怎么解密C++的name mangling</a>来看看C++对象的内存结构。</p><p>对于ESP的错误，可以参考stackoverflow上的这个问题：<a href="http://stackoverflow.com/questions/8626160/run-time-check-failure-0-the-value-of-esp-was-not-properly-saved-across-a-fun" target="_blank" rel="noopener">c++ - Run-Time Check Failure #0 - The value of ESP was not properly saved across a function call - Stack Overflow</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天遇到一个Access Violation的crash，只看crash call stack没有找到更多的线索，于是在debug模式下又跑了一遍，遇到了如下的一个debug的错误提示框：&lt;/p&gt;  &lt;p&gt;&lt;a href=&quot;http://images.cnitblog.co
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>一个用程序解决数学问题的网站</title>
    <link href="http://fresky.github.io/2013/08/26/projecteuler-programming-to-solve-math-problems/"/>
    <id>http://fresky.github.io/2013/08/26/projecteuler-programming-to-solve-math-problems/</id>
    <published>2013-08-25T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.274Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://projecteuler.net/" target="_blank" rel="noopener">Project Euler</a>是一个用程序解决数学问题的网站，里面有很多题目，可以做做题玩玩。最近在学python，正好当作给python练手了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://projecteuler.net/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Project Euler&lt;/a&gt;是一个用程序解决数学问题的网站，里面有很多题目，可以做做题玩玩。最近在学python，正好当作给python
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>帮助招聘程序员的自动考试网站：Codility</title>
    <link href="http://fresky.github.io/2013/08/22/Codility-automatic-testing-programming-skills/"/>
    <id>http://fresky.github.io/2013/08/22/Codility-automatic-testing-programming-skills/</id>
    <published>2013-08-21T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.273Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://codility.com/" target="_blank" rel="noopener">Automated tests of programming skills. Assessment of software developers. Recruitment software. Codility</a>是一个网站，能帮助雇主自动的提供编程测试，作为个人也能自己去上面做题，自我测试。挺有意思的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://codility.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Automated tests of programming skills. Assessment of software developers. R
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>VS2012的自动生成测试的插件 Unit Test Generator</title>
    <link href="http://fresky.github.io/2013/08/19/unit-test-generator-vs-addin/"/>
    <id>http://fresky.github.io/2013/08/19/unit-test-generator-vs-addin/</id>
    <published>2013-08-18T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.273Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://visualstudiogallery.msdn.microsoft.com/45208924-e7b0-45df-8cff-165b505a38d7" target="_blank" rel="noopener">Unit Test Generator extension</a>是一个VS2012的插件，可以为C#的public方法很方便的自动生成unit test。安装这个插件后点击TEST菜单可以配置，如下所示：</p>  <p><a href="http://images.cnitblog.com/blog/163228/201308/19140430-538d7d57193049bc8bf91a7095c1b569.png" target="_blank" rel="noopener"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201308/19140431-8d614d00b6534ee7904949c370eb2451.png" width="244" height="188"></a></p>  <p>在配置里可以设置测试框架和自动生成的项目，类，方法名字以及默认的测试函数实现。</p>  <p><a href="http://images.cnitblog.com/blog/163228/201308/19140431-0f7b899f39a04560a25abda6d81a52f8.png" target="_blank" rel="noopener"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201308/19140432-d17999dc54f8486cabf242589696c9c3.png" width="446" height="207"></a></p>      <p>然后在C#的public的方法上点右键，就能自动生成测试了，会帮你自动创建一个test项目，非常方便。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://visualstudiogallery.msdn.microsoft.com/45208924-e7b0-45df-8cff-165b505a38d7&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Unit Test Gen
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
  </entry>
  
  <entry>
    <title>JetBrains发布了一款免费的.NET反编译器dotPeek</title>
    <link href="http://fresky.github.io/2013/08/16/dotPeek-dot-net-decompiler-from-jetbrains/"/>
    <id>http://fresky.github.io/2013/08/16/dotPeek-dot-net-decompiler-from-jetbrains/</id>
    <published>2013-08-15T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.273Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.jetbrains.com/decompiler/" target="_blank" rel="noopener">Free .NET decompiler :: JetBrains dotPeek</a></p><br><p>主要的功能：</p><br><p><!--[if gte mso 9]><xml>    Normal   0           false   false   false     EN-US   ZH-CN   X-NONE                         MicrosoftInternetExplorer4                             </xml><![endif]--></p><br><p><!--[if gte mso 9]><xml>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           </xml><![endif]--><!--[if gte mso 10]><style> /* Style Definitions */ table.MsoNormalTable    {mso-style-name:"Table Normal";    mso-tstyle-rowband-size:0;    mso-tstyle-colband-size:0;    mso-style-noshow:yes;    mso-style-priority:99;    mso-style-parent:"";    mso-padding-alt:0in 5.4pt 0in 5.4pt;    mso-para-margin:0in;    mso-para-margin-bottom:.0001pt;    mso-pagination:widow-orphan;    font-size:10.0pt;    font-family:"Times New Roman","serif";}</style><![endif]--></p><br><ol type="1"><br><li class="MsoNormal" style="mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo1; tab-stops: list .5in;"><span style="font-size: 12.0pt; font-family: 'Times New Roman','serif'; mso-fareast-font-family: 'Times New Roman';">Decompiling .NET 1.0-4.5 assemblies to C#</span></li><br><li class="MsoNormal" style="mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo1; tab-stops: list .5in;"><span style="font-size: 12.0pt; font-family: 'Times New Roman','serif'; mso-fareast-font-family: 'Times New Roman';">Exporting decompiled code to Visual Studio projects</span></li><br><li class="MsoNormal" style="mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo1; tab-stops: list .5in;"><span style="font-size: 12.0pt; font-family: 'Times New Roman','serif'; mso-fareast-font-family: 'Times New Roman';">Support for downloading code from source servers</span></li><br><li class="MsoNormal" style="mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo1; tab-stops: list .5in;"><span style="font-size: 12.0pt; font-family: 'Times New Roman','serif'; mso-fareast-font-family: 'Times New Roman';">Quick jump to a type, assembly, symbol, or type member</span></li><br><li class="MsoNormal" style="mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo1; tab-stops: list .5in;"><span style="font-size: 12.0pt; font-family: 'Times New Roman','serif'; mso-fareast-font-family: 'Times New Roman';">Effortless navigation to symbol declarations, implementations, derived and base symbols, and more </span></li><br><li class="MsoNormal" style="mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo1; tab-stops: list .5in;"><span style="font-size: 12.0pt; font-family: 'Times New Roman','serif'; mso-fareast-font-family: 'Times New Roman';">Accurate search for symbol usages with advanced presentation of search results</span></li><br><li class="MsoNormal" style="mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo1; tab-stops: list .5in;"><span style="font-size: 12.0pt; font-family: 'Times New Roman','serif'; mso-fareast-font-family: 'Times New Roman';">Overview of inheritance chains</span></li><br><li class="MsoNormal" style="mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo1; tab-stops: list .5in;"><span style="font-size: 12.0pt; font-family: 'Times New Roman','serif'; mso-fareast-font-family: 'Times New Roman';">Syntax highlighting</span></li><br><li class="MsoNormal" style="mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo1; tab-stops: list .5in;"><span style="font-size: 12.0pt; font-family: 'Times New Roman','serif'; mso-fareast-font-family: 'Times New Roman';">Complete keyboard support</span></li><br><li class="MsoNormal" style="mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo1; tab-stops: list .5in;"><span style="font-size: 12.0pt; font-family: 'Times New Roman','serif'; mso-fareast-font-family: 'Times New Roman';">dotPeek is free!</span></li><br></ol><br><p class="MsoNormal" style="mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo1; tab-stops: list .5in;">试用了一下，有很多快捷键和resharper一样，所以可以比较方便的跳转。</p><br><p class="MsoNormal" style="mso-margin-top-alt: auto; mso-margin-bottom-alt: auto; mso-list: l0 level1 lfo1; tab-stops: list .5in;">不过我发现了一个bug，比如对dllimport的代码，没有生成 extern 关键字，这点就不如<a href="http://ilspy.net/" target="_blank" rel="noopener">ILSpy</a>了，ILSpy可以很正确的反编译我试用的这个dll。而且ILSpy还是开源的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.jetbrains.com/decompiler/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Free .NET decompiler :: JetBrains dotPeek&lt;/a&gt;&lt;/p&gt;&lt;br&gt;&lt;p&gt;主要的
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>你能在windows上创建一个叫做AUX的文件夹吗？</title>
    <link href="http://fresky.github.io/2013/08/14/can-you-create-a-folder-named-aux-in-windows/"/>
    <id>http://fresky.github.io/2013/08/14/can-you-create-a-folder-named-aux-in-windows/</id>
    <published>2013-08-13T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.273Z</updated>
    
    <content type="html"><![CDATA[<p>Windows的文件名不能有如下这些特殊符号，这个大家都比较熟悉了。</p><blockquote><li>&lt; (less than)</li><li>&gt; (greater than)</li><li>: (colon)</li><li>“ (double quote)</li><li>/ (forward slash)</li><li>\ (backslash)</li><li>| (vertical bar or pipe)</li><li>? (question mark)</li><li>* (asterisk)</li></blockquote><p>不过其实还有一些文件名被设备名占用，是不能用的，比如CON（console），PRN（printer）等，如下：</p><p>CON, PRN, AUX,           NUL, COM1, COM2,           COM3, COM4, COM5,           COM6, COM7, COM8,           COM9, LPT1, LPT2,           LPT3, LPT4, LPT5,           LPT6, LPT7, LPT8, and           LPT9</p><p>更全的列表参见这里：<a href="http://msdn.microsoft.com/en-us/library/aa365247.aspx" target="_blank" rel="noopener">Naming Files, Paths, and Namespaces (Windows)</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Windows的文件名不能有如下这些特殊符号，这个大家都比较熟悉了。&lt;/p&gt;&lt;blockquote&gt;&lt;li&gt;&amp;lt; (less than)&lt;/li&gt;&lt;li&gt;&amp;gt; (greater than)&lt;/li&gt;&lt;li&gt;: (colon)&lt;/li&gt;&lt;li&gt;“ (double qu
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>解决wix生成的msi的license对话框空白的问题</title>
    <link href="http://fresky.github.io/2013/08/01/fix-empty-license-dialog-in-msi-by-wix/"/>
    <id>http://fresky.github.io/2013/08/01/fix-empty-license-dialog-in-msi-by-wix/</id>
    <published>2013-07-31T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.273Z</updated>
    
    <content type="html"><![CDATA[<p>今天用Wix做之前写的那个<a href="/2013/07/16/windows-live-writer-plugin-markdowninlivewriter/">Windows Live Writer的Markdown插件</a>的msi安装包，在wxs文件中用如下的代码添加license文件，结果发现生成msi后license文件框一直是空白。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;WixVariable Id=&quot;WixUILicenseRtf&quot; Value=&quot;path\License.rtf&quot; /&gt;</span><br></pre></td></tr></table></figure><p>google后才发现这是Wix的一个<a href="http://scribefire-next/wix.sourceforge.net/manual-wix3/WixUI_customizations.htm" target="_blank" rel="noopener">bug</a>，必须用wordpad来存 rtf文件，不能用word。参见stackoverflow上的这个<a href="http://stackoverflow.com/questions/6380724/wix-specify-licence-shows-nothing" target="_blank" rel="noopener">回答</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天用Wix做之前写的那个&lt;a href=&quot;/2013/07/16/windows-live-writer-plugin-markdowninlivewriter/&quot;&gt;Windows Live Writer的Markdown插件&lt;/a&gt;的msi安装包，在wxs文件中用如下的
      
    
    </summary>
    
    
      <category term="Installer" scheme="http://fresky.github.io/tags/Installer/"/>
    
  </entry>
  
  <entry>
    <title>WPF的进度条progressbar，运行时间elapse time和等待spinner的实现</title>
    <link href="http://fresky.github.io/2013/07/31/wpf-progressbar-spinner-with-elapse-time/"/>
    <id>http://fresky.github.io/2013/07/31/wpf-progressbar-spinner-with-elapse-time/</id>
    <published>2013-07-30T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.272Z</updated>
    
    <content type="html"><![CDATA[<p>今天用.NET 4.5中的TPL的特性做了个小例子，实现了WPF的进度条progressbar，运行时间elapse time和等待spinner。</p>  <p>先上图吧。</p>  <p><img src="https://raw.github.com/fresky/WPFWaiterExample/master/screenshot.png"></p>  <p>&#160;</p>  <p>这个例子包含4个实现，分别是同步版本（Sync），异步版本（Async），并发版本（Parallel）和通过数据绑定实现的并发版本（Parallel with Data Binding）。代码放在了<a href="https://github.com/fresky/WPFWaiterExample" target="_blank" rel="noopener">Github</a>上。其中Spinner的实现来源于stackoverflow上Drew Noakes提供的<a href="http://stackoverflow.com/a/1492141/304115" target="_blank" rel="noopener">代码</a>。</p>  <h3>1. 同步版本（Sync）</h3>  <p>这个版本中进度条、运行时间都不能更新，而且用户不能取消，因为所有的工作都是在UI线程中做的，整个UI被阻塞了。示例代码如下：</p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">internal</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">startWaiting();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Job.JobNumber; i++)</span><br><span class="line">&#123;</span><br><span class="line">Job.TimeConsumingJob();</span><br><span class="line">m_FinishedJob++;</span><br><span class="line">m_Progressbar.Value = m_FinishedJob;</span><br><span class="line">&#125;</span><br><span class="line">stopWaiting();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3>2. 异步版本（Async）</h3><p>使用C#的<code>await</code>和<code>async</code>关键字实现异步调用，这样进度条、运行时间都可以更新了，而且用户可以取消，因为UI没有被阻塞。示例代码如下：<br><br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">internal</span> <span class="keyword">override</span> <span class="keyword">async</span> <span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    startWaiting();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Job.JobNumber; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">await</span> Task.Factory.StartNew(Job.TimeConsumingJob, m_CancellationTokenSource.Token);</span><br><span class="line">            m_FinishedJob++;</span><br><span class="line">            m_Progressbar.Value = m_FinishedJob;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (OperationCanceledException)</span><br><span class="line">    &#123;</span><br><span class="line">        m_CancellationTokenSource = <span class="keyword">new</span> CancellationTokenSource();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    stopWaiting();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></p><h3><code><code></code></code>3. 并发版本（Parallel）</h3><br><br><p>把后台的工作都并发处理了，除了不阻塞UI之外处理速度得到了提高。示例代码如下：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">internal</span> <span class="keyword">override</span> <span class="keyword">async</span> <span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    startWaiting();</span><br><span class="line"></span><br><span class="line">    List&lt;Task&gt; taskList = <span class="keyword">new</span> List&lt;Task&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Job.JobNumber; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        taskList.Add(</span><br><span class="line">                Task.Factory.StartNew(Job.TimeConsumingJob).ContinueWith(t =&gt;</span><br><span class="line">                    &#123;</span><br><span class="line">                        m_FinishedJob++;</span><br><span class="line">                        m_Progressbar.Value = m_FinishedJob;</span><br><span class="line">                    &#125;,</span><br><span class="line">                m_CancellationTokenSource.Token,</span><br><span class="line">                TaskContinuationOptions.None,</span><br><span class="line">                TaskScheduler.FromCurrentSynchronizationContext())</span><br><span class="line">                );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">await</span> Task.WhenAll(taskList);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (OperationCanceledException)</span><br><span class="line">    &#123;</span><br><span class="line">        m_CancellationTokenSource = <span class="keyword">new</span> CancellationTokenSource();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    stopWaiting();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3>4. 通过数据绑定实现的并发版本（Parallel with Data Binding）</h3><p>一样是并发，但是用了Data Binding，没有直接操作UI控件。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天用.NET 4.5中的TPL的特性做了个小例子，实现了WPF的进度条progressbar，运行时间elapse time和等待spinner。&lt;/p&gt;  &lt;p&gt;先上图吧。&lt;/p&gt;  &lt;p&gt;&lt;img src=&quot;https://raw.github.com/fresky/
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>数据库事务的ACID和BASE</title>
    <link href="http://fresky.github.io/2013/07/25/acid-and-base-in-db-transaction/"/>
    <id>http://fresky.github.io/2013/07/25/acid-and-base-in-db-transaction/</id>
    <published>2013-07-24T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.272Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://www.johndcook.com/blog/2009/07/06/brewer-cap-theorem-base/" target="_blank" rel="noopener">ACID versus BASE for database transactions</a>解释了ACID和BASE的区别。如下：</p>  <p>ACID: （关系数据库）</p>  <ul>   <li><strong>A</strong>tomic: 原子性，一个事务要么全部成功，要么全部回滚。 </li>    <li><strong>C</strong>onsistent: 一致性，完成一个事务后数据库不能处在一个不一致的状态。</li>    <li><strong>I</strong>solated: 隔离性，事物之间不能互相影响。</li>    <li><strong>D</strong>urable: 持久性，完成的事务对数据库所作的更改便持久地保存在数据库之中。</li> </ul>  <p>以为CAP不能兼得（参见<a href="http://www.julianbrowne.com/article/viewer/brewers-cap-theorem" target="_blank" rel="noopener">Brewer’s CAP Theorem</a>），</p>  <ul>   <li><strong>C</strong>onsistency：一致性。</li>    <li><strong>A</strong>vailability：可用性。</li>    <li><strong>P</strong>artition tolerance：分区容忍性。</li> </ul>  <p>所以NoSql的采用BASE事务。</p>  <p>BASE: </p>  <ul>   <li><strong>B</strong>asic <strong>A</strong>vailability：基本可用。</li>    <li><strong>S</strong>oft-state ：柔性事务。</li>    <li><strong>E</strong>ventual consistency：最终一致性。</li> </ul><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://www.johndcook.com/blog/2009/07/06/brewer-cap-theorem-base/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ACID versus BASE for da
      
    
    </summary>
    
    
      <category term="Database" scheme="http://fresky.github.io/tags/Database/"/>
    
  </entry>
  
  <entry>
    <title>如何选择NoSql数据库</title>
    <link href="http://fresky.github.io/2013/07/23/how-to-choose-nosql-db/"/>
    <id>http://fresky.github.io/2013/07/23/how-to-choose-nosql-db/</id>
    <published>2013-07-22T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.272Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://blogs.microsoft.co.il/blogs/applisec/archive/2013/07/10/how-to-choose-a-no-sql-database.aspx" target="_blank" rel="noopener">How to choose a No Sql database</a> 介绍了一下怎么选择一个No Sql数据库，下面简单翻译一下重点。</p>  <p>No Sql的数据库可以分为如下4类： </p>  <ol>   <li>Key-Value数据库     <br>数据库中存放的Key-Value对。       <ul>       <li>例子：Redis, Riak,Voldemort </li>        <li>优点：         <br>          <ol>           <li>数据模型简单 </li>            <li>扩展性好 </li>         </ol>       </li>        <li>缺点：          <ol>           <li>需要自己创建“外键” </li>            <li>对复杂数据支持不好 </li>         </ol>       </li>     </ul>   </li>    <li>Wide Column 数据库     <br>数据库中存放的Key-Value对，但是允许嵌套的Key-Value对。       <ul>       <li>例子：HBase, HyperTable, Cassandra </li>        <li>优点：          <ol>           <li>支持半结构化的数据 </li>            <li>自然索引 </li>            <li>扩展性好 </li>         </ol>       </li>        <li>缺点：          <ol>           <li>对相互联系的数据支持不好 </li>         </ol>       </li>     </ul>   </li>    <li>Document数据库     <br>数据库还是Key-Value，但是数据必须以数据库能理解的格式存储。比如XML，JSON等。       <ul>       <li>例子：RavenDB, MongoDB, CouchDB </li>        <li>优点          <ol>           <li>数据模型强大 </li>            <li>扩展性好 </li>         </ol>       </li>        <li>缺点：          <ol>           <li>对相互联系的数据支持不好 </li>            <li>查询模型局限于key和index </li>         </ol>       </li>     </ul>   </li>    <li>Graph数据库     <br>数据以节点的形式存储。       <ul>       <li>例子：Neo4j, OrientDB, InfinitGraph, AllegroGraph </li>        <li>优点：          <ol>           <li>数据模型强大 </li>            <li>关联的数据局部索引 </li>            <li>容易写出强大的查询 </li>         </ol>       </li>        <li>缺点：          <ol>           <li>不简单 </li>            <li>分区和扩展性复杂 </li>         </ol>       </li>     </ul>   </li> </ol>  <p>从<a href="http://nosql-database.org/" target="_blank" rel="noopener">nosql-database.org</a>可以找到按类别区分的所有的NoSql数据库。从<a href="http://nosql.findthebest.com/" target="_blank" rel="noopener">nosql.findthebest.com</a>可以看到一个很清楚的比较各种NoSql数据库的表格。</p>  <p>评测NoSql的性能不是一件容易的事情，可以参考<a href="https://www.google.co.il/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=9&amp;cad=rja&amp;ved=0CHkQFjAI&amp;url=http%3A%2F%2Fcourse.cs.tau.ac.il%2Fsecws12%2Fsites%2Fdrupal-courses.cs.tau.ac.il.secws12%2Ffiles%2FDistributed%2520Databases%2520-%2520YCSB%2520Tutorial.docx&amp;ei=AcLdUaqOEYTptQb3-oCYDA&amp;usg=AFQjCNHaDqIXKRgIITPuz_WJ44epOZ4KNQ&amp;sig2=wNd6ZA_1X4HmBEijOktaHA&amp;bvm=bv.48705608,d.Yms" target="_blank" rel="noopener">Yahoo Cloud Serving Benchmark</a>这个流行的工具。从<a href="http://www.networkworld.com/news/tech/2012/102212-nosql-263595.html" target="_blank" rel="noopener">这里</a>可以找到一个评测的例子。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://blogs.microsoft.co.il/blogs/applisec/archive/2013/07/10/how-to-choose-a-no-sql-database.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopen
      
    
    </summary>
    
    
      <category term="Database" scheme="http://fresky.github.io/tags/Database/"/>
    
  </entry>
  
  <entry>
    <title>值得记录的工具和网站</title>
    <link href="http://fresky.github.io/2013/07/22/good-tools-and-websites/"/>
    <id>http://fresky.github.io/2013/07/22/good-tools-and-websites/</id>
    <published>2013-07-21T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.272Z</updated>
    
    <content type="html"><![CDATA[<p>打算用这篇博客记录一下平时遇到的好的工具和网站，会随时更新。</p><h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><h2 id="编程"><a href="#编程" class="headerlink" title="编程"></a>编程</h2><h3 id="C"><a href="#C" class="headerlink" title="C#"></a>C#</h3><p>托管代码帮助文件生成：<a href="http://shfb.codeplex.com/" target="_blank" rel="noopener">Sandcastle Help File Builder</a></p><p>C#的IOC框架：<a href="http://docs.structuremap.net/" target="_blank" rel="noopener">StructureMap</a>， <a href="http://unity.codeplex.com/" target="_blank" rel="noopener">Unity</a>， <a href="http://code.google.com/p/autofac/" target="_blank" rel="noopener">autofac</a></p><p>C#的unit test的3个A中的第一个Arrange框架：<a href="https://github.com/AutoFixture" target="_blank" rel="noopener">AutoFixture</a></p><p>C#的mutation测试框架：<a href="http://www.mutation-testing.net" target="_blank" rel="noopener">NinjaTurtles</a></p><p>WPF应用的spy工具，可以看运行的WPF程序的控件树并且修改属性：<a href="http://snoopwpf.codeplex.com/" target="_blank" rel="noopener">Snoop</a></p><p>.NET的一些开源框架Castle：<a href="http://www.castleproject.org/" target="_blank" rel="noopener">Castle Project</a></p><h3 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h3><p>Google的开源html5 解析器：<a href="https://github.com/google/gumbo-parser" target="_blank" rel="noopener">google/gumbo-parser</a><br><a href="http://developer.yahoo.com/yslow/smushit/" target="_blank" rel="noopener">Smush.it</a>： 网站图像优化工具。<br><a href="http://developer.yahoo.com/yslow/" target="_blank" rel="noopener">YSlow</a>：网站性能优化工具。</p><h2 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h2><p>优化学习过程的闪卡工具：<a href="http://mnemosyne-proj.org/" target="_blank" rel="noopener">Mnemosyne</a></p><h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p>直接把截图复制到硬盘：<a href="http://screenshot2disk.codeplex.com/" target="_blank" rel="noopener">Screenshot2Disk</a></p><p>资源管理器增强软件，使用后走一下它的那个tutorial，就知道有多强大了。：<a href="http://www.listary.com/" target="_blank" rel="noopener">Listary</a></p><p>多台电脑共享鼠标键盘：<a href="http://synergy-foss.org/" target="_blank" rel="noopener">Synergy</a></p><h1 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h1><h2 id="工具-1"><a href="#工具-1" class="headerlink" title="工具"></a>工具</h2><h3 id="在线C-编译器"><a href="#在线C-编译器" class="headerlink" title="在线C++编译器"></a>在线C++编译器</h3><ul><li><a href="http://liveworkspace.org/" target="_blank" rel="noopener">LiveWorkspace</a> (Clang 3.2, GCC 4.6.3 4.7.2)</li><li><a href="http://gcc.godbolt.org/" target="_blank" rel="noopener">gcc.godbolt.org</a> (Clang 3.0, GCC 4.5.3 4.8.0 prerelease, Intel ICC 13.0.1)</li><li><a href="http://rise4fun.com/vcpp" target="_blank" rel="noopener">Rise4Fun</a> (Microsoft VC++ 2012 and November 2012 CTP)</li><li><a href="http://stacked-crooked.com/" target="_blank" rel="noopener">Stacked-Crooked</a> (GCC 4.7)</li><li><a href="http://ideone.com/" target="_blank" rel="noopener">ideone.com</a> (GCC 4.3.4 and 4.5.1)</li><li><a href="http://comeaucomputing.com/tryitout/" target="_blank" rel="noopener">Comeau Test Drive</a> (EDG 4.3.3)</li></ul><h2 id="在线学习"><a href="#在线学习" class="headerlink" title="在线学习"></a>在线学习</h2><p><a href="http://regexcrossword.com/" target="_blank" rel="noopener">Regex Crossword</a><br>(学习正则表达式的游戏网站，用正则表达式玩Crossword)</p><p><a href="http://www.codecademy.com/" target="_blank" rel="noopener">Codecademy</a>：在线编程学习网站，目前支持JavaScript，HTML/CSS，PHP，Python，Ruby。</p><p><a href="https://developers.google.com/edu/python/" target="_blank" rel="noopener">Google的免费Python课程</a></p><p><a href="http://www.checkio.org/" target="_blank" rel="noopener">CheckiO</a>：练习Python的网站，用Python完成任务来玩游戏。</p><p><a href="http://www.syncfusion.com/resources/techportal/ebooks" target="_blank" rel="noopener">Syncfusion Succinctly系列电子书</a>：非常简捷明了，比如<a href="http://www.syncfusion.com/resources/techportal/ebooks/cplusplus" target="_blank" rel="noopener">C++</a>的也就100多页，坐几次地铁就看完了。</p><p><a href="http://try.jquery.com/" target="_blank" rel="noopener">Try jQuery</a></p><p><a href="http://wix.tramontana.co.hu/tutorial" target="_blank" rel="noopener">WiX Tutorial</a></p><p><a href="https://github.com/vhf/free-programming-books/blob/master/free-programming-books.md?utm_campaign=Manong_Weekly_Issue_5&amp;utm_medium=EDM&amp;utm_source=Manong_Weekly#net-c--vb--nemerle--visual-studio" target="_blank" rel="noopener">Github上的免费电子书</a></p><h2 id="找工作相关"><a href="#找工作相关" class="headerlink" title="找工作相关"></a>找工作相关</h2><p><a href="http://www.careercup.com/" target="_blank" rel="noopener">Careercup</a><br><a href="http://www.glassdoor.com" target="_blank" rel="noopener">Glassdoor</a><br><a href="http://www.geekinterview.com/" target="_blank" rel="noopener">GeekInterview</a>  </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;打算用这篇博客记录一下平时遇到的好的工具和网站，会随时更新。&lt;/p&gt;
&lt;h1 id=&quot;工具&quot;&gt;&lt;a href=&quot;#工具&quot; class=&quot;headerlink&quot; title=&quot;工具&quot;&gt;&lt;/a&gt;工具&lt;/h1&gt;&lt;h2 id=&quot;编程&quot;&gt;&lt;a href=&quot;#编程&quot; class=&quot;he
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>Windows Live Writer的Markdown插件MarkdownInLiveWriter支持语法高亮了</title>
    <link href="http://fresky.github.io/2013/07/19/windows-live-writer-plugin-markdowninlivewriter-support-code-syntax-highlight/"/>
    <id>http://fresky.github.io/2013/07/19/windows-live-writer-plugin-markdowninlivewriter-support-code-syntax-highlight/</id>
    <published>2013-07-18T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.271Z</updated>
    
    <content type="html"><![CDATA[<p>我前几天开发的Windows Live Writer的Markdown的插件<a href="/2013/07/16/windows-live-writer-plugin-markdowninlivewriter/">MarkdownInLiveWriter</a>支持语法高亮了。参见下图： </p><p><img title="MarkdownInLiveWriter" src="https://raw.github.com/fresky/MarkdownInLiveWriter/master/screenshot.png" alt="screenshot" width="672" height="411"></p><p></p><p>基本上就是把我的另一个插件<a href="/2013/06/09/codeinlivewriter-code-syntax-highlight-plugin-for-windows-live-writer/">CodeInLiveWriter</a>的功能加了进来。</p><br><p>欢迎大家使用，如果有问题可以留言或者直接发<a href="mailto:dawei.xu@gmail.com" target="_blank" rel="noopener">邮件</a>联系。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;我前几天开发的Windows Live Writer的Markdown的插件&lt;a href=&quot;/2013/07/16/windows-live-writer-plugin-markdowninlivewriter/&quot;&gt;MarkdownInLiveWriter&lt;/a&gt;支持语法
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>遇到奇怪的C#/C/C++或者Java的bug可以去问问Coverity</title>
    <link href="http://fresky.github.io/2013/07/18/ask-bug-guy-in-coverity/"/>
    <id>http://fresky.github.io/2013/07/18/ask-bug-guy-in-coverity/</id>
    <published>2013-07-17T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.271Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.coverity.com/" target="_blank" rel="noopener">Coverity</a>7月16号在博客<a href="https://communities.coverity.com/blogs/development-testing-blog/" target="_blank" rel="noopener">Ask The Bug Guys</a>中说以后遇到奇怪的C#/C/C++或者Java的bug可以给<a href="mailto:TheBugGuys@coverity.com" target="_blank" rel="noopener">TheBugGuys@coverity.com</a>发邮件。然后这些问题就会到一些大牛手上：</p><ul><li>&nbsp;&nbsp;&nbsp; Eric Lippert, our Godfather of C# code</li><li>&nbsp;&nbsp;&nbsp; Jon Jarboe, our C/C++ guru</li><li>&nbsp;&nbsp;&nbsp; Tim Alper, our resident Java authority</li></ul><p>之后他们会把其中一些有趣的问题放到他们一个新的系列博客Ask The Bug Guys上。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.coverity.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Coverity&lt;/a&gt;7月16号在博客&lt;a href=&quot;https://communities.coverity.com/blogs/dev
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>用ChooseALicense帮自己选一个开源license，然后用AddALicense给自己的github自动加上license文件</title>
    <link href="http://fresky.github.io/2013/07/18/choosealicense-addalicense-github-license/"/>
    <id>http://fresky.github.io/2013/07/18/choosealicense-addalicense-github-license/</id>
    <published>2013-07-17T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.271Z</updated>
    
    <content type="html"><![CDATA[<p>在我之前的一篇博客里面介绍过<a href="/2013/07/06/tldrlegal-opensource-license-search-engine/">tl;drLegal——开源软件license的搜索引擎</a>，可以很方便的查询各种license，并且给出了很简洁的解释。</p><p>今天又发现了另外一个帮助你选择你的开源软件license的网站<a href="http://choosealicense.com/" target="_blank" rel="noopener">ChooseALicense.com</a>，这个网站首页就写了3中最常见的license： MIT， Apache和GPL。点<a href="http://choosealicense.com/licenses/" target="_blank" rel="noopener">More Licenses</a>，可以看到其他license的说明。</p><p>另外一个网站<a href="http://addalicense.com/" target="_blank" rel="noopener">Add a License</a>，提供了一个很贴心的服务，能自动帮你的没有放置license的github项目加上你选好的license文件。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在我之前的一篇博客里面介绍过&lt;a href=&quot;/2013/07/06/tldrlegal-opensource-license-search-engine/&quot;&gt;tl;drLegal——开源软件license的搜索引擎&lt;/a&gt;，可以很方便的查询各种license，并且给出了很
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
      <category term="Github" scheme="http://fresky.github.io/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>各种Markdown处理器的列表</title>
    <link href="http://fresky.github.io/2013/07/18/markdown-implementations-list/"/>
    <id>http://fresky.github.io/2013/07/18/markdown-implementations-list/</id>
    <published>2013-07-17T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.271Z</updated>
    
    <content type="html"><![CDATA[<p>从<a href="http://www.w3.org/community/markdown/wiki/MarkdownImplementations" target="_blank" rel="noopener">MarkdownImplementations - Markdown Community Group</a>可以找到一个实现markdown处理器的列表，如下：  <br>  <table class="wikitable" border="1"><tbody>     <tr>       <th>Name </th>        <th>Language </th>        <th>Type </th>        <th>Description </th>        <th>Official site </th>     </tr>      <tr>       <td>mmd2pdf </td>        <td>Autoit </td>        <td>- </td>        <td>MultiMarkdown to PDF converter </td>        <td><a title="http://code.google.com/p/mmd2pdf/" class="external text" href="http://code.google.com/p/mmd2pdf/" rel="noopener" target="_blank">google code</a> </td>     </tr>      <tr>       <td>md2html.awk </td>        <td>Awk </td>        <td>Converter </td>        <td>Markdown to Html </td>        <td><a title="https://bitbucket.org/yiyus/md2html.awk" class="external text" href="https://bitbucket.org/yiyus/md2html.awk" rel="noopener" target="_blank">bitbucket</a> </td>     </tr>      <tr>       <td>apache-mod-sundown </td>        <td>C </td>        <td>Apache HTTPd module </td>        <td>Using Sundown C library </td>        <td><a title="https://github.com/kjdev/apache-mod-sundown" class="external text" href="https://github.com/kjdev/apache-mod-sundown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Discount </td>        <td>C </td>        <td>Library and HTML converter </td>        <td>- </td>        <td><a title="http://www.pell.portland.or.us/~orc/Code/discount/" class="external text" href="http://www.pell.portland.or.us/~orc/Code/discount/" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>libpandoc </td>        <td>C </td>        <td>Multiconverter </td>        <td>- </td>        <td><a title="https://github.com/toyvo/libpandoc" class="external text" href="https://github.com/toyvo/libpandoc" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>peg-multimarkdown </td>        <td>C </td>        <td>- </td>        <td>Using parsing expressing grammar (PEG) </td>        <td><a title="https://github.com/dtjm/peg-multimarkdown" class="external text" href="https://github.com/dtjm/peg-multimarkdown" rel="noopener" target="_blank">github</a>, <a title="https://github.com/danielpunkass/peg-multimarkdown" class="external text" href="https://github.com/danielpunkass/peg-multimarkdown" rel="noopener" target="_blank">github fork</a> </td>     </tr>      <tr>       <td>peg-markdown </td>        <td>C </td>        <td>- </td>        <td>Using parsing expressing grammar (PEG) </td>        <td><a title="https://github.com/jgm/peg-markdown" class="external text" href="https://github.com/jgm/peg-markdown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>PEG Markdown Highlight </td>        <td>C </td>        <td>Syntax highlighter </td>        <td>Using parsing expressing grammar (PEG) </td>        <td><a title="http://hasseg.org/peg-markdown-highlight" class="external text" href="http://hasseg.org/peg-markdown-highlight" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>Sundown </td>        <td>C </td>        <td>- </td>        <td>- </td>        <td><a title="https://github.com/vmg/sundown.git" class="external text" href="https://github.com/vmg/sundown.git" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>libupskirt </td>        <td>C </td>        <td>Parser </td>        <td>Fork of libsoldout </td>        <td><a title="https://github.com/siuying/libupskirt" class="external text" href="https://github.com/siuying/libupskirt" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>libsoldout </td>        <td>C </td>        <td>Parser </td>        <td>Simple parser only </td>        <td><a title="http://fossil.instinctive.eu/libsoldout" class="external text" href="http://fossil.instinctive.eu/libsoldout" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>Doxygen </td>        <td>C++ </td>        <td>Sourcecode documentation generator </td>        <td>Doxygen supports Markdown with extra features </td>        <td><a title="http://doxygen.org" class="external text" href="http://doxygen.org" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>Cpp-Markdown </td>        <td>C++ </td>        <td>Generator </td>        <td>Markdown to HTML </td>        <td><a title="http://sourceforge.net/projects/cpp-markdown" class="external text" href="http://sourceforge.net/projects/cpp-markdown" rel="noopener" target="_blank">sourceforge</a> </td>     </tr>      <tr>       <td>RStudio </td>        <td>C++ </td>        <td>IDE for R (programming language) </td>        <td>C++ <a title="https://github.com/rstudio/rstudio/blob/master/src/cpp/core/markdown/Markdown.cpp" class="external text" href="https://github.com/rstudio/rstudio/blob/master/src/cpp/core/markdown/Markdown.cpp" rel="noopener" target="_blank">wrapper</a> for sundown </td>        <td><a title="http://www.rstudio.org/docs/authoring/using_markdown" class="external text" href="http://www.rstudio.org/docs/authoring/using_markdown" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>Qarkdown </td>        <td>C++ </td>        <td>Editor (Qt) </td>        <td>Simple crossplatform Markdown editor using Qt </td>        <td><a title="http://hasseg.org/hgweb/qarkdown" class="external text" href="http://hasseg.org/hgweb/qarkdown" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>MarkdownSharp </td>        <td>C# </td>        <td>- </td>        <td>- </td>        <td><a title="http://code.google.com/p/markdownsharp" class="external text" href="http://code.google.com/p/markdownsharp" rel="noopener" target="_blank">google code</a> </td>     </tr>      <tr>       <td>MoonShine </td>        <td>C# </td>        <td>- </td>        <td>- </td>        <td><a title="https://github.com/brandonc/moonshine" class="external text" href="https://github.com/brandonc/moonshine" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Sundown.net </td>        <td>C# </td>        <td>- </td>        <td>- </td>        <td><a title="https://github.com/txdv/sundown.net" class="external text" href="https://github.com/txdv/sundown.net" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>markdown-clj </td>        <td>Clojure </td>        <td>Converter </td>        <td>Generates HTML from Markdown, compiles to both Clojure and ClojureScript </td>        <td><a title="https://github.com/yogthos/markdown-clj" class="external text" href="https://github.com/yogthos/markdown-clj" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Blackfriday </td>        <td>Go </td>        <td>- </td>        <td>- </td>        <td><a title="http://github.com/russross/blackfriday" class="external text" href="http://github.com/russross/blackfriday" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Goskirt </td>        <td>Go </td>        <td>- </td>        <td>- </td>        <td><a title="https://github.com/madari/goskirt" class="external text" href="https://github.com/madari/goskirt" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>MaTeS </td>        <td>Go </td>        <td>Converter to HTML5 </td>        <td>Creates web pages or presentation slides. Supports citation, tables, math and charts. </td>        <td><a title="http://mates.vs.uni-due.de" class="external text" href="http://mates.vs.uni-due.de" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>Upskirt.go </td>        <td>Go </td>        <td>- </td>        <td>- </td>        <td><a title="https://github.com/buu700/upskirt.go" class="external text" href="https://github.com/buu700/upskirt.go" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Pandoc </td>        <td>Haskell </td>        <td>Converter (Multiformat) </td>        <td>- </td>        <td><a title="http://johnmacfarlane.net/pandoc" class="external text" href="http://johnmacfarlane.net/pandoc" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>Sundown HS </td>        <td>Haskell </td>        <td>- </td>        <td>- </td>        <td><a title="https://github.com/bitonic/sundown" class="external text" href="https://github.com/bitonic/sundown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>MarkdownJ </td>        <td>Java </td>        <td>- </td>        <td>- </td>        <td><a title="http://code.google.com/p/markdownj" class="external text" href="http://code.google.com/p/markdownj" rel="noopener" target="_blank">google code</a> </td>     </tr>      <tr>       <td>pegdown </td>        <td>Java </td>        <td>- </td>        <td>- </td>        <td><a title="http://github.com/sirthias/pegdown" class="external text" href="http://github.com/sirthias/pegdown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>MarkdownPapers </td>        <td>Java </td>        <td>- </td>        <td>Implementation based on a JavaCC parser </td>        <td><a title="http://markdown.tautua.org" class="external text" href="http://markdown.tautua.org" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>Txtmark </td>        <td>Java </td>        <td>- </td>        <td>- </td>        <td><a title="http://github.com/rjeschke/txtmark" class="external text" href="http://github.com/rjeschke/txtmark" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Markdown4j </td>        <td>Java </td>        <td>- </td>        <td>Extensible markdown java implementation </td>        <td><a title="http://code.google.com/p/markdown4j" class="external text" href="http://code.google.com/p/markdown4j" rel="noopener" target="_blank">google code</a> </td>     </tr>      <tr>       <td>Dillinger </td>        <td>JavaScript </td>        <td>Editor </td>        <td>&quot;WYSIWYM&quot; editor </td>        <td><a title="http://dillinger.io" class="external text" href="http://dillinger.io" rel="noopener" target="_blank">site</a>, <a title="https://github.com/joemccann/dillinger" class="external text" href="https://github.com/joemccann/dillinger" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>uedit </td>        <td>JavaScript </td>        <td>Editor </td>        <td>&quot;WYSIWYM&quot; editor </td>        <td><a title="https://github.com/amir-hadzic/uedit" class="external text" href="https://github.com/amir-hadzic/uedit" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>node-discount </td>        <td>JavaScript </td>        <td>- </td>        <td>node.js binding for Discount </td>        <td><a title="https://github.com/visionmedia/node-discount" class="external text" href="https://github.com/visionmedia/node-discount" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>markdown-js </td>        <td>JavaScript </td>        <td>- </td>        <td>Parser for JavaScript/node.js </td>        <td><a title="https://github.com/evilstreak/markdown-js" class="external text" href="https://github.com/evilstreak/markdown-js" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>marked </td>        <td>JavaScript </td>        <td>- </td>        <td>A fast markdown parser </td>        <td><a title="https://github.com/chjj/marked" class="external text" href="https://github.com/chjj/marked" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>PageDown </td>        <td>JavaScript </td>        <td>Webeditor and viewer </td>        <td>Used by Stack Exchange sites </td>        <td><a title="http://code.google.com/p/pagedown/" class="external text" href="http://code.google.com/p/pagedown/" rel="noopener" target="_blank">google code</a> and <a title="https://github.com/ujifgc/pagedown" class="external text" href="https://github.com/ujifgc/pagedown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>PageDown-Bootstrap </td>        <td>JavaScript </td>        <td>Webeditor and viewer </td>        <td>Fork of PageDown which uses the <a title="http://twitter.github.com/bootstrap" class="external text" href="http://twitter.github.com/bootstrap" rel="noopener" target="_blank">Twitter Bootstrap</a> template framework </td>        <td><a title="https://github.com/samwillis/pagedown-bootstrap" class="external text" href="https://github.com/samwillis/pagedown-bootstrap" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Showdown </td>        <td>JavaScript </td>        <td>Webeditor and viewer </td>        <td>- </td>        <td><a title="http://www.showdown.im" class="external text" href="http://www.showdown.im" rel="noopener" target="_blank">site</a>/<a title="https://github.com/coreyti/showdown" class="external text" href="https://github.com/coreyti/showdown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>markdown.pioul.fr </td>        <td>JavaScript </td>        <td>Webeditor and viewer </td>        <td>Minimalist Online Markdown Editor </td>        <td><a title="http://markdown.pioul.fr" class="external text" href="http://markdown.pioul.fr" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>TextDown </td>        <td>JavaScript </td>        <td>Editor plugin for Chrome </td>        <td>- </td>        <td><a title="https://chrome.google.com/webstore/detail/efalomlklhakojjbdfehfkgoicablooc" class="external text" href="https://chrome.google.com/webstore/detail/efalomlklhakojjbdfehfkgoicablooc" rel="noopener" target="_blank">chrome store</a>/<a title="https://github.com/joaocolombo/textdown" class="external text" href="https://github.com/joaocolombo/textdown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>texts.js </td>        <td>JavaScript </td>        <td>Node.js module </td>        <td>PEG-based grammar, intermediate format in JSON </td>        <td><a title="https://github.com/sheremetyev/texts.js" class="external text" href="https://github.com/sheremetyev/texts.js" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>markdown.lua </td>        <td>Lua </td>        <td>- </td>        <td>- </td>        <td><a title="http://luaforge.net/projects/markdown" class="external text" href="http://luaforge.net/projects/markdown" rel="noopener" target="_blank">luaforge</a> </td>     </tr>      <tr>       <td>Lunamark </td>        <td>Lua </td>        <td>Converter </td>        <td>HTML and LaTeX converter </td>        <td><a title="http://jgm.github.com/lunamark" class="external text" href="http://jgm.github.com/lunamark" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>lua-discount </td>        <td>Lua </td>        <td>Binding </td>        <td>- </td>        <td><a title="http://asbradbury.org/projects/lua-discount" class="external text" href="http://asbradbury.org/projects/lua-discount" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>node-multimarkdown </td>        <td>Node.js </td>        <td>Parser </td>        <td>Native MultiMarkdown extension for Node.js </td>        <td><a title="https://github.com/dtjm/node-multimarkdown" class="external text" href="https://github.com/dtjm/node-multimarkdown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>RobotSkirt </td>        <td>Node.js </td>        <td>- </td>        <td>- </td>        <td><a title="https://github.com/benmills/robotskirt" class="external text" href="https://github.com/benmills/robotskirt" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>node-markdown </td>        <td>Node.js </td>        <td>- </td>        <td>Parse Markdown syntax with node.js </td>        <td><a title="https://github.com/andris9/node-markdown" class="external text" href="https://github.com/andris9/node-markdown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>gfm </td>        <td>Node.js </td>        <td>- </td>        <td>The port of Showdown used on github.com </td>        <td><a title="http://github.com/isaacs/github-flavored-markdown" class="external text" href="http://github.com/isaacs/github-flavored-markdown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Markdown </td>        <td>Perl 6 </td>        <td>Parser </td>        <td>Markdown parser in Perl 6 </td>        <td><a title="https://github.com/masak/markdown" class="external text" href="https://github.com/masak/markdown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Markdown.pl </td>        <td>Perl </td>        <td>Converter to (X)HTML </td>        <td>Official author perl markdown implementation </td>        <td><a title="http://daringfireball.net/projects/markdown" class="external text" href="http://daringfireball.net/projects/markdown" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>MultiMarkdown </td>        <td>Perl </td>        <td>Converter </td>        <td>Markdowns originals MultiMarkdown superset </td>        <td><a title="http://fletcherpenney.net/multimarkdown/" class="external text" href="http://fletcherpenney.net/multimarkdown/" rel="noopener" target="_blank">site</a>, <a title="https://github.com/fletcher/MultiMarkdown" class="external text" href="https://github.com/fletcher/MultiMarkdown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>text-markdown </td>        <td>Perl </td>        <td>Converter to (X)HTML </td>        <td>- </td>        <td><a title="https://github.com/bobtfish/text-markdown" class="external text" href="https://github.com/bobtfish/text-markdown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>markdown-oo-php </td>        <td>PHP </td>        <td>Converter to (X)HTML </td>        <td>Object-oriented implementation of Markdown </td>        <td><a title="https://github.com/garygolden/markdown-oo-php" class="external text" href="https://github.com/garygolden/markdown-oo-php" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>markdown-handler </td>        <td>PHP </td>        <td>Converter to (X)HTML </td>        <td>&#160;</td>        <td><a title="https://github.com/alue/markdown-handler" class="external text" href="https://github.com/alue/markdown-handler" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>PHP Markdown </td>        <td>PHP </td>        <td>Converter to HTML </td>        <td>- </td>        <td><a title="http://michelf.com/projects/php-markdown" class="external text" href="http://michelf.com/projects/php-markdown" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>PHP Markdown Extra </td>        <td>PHP </td>        <td>Converter to HTML </td>        <td>Markdown with extra options </td>        <td><a title="http://michelf.com/projects/php-markdown" class="external text" href="http://michelf.com/projects/php-markdown" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>PHP Markdown Viewer </td>        <td>PHP </td>        <td>Viewer </td>        <td>Wrapper for PHP Markdown </td>        <td><a title="http://www.wolfiezero.com/935/markdown-viewer-for-php" class="external text" href="http://www.wolfiezero.com/935/markdown-viewer-for-php" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>secondcrack </td>        <td>PHP </td>        <td>Blog </td>        <td>A static-file Markdown blogging engine </td>        <td><a title="https://github.com/marcoarment/secondcrack" class="external text" href="https://github.com/marcoarment/secondcrack" rel="noopener" target="_blank">github</a>, <a title="http://www.marco.org/secondcrack" class="external text" href="http://www.marco.org/secondcrack" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>qlmarkdown </td>        <td>Objective C </td>        <td>- </td>        <td>A Mac OS X Quicklook extension that uses Discount. </td>        <td><a title="https://github.com/toland/qlmarkdown/" class="external text" href="https://github.com/toland/qlmarkdown/" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Python-Markdown </td>        <td>Python </td>        <td>- </td>        <td>A implementation with various extensions such as tables and ignoring internal bold/italic markings. </td>        <td><a title="http://freewisdom.org/projects/python-markdown" class="external text" href="http://freewisdom.org/projects/python-markdown" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>Misaka </td>        <td>Python </td>        <td>Binding </td>        <td>Python binding for Sundown </td>        <td><a title="http://misaka.61924.nl" class="external text" href="http://misaka.61924.nl" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>BlueCloth </td>        <td>Ruby </td>        <td>- </td>        <td>- </td>        <td><a title="http://deveiate.org/projects/BlueCloth" class="external text" href="http://deveiate.org/projects/BlueCloth" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>BlueFeather </td>        <td>Ruby </td>        <td>- </td>        <td>- </td>        <td><a title="http://ruby.morphball.net/bluefeather/index_en.html" class="external text" href="http://ruby.morphball.net/bluefeather/index_en.html" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>ffi-sundown </td>        <td>Ruby </td>        <td>- </td>        <td>- </td>        <td><a title="https://github.com/postmodern/ffi-sundown" class="external text" href="https://github.com/postmodern/ffi-sundown" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>gimli </td>        <td>Ruby </td>        <td>Markdown to PDF </td>        <td>- </td>        <td><a title="https://github.com/walle/gimli" class="external text" href="https://github.com/walle/gimli" rel="noopener" target="_blank">gimli</a> </td>     </tr>      <tr>       <td>kramdown </td>        <td>Ruby </td>        <td>Library </td>        <td>- </td>        <td><a title="http://kramdown.rubyforge.org" class="external text" href="http://kramdown.rubyforge.org" rel="noopener" target="_blank">rubyforge</a> </td>     </tr>      <tr>       <td>md2man </td>        <td>Ruby </td>        <td>Converter </td>        <td>Markdown to manpage </td>        <td><a title="https://github.com/sunaku/md2man" class="external text" href="https://github.com/sunaku/md2man" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>markdownr.com </td>        <td>Ruby </td>        <td>Webviewer and Editor </td>        <td>A nifty markdown notepad </td>        <td><a title="http://markdownr.com" class="external text" href="http://markdownr.com" rel="noopener" target="_blank">site</a>/<a title="https://github.com/samsoffes/markdownr.com" class="external text" href="https://github.com/samsoffes/markdownr.com" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Maruku </td>        <td>Ruby </td>        <td>Interpreter </td>        <td>- </td>        <td><a title="https://github.com/bhollis/maruku" class="external text" href="https://github.com/bhollis/maruku" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>RDiscount </td>        <td>Ruby </td>        <td>Binding </td>        <td>Ruby binding for Discount </td>        <td><a title="https://github.com/rtomayko/rdiscount" class="external text" href="https://github.com/rtomayko/rdiscount" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Redcarpet </td>        <td>Ruby </td>        <td>Binding </td>        <td>Ruby binding for Sundown </td>        <td><a title="https://github.com/vmg/redcarpet" class="external text" href="https://github.com/vmg/redcarpet" rel="noopener" target="_blank">github</a> </td>     </tr>      <tr>       <td>Knockoff </td>        <td>Scala </td>        <td>- </td>        <td>- </td>        <td><a title="http://tristanhunt.com/projects/knockoff" class="external text" href="http://tristanhunt.com/projects/knockoff" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>Actuarius </td>        <td>Scala </td>        <td>- </td>        <td>- </td>        <td><a title="http://henkelmann.eu/projects/actuarius/" class="external text" href="http://henkelmann.eu/projects/actuarius/" rel="noopener" target="_blank">site</a> </td>     </tr>      <tr>       <td>Lowdown </td>        <td>Chicken Scheme </td>        <td>Parser library (egg) </td>        <td>Can emit SXML </td>        <td><a title="http://wiki.call-cc.org/eggref/4/lowdown" class="external text" href="http://wiki.call-cc.org/eggref/4/lowdown" rel="noopener" target="_blank">chicken wiki</a>, <a title="https://bitbucket.org/DerGuteMoritz/lowdown" class="external text" href="https://bitbucket.org/DerGuteMoritz/lowdown" rel="noopener" target="_blank">Bitbucket</a> </td>     </tr>      <tr>       <td>markdown.bash </td>        <td>Bash </td>        <td>Converter </td>        <td>Markdown to Html </td>        <td><a title="https://github.com/chadbraunduin/markdown.bash" class="external text" href="https://github.com/chadbraunduin/markdown.bash" rel="noopener" target="_blank">Github</a> </td>     </tr>   </tbody></table></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;从&lt;a href=&quot;http://www.w3.org/community/markdown/wiki/MarkdownImplementations&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;MarkdownImplementations - Mar
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>Windows Live Writer的Markdown插件</title>
    <link href="http://fresky.github.io/2013/07/16/windows-live-writer-plugin-markdowninlivewriter/"/>
    <id>http://fresky.github.io/2013/07/16/windows-live-writer-plugin-markdowninlivewriter/</id>
    <published>2013-07-15T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.270Z</updated>
    
    <content type="html"><![CDATA[<p></p><p>我新写了一个Windows Live Writer的Markdown插件，代码放在了<a href="https://github.com/fresky/MarkdownInLiveWriter" target="_blank" rel="noopener">github</a>上。</p><p></p><p></p><h3>介绍</h3><p></p><p></p><p>这个项目是一个<a href="http://windows.microsoft.com/en-us/windows-live/essentials-other#essentials=overviewother" target="_blank" rel="noopener">Windows Live Writer</a>的Markdown插件。有了这个插件，你可以用Markdown来写你的blog，同时可以看到实时的预览。</p><p></p><p></p><p>这个插件的Markdown处理器使用了<a href="http://code.google.com/p/markdownsharp/" target="_blank" rel="noopener">markdownsharp</a>，它是一个开源的Markdown处理器的C#实现。</p><p></p><p></p><h3>安装</h3><p></p><p></p><p>一下两种方法都行。</p><p></p><p></p><p>1. 下载 <a href="https://github.com/fresky/MarkdownInLiveWriter/blob/master/MarkdownInLiveWriter.dll" target="_blank" rel="noopener">MarkdownInLiveWriter.dll</a>，然后放到 [WindowsLiveWriterPath]\Plugins\目录下。</p><p></p><p></p><p>2. 下载 <a href="https://github.com/fresky/MarkdownInLiveWriter/blob/master/MarkdownInLiveWriter.msi" target="_blank" rel="noopener">MarkdownInLiveWriter.msi</a>，然后运行安装文件。</p><p></p><p></p><h3>使用</h3><p></p><ol><br><li>在Windows Live Writer中点击<strong>插入</strong>菜单，然后点击<strong>Insert Markdown</strong>。</li><br><li>在弹出来的控件左边写Markdown，然后右边就会实时的预览。</li><br><li>也可以点击右下角的<strong>Source</strong>，来看生成的html代码。</li><br><li>点击<strong>Insert</strong>来插入到Windows Live Writer中。</li><br></ol><br><p>参见下图：</p><br><p><a href="http://images.cnitblog.com/blog/163228/201307/16195559-3bb304db41184f86a4d3480955a190e1.png" target="_blank" rel="noopener"><img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="image" src="http://images.cnitblog.com/blog/163228/201307/16195601-f2374f822814416fbd5698a31401e702.png" alt="image" width="733" height="514" border="0"></a></p><br><h3>下一步工作</h3><br><ol><br><li>更好的支持代码高亮，把我的另一个Windows Live Writer的代码语法高亮的插件<a href="/2013/06/09/codeinlivewriter-code-syntax-highlight-plugin-for-windows-live-writer/">CodeInLiveWriter</a>集成进来。</li><br></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;我新写了一个Windows Live Writer的Markdown插件，代码放在了&lt;a href=&quot;https://github.com/fresky/MarkdownInLiveWriter&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>在Windows上安装私有GitHub的开源替代-GitLab</title>
    <link href="http://fresky.github.io/2013/07/16/how-to-install-gitlab-in-windows-github-open-source-alternative/"/>
    <id>http://fresky.github.io/2013/07/16/how-to-install-gitlab-in-windows-github-open-source-alternative/</id>
    <published>2013-07-15T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.270Z</updated>
    
    <content type="html"><![CDATA[<p>在我之前的一篇博客中介绍过<a href="/2013/06/08/gitlab-opensource-github-clone/">GitLab: 开源免费的git管理工具</a>，今天说一下怎么在windows安装GitLab。</p><p><a href="http://bitnami.com/" target="_blank" rel="noopener">BitNami</a>可以很容易的帮助你安装开源应用，和Helicon Zoo类似，我之前介绍过如果用Helicon Zoo很容易的<a href="/2012/10/25/setup-osqa-in-windows/">用开源的OSQA在Windows上搭建Q&amp;A网站</a>。</p><p>BitNami它提供了一个GitLab的虚拟机<a href="http://bitnami.com/stack/gitlab/virtual-machine" target="_blank" rel="noopener">GitLab Virtual Machines</a>，下载这个虚拟机之后，<a href="https://my.vmware.com/cn/web/vmware/free#desktop_end_user_computing/vmware_player/5_0" target="_blank" rel="noopener">下载 VMware Player 5.0</a>。然后用vmware player打开这个虚拟机就可以了。</p><p>虚拟机运行起来之后会告诉你网站的ip地址和管理员账号和密码，真是一键安装，非常方便。用浏览器访问这个ip地址，就可以看见如下的界面了。</p><p><img src="data:image/png;base64,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" alt width="594" height="234"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在我之前的一篇博客中介绍过&lt;a href=&quot;/2013/06/08/gitlab-opensource-github-clone/&quot;&gt;GitLab: 开源免费的git管理工具&lt;/a&gt;，今天说一下怎么在windows安装GitLab。&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http:
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Github" scheme="http://fresky.github.io/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>微软提供的API的各个版本之间的区别</title>
    <link href="http://fresky.github.io/2013/07/12/api-difference-of-microsoft-apis/"/>
    <id>http://fresky.github.io/2013/07/12/api-difference-of-microsoft-apis/</id>
    <published>2013-07-11T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.269Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://firstfloorsoftware.com/labs/difflists" target="_blank" rel="noopener">First Floor Software</a>这个diff lists非常方便的给出了微软提供的API的各个版本之间的区别，比如下表是.NET 4和.NET 4.5的API变化总结。我们可以看到.NET 4.5多了12个assembly，834个类，88个结构，51个接口。</p><h1 class="page-header">.NET 4             vs             .NET 4.5</h1><table class="table table-hover table-condensed"><thead> <tr><th></th> <th>build</th> <th><div class="text-right">assemblies</div></th> <th><div class="text-right">classes</div></th> <th><div class="text-right">structs</div></th> <th><div class="text-right">interfaces</div></th></tr></thead> <tbody><tr><td><strong>.NET 4</strong></td><td>4.0.30319.1</td><td><div class="text-right">103</div></td><td><div class="text-right">9813</div></td><td><div class="text-right">2011</div></td><td><div class="text-right">853</div></td></tr><tr><td><strong>.NET 4.5</strong></td><td>4.0.30319.17929</td><td><div class="text-right">115</div></td><td><div class="text-right">10647</div></td><td><div class="text-right">2099</div></td><td><div class="text-right">904</div></td></tr><tr><td></td><td></td><td><div class="text-right"><strong>+12</strong></div></td><td><div class="text-right"><strong>+834</strong></div></td><td><div class="text-right"><strong>+88</strong></div></td><td><div class="text-right"><strong>+51</strong></div></td></tr></tbody></table><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://firstfloorsoftware.com/labs/difflists&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;First Floor Software&lt;/a&gt;这个diff lists非常方便的给出了
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>听听Matt Rogish说怎么面试程序员</title>
    <link href="http://fresky.github.io/2013/07/12/how-to-interview-programmer-by-matt-rogish/"/>
    <id>http://fresky.github.io/2013/07/12/how-to-interview-programmer-by-matt-rogish/</id>
    <published>2013-07-11T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.269Z</updated>
    
    <content type="html"><![CDATA[<p></p><p>Google的人力运营高级副总裁Laszlo Bock在一次<a href="http://www.nytimes.com/2013/06/20/business/in-head-hunting-big-data-may-not-be-such-a-big-deal.html?_r=0" target="_blank" rel="noopener">采访</a>中说Google发现在面试程序员时问智力题完全是浪费时间，Matt Rogish在他的这篇博客<a href="http://mattrogish.com/blog/2013/06/26/how-to-interview-programmers/" target="_blank" rel="noopener">How to Interview Programmers - Rogish Reading Writing</a>中有感而发，介绍了他认为正确的面试程序员的方法。</p>  <ul>   <li>先决条件      <ul>       <li>在你雇佣第一个员工之前          <ol>           <li>想好你的企业文化 </li>            <li>让你团队中的每个人都面试应聘者 </li>            <li>确保你的团队中每个人都知道如何面试，制定面试计划和清单。              <ul>               <li>每个人都写下来他要问什么问题，然后大家坐在一起过一下这些问题 </li>                <li>你要从应聘者身上发现什么素质？ </li>                <li>你通过什么手段来发现？ </li>             </ul>           </li>            <li>同一个问题不要问两次 </li>            <li>举办一些模拟面试来提高面试技巧 </li>            <li>让你的程序员先做做面试题，这样让他们能够在面试时得心应手 </li>         </ol>       </li>        <li>在面试过程中          <ol>           <li>保持开放和诚实（比如不要问应聘者你希望的最低薪水是多少，你应该是第一个说要提供多少薪水股份的人。你应该有一个定义好的技术阶梯来描述你的公司中程序员的职业规划） </li>            <li>面试要因人而异，根据应聘者的背景进行剪裁 </li>            <li>不要诱导证人（比如不要问你喜欢TDD还是简单粗暴直接开始） </li>            <li>问<a href="http://www.strategicdirectionsconference.com/sites/default/files/Abbreviated%20Topgrading%20Interview%20Guide.pdf" target="_blank" rel="noopener">topgrading</a>风格的问题 </li>            <li>保持好的形象（应聘者也在面试你） </li>            <li>午饭订一个好馆子 </li>         </ol>       </li>        <li>面试之后          <ol>           <li>每个人都要给出意见，要还是不要。更重要的是，要给出理由 </li>            <li>如果你准备给offer，尽快 </li>            <li>如果你不准备给offer，也尽快 </li>         </ol>       </li>     </ul>   </li>    <li>现场面试前 </li>    <ul>     <li>初始电话面试（30-45分钟），主要是问一些基本问题，过滤掉你明显不会招的人。说明你的企业文化，让你的应聘者了解你的企业现状。 </li>      <li>第二轮电话面试（1-2小时），主要是确认应聘者会不会编程：）</li>   </ul>    <li>现场面试</li>    <ul>     <li>飞头等舱等。。。如果应聘者够牛，应该会同时拿多个offer，如果你在面试的一开始就招待好他会更容易雇到他</li>      <li>一天的日程</li>      <ol>       <li>参观办公室，看看休息区的高级咖啡机</li>        <li>介绍今天的流程</li>        <li>一些从工作中提取的或者和工作相关编程的题目（难度递增）</li>        <ul>         <li>题目不能太难（三周也搞不定），也不能太简单（靠记忆就能答出来）。开卷，能用google和stackoverflow</li>          <li>在一开始就问问应聘者熟悉什么开发环境，帮他弄一个顺手的机器。或者让他带自己的笔记本</li>          <li>最好有个题库。可以参考<a href="http://rubyquiz.strd6.com/" target="_blank" rel="noopener">RubyQuiz</a> 或者 <a href="http://www.codequizzes.com/" target="_blank" rel="noopener">CodeQuizzes</a>。</li>          <li>目的是考察应聘者能解决一个真是世界的问题</li>       </ul>        <li>午饭，邀请团队所有人都参加，问一些开放式的问题</li>        <li>结对编程</li>        <ul>         <li>如果签了保密协议，可以是公司的真实代码</li>          <li>如果没签，就找个你在用的开源软件，然后一起价格新功能</li>       </ul>        <li>送回酒店（不是机场，都累了一天了），如果预算允许的话，让人呆整个周末</li>     </ol>      <li>最好定一个月的试用合约，然后决定要不要给offer。</li>   </ul> </ul><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;Google的人力运营高级副总裁Laszlo Bock在一次&lt;a href=&quot;http://www.nytimes.com/2013/06/20/business/in-head-hunting-big-data-may-not-be-such-a-big-d
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>推荐一个markdown编辑器-MarkdownPad</title>
    <link href="http://fresky.github.io/2013/07/12/markdown-editor-markdownpad/"/>
    <id>http://fresky.github.io/2013/07/12/markdown-editor-markdownpad/</id>
    <published>2013-07-11T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.269Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://markdownpad.com/" target="_blank" rel="noopener">MarkdownPad - The Markdown Editor for Windows</a>是一个很不错的windows下的markdown的编辑器，对于我这种总是记不住各种语法的人来说，非常方便。</p><p>免费的版本已经很不错了。如果升级到pro可以支持GitHub Flavored Markdown。</p><blockquote><img src="http://markdownpad.com/img/markdownpad2.png" alt width="941" height="674"><br></blockquote><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://markdownpad.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;MarkdownPad - The Markdown Editor for Windows&lt;/a&gt;是一个很不错的windows下的
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>用Autohotkey让powerpoint幻灯片一直播放</title>
    <link href="http://fresky.github.io/2013/07/10/make-slides-show-forever-by-autohotkey/"/>
    <id>http://fresky.github.io/2013/07/10/make-slides-show-forever-by-autohotkey/</id>
    <published>2013-07-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.269Z</updated>
    
    <content type="html"><![CDATA[<p>有台电脑专门接了个大电视循环播放一个幻灯片，但是有时候会弹出一些对话框，比如windows要更新之类的，这样的话powerpoint就不是active的进城了，这样幻灯片就会停下来，还需要人去手动点一下，非常麻烦。</p><p>可以用<a href="http://www.autohotkey.com/" target="_blank" rel="noopener">autohotkey</a>的脚本来解决这个问题，安装完autohotkey之后，写一个新的脚本，内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SetTitleMatchMode 1</span><br><span class="line">IfWinExist PowerPoint Slide Show</span><br><span class="line">WinActivate</span><br><span class="line">;else</span><br><span class="line">;Run &quot;powerpointpath/POWERPNT.EXE&quot; /s &quot;slidespath&quot;</span><br><span class="line">return</span><br></pre></td></tr></table></figure><p>这个脚本用到了autohotkey的三个命令：</p><p><a href="http://www.autohotkey.com/docs/commands/SetTitleMatchMode.htm" target="_blank" rel="noopener">SetTitleMatchMode</a>，设置窗口标题的匹配模式，这里设为1意思是窗口的标题以给定字符串开始。</p><p><a href="http://www.autohotkey.com/docs/commands/IfWinExist.htm" target="_blank" rel="noopener">IfWinExist / IfWinNotExist</a>，判断正在播放幻灯片的窗口是否存在。</p><p><a href="http://www.autohotkey.com/docs/commands/WinActivate.htm" target="_blank" rel="noopener">WinActivate</a>，如果存在，就激活这个窗口，这样幻灯片就会继续播放了。</p><p>当然，也可以在上面的那个else里面写上如果这个窗口不存在就运行powerpoint，并且播放幻灯片。从<a href="http://office.microsoft.com/en-us/powerpoint-help/command-line-switches-for-powerpoint-2007-and-the-powerpoint-viewer-2007-HA010153889.aspx" target="_blank" rel="noopener">Command-line switches for PowerPoint</a>可以找到powerpnt.exe的命令行参数，给个/s表明要播放幻灯片。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;有台电脑专门接了个大电视循环播放一个幻灯片，但是有时候会弹出一些对话框，比如windows要更新之类的，这样的话powerpoint就不是active的进城了，这样幻灯片就会停下来，还需要人去手动点一下，非常麻烦。&lt;/p&gt;
&lt;p&gt;可以用&lt;a href=&quot;http://www
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>推荐一个网站——聚合了微软的文件的Knowledge Base下载地址</title>
    <link href="http://fresky.github.io/2013/07/09/where-to-download-different-versions-of-microsoft-files/"/>
    <id>http://fresky.github.io/2013/07/09/where-to-download-different-versions-of-microsoft-files/</id>
    <published>2013-07-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.269Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.mskbfiles.com/" target="_blank" rel="noopener">Microsoft Files</a>是一个微软的文件数据库，从这里可以很方便的找到各个文件版本对应的下载链接。</p><p>比如今天debug需要找一个特定版本的sos.dll，从这个网站就很方便的给出了这个sos.dll所在的patch和下载地址，还是很方便的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.mskbfiles.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Microsoft Files&lt;/a&gt;是一个微软的文件数据库，从这里可以很方便的找到各个文件版本对应的下载链接。&lt;/p&gt;&lt;p&gt;比如今天deb
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>C#中5种timer的比较</title>
    <link href="http://fresky.github.io/2013/07/09/compare-of-5-timers-in-csharp/"/>
    <id>http://fresky.github.io/2013/07/09/compare-of-5-timers-in-csharp/</id>
    <published>2013-07-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.268Z</updated>
    
    <content type="html"><![CDATA[<p></p><p>C#中有5个timer，它们的主要区别如下：</p><p></p><p><ol></ol></p><p><li>System.Threading.Timer&nbsp; 在线程池启动一个后台任务。我前段时间写过一个关于timer的垃圾回收的需要注意一下，参见<a href="/2013/06/20/where-is-my-timer-csharp-gc/">谁动了我的timer？</a>。</li></p><p><li>System.Windows.Forms.Timer&nbsp; 告诉windows把一个计时器和调用它的线程(UI线程)关联起来，通过往UI线程的消息队列里放一个WM_TIMER的消息来实现，所以它的callback一定是在UI线程调用的，不存在多线程调用的问题。</li></p><p><li>System.Windows.Threading.DispatcherTimer 用在WPF和Silverlight中，对应于System.Windows.Forms.Timer。</li></p><p><li>Windows.UI.Xaml.Dispatchertimer 用在windows store app中，对应于System.Windows.Forms.Timer。</li></p><p><li>System.Timers.Timer 包装了一下System.Threading.Timer，使它有了和System.Windows.Forms.Timer类似的接口，而且也能在visual studio的toolbox designer里找到。它也是在线程池中执行，但是如果你是在visual studio的designer中使用它，visual studio会自动把它所在的control设为这个timer的SynchronizingObject，这样就会保证callback会在UI线程调用了。Jeffrey Richter不建议使用它，建议直接用System.Threading.Timer。这个timer也有个坑，参见<a href="/2011/06/23/dot-net-2-timer-elapsed-event-will-catch-all-exception-for-you/">.NET 2.0的Timer elapsed event 会自动catch住所有的exception</a>。</li><br></p><p></p><p><a href="http://msdn.microsoft.com/en-us/magazine/cc164015.aspx" target="_blank" rel="noopener">Comparing the Timer Classes in the .NET Framework Class Library</a>也比较了3中timer（System.Threading.Timer ，System.Windows.Forms.Timer和System.Timers.Timer），并且画了个如下的表格。</p><p></p><table style="width: 686px;" border="0" cellspacing="0" cellpadding="0"><colgroup><col style="mso-width-source: userset; mso-width-alt: 9216; width: 189pt;" width="252"> <col style="mso-width-source: userset; mso-width-alt: 6290; width: 129pt;" width="172"> <col style="mso-width-source: userset; mso-width-alt: 4717; width: 97pt;" width="129"> <col style="mso-width-source: userset; mso-width-alt: 4864; width: 100pt;" width="133"> </colgroup><br><tbody><br><tr style="height: 15.0pt;"><br><td id="th113923680000" class="xl65" style="height: 15.0pt; width: 189pt; font-size: 11.0pt; color: #cce8cf; font-weight: bold; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: .5pt solid #9BC2E6; background: #5B9BD5; mso-pattern: #5B9BD5 none;" width="252" height="20">&nbsp;</td><br><td id="th113923680001" class="xl65" style="width: 129pt; font-size: 11.0pt; color: #cce8cf; font-weight: bold; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #5B9BD5; mso-pattern: #5B9BD5 none;" width="172">System.Windows.Forms</td><br><td id="th113923680002" class="xl65" style="width: 97pt; font-size: 11.0pt; color: #cce8cf; font-weight: bold; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #5B9BD5; mso-pattern: #5B9BD5 none;" width="129">System.Timers</td><br><td id="th113923680003" class="xl65" style="width: 100pt; font-size: 11.0pt; color: #cce8cf; font-weight: bold; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: .5pt solid #9BC2E6; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #5B9BD5; mso-pattern: #5B9BD5 none;" width="133">System.Threading</td><br></tr><br><tr style="height: 15.0pt;"><br><td class="xl66" style="height: 15.0pt; width: 189pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: .5pt solid #9BC2E6; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="252" height="20">Timer   event runs on what thread?</td><br><td class="xl66" style="width: 129pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="172">UI thread</td><br><td class="xl66" style="width: 97pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="129">UI or worker thread</td><br><td class="xl66" style="width: 100pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: .5pt solid #9BC2E6; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="133">Worker thread</td><br></tr><br><tr style="height: 15.0pt;"><br><td class="xl66" style="height: 15.0pt; width: 189pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: .5pt solid #9BC2E6;" width="252" height="20">Instances are thread safe?</td><br><td class="xl66" style="width: 129pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none;" width="172">No</td><br><td class="xl66" style="width: 97pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none;" width="129">Yes</td><br><td class="xl66" style="width: 100pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: .5pt solid #9BC2E6; border-bottom: .5pt solid #9BC2E6; border-left: none;" width="133">No</td><br></tr><br><tr style="height: 15.0pt;"><br><td class="xl66" style="height: 15.0pt; width: 189pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: .5pt solid #9BC2E6; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="252" height="20">Familiar/intuitive   object model?</td><br><td class="xl66" style="width: 129pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="172">Yes</td><br><td class="xl66" style="width: 97pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="129">Yes</td><br><td class="xl66" style="width: 100pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: .5pt solid #9BC2E6; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="133">No</td><br></tr><br><tr style="height: 15.0pt;"><br><td class="xl66" style="height: 15.0pt; width: 189pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: .5pt solid #9BC2E6;" width="252" height="20">Requires Windows Forms?</td><br><td class="xl66" style="width: 129pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none;" width="172">Yes</td><br><td class="xl66" style="width: 97pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none;" width="129">No</td><br><td class="xl66" style="width: 100pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: .5pt solid #9BC2E6; border-bottom: .5pt solid #9BC2E6; border-left: none;" width="133">No</td><br></tr><br><tr style="height: 15.0pt;"><br><td class="xl66" style="height: 15.0pt; width: 189pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: .5pt solid #9BC2E6; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="252" height="20">Metronome-quality   beat?</td><br><td class="xl66" style="width: 129pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="172">No</td><br><td class="xl66" style="width: 97pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="129">Yes<em></em></td><br><td class="xl66" style="width: 100pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: .5pt solid #9BC2E6; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="133">Yes</td><br></tr><br><tr style="height: 15.0pt;"><br><td class="xl66" style="height: 15.0pt; width: 189pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: .5pt solid #9BC2E6;" width="252" height="20">Timer event supports state object?</td><br><td class="xl66" style="width: 129pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none;" width="172">No</td><br><td class="xl66" style="width: 97pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none;" width="129">No</td><br><td class="xl66" style="width: 100pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: .5pt solid #9BC2E6; border-bottom: .5pt solid #9BC2E6; border-left: none;" width="133">Yes</td><br></tr><br><tr style="height: 15.0pt;"><br><td class="xl66" style="height: 15.0pt; width: 189pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: .5pt solid #9BC2E6; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="252" height="20">Initial   timer event can be scheduled?</td><br><td class="xl66" style="width: 129pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="172">No</td><br><td class="xl66" style="width: 97pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="129">No</td><br><td class="xl66" style="width: 100pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: .5pt solid #9BC2E6; border-bottom: .5pt solid #9BC2E6; border-left: none; background: #DDEBF7; mso-pattern: #DDEBF7 none;" width="133">Yes</td><br></tr><br><tr style="height: 15.0pt;"><br><td class="xl66" style="height: 15.0pt; width: 189pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: .5pt solid #9BC2E6;" width="252" height="20">Class supports inheritance?</td><br><td class="xl66" style="width: 129pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none;" width="172">Yes</td><br><td class="xl66" style="width: 97pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: none; border-bottom: .5pt solid #9BC2E6; border-left: none;" width="129">Yes</td><br><td class="xl66" style="width: 100pt; font-size: 11.0pt; color: black; font-weight: 400; text-decoration: none; text-underline-style: none; text-line-through: none; font-family: Calibri; border-top: .5pt solid #9BC2E6; border-right: .5pt solid #9BC2E6; border-bottom: .5pt solid #9BC2E6; border-left: none;" width="133">No</td><br></tr><br><tr style="height: 15.0pt;"><br><td class="xl66" style="height: 15.0pt; width: 515pt;" colspan="4" width="686" height="20">* Depending on the availability of system resources   (for example, worker threads)</td><br></tr><br></tbody><br></table><br><table style="width: 1px; height: 1px;" border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr style="height: 15.0pt;"><br><td class="xl66" style="height: 15.0pt; width: 495pt;" colspan="4" width="660" height="20">&nbsp;</td><br></tr><br></tbody><br></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;C#中有5个timer，它们的主要区别如下：&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;ol&gt;&lt;/ol&gt;&lt;/p&gt;
&lt;p&gt;&lt;li&gt;System.Threading.Timer&amp;nbsp; 在线程池启动一个后台任务。我前段时间写过一个关于timer的垃圾回收的需要注意一下，参
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>一个可视化的retrospective网站</title>
    <link href="http://fresky.github.io/2013/07/08/visual-website-for-retrospective/"/>
    <id>http://fresky.github.io/2013/07/08/visual-website-for-retrospective/</id>
    <published>2013-07-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.268Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://ideaboardz.com/" target="_blank" rel="noopener">IdeaBoardz - Brainstorm, Retrospect, Collaborate</a>是一个可视化的retrospective，brainstorm的网站，比较简单易用，可以导出pdf和excel。可以试试。</p><p>下面的贴图来自网站首页。</p><p><img src="http://ideaboardz.com/images/screenshot.png" alt="screen-shot" width="716" height="530"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://ideaboardz.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;IdeaBoardz - Brainstorm, Retrospect, Collaborate&lt;/a&gt;是一个可视化的retrospective，
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>用code workshop取代code review</title>
    <link href="http://fresky.github.io/2013/07/08/code-workshop-instead-of-code-review/"/>
    <id>http://fresky.github.io/2013/07/08/code-workshop-instead-of-code-review/</id>
    <published>2013-07-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.268Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://tech.blog.box.com/2013/05/effective-learning-through-code-workshops/" target="_blank" rel="noopener">Box Tech Blog &raquo; Effective learning through code workshops</a>介绍了Box如何用code workshop而不是code review的形式来改善代码质量。</p><p>code review有2个显著的缺点：</p><ol><li>reviewer现场看代码会带来浪费（有人快，有人慢，需要同步）。</li><li>被review的人容易有反驳心理，影响学习效果。</li></ol><p>作者提出的code workshop的方法有以下几个要点：</p><ol><li>制定一个审查人，他必须选择不是他自己写的代码来审查。</li><li>审查人审查所有的代码，而不是diff（这很重要！！）。这样大家就能学习审查的代码中的全部逻辑。</li><li>审查人要提前准备，阅读代码，记笔记。</li><li>workshop中所有人都关掉笔记本（除了审查人和记录员）。</li><li>所有参会人员一起看代码然后提修改意见。</li><li>审查人不能提到人名，目的是审查代码，不是人。所有成员都对代码质量负责。</li><li>审查人鼓励大家讨论，寻找问题模式，提炼编码规范。</li></ol><p>我自己也参加过类似的code workshop，但是我们是所有人都要提前看代码，我觉得这样效果更好。</p><ol> </ol><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://tech.blog.box.com/2013/05/effective-learning-through-code-workshops/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Box Tech Blog
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>TPL中的task并不是thread</title>
    <link href="http://fresky.github.io/2013/07/08/tasks-are-not-threads/"/>
    <id>http://fresky.github.io/2013/07/08/tasks-are-not-threads/</id>
    <published>2013-07-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.268Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://blogs.msdn.com/b/benwilli/archive/2013/04/24/tasks-are-not-threads.aspx" target="_blank" rel="noopener">Tasks are not Threads - The Brain Dump</a>用了一个非常简单直观的例子说明了task和thread并不是一回事（尽管你调用Task.Run一般会在线程池上启一个线程帮你做些事情）。</p>  <p>假设有个UI，我们有2个按钮，开始和结束。代码如下：</p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">async</span> <span class="keyword">void</span> <span class="title">bttnStart_Click</span>(<span class="params"><span class="keyword">object</span> sender, RoutedEventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    MessageBox.Show(<span class="string">"Looking for the time"</span>);</span><br><span class="line">    DateTime now = <span class="keyword">await</span> GetCurrentTimeAsync();</span><br><span class="line">    MessageBox.Show(<span class="string">"It is now"</span> + now.ToString());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">bttnEnd_Click</span>(<span class="params"><span class="keyword">object</span> sender, RoutedEventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (_tsc != <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        _tsc.SetResult(DateTime.Now);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TaskCompletionSource&lt;DateTime&gt; _tsc;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Task&lt;DateTime&gt; <span class="title">GetCurrentTimeAsync</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    _tsc = <span class="keyword">new</span> TaskCompletionSource&lt;DateTime&gt;();</span><br><span class="line">    <span class="keyword">return</span> _tsc.Task;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>从上面的代码我们可以看到，这个task的开始于用户点击“开始”按钮，介绍于用户点击“结束”按钮。task其实在等用户的操作，同样的，task也可以在等网络，内存或者任何别的东西，不一定是线程。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://blogs.msdn.com/b/benwilli/archive/2013/04/24/tasks-are-not-threads.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Tasks are not Thr
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>15个影响项目进度的路障</title>
    <link href="http://fresky.github.io/2013/07/07/15-workplace-barriers-better-code/"/>
    <id>http://fresky.github.io/2013/07/07/15-workplace-barriers-better-code/</id>
    <published>2013-07-06T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.267Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.infoworld.com/d/application-development/15-workplace-barriers-better-code-220975" target="_blank" rel="noopener">15 workplace barriers to better code | Application Development - InfoWorld</a>列出了15个影响项目进度的路障：</p><br><ol><br><li>会议</li><br><li>回复所有的邮件</li><br><li>试图测量生产力</li><br><li>&ldquo;首席女主角&rdquo;程序员（经常抱怨之前写下这些代码的人是傻子）</li><br><li>&rdquo;等会儿再改正&ldquo;的想法（技术债务）</li><br><li>不懂技术的老板</li><br><li>程序员老板</li><br><li>能说会道的程序员（people skill强过programming skill）</li><br><li>自私的程序员</li><br><li>贫乏的文档</li><br><li>过分热衷文档</li><br><li>容易分散注意力的环境</li><br><li><span class="web-item">组织文化的适应性</span></li><br><li><span class="web-item">坚持过时的技术</span></li><br><li><span class="web-item">热衷最新的技术</span></li><br></ol><br><p>其实很多都是一个度的问题，过多还是过少都是走火入魔：）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.infoworld.com/d/application-development/15-workplace-barriers-better-code-220975&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;15 
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>14种程序员性格</title>
    <link href="http://fresky.github.io/2013/07/07/14-characters-of-coder/"/>
    <id>http://fresky.github.io/2013/07/07/14-characters-of-coder/</id>
    <published>2013-07-06T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.267Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://www.infoworld.com/d/application-development/the-14-characters-you-meet-coder-218142" target="_blank" rel="noopener">The 14 characters you meet as a coder | Application Development - InfoWorld</a>列举了14中常见的程序员性格：</p><p></p><ol><br><li>首席女歌手&ldquo;程序员（自己最牛）</li><br><li>摇滚明星</li><br><li>不情愿的程序员</li><br><li>神圣的牧师</li><br><li>流程大拿</li><br><li>危险边缘的冠军（神秘的琐事的专家）</li><br><li>潮人黑客</li><br><li>宇航员架构师（热衷复杂的架构）</li><br><li>不安全的传道者</li><br><li>代码诗人（追求代码的极致美学，热衷设计模式）</li><br><li>云的狂热者</li><br><li>传统主义者</li><br><li>专业的传统主义者</li><br><li>所有权牧师（不是微软、IBM等大公司写的东西就都是垃圾）</li><br></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://www.infoworld.com/d/application-development/the-14-characters-you-meet-coder-218142&quot; target=&quot;_blank&quot; rel=&quot;noopener
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>如何开源你的库</title>
    <link href="http://fresky.github.io/2013/07/06/how-to-opensource-your-code/"/>
    <id>http://fresky.github.io/2013/07/06/how-to-opensource-your-code/</id>
    <published>2013-07-05T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.267Z</updated>
    
    <content type="html"><![CDATA[<p></p><p>我之前的博客中介绍过两篇如何做好开源软件的文章，<a href="/2013/06/21/how-to-spread-your-code/">如何传播你的代码</a>，<a href="/2013/01/05/how-to-start-open-source-project/">怎么做一个开源项目</a>。</p><p></p><p></p><p>今天又看到一篇不错的文章，<a href="http://williamdurand.fr/2013/07/04/on-open-sourcing-libraries/" target="_blank" rel="noopener">On Open Sourcing Libraries | William DURAND</a>。</p><p></p><p></p><p>摘要如下：</p><p></p><p></p><p><strong><em>你的项目：</em></strong></p><p></p><ol><br><li>必须有一个README文档，包含名字，描述，还有<strong>使用方法</strong>，<strong>安装说明</strong>，<strong>如何参与</strong>，<strong>测试</strong>和<strong>License</strong>。</li><br><li>必须有一个可见的license文件。</li><br><li>必须经过测试。</li><br><li>必须和你的社区习惯保持一致</li><br></ol><br><p><em><strong>你：</strong></em></p><br><ol><br><li>需要反馈。</li><br><li>必须友好，热情。</li><br><li>应该让别人加入。</li><br></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;我之前的博客中介绍过两篇如何做好开源软件的文章，&lt;a href=&quot;/2013/06/21/how-to-spread-your-code/&quot;&gt;如何传播你的代码&lt;/a&gt;，&lt;a href=&quot;/2013/01/05/how-to-start-open-source-
      
    
    </summary>
    
    
      <category term="Opensource" scheme="http://fresky.github.io/tags/Opensource/"/>
    
  </entry>
  
  <entry>
    <title>tl;drLegal ——开源软件license的搜索引擎</title>
    <link href="http://fresky.github.io/2013/07/06/tldrlegal-opensource-license-search-engine/"/>
    <id>http://fresky.github.io/2013/07/06/tldrlegal-opensource-license-search-engine/</id>
    <published>2013-07-05T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.267Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://www.tldrlegal.com/" target="_blank" rel="noopener">TLDRLegal - Open Source Licenses Explained in Plain English</a>可以很方便查询各个开源license的总结（能做什么，不能做什么），还能比较不同的license，非常方便。</p><p></p><p></p><p>对于经常需要检查开源软件能不能用在自己的项目中的人来说，必须放到收藏夹啊：）</p><p></p><p></p><p>下面贴一个用的最多的开源license列表：（来源是<a href="http://osrc.blackducksoftware.com/data/licenses/）" target="_blank" rel="noopener">http://osrc.blackducksoftware.com/data/licenses/）</a></p><p></p><table style="width: 480px;" border="1" cellspacing="1" cellpadding="3"><br><tbody><br><tr><br><td bgcolor="#0161ad"><strong><span style="color: #ffffff;">Rank</span></strong></td><br><td bgcolor="#0161ad"><strong><span style="color: #ffffff;">License</span></strong></td><br><td bgcolor="#0161ad"><strong><span style="color: #ffffff;">%</span></strong></td><br></tr><br><tr><br><td>1.</td><br><td><a href="http://www.gnu.org/licenses/gpl-2.0.html" target="_blank">GNU General Public License (GPL) 2.0</a></td><br><td>32.65%</td><br></tr><br><tr><br><td>2.</td><br><td><a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License 2.0</a></td><br><td>12.84%</td><br></tr><br><tr><br><td>3.</td><br><td><a href="http://www.gnu.org/licenses/gpl-3.0.html" target="_blank">GNU General Public License (GPL) 3.0</a></td><br><td>11.62%</td><br></tr><br><tr><br><td>4.</td><br><td><a href="http://www.opensource.org/licenses/mit-license.php" target="_blank">MIT License</a></td><br><td>11.28%</td><br></tr><br><tr><br><td>5.</td><br><td><a href="http://www.opensource.org/licenses/bsd-license.php" target="_blank">BSD License 2.0</a></td><br><td>6.83%</td><br></tr><br><tr><br><td>6.</td><br><td><a href="http://www.opensource.org/licenses/artistic-license.php" target="_blank">Artistic License (Perl)</a></td><br><td>6.27%</td><br></tr><br><tr><br><td>7.</td><br><td><a href="http://www.gnu.org/licenses/lgpl-2.1.html" target="_blank">GNU Lesser General Public License (LGPL) 2.1</a></td><br><td>6.19%</td><br></tr><br><tr><br><td>8.</td><br><td><a href="http://www.gnu.org/licenses/lgpl-3.0.html" target="_blank">GNU Lesser General Public License (LGPL) 3.0</a></td><br><td>2.62%</td><br></tr><br><tr><br><td>9.</td><br><td><a href="http://www.eclipse.org/legal/epl-v10.html" target="_blank">Eclipse Public License (EPL)</a></td><br><td>1.61%</td><br></tr><br><tr><br><td>10.</td><br><td><a href="http://www.codeproject.com/info/cpol10.aspx" target="_blank">Code Project Open 1.02 License</a></td><br><td>1.33%</td><br></tr><br><tr><br><td>11.</td><br><td>Microsoft Public License</td><br><td>1.32%</td><br></tr><br><tr><br><td>12.</td><br><td><a href="http://www.mozilla.org/MPL/MPL-1.1.html" target="_blank">Mozilla Public License (MPL) 1.1</a></td><br><td>1.08%</td><br></tr><br><tr><br><td>13.</td><br><td><a href="http://www.opensource.org/licenses/cddl1.php" target="_blank">Common Development and Distribution License (CDDL)</a></td><br><td>0.31%</td><br></tr><br><tr><br><td>14.</td><br><td>BSD 2-clause “Simplified” or “FreeBSD” License</td><br><td>0.30%</td><br></tr><br><tr><br><td>15.</td><br><td><a href="http://www.opensource.org/licenses/cpl1.0.php" target="_blank">Common Public License (CPL)</a></td><br><td>0.26%</td><br></tr><br><tr><br><td>16.</td><br><td><a href="http://www.opensource.org/licenses/zlib-license.php" target="_blank">zlib/libpng License</a></td><br><td>0.23%</td><br></tr><br><tr><br><td>17.</td><br><td><a href="http://www.opensource.org/licenses/academic.php" target="_blank">Academic Free License</a></td><br><td>0.20%</td><br></tr><br><tr><br><td>18.</td><br><td>GNU Affero GPL v3</td><br><td>0.16%</td><br></tr><br><tr><br><td>19.</td><br><td>Microsoft Reciprocal License (Ms-RL)</td><br><td>0.14%</td><br></tr><br><tr><br><td>20.</td><br><td><a href="http://www.opensource.org/licenses/osl-3.0.php" target="_blank">Open Software License (OSL)</a></td><br><td>0.14%</td><br></tr><br></tbody><br></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://www.tldrlegal.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;TLDRLegal - Open Source Licenses Explained in Plain English&lt;/a&gt;
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
      <category term="Opensource" scheme="http://fresky.github.io/tags/Opensource/"/>
    
  </entry>
  
  <entry>
    <title>google API的.NET库</title>
    <link href="http://fresky.github.io/2013/07/04/dot-net-library-of-google-api/"/>
    <id>http://fresky.github.io/2013/07/04/dot-net-library-of-google-api/</id>
    <published>2013-07-03T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.266Z</updated>
    
    <content type="html"><![CDATA[<p></p><p>Goolge发布了一个新的google API .NET库，是一个Portable Class Library，所以无论是.NET，WinTRy，Windows Phone或者Silverlight都能用。</p><p></p><p></p><p><a href="http://www.infoq.com/news/2013/07/Google-API-PCL" target="_blank" rel="noopener">Portable Class Libraries for Google APIs</a></p><p></p><blockquote><br><ul><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#APIs_Discovery_Service" target="_blank" rel="noopener">APIs Discovery Service</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Ad_Exchange_Buyer_API" target="_blank" rel="noopener">Ad Exchange Buyer API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Ad_Exchange_Seller_API" target="_blank" rel="noopener">Ad Exchange Seller API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#AdSense_Host_API" target="_blank" rel="noopener">AdSense Host API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#AdSense_Management_API" target="_blank" rel="noopener">AdSense Management API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Admin_Reports_API" target="_blank" rel="noopener">Admin Reports API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#BigQuery_API" target="_blank" rel="noopener">BigQuery API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Blogger_API" target="_blank" rel="noopener">Blogger API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Books_API" target="_blank" rel="noopener">Books API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Calendar_API" target="_blank" rel="noopener">Calendar API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Cloud_SQL_Administration_API" target="_blank" rel="noopener">Cloud SQL Administration API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Cloud_Storage_API" target="_blank" rel="noopener">Cloud Storage API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Compute_Engine_API" target="_blank" rel="noopener">Compute Engine API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#CustomSearch_API" target="_blank" rel="noopener">CustomSearch API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#DFA_Reporting_API" target="_blank" rel="noopener">DFA Reporting API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Drive_API" target="_blank" rel="noopener">Drive API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Enterprise_Apps_Reseller_API" target="_blank" rel="noopener">Enterprise Apps Reseller API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Enterprise_Audit_API" target="_blank" rel="noopener">Enterprise Audit API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Enterprise_License_Manager_API" target="_blank" rel="noopener">Enterprise License Manager API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Freebase_API" target="_blank" rel="noopener">Freebase API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Fusion_Tables_API" target="_blank" rel="noopener">Fusion Tables API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_Affiliate_Network_API" target="_blank" rel="noopener">Google Affiliate Network API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_Analytics_API" target="_blank" rel="noopener">Google Analytics API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_Civic_Information_API" target="_blank" rel="noopener">Google Civic Information API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_Cloud_Datastore_API" target="_blank" rel="noopener">Google Cloud Datastore API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_Fonts_Developer_API" target="_blank" rel="noopener">Google Fonts Developer API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_Latitude_API" target="_blank" rel="noopener">Google Latitude API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_Maps_Coordinate_API" target="_blank" rel="noopener">Google Maps Coordinate API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_Mirror_API" target="_blank" rel="noopener">Google Mirror API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_OAuth2_API" target="_blank" rel="noopener">Google OAuth2 API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_Play_Android_Developer_API" target="_blank" rel="noopener">Google Play Android Developer API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google_Site_Verification_API" target="_blank" rel="noopener">Google Site Verification API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google+_API" target="_blank" rel="noopener">Google+ API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Groups_Migration_API" target="_blank" rel="noopener">Groups Migration API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Groups_Settings_API" target="_blank" rel="noopener">Groups Settings API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Orkut_API" target="_blank" rel="noopener">Orkut API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Page_Speed_Online_API" target="_blank" rel="noopener">Page Speed Online API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Prediction_API" target="_blank" rel="noopener">Prediction API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Search_API_For_Shopping" target="_blank" rel="noopener">Search API For Shopping</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#TaskQueue_API" target="_blank" rel="noopener">TaskQueue API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Tasks_API" target="_blank" rel="noopener">Tasks API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Translate_API" target="_blank" rel="noopener">Translate API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#URL_Shortener_API" target="_blank" rel="noopener">URL Shortener API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#YouTube_Analytics_API" target="_blank" rel="noopener">YouTube Analytics API</a></li><br><li><a href="http://code.google.com/p/google-api-dotnet-client/wiki/APIs#YouTube_Data_API" target="_blank" rel="noopener">YouTube Data API</a></li><br></ul><br></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;Goolge发布了一个新的google API .NET库，是一个Portable Class Library，所以无论是.NET，WinTRy，Windows Phone或者Silverlight都能用。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a hr
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>.net 4中的pInvokeStackImbalance MDA默认是开启的</title>
    <link href="http://fresky.github.io/2013/07/04/pInvokeStackImbalance-mda-default-is-on-in-dot-net-4/"/>
    <id>http://fresky.github.io/2013/07/04/pInvokeStackImbalance-mda-default-is-on-in-dot-net-4/</id>
    <published>2013-07-03T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.266Z</updated>
    
    <content type="html"><![CDATA[<p>今天把我之前发的一个小工具<a href="/2012/09/10/freeverything-simple-disk-cleanup-tool-based-on-everything/">FreeEverything（基于everything的一个简易磁盘清理工具）</a>升级到了.net framework 4.5，并且去掉了对mvvmlight的依赖。结果在测试运行的时候发现如果用visual studio调试运行，就会触发一个break，显示如下的错误信息。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A call to PInvoke function &apos;SampleMethod&apos; has unbalanced the stack. </span><br><span class="line">This is likely because the managed PInvoke signature does not match </span><br><span class="line">the unmanaged target signature. Check that the calling convention and </span><br><span class="line">parameters of the PInvoke signature match the target unmanaged signature.</span><br></pre></td></tr></table></figure><p>但是在之前的3.5上就没有问题，报错的地方在下面的语句。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EverythingWraper.Everything_Query();</span><br></pre></td></tr></table></figure><p>于是就调查了一下，发现在<a href="http://msdn.microsoft.com/en-us/library/0htdy0k3.aspx" target="_blank" rel="noopener">pInvokeStackImbalance MDA</a>（managed debugging assistant）在.net 3.5中是默认关闭的，如果开启需要到debug-&gt;exception-&gt;mda来打开。但是在.net 4中默认改成了开启，这就解释了为啥在3.5上没问题，但是在4.5上有问题。</p><br><p>如果dllimport时C#中的函数签名和非托管的dll中的函数签名不一致比如参数数目，或者参数大小不对，或者calling convention不对，就会触发visual studio报这个错。</p><br><p>&nbsp;</p><br><p>但是为什么会出这个错误呢？我的dllimport是从<a href="http://support.voidtools.com/everything/Main_Page" target="_blank" rel="noopener"> Everything SDK Wiki</a>上的示例代码考过来的，如下所示：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">DllImport(@<span class="meta-string">"ThirdParty\Everything.dll"</span> )</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">bool</span> <span class="title">Everything_Query</span>(<span class="params"></span>)</span>;</span><br></pre></td></tr></table></figure><p>于是我就又打开了Everything的SDK，看了看源代码，发现其实Everything_Query()是有一个参数的，因为参数不匹配，所以visual studio就报了这个错。修改成如下就没问题了。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">DllImport(@<span class="meta-string">"ThirdParty\Everything.dll"</span> )</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">bool</span> <span class="title">Everything_Query</span>(<span class="params"><span class="keyword">bool</span> bWait</span>)</span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天把我之前发的一个小工具&lt;a href=&quot;/2012/09/10/freeverything-simple-disk-cleanup-tool-based-on-everything/&quot;&gt;FreeEverything（基于everything的一个简易磁盘清理工具）&lt;/a
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>Google Reader的另一个开源的替代品Go Read</title>
    <link href="http://fresky.github.io/2013/07/01/go-read-alternative-to-google-reader/"/>
    <id>http://fresky.github.io/2013/07/01/go-read-alternative-to-google-reader/</id>
    <published>2013-06-30T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.266Z</updated>
    
    <content type="html"><![CDATA[<p>Google Reader到7月1号退休了，于是出现了一批Google Reader的替代品，比如<a href="http://lifehacker.com/google-reader-is-shutting-down-here-are-the-best-alter-5990456" target="_blank" rel="noopener">Google Reader Is Shutting Down; Here Are the Best Alternatives</a>。</p><p>6月26号出现了的<a href="http://www.goread.io/" target="_blank" rel="noopener">go read</a>是另一个Google Reader的替代品，界面非常简洁，而且是开源的，代码在Github上<a href="https://github.com/mjibson/goread" target="_blank" rel="noopener">mjibson/goread</a>。可以看这篇作者的博客来了解它。<a href="http://mattjibson.com/blog/2013/06/26/go-read-open-source-google-reader-clone/" target="_blank" rel="noopener">Go Read: Open-Source Google Reader Clone - Matt Jibson’s Blog</a></p><p>&nbsp;</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Google Reader到7月1号退休了，于是出现了一批Google Reader的替代品，比如&lt;a href=&quot;http://lifehacker.com/google-reader-is-shutting-down-here-are-the-best-alter-59
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>C#中反射接受的字符串需要满足的Backus-Naur Form语法</title>
    <link href="http://fresky.github.io/2013/06/30/csharp-string-for-reflection-need-backus-naur-form/"/>
    <id>http://fresky.github.io/2013/06/30/csharp-string-for-reflection-need-backus-naur-form/</id>
    <published>2013-06-29T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.266Z</updated>
    
    <content type="html"><![CDATA[<p>MSDN的<a href="http://msdn.microsoft.com/en-us/library/yfsftwz6%28v=vs.110%29.aspx" target="_blank" rel="noopener">Specifying Fully Qualified Type Names</a>指明了C#中反射接受的字符串需要满足如下的Backus-Naur Form语法。</p><br><table><br><tbody><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>BNF grammar of fully qualified type names</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>TypeSpec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; ReferenceTypeSpec</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; SimpleTypeSpec</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>ReferenceTypeSpec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; SimpleTypeSpec ‘&amp;’</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>SimpleTypeSpec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; PointerTypeSpec</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; ArrayTypeSpec</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; TypeName</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>PointerTypeSpec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; SimpleTypeSpec ‘<em>‘</em></p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>ArrayTypeSpec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; SimpleTypeSpec ‘[ReflectionDimension]’</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; SimpleTypeSpec ‘[ReflectionEmitDimension]’</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>ReflectionDimension&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; ‘‘</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; ReflectionDimension ‘,’ ReflectionDimension</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; NOTOKEN</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>ReflectionEmitDimension&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; ‘*’</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; Number ‘..’ Number</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; Number ‘&hellip;’</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; ReflectionDimension ‘,’ ReflectionDimension</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; NOTOKEN</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>Number&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; [0-9]+</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>TypeName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; NamespaceTypeName</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; NamespaceTypeName ‘,’ AssemblyNameSpec</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>NamespaceTypeName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; NestedTypeName</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; NamespaceSpec ‘.’ NestedTypeName</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>NestedTypeName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; IDENTIFIER</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; NestedTypeName ‘+’ IDENTIFIER</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>NamespaceSpec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; IDENTIFIER</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; NamespaceSpec ‘.’ IDENTIFIER</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>AssemblyNameSpec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; IDENTIFIER</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; IDENTIFIER ‘,’ AssemblyProperties</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>AssemblyProperties&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; AssemblyProperty</p><br><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; AssemblyProperties ‘,’ AssemblyProperty</p><br></td><br></tr><br><tr><br><td style="border-color: #000000; border-style: solid; border-width: 1px;"><br><p>AssemblyProperty&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :=&nbsp;&nbsp; AssemblyPropertyName ‘=’ AssemblyPropertyValue</p><br></td><br></tr><br></tbody><br></table><br><p>Backus-Naur Form的介绍可以看wikipedia的介绍：<a href="http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form" target="_blank" rel="noopener">Backus&ndash;Naur Form</a>。他的主要内容如下：</p><br><ol><br><li>在双引号中的字(“word”)代表着这些字符本身。而double_quote用来代表双引号。</li><br><li>在双引号外的字（有可能有下划线）代表着语法部分。</li><br><li>尖括号( &lt; &gt; )内包含的为必选项。</li><br><li>方括号( [ ] )内包含的为可选项。</li><br><li>大括号( { } )内包含的为可重复0至无数次的项。</li><br><li>竖线( | )表示在其左右两边任选一项，相当于”OR”的意思。</li><br><li>::= 是&ldquo;被定义为&rdquo;的意思。</li><br></ol><br><p>所以MSDN的表格的第一行就是说，TypeSpec定义为ReferenceTypeSpec或者SimpleTypeSpec，而ReferenceTypeSpec又被定义为SimpleTypeSpec ‘&amp;’，SimpleTypeSpec定义为PointerTypeSpec或者ArrayTypeSpec或者TypeName。以此类推。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;MSDN的&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/yfsftwz6%28v=vs.110%29.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Specifying Fully Qualif
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>Windows的应用管理工具 PortableApps，Chocolatey和Ninite</title>
    <link href="http://fresky.github.io/2013/06/28/windows-application-management-tools/"/>
    <id>http://fresky.github.io/2013/06/28/windows-application-management-tools/</id>
    <published>2013-06-27T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.265Z</updated>
    
    <content type="html"><![CDATA[<p>以前为了让我的firefox变成portable的，我使用了<a href="http://portableapps.com/" target="_blank" rel="noopener">PortableApps</a>，它不只是做软件的绿色版，而且也是一个软件的管理平台，可以通过它来管理软件的更新，挺方便的。</p><br><p>前段时间试用ScriptCS（参见我的博客<a href="/2013/05/16/use-csharp-as-script-language/">把C#当作脚本语言来用</a>），又使用了<a href="http://chocolatey.org/" target="_blank" rel="noopener">Chocolatey</a>，它是一个类似<a href="http://nuget.org/" target="_blank" rel="noopener">NuGet</a>的包管理工具，可以理解NuGet管理你的项目级别的包，但是Chocolatey管理Windows系统级别的包。类似<a href="http://ninite.com/" target="_blank" rel="noopener">Ninite</a>，它是另外一个很方便的应用管理工具。</p><br><p>有了这些软件的帮助，不必每回装软件或者更新软件都跑到软件的官网，寻找下载地址了。可以节省很多时间。如果还没用过，可以试试。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;以前为了让我的firefox变成portable的，我使用了&lt;a href=&quot;http://portableapps.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;PortableApps&lt;/a&gt;，它不只是做软件的绿色版，而且也是一个软件的管理平
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>如何定制Windows系统右键菜单</title>
    <link href="http://fresky.github.io/2013/06/28/how-to-customize-windows-context-menu/"/>
    <id>http://fresky.github.io/2013/06/28/how-to-customize-windows-context-menu/</id>
    <published>2013-06-27T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.265Z</updated>
    
    <content type="html"><![CDATA[<p>今天心血来潮把几个自己常用的工具定制到了系统的右键菜单。包括notepad++，7zip，还有复制文件全路径和文件夹路径。下面简单介绍一下步骤。</p>  <h1 id="1-Windows系统右键菜单对应的注册表位置"><a href="#1-Windows系统右键菜单对应的注册表位置" class="headerlink" title="1. Windows系统右键菜单对应的注册表位置"></a>1. Windows系统右键菜单对应的注册表位置</h1><p>Windows系统的右键菜单对应着如下的注册表位置。</p><h2 id="1）所有文件的右键菜单："><a href="#1）所有文件的右键菜单：" class="headerlink" title="1）所有文件的右键菜单："></a>1）所有文件的右键菜单：</h2><p><a href="http://images.cnitblog.com/blog/163228/201306/28180933-152759b897fe4977b209b13f33bb1069.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201306/28180934-a0f7aa9dd8db455589982b7c9b288f30.png" width="244" height="212"></a></p> <h2 id="2）所有目录的右键菜单："><a href="#2）所有目录的右键菜单：" class="headerlink" title="2）所有目录的右键菜单："></a>2）所有目录的右键菜单：</h2><p><a href="http://images.cnitblog.com/blog/163228/201306/28180935-09f19fa288304de48ca38d8ed3d28959.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201306/28180935-c0df8dc65c8d403f9f42e82fbed45099.png" width="308" height="116"></a></p>  <h1 id="2-添加自己定制的右键菜单"><a href="#2-添加自己定制的右键菜单" class="headerlink" title="2.添加自己定制的右键菜单"></a>2.添加自己定制的右键菜单</h1><h2 id="1）如下的代码存为-reg文件，双击就能把注册表键值导入到注册表中。"><a href="#1）如下的代码存为-reg文件，双击就能把注册表键值导入到注册表中。" class="headerlink" title="1）如下的代码存为.reg文件，双击就能把注册表键值导入到注册表中。"></a>1）如下的代码存为.reg文件，双击就能把注册表键值导入到注册表中。</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\*\shell\Notepad++]</span><br><span class="line">@=&quot;Notepad++&quot;</span><br><span class="line">&quot;Icon&quot;=&quot;...\\notepad++ico.ico&quot;</span><br><span class="line">&quot;Position&quot;=&quot;Middle&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\*\shell\Notepad++\command]</span><br><span class="line">@=&quot;\&quot;...\\notepad++.exe\&quot; \&quot;%1\&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\*\shell\7zip]</span><br><span class="line">@=&quot;7zip&quot;</span><br><span class="line">&quot;Icon&quot;=&quot;...\\7zipico.ico&quot;</span><br><span class="line">&quot;Position&quot;=&quot;Middle&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\*\shell\7zip\Command]</span><br><span class="line">@=&quot;\&quot;...\\7z.exe\&quot; a \&quot;%1\&quot;.zip \&quot;%1\&quot;&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\Directory\shell\7zip]</span><br><span class="line">@=&quot;7zip&quot;</span><br><span class="line">&quot;Icon&quot;=&quot;...\\7zipico.ico&quot;</span><br><span class="line">&quot;Position&quot;=&quot;Middle&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\Directory\shell\7zip\command]</span><br><span class="line">@=&quot;\&quot;...\\7z.exe\&quot; a \&quot;%1\&quot;.zip \&quot;%1\&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\*\shell\CopyFileFullName]</span><br><span class="line">@=&quot;Copy File FullName&quot;</span><br><span class="line">&quot;Icon&quot;=&quot;...\\fullpath.ico&quot;</span><br><span class="line">&quot;Position&quot;=&quot;Middle&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\*\shell\CopyFileFullName\Command]</span><br><span class="line">@=&quot;...\\copyfullname.bat \&quot;%1\&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\*\shell\CopyFileName]</span><br><span class="line">@=&quot;Copy File Name&quot;</span><br><span class="line">&quot;Icon&quot;=&quot;...\\name.ico&quot;</span><br><span class="line">&quot;Position&quot;=&quot;Middle&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\*\shell\CopyFileName\Command]</span><br><span class="line">@=&quot;...\\copyname.bat \&quot;%1\&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\*\shell\CopyFolderName]</span><br><span class="line">@=&quot;Copy Folder Name&quot;</span><br><span class="line">&quot;Icon&quot;=&quot;...\\folder.ico&quot;</span><br><span class="line">&quot;Position&quot;=&quot;Middle&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\*\shell\CopyFolderName\Command]</span><br><span class="line">@=&quot;...\\copyfolder.bat \&quot;%1\&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\Directory\shell\CopyFolderName]</span><br><span class="line">@=&quot;Copy Folder Name&quot;</span><br><span class="line">&quot;Icon&quot;=&quot;...\\folder.ico&quot;</span><br><span class="line">&quot;Position&quot;=&quot;Middle&quot;</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\Directory\shell\CopyFolderName\command]</span><br><span class="line">@=&quot;...\\copyname.bat \&quot;%1\&quot;&quot;</span><br></pre></td></tr></table></figure><h2 id="2）如下的代码是删除上面添加这些注册表键值。"><a href="#2）如下的代码是删除上面添加这些注册表键值。" class="headerlink" title="2）如下的代码是删除上面添加这些注册表键值。"></a>2）如下的代码是删除上面添加这些注册表键值。<p></p></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line"></span><br><span class="line">[-HKEY_CLASSES_ROOT\*\shell\Notepad++]</span><br><span class="line"></span><br><span class="line">[-HKEY_CLASSES_ROOT\*\shell\7zip]</span><br><span class="line"></span><br><span class="line">[-HKEY_CLASSES_ROOT\Directory\shell\7zip]</span><br><span class="line"></span><br><span class="line">[-HKEY_CLASSES_ROOT\*\shell\CopyFileFullName]</span><br><span class="line"></span><br><span class="line">[-HKEY_CLASSES_ROOT\*\shell\CopyFileName]</span><br><span class="line"></span><br><span class="line">[-HKEY_CLASSES_ROOT\*\shell\CopyFolderName]</span><br><span class="line"></span><br><span class="line">[-HKEY_CLASSES_ROOT\Directory\shell\CopyFolderName]</span><br></pre></td></tr></table></figure><h2 id="3）简单说明"><a href="#3）简单说明" class="headerlink" title="3）简单说明"></a>3）简单说明</h2><p>其实就是把当前的文件或者文件夹作为参数（%1）传给你需要的应用。各个应用的命令行参数可以自己去查帮助。比如我的7zip使用的是压缩命令，命令行参数就是</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">7</span>z.exe a “%<span class="number">1</span>".zip "%<span class="number">1</span>"</span><br></pre></td></tr></table></figure><p>把当前文件或者文件夹放入名为文件（夹）名加上.zip的压缩包中。</p><p>&#160;</p><p>关于复制文件名和文件夹名的命令，我是用了如下的bat文件，分别存在了copyfullname.bat</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">echo</span> %~<span class="number">1</span> | clip</span><br></pre></td></tr></table></figure><p>copyname.bat</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">echo</span> %~nx1 | clip</span><br></pre></td></tr></table></figure><p>copyfolder.bat三个bat中。</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">echo</span> %~dp1 | clip</span><br></pre></td></tr></table></figure><p>其实就是把当前参数放进了剪切板里。</p><p>下面列举了关于%1的一些常见用法。</p><table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>%~1</td><td>删除引号(“)，扩充 %1</td></tr><tr><td>%~1</td><td>删除引号(“)，扩充 %1</td></tr><tr><td>%~f1</td><td>将 %1 扩充到一个完全合格的路径名</td></tr><tr><td>%~d1</td><td>仅将 %1 扩充到一个驱动器号</td></tr><tr><td>%~p1</td><td>仅将 %1 扩充到一个路径</td></tr><tr><td>%~n1</td><td>仅将 %1 扩充到一个文件名</td></tr><tr><td>%~x1</td><td>仅将 %1 扩充到一个文件扩展名</td></tr><tr><td>%~s1</td><td>扩充的路径指含有短名</td></tr><tr><td>%~a1</td><td>将 %1 扩充到文件属性</td></tr><tr><td>%~t1</td><td>将 %1 扩充到文件的日期/时间</td></tr><tr><td>%~z1</td><td>将 %1 扩充到文件的大小</td></tr></tbody></table><h1 id="3-效果"><a href="#3-效果" class="headerlink" title="3. 效果"></a>3. 效果</h1><p><a href="http://images.cnitblog.com/blog/163228/201306/28180935-73b2aea7a1ba46f6abbdef4606806ff9.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201306/28180936-fb87d3a0b6c1421e83d1daa4b8734eb7.png" width="523" height="201"></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天心血来潮把几个自己常用的工具定制到了系统的右键菜单。包括notepad++，7zip，还有复制文件全路径和文件夹路径。下面简单介绍一下步骤。&lt;/p&gt;  

&lt;h1 id=&quot;1-Windows系统右键菜单对应的注册表位置&quot;&gt;&lt;a href=&quot;#1-Windows系统右键菜
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>.gitignore模板</title>
    <link href="http://fresky.github.io/2013/06/27/git-ignore-template/"/>
    <id>http://fresky.github.io/2013/06/27/git-ignore-template/</id>
    <published>2013-06-26T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.264Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/github/gitignore" target="_blank" rel="noopener">github/gitignore &middot; GitHub</a>列举了一些有用的.gitignore的模板。比如<a href="https://github.com/github/gitignore/blob/master/VisualStudio.gitignore" target="_blank" rel="noopener">这个</a>是visual studio的。</p><p>另外说一个题外话，如果不想看见solution目录的那个sdf，（visual studio生成的intelligence数据库.sdf，取代了ncb），可以通过Tools -&gt; Options -&gt; Text Editor -&gt; C/C++ -&gt; Advanced，然后在 “Fallback Location”中设置 “Always Use Fallback Location” 和”Do Not Warn If Fallback Location Used” <code>为True。在</code> “Fallback Location” 留着空白就行，这样VS会把sdf生成到临时文件夹中。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://github.com/github/gitignore&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;github/gitignore &amp;middot; GitHub&lt;/a&gt;列举了一些有用的.gitignore的模板。比如
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
      <category term="Github" scheme="http://fresky.github.io/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>遇到sql server的问题时如何排查</title>
    <link href="http://fresky.github.io/2013/06/27/how-to-troubleshot-sql-server/"/>
    <id>http://fresky.github.io/2013/06/27/how-to-troubleshot-sql-server/</id>
    <published>2013-06-26T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.265Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://www.i-programmer.info/programming/database/6028-the-first-things-i-look-at-on-a-sql-server-part-1.html" target="_blank" rel="noopener">The First Things I Look At On A SQL Server</a>和<a href="http://www.i-programmer.info/programming/database/6028-the-first-things-i-look-at-on-a-sql-server-part-1.html?start=1" target="_blank" rel="noopener">Page2</a>介绍了遇到sql server的问题时如何排查问题，<a href="http://www.i-programmer.info/images/stories/Core/Database/InitialChecks/dba_InitialChecks_part1%20%281%29.sql.html" target="_blank">Display Code</a>列出了sql代码。</p><p>包括如下10个检查：</p><ol><li>时间</li><li>sqlsever的版本</li><li>server instance的属性信息</li><li>操作系统信息</li><li>一些配置</li><li>做常见的waits</li><li>signal waits-CPU压力</li><li>sys.databases</li><li>database的CPU使用情况</li><li>database的内存使用情况</li></ol><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://www.i-programmer.info/programming/database/6028-the-first-things-i-look-at-on-a-sql-server-part-1.html&quot; target=&quot;_b
      
    
    </summary>
    
    
      <category term="Database" scheme="http://fresky.github.io/tags/Database/"/>
    
  </entry>
  
  <entry>
    <title>另一个有趣的Captcha 网站</title>
    <link href="http://fresky.github.io/2013/06/27/intresting-captcha-website/"/>
    <id>http://fresky.github.io/2013/06/27/intresting-captcha-website/</id>
    <published>2013-06-26T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.265Z</updated>
    
    <content type="html"><![CDATA[<p>今天在一个网站注册时又发现了一个有趣的Captcha形式。给你一个翻转的图片，然后让你拽下面的slide bar让它回到正常的位置，很有趣。下面是提供这个Captcha的网站。</p><p><a href="http://www.minteye.com/" target="_blank" rel="noopener">minteye &ndash; slide-to-fit CAPTCHA &amp; Advertisement Solutions</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天在一个网站注册时又发现了一个有趣的Captcha形式。给你一个翻转的图片，然后让你拽下面的slide bar让它回到正常的位置，很有趣。下面是提供这个Captcha的网站。&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://www.minteye.com/&quot; target=&quot;
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>Honeywords项目——检查密码是否被破解的一种简单方法</title>
    <link href="http://fresky.github.io/2013/06/21/honeywords-simple-way-to-avoid-password-cracking/"/>
    <id>http://fresky.github.io/2013/06/21/honeywords-simple-way-to-avoid-password-cracking/</id>
    <published>2013-06-20T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.264Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://people.csail.mit.edu/rivest/honeywords/" target="_blank" rel="noopener">Honeywords</a>项目使用一种简单的方法来改进hash后的密码的安全性&mdash;&mdash;为每个账户维护一个额外的honeywords（假密码）。如果有黑客拿到了密码的文件，然后试图用brute froce的方式破解密码的话，黑客不知道他找到的是真正的密码还是honeyword。对于服务器来说，添加一个辅助的honeychecer，就能在收到honeyword时发出警告，从而就知道了密码文件已经泄露了。</p><p>网站上放了作者的论文，FAQ和一个python实现的简单的honeyword生成器。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://people.csail.mit.edu/rivest/honeywords/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Honeywords&lt;/a&gt;项目使用一种简单的方法来改进hash后的密码的安全性&amp;mdash;&amp;m
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>如何传播你的代码</title>
    <link href="http://fresky.github.io/2013/06/21/how-to-spread-your-code/"/>
    <id>http://fresky.github.io/2013/06/21/how-to-spread-your-code/</id>
    <published>2013-06-20T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.264Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="https://hacks.mozilla.org/2013/05/how-to-spread-the-word-about-your-code/" target="_blank" rel="noopener">How to Spread The Word About Your Code ✩ Mozilla Hacks &ndash; the Web developer blog</a>讲述了当你开发了一个小工具之后如何传播。下面列一下文章最后给出的checklist。</p><ol><li>把你的精力集中在你的项目的主页和readme上。</li><li>检查你的项目名字没有和别人撞车，并且和你的工作非常相关。</li><li>把你的工作提交给和你最密切的圈子来发现你的项目的问题。</li><li>做一个截屏录像或者写篇博客来介绍你的项目。</li><li>想一个完美的&ldquo;【项目名】是<strong><em>&rdquo;的句子来描述你的项目是什么。</em></strong></li><li>用你的&ldquo;【项目名】是&rdquo;的句子来作为你的主页的标题。</li><li>给你的项目所在领域的有影响力的人，博客，播客，邮件列表发一个简短的有礼貌的说明。</li><li>发布到社交网络和书签站点，注意确保你的标题很清楚的描述了你的项目。</li><li>把你的&ldquo;【项目名】是***&rdquo;的句子用在你的邮件和有影响力的人等联系。</li><li>别人对你的项目的评论，用乐观正面的方式来看待，找出好的一面。</li></ol><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://hacks.mozilla.org/2013/05/how-to-spread-the-word-about-your-code/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;How to Spread T
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>Ken Norton和软件工程师打交道的10个秘诀</title>
    <link href="http://fresky.github.io/2013/06/20/10-secrets-of-how-to-work-with-programmer/"/>
    <id>http://fresky.github.io/2013/06/20/10-secrets-of-how-to-work-with-programmer/</id>
    <published>2013-06-19T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.263Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.kennethnorton.com/essays/how-to-work-with-software-engineers.html#ftnt1" target="_blank" rel="noopener">How to work with software engineers - by Ken Norton</a></p><ol><li><em>Deflect</em> praise</li><li><em>Absorb</em> blame</li><li><em>Sweat</em> the details</li><li>Involve them <em>early</em></li><li><em>Streamline</em> process</li><li><em>Always</em> tell the reasons</li><li>Never commit <em>without</em> them</li><li><em>Respect</em> their time</li><li>Be <em>specific</em></li><li><em>Trust</em> them</li></ol><p>And finally…<em>Always</em> bring the donuts</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://www.kennethnorton.com/essays/how-to-work-with-software-engineers.html#ftnt1&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;How to work 
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>创业从 手动 开始</title>
    <link href="http://fresky.github.io/2013/06/20/startup-from-manual/"/>
    <id>http://fresky.github.io/2013/06/20/startup-from-manual/</id>
    <published>2013-06-19T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.263Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://yipit.com" target="_blank" rel="noopener">Yipit</a>的创始人Vinicius Vacanti在博客<a href="http://viniciusvacanti.com/2013/05/07/the-manual-first-startup/" target="_blank" rel="noopener">The Manual-First Startup</a>中提到他们的公司一开始是全凭人工的，没有实现自动化，一直到9月的时候才开始有爬虫来自动化这个流程。但是凭借好的创意和人工带来的准确性在成立3个月的时候就融到了130万美金。</p><p>Vinicius列出的&ldquo;手动开始&rdquo;的几个优势：</p><ol><li>最快的展示给用户。</li><li>遇到问题很容易改变解决方案。</li><li>当手动了一段时间之后会更好的理解哪些是应该用技术来自动化的。</li><li>能真正的惊艳你的潜在用户。</li><li>客户不知道你的产品背后是怎么运作的，客户只关心你的产品有没有用。</li><li>你的产品会好使，因为如果用技术的话可能会遇到技术难题。</li><li>帮助你把注意力集中在问题上，而不是解决方案上。</li></ol><p>&nbsp;</p><p>&nbsp;</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://yipit.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Yipit&lt;/a&gt;的创始人Vinicius Vacanti在博客&lt;a href=&quot;http://viniciusvacanti.com/2013/05/07/
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>谁动了我的timer？C#的垃圾回收和调试</title>
    <link href="http://fresky.github.io/2013/06/20/where-is-my-timer-csharp-gc/"/>
    <id>http://fresky.github.io/2013/06/20/where-is-my-timer-csharp-gc/</id>
    <published>2013-06-19T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.264Z</updated>
    
    <content type="html"><![CDATA[<p>先来看如下的一段代码：</p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Threading;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">// Create a Timer object that knows to call our TimerCallback</span></span><br><span class="line">        <span class="comment">// method once every 1000 milliseconds.</span></span><br><span class="line">        Timer t = <span class="keyword">new</span> Timer(TimerCallback, <span class="literal">null</span>, <span class="number">0</span>, <span class="number">1000</span>);</span><br><span class="line">        <span class="comment">// Wait for the user to hit &lt;Enter&gt;</span></span><br><span class="line">        Console.ReadLine();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">TimerCallback</span>(<span class="params">Object o</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">// Display the date/time when this method got called.</span></span><br><span class="line">        Console.WriteLine(<span class="string">"In TimerCallback: "</span> + DateTime.Now);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们在main函数中生成了一个timer，然后这个timer会每隔一秒输出一条记录，显示当前的时间。</p><p>如果运行这个程序（release模式），我们可以得到如下的输出：</p><p><a href="http://images.cnitblog.com/blog/163228/201306/20111611-5931441e1d014546ac28b1aac12bfee7.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201306/20111611-0b9ea3a4bc834dedb860349496c14d07.png" width="535" height="153"></a></p><p>这个程序看起来是运行正常的，可是真的是没有问题的吗？</p><h3></h3><p>我们简单的修改一下TimerCallback函数，强制调用一下GC，如下所示：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">TimerCallback</span>(<span class="params">Object o</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// Display the date/time when this method got called.</span></span><br><span class="line">    Console.WriteLine(<span class="string">"In TimerCallback: "</span> + DateTime.Now);</span><br><span class="line">    <span class="comment">// Force a garbage collection to occur.</span></span><br><span class="line">    GC.Collect();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们再次运行一下这个函数，得到了如下的输出：</p><p><a href="http://images.cnitblog.com/blog/163228/201306/20111612-7ffe48618fd14aca9a6f57ecd4548bfa.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201306/20111612-b980e353236b4d92a0b062819ae6c284.png" width="414" height="137"></a></p><p>我们可以看到，这次timer只被调用了一次！！！</p><h3></h3><p>这个时候大家应该能猜到原因了，我们的timer被垃圾回收了！！！</p><p>C#的垃圾回收采用了reference tracking的算法，大概的意思是说在执行垃圾回收时，所有的对象都默认认为是可以被回收的，然后遍历所有的roots（指向reference type的对象，包括类成员变量，静态变量，函数参数，函数局部变量），把这个root指向的对象标记成不能被回收的。</p><p>回到我们的代码，当我们强制调用GC.Collect()时，这个时候我们的timer t已经是一个没有被指向的对象了，于是垃圾回收就把t给回收了。这和C++的对象析构不太一样，C++的对象需要在出了作用域之后析构函数才会被调用到。</p><p>所以，即使我们没有显示的在这里调用GC.Collect()，但是我们不能确定什么时候CLR会调用GC，那个时候timer也就被回收了，总之，不能实现我们的意图。</p><h3>&#160;</h3><p>再来个有意思的，如果我们把上面的程序改成debug模式再运行，发现我们的timer还是能够正常工作的，就是说还是能看到每隔一秒就输出一条记录。这又是为什么呢？</p><p>因为Visual Studio为了让debug更方便在debug模式下编译时延长了局部变量的生命周期。比如说，假设你在一个局部变量最后一次被使用之后打了断点，但是这个时候你在watch窗口已经看不到那个局部变量的值了（被垃圾回收了），那是不是很抓狂。所以debug的编译器就做了这个小手脚。</p><h3>&#160;</h3><p>那如果要实现我们的初衷，就需要在Console.ReadLine之后还能保持一个对timer的引用，所以我们写了如下的代码：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// Create a Timer object that knows to call our TimerCallback</span></span><br><span class="line">    <span class="comment">// method once every 1000 milliseconds.</span></span><br><span class="line">    Timer t = <span class="keyword">new</span> Timer(TimerCallback, <span class="literal">null</span>, <span class="number">0</span>, <span class="number">1000</span>);</span><br><span class="line">    <span class="comment">// Wait for the user to hit &lt;Enter&gt;</span></span><br><span class="line">    Console.ReadLine();</span><br><span class="line"></span><br><span class="line">    t = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>很不幸，这在release下还是不行，因为编译器认为把一个对象置为null是没必要的，帮我们优化掉了！</p><p>所以正确的做法是：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// Create a Timer object that knows to call our TimerCallback</span></span><br><span class="line">    <span class="comment">// method once every 1000 milliseconds.</span></span><br><span class="line">    Timer t = <span class="keyword">new</span> Timer(TimerCallback, <span class="literal">null</span>, <span class="number">0</span>, <span class="number">1000</span>);</span><br><span class="line">    <span class="comment">// Wait for the user to hit &lt;Enter&gt;</span></span><br><span class="line">    Console.ReadLine();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This assignment will be removed by compiler optimization</span></span><br><span class="line">    <span class="comment">//t = null;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This will survive the GC</span></span><br><span class="line">    t.Dispose();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样就可以了。当然，我们也可以直接用using语句：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// Create a Timer object that knows to call our TimerCallback</span></span><br><span class="line">    <span class="comment">// method once every 1000 milliseconds.</span></span><br><span class="line">    <span class="keyword">using</span> (<span class="keyword">new</span> Timer(TimerCallback, <span class="literal">null</span>, <span class="number">0</span>, <span class="number">1000</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Wait for the user to hit &lt;Enter&gt;</span></span><br><span class="line">        Console.ReadLine();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>嗯，现在我们有了一个不会被垃圾回收掉的timer。希望对大家理解C#的垃圾回收有些帮助。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;先来看如下的一段代码：&lt;/p&gt;  

&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>使用Linux的命令行工具做简单的文本分析</title>
    <link href="http://fresky.github.io/2013/06/18/how-to-analyze-text-file-with-linux-command-line-tools/"/>
    <id>http://fresky.github.io/2013/06/18/how-to-analyze-text-file-with-linux-command-line-tools/</id>
    <published>2013-06-17T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.263Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://williamjturkel.net/2013/06/15/basic-text-analysis-with-command-line-tools-in-linux/" target="_blank" rel="noopener">Basic Text Analysis with Command Line Tools in Linux | William J Turkel</a></p><p>这篇文章非常清楚的介绍了如何使用Linux的命令行工具进行文本分析，统计一本书中每个词出现的频率。</p><p>使用了如下的命令：</p><ol><li>wget</li><li> file</li><li>head</li><li>tail</li><li>cp</li><li>ls</li><li>less</li><li>sed</li><li>wc</li><li>grep</li><li>tr</li><li>sort</li><li>uniq</li></ol><p>对于Windows用户，可以通过<a href="http://cygwin.com/" target="_blank" rel="noopener">cygwin</a>在Windows下安装linux的这些强大的命令。</p><p>&nbsp;</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://williamjturkel.net/2013/06/15/basic-text-analysis-with-command-line-tools-in-linux/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Basic
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>Visual Studio的2个有趣的插件：声音控制和放屁：）</title>
    <link href="http://fresky.github.io/2013/06/17/2-funny-vs-addins-to-hear-and-talk/"/>
    <id>http://fresky.github.io/2013/06/17/2-funny-vs-addins-to-hear-and-talk/</id>
    <published>2013-06-16T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.262Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://madskristensen.net/post/Talk-to-hear-touch-and-see-your-code.aspx" target="_blank" rel="noopener">.NET Slave | Talk to, hear, touch and see your code</a>介绍了2个有趣的Visual Studio的插件，你可以通过它们和你的代码对话。</p><br><p>声音控制（Voice Commands）：</p><br><p><span>下载</span><span>: </span><a href="http://visualstudiogallery.msdn.microsoft.com/ce35c120-405a-435b-af2a-52ff24eb2c30" target="_blank" rel="noopener"><span>VS Gallery</span></a> <br><span>源代码: </span><a href="https://github.com/ligershark/VoiceExtension/" target="_blank" rel="noopener"><span>GitHub</span></a></p><br><p>放屁（Farticus）</p><br><p>下载: <a href="http://visualstudiogallery.msdn.microsoft.com/33b0242d-7158-4d39-9a01-0a08cf7c28bd" target="_blank" rel="noopener">VS Gallery</a> <br>源代码: <a href="https://github.com/ligershark/Farticus" target="_blank" rel="noopener">GitHub</a></p><br><p>大家可以装装玩玩。：）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://madskristensen.net/post/Talk-to-hear-touch-and-see-your-code.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;.NET Slave | Talk to, h
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>大数据在招聘中的作用</title>
    <link href="http://fresky.github.io/2013/06/14/big-data-in-recruiting/"/>
    <id>http://fresky.github.io/2013/06/14/big-data-in-recruiting/</id>
    <published>2013-06-13T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.262Z</updated>
    
    <content type="html"><![CDATA[<p>大数据已经应用到了各个领域，<a href="http://www.technologyreview.com/news/514901/the-machine-readable-workforce/" target="_blank" rel="noopener">Xerox Tests Workforce Science from Evolv in Its Call Centers</a></p><p>介绍了施乐如何利用<a href="http://www.evolvondemand.com/" target="_blank" rel="noopener">Evolv</a>招聘呼叫中心的员工，<a href="http://www.technologyreview.com/news/511896/a-startup-that-scores-job-seekers-whether-they-know-it-or-not/" target="_blank" rel="noopener">Startup Creates Software to Give Companies an Edge Recruiting Tech Talent</a>也介绍了另外一个创业公司<a href="http://www.gild.com/" target="_blank" rel="noopener">Gild</a>。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;大数据已经应用到了各个领域，&lt;a href=&quot;http://www.technologyreview.com/news/514901/the-machine-readable-workforce/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Xerox 
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>网站设计中常见的几个错误</title>
    <link href="http://fresky.github.io/2013/06/14/common-mistakes-of-website/"/>
    <id>http://fresky.github.io/2013/06/14/common-mistakes-of-website/</id>
    <published>2013-06-13T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.262Z</updated>
    
    <content type="html"><![CDATA[<p></p><p>Scott Hanselman在他的博客<a href="http://www.hanselman.com/blog/StopDoingInternetWrong.aspx" target="_blank" rel="noopener">Stop Doing Internet Wrong</a>上列举了几个网站设计中常见的错误。</p>  <ol>   <li>自动重定向到mobile页面。现在手机都这么先进，不如让用户选他是想看mobile页面还是正常页面。 </li>    <li>在浏览器中让用户打开app。 </li>    <li>巨大的广告。 </li>    <li>Label没有和checkbox关联，用户只能点那个小小的checkbox。其实如下的简单的html就能把label和checkbox关联起来。 （Scott在原文中有个typo，应该是小写的n）</li>    <p></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Which fruit would you like for lunch?<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"fruit"</span> <span class="attr">id</span>=<span class="string">"banana"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"banana"</span>&gt;</span>Banana<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"fruit"</span> <span class="attr">id</span>=<span class="string">"None"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"none"</span>&gt;</span>None<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>  <li>链接不好使。</li>  <li>点国旗来选择语言。其实在http的request里面有accept-language，可以用这个。</li>  <li>让用户输入邮编和省份。其实有很多<a href="http://stackoverflow.com/a/492978/304115" target="_blank" rel="noopener">美国邮编API</a>可以做这件事。我也查了查，有很多web service提供中国的邮编查询，比如<a href="http://webservice.webxml.com.cn/WebServices/ChinaZipSearchWebService.asmx" target="_blank" rel="noopener">这个</a>。</li>  <li>通过设置高度和宽度来把一个巨大的图片放在页面上。（其实用户还是得下载它）你可以用<a href="http://pnggauntlet.com/" target="_blank" rel="noopener">PNGGauntlet</a>或者<a href="http://advsys.net/ken/utils.htm" target="_blank" rel="noopener">PNGOUT</a>来压缩你的png。</li><p>  <li>应该通过重定向等技术让用户更容易访问你的网站。比如<a href="http://www.example.com" target="_blank" rel="noopener">www.example.com</a>和example.com，或者/和/default.html.</li><br></p></ol><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;Scott Hanselman在他的博客&lt;a href=&quot;http://www.hanselman.com/blog/StopDoingInternetWrong.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stop Doing 
      
    
    </summary>
    
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
  </entry>
  
  <entry>
    <title>Windows Live Writer的一个代码语法高亮的插件——CodeInLiveWriter</title>
    <link href="http://fresky.github.io/2013/06/09/codeinlivewriter-code-syntax-highlight-plugin-for-windows-live-writer/"/>
    <id>http://fresky.github.io/2013/06/09/codeinlivewriter-code-syntax-highlight-plugin-for-windows-live-writer/</id>
    <published>2013-06-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.261Z</updated>
    
    <content type="html"><![CDATA[<p></p><p>&nbsp;</p><p></p><p></p><p>我平时经常用<a href="http://windows.microsoft.com/en-us/windows-live/essentials-other#essentials=overviewother" target="_blank" rel="noopener">Windows Live Writer</a>来写博客，但是插入代码很麻烦，用了一些插件也都有些不满意的地方，我就自己写了一个，可以从<a href="http://msdn.microsoft.com/en-us/library/aa702851.aspx" target="_blank" rel="noopener">这里</a>找到如何给Windows Live Writer写plugin。</p><p></p><p></p><p>我这个程序基于<a href="http://hilite.me/" target="_blank" rel="noopener">hilite.me</a>提供的<a href="http://hilite.me/api" target="_blank" rel="noopener">API</a>，hilite.me内部使用了<a href="http://pygments.org/" target="_blank" rel="noopener">Pygments</a>，<a href="http://pygments.org/" target="_blank" rel="noopener">Pygments</a>也被用于github的代码显示。</p><p></p><p></p><p>另外<a href="http://alexgorbatchev.com/SyntaxHighlighter/" target="_blank" rel="noopener">SyntaxHighlighter</a>也是个被广泛应用的代码高亮的工具。</p><p></p><p></p><p>&nbsp;</p><p></p><p></p><p>使用方法：</p><p></p><p></p><p>下载<a href="https://github.com/fresky/CodeInLiveWriter/blob/master/CodeInLiveWriter.dll" target="_blank" rel="noopener">CodeInLiveWriter.dll</a>，然后放在<em>[WindowsLiveWriterPath]\Plugins\</em>目录下就行了。源代码放在了<a href="https://github.com/fresky/CodeInLiveWriter" target="_blank">GitHub</a>上。</p><p></p><p></p><p>&nbsp;</p><p></p><p></p><p><strong>目前内建可选的语言有：</strong></p><p></p><p><ul></ul></p><p><li>c#</li></p><p><li>c++</li></p><p><li>java</li></p><p><li>python</li></p><p><li>ruby</li></p><p><li>c</li></p><p><li>sql</li></p><p><li>html</li></p><p><li>xml</li></p><p><li>batch</li></p><p><li>bash</li><br></p><p></p><p><strong>内建支持的格式：</strong></p><p></p><p><ul></ul></p><p><li>vs</li></p><p><li>colorful</li></p><p><li>emacs</li></p><p><li>vim</li><br></p><p></p><p>支持用户自定义语言和格式，分别存在 <strong>CodeInLiveWriterStyle.txt</strong> 和 <strong>CodeInLiveWriterLanguage.txt</strong>，然后和<strong>CodeInLiveWriter.dll</strong>放在同一个文件夹下。具体参见<a href="http://pygments.org/" target="_blank" rel="noopener">Pygments</a>支持的<a href="http://pygments.org/docs/lexers/" target="_blank" rel="noopener">语言</a> and <a href="http://pygments.org/docs/styles/" target="_blank" rel="noopener">格式</a>。</p><p></p><p></p><p>&nbsp;</p><p></p><p></p><p>主要的代码如下：（就是用这个插件把代码插进来的：））</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">string</span> <span class="title">getHtmlStyleCode</span>(<span class="params"><span class="keyword">string</span> language, <span class="keyword">string</span> code, <span class="keyword">bool</span> showline, <span class="keyword">string</span> style</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        HttpWebRequest httpWebRequest = WebRequest.Create(<span class="string">"http://hilite.me/api"</span>) <span class="keyword">as</span> HttpWebRequest;</span><br><span class="line">        httpWebRequest.Method = <span class="string">"POST"</span>;</span><br><span class="line">        httpWebRequest.ContentType = <span class="string">"application/x-www-form-urlencoded"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">string</span> parameters = <span class="keyword">string</span>.Format(<span class="string">"lexer=&#123;0&#125;&amp;code=&#123;1&#125;&amp;&#123;2&#125;&amp;style=&#123;3&#125;"</span>,</span><br><span class="line">                                          HttpUtility.UrlEncode(language),</span><br><span class="line">                                          HttpUtility.UrlEncode(code),</span><br><span class="line">                                          showline ? <span class="string">"&amp;linenos=1"</span> : <span class="string">""</span>,</span><br><span class="line">                                          style);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">using</span> (StreamWriter streamWriter = <span class="keyword">new</span> StreamWriter(httpWebRequest.GetRequestStream()))</span><br><span class="line">        &#123;</span><br><span class="line">            streamWriter.Write(parameters);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">string</span> result;</span><br><span class="line">        <span class="keyword">using</span> (WebResponse response = httpWebRequest.GetResponse())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">using</span> (StreamReader streamReader = <span class="keyword">new</span> StreamReader(response.GetResponseStream()))</span><br><span class="line">            &#123;</span><br><span class="line">                result = streamReader.ReadToEnd();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;p&gt;我平时经常用&lt;a href=&quot;http://windows.microsoft.com/en-us/windows-live/essentials-other#essentials=overviewoth
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>GitLab: 开源免费的git管理工具</title>
    <link href="http://fresky.github.io/2013/06/08/gitlab-opensource-github-clone/"/>
    <id>http://fresky.github.io/2013/06/08/gitlab-opensource-github-clone/</id>
    <published>2013-06-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.261Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://gitlab.org/" target="_blank" rel="noopener">GITLAB: Self Hosted Git Management Application</a>提供了像GitHub类似的功能，而且是开源和免费的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://gitlab.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GITLAB: Self Hosted Git Management Application&lt;/a&gt;提供了像GitHub类似的功能，而且是开源和免费的。&lt;
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Github" scheme="http://fresky.github.io/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>C#的一个小函数来计算一个运算使用的时间和内存</title>
    <link href="http://fresky.github.io/2013/06/08/time-counter-and-memory-counter-in-csharp/"/>
    <id>http://fresky.github.io/2013/06/08/time-counter-and-memory-counter-in-csharp/</id>
    <published>2013-06-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.261Z</updated>
    
    <content type="html"><![CDATA[<p>&#160;</p>  <p>如下，分别计算时间和内存。</p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">TimeWatcher</span>(<span class="params">Action action</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    System.Diagnostics.Stopwatch watch = <span class="keyword">new</span> System.Diagnostics.Stopwatch();</span><br><span class="line">    watch.Start();</span><br><span class="line">    action();</span><br><span class="line">    watch.Stop();</span><br><span class="line">    <span class="keyword">var</span> useTime = (<span class="keyword">double</span>) watch.ElapsedMilliseconds/<span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">return</span> useTime;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">MemoryWatcher</span>(<span class="params">Action action</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> start = GC.GetTotalMemory(<span class="literal">true</span>);</span><br><span class="line">    action();</span><br><span class="line">    GC.Collect();</span><br><span class="line">    GC.WaitForFullGCComplete();</span><br><span class="line">    <span class="keyword">long</span> end = GC.GetTotalMemory(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">long</span> useMemory = (end - start)/(<span class="number">1024</span>*<span class="number">1024</span>);</span><br><span class="line">    <span class="keyword">return</span> useMemory;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;#160;&lt;/p&gt;  &lt;p&gt;如下，分别计算时间和内存。&lt;/p&gt;  

&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;s
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>C#的强迫执行域Constrained Execution Regions(CERs)</title>
    <link href="http://fresky.github.io/2013/06/07/constrained-execution-regions-in-csharp/"/>
    <id>http://fresky.github.io/2013/06/07/constrained-execution-regions-in-csharp/</id>
    <published>2013-06-06T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.260Z</updated>
    
    <content type="html"><![CDATA[<p>强迫执行域（CERs）通常用于遇到未预见的异常时，保证系统被多个AppDomain或者进程共享的状态的正确性。</p><br><p>这种异常我们通常称之为Asynchronous Exception。比如当调用一个函数时，CLR需要去加载assembly，在AppDomain的堆上创建类型，调用类型的类构造函数，JIT把IL转换成native代码等等。当这些过程出错时，CLR会抛异常。如果这个异常是在代码的catch或者finally抛出的话，catch和finally中的错误恢复代码就不能被执行了，这样系统的状态就有可能会出错。</p><br><p>考虑如下的代码示例：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title">Type1</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="title">Type1</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="comment">// throw new ApplicationException("if this throws an exception, M won’t get called");</span></span><br><span class="line">            Console.WriteLine(<span class="string">"Type1's static ctor called"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">M</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">"Type1's M"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CER</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            RuntimeHelpers.PrepareConstrainedRegions();</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"In try"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">finally</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// Type1’s static constructor is implicitly called in here</span></span><br><span class="line">                Type1.M();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>第9行和第18行使用了CER，需要<span style="color: #0000ff;">using</span><span style="color: #000000;"> System.Runtime.CompilerServices; 和</span><span style="color: #0000ff;">using</span> System.Runtime.ConstrainedExecution;。当JIT编译器看到CERs时，会先编译catch和finally中的代码。JIT会加载需要的assembly，创建对象，调用类构造函数，JIT所有的方法。如果任何一步出了异常，那么这个异常会在try代码块之前抛出，从而保证了系统的状态始终是正确的。<span style="color: blue;"><br></span></p><br><p>运行上面的代码，可以得到如下的输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Type1&apos;s static ctor called</span><br><span class="line">In try</span><br><span class="line">Type1&apos;s M</span><br></pre></td></tr></table></figure><p>&nbsp;如果注释掉第9行和第18行，得到的输出如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In try</span><br><span class="line">Type1&apos;s static ctor called</span><br><span class="line">Type1&apos;s M</span><br></pre></td></tr></table></figure><p>补充几个关于Exception的小知识：</p><ol><li>在watch窗口输入$exception，可以看到CLR的exception信息。对于C++，可以在watch窗口输入@err,hr，相当于显示上一次调用API后再调用GetLastError。  </li><li>输入@eax，hr显示eax寄存器的值，由于win的API的返回值放在eax中，所以这句话的意思就是的到最近一个API的返回值。  </li><li>如果你需要看的是一个array，你可以通过在watch中写 array, 3来看数组的前3个值。  </li><li>可以监听AppDomain的FirstChanceException事件来找到exception的第一现场。  </li><li>如果想先catch在throw。应该用<code>catch(e){throw;}</code>而不是 <code>catch(e){throw e;}</code>。  </li><li>在函数前加属性<code>[MethodImpl](MethodImplOptions.NoInlining)]</code>可以强迫JIT在异常抛出时不要inline这个方法。我在之前的博客中介绍过如何使用debugger attribute来定制在Visual Studio中的信息。参见<a href="/2012/07/16/customize-your-own-debugger-visualizer-in-csharp/">定制自己的Visual Studio的Debugger Visualizer</a>和<a href="http://www.cnblogs.com/fresky/articles/2133378.html" target="_blank" rel="noopener">定制C#在Visual Studio中的debug信息</a>  </li><li>可以调用 <code>SetErrorMode(SEM_NOGPFAULTERRORBOX)</code> 来禁用Windows Error Reporting，就是出错后问你要不要发送出错信息的那个对话框。</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;强迫执行域（CERs）通常用于遇到未预见的异常时，保证系统被多个AppDomain或者进程共享的状态的正确性。&lt;/p&gt;&lt;br&gt;&lt;p&gt;这种异常我们通常称之为Asynchronous Exception。比如当调用一个函数时，CLR需要去加载assembly，在AppDomai
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>常见的算法的时间和空间复杂度</title>
    <link href="http://fresky.github.io/2013/06/07/complexity-for-common-algorithms/"/>
    <id>http://fresky.github.io/2013/06/07/complexity-for-common-algorithms/</id>
    <published>2013-06-06T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.260Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://bigocheatsheet.com/" target="_blank" rel="noopener">Big-O Algorithm Complexity Cheat Sheet</a> 列出了常见的算法的时间和空间复杂度，非常直观。</p>  <p>转载到了这里，大家可以看看。</p>  <p>&#160;</p>  <table id="legend" class="table table-bordered table-striped" border="1"><tbody>     <tr>       <td><code class="green">Good</code></td>        <td><code class="yellow">Fair</code></td>        <td><code class="red">Poor</code></td>     </tr>   </tbody></table>  <h2 id="searching">Searching</h2>  <table class="table table-bordered table-striped" border="1"><thead>     <tr>       <th>Algorithm</th>        <th>Data Structure</th>        <th colspan="2">Time Complexity</th>        <th colspan="3">Space Complexity</th>     </tr>      <tr>       <th></th>        <th></th>        <th>Average</th>        <th>Worst</th>        <th>Worst</th>     </tr>   </thead><tbody>     <tr>       <td><a href="http://en.wikipedia.org/wiki/Depth-first_search" target="_blank" rel="noopener">Depth First Search (DFS)</a></td>        <td>Graph of |V| vertices and |E| edges</td>        <td><code>-</code></td>        <td><code class="green">O(|E| + |V|)</code></td>        <td><code class="green">O(|V|)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Breadth-first_search" target="_blank" rel="noopener">Breadth First Search (BFS)</a></td>        <td>Graph of |V| vertices and |E| edges</td>        <td><code>-</code></td>        <td><code class="green">O(|E| + |V|)</code></td>        <td><code class="green">O(|V|)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Binary_search_algorithm" target="_blank" rel="noopener">Binary search</a></td>        <td>Sorted array of n elements</td>        <td><code class="green">O(log(n))</code> </td>        <td><code class="green">O(log(n))</code> </td>        <td><code class="green">O(1)</code> </td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Brute-force_search" target="_blank" rel="noopener">Linear (Brute Force)</a></td>        <td>Array</td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="green">O(1)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Dijkstra's_algorithm" target="_blank" rel="noopener">Shortest path by Dijkstra,            <br>using a Min-heap as priority queue</a></td>        <td>Graph with |V| vertices and |E| edges</td>        <td><code class="yellow">O((|V| + |E|) log |V|)</code></td>        <td><code class="yellow">O((|V| + |E|) log |V|)</code></td>        <td><code class="yellow">O(|V|)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Dijkstra's_algorithm" target="_blank" rel="noopener">Shortest path by Dijkstra,            <br>using an unsorted array as priority queue</a></td>        <td>Graph with |V| vertices and |E| edges</td>        <td><code class="yellow">O(|V|^2)</code></td>        <td><code class="yellow">O(|V|^2)</code></td>        <td><code class="yellow">O(|V|)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm" target="_blank" rel="noopener">Shortest path by Bellman-Ford</a></td>        <td>Graph with |V| vertices and |E| edges</td>        <td><code class="yellow">O(|V||E|)</code></td>        <td><code class="yellow">O(|V||E|)</code></td>        <td><code class="yellow">O(|V|)</code></td>     </tr>   </tbody></table>  <h2 id="sorting">Sorting</h2>  <table class="table table-bordered table-striped" border="1" table="table"><thead>     <tr>       <th>Algorithm</th>        <th>Data Structure</th>        <th colspan="3">Time Complexity</th>        <th colspan="3">Worst Case Auxiliary Space Complexity</th>     </tr>      <tr>       <th></th>        <th></th>        <th>Best</th>        <th>Average</th>        <th>Worst</th>        <th>Worst</th>     </tr>   </thead><tbody>     <tr>       <td><a href="http://en.wikipedia.org/wiki/Quicksort" target="_blank" rel="noopener">Quicksort</a></td>        <td>Array</td>        <td><code class="yellow">O(n log(n))</code></td>        <td><code class="green">O(n log(n))</code></td>        <td><code class="red">O(n^2)</code></td>        <td><code class="yellow">O(n)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Merge_sort" target="_blank" rel="noopener">Mergesort</a></td>        <td>Array</td>        <td><code class="yellow">O(n log(n))</code></td>        <td><code class="green">O(n log(n))</code></td>        <td><code class="green">O(n log(n))</code></td>        <td><code class="red">O(n)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Heapsort" target="_blank" rel="noopener">Heapsort</a></td>        <td>Array</td>        <td><code class="yellow">O(n log(n))</code></td>        <td><code class="green">O(n log(n))</code></td>        <td><code class="green">O(n log(n))</code></td>        <td><code class="green">O(1)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Bubble_sort" target="_blank" rel="noopener">Bubble Sort</a></td>        <td>Array</td>        <td><code class="green">O(n)</code></td>        <td><code class="red">O(n^2)</code></td>        <td><code class="red">O(n^2)</code></td>        <td><code class="green">O(1)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Insertion_sort" target="_blank" rel="noopener">Insertion Sort</a></td>        <td>Array</td>        <td><code class="green">O(n)</code></td>        <td><code class="red">O(n^2)</code></td>        <td><code class="red">O(n^2)</code></td>        <td><code class="green">O(1)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Selection_sort" target="_blank" rel="noopener">Select Sort</a></td>        <td>Array</td>        <td><code class="red">O(n^2)</code></td>        <td><code class="red">O(n^2)</code></td>        <td><code class="red">O(n^2)</code></td>        <td><code class="green">O(1)</code></td>     </tr>      <tr>       <td><a title="Only for integers with range k" href="http://en.wikipedia.org/wiki/Bucket_sort" rel="noopener" target="_blank">Bucket Sort</a></td>        <td>Array</td>        <td><code class="green">O(n+k)</code></td>        <td><code class="green">O(n+k)</code></td>        <td><code class="red">O(n^2)</code></td>        <td><code class="yellow">O(nk)</code></td>     </tr>      <tr>       <td><a title="Constant number of digits &#39;k&#39;" href="http://en.wikipedia.org/wiki/Radix_sort" rel="noopener" target="_blank">Radix Sort</a></td>        <td>Array</td>        <td><code class="green">O(nk)</code></td>        <td><code class="green">O(nk)</code></td>        <td><code class="green">O(nk)</code></td>        <td><code class="yellow">O(n+k)</code></td>     </tr>   </tbody></table>  <h2 id="data-structures">Data Structures</h2>  <table class="table table-bordered table-striped" border="1"><thead>     <tr>       <th>Data Structure</th>        <th colspan="8">Time Complexity</th>        <th>Space Complexity</th>     </tr>      <tr>       <th></th>        <th colspan="4">Average</th>        <th colspan="4">Worst</th>        <th>Worst</th>     </tr>      <tr>       <th></th>        <th>Indexing</th>        <th>Search</th>        <th>Insertion</th>        <th>Deletion</th>        <th>Indexing</th>        <th>Search</th>        <th>Insertion</th>        <th>Deletion</th>        <th></th>     </tr>   </thead><tbody>     <tr>       <td><a href="http://en.wikipedia.org/wiki/Array_data_structure" target="_blank" rel="noopener">Basic Array</a></td>        <td><code class="green">O(1)</code></td>        <td><code class="red">O(n)</code></td>        <td><code>-</code></td>        <td><code>-</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="red">O(n)</code></td>        <td><code>-</code></td>        <td><code>-</code></td>        <td><code class="yellow">O(n)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Dynamic_array" target="_blank" rel="noopener">Dynamic Array</a></td>        <td><code class="green">O(1)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="yellow">O(n)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Singly_linked_list#Singly_linked_lists" target="_blank" rel="noopener">Singly-Linked List</a></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="yellow">O(n)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Doubly_linked_list" target="_blank" rel="noopener">Doubly-Linked List</a></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="yellow">O(n)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Skip_list" target="_blank" rel="noopener">Skip List</a></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n log(n))</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Hash_table" target="_blank" rel="noopener">Hash Table</a></td>        <td><code>-</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="green">O(1)</code></td>        <td><code>-</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="yellow">O(n)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Binary_search_tree" target="_blank" rel="noopener">Binary Search Tree</a></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="yellow">O(n)</code></td>     </tr>      <tr>       <td><a href="https://en.wikipedia.org/wiki/Cartesian_tree" target="_blank" rel="noopener">Cartresian Tree</a></td>        <td><code>-</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code>-</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="red">O(n)</code></td>        <td><code class="yellow">O(n)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/B_tree" target="_blank" rel="noopener">B-Tree</a></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="yellow">O(n)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Red-black_tree" target="_blank" rel="noopener">Red-Black Tree</a></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="yellow">O(n)</code></td>     </tr>      <tr>       <td><a href="https://en.wikipedia.org/wiki/Splay_tree" target="_blank" rel="noopener">Splay Tree</a></td>        <td><code>-</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code>-</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="yellow">O(n)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/AVL_tree" target="_blank" rel="noopener">AVL Tree</a></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="green">O(log(n))</code></td>        <td><code class="yellow">O(n)</code></td>     </tr>   </tbody></table>  <h2 id="heaps">Heaps</h2>  <table class="table table-bordered table-striped" border="1"><thead>     <tr>       <th>Heaps</th>        <th colspan="7">Time Complexity</th>     </tr>      <tr>       <th></th>        <th>Heapify</th>        <th>Find Max</th>        <th>Extract Max</th>        <th>Increase Key</th>        <th>Insert</th>        <th>Delete</th>        <th>Merge</th>        <th></th>     </tr>   </thead><tbody>     <tr>       <td><a href="http://en.wikipedia.org/wiki/Linked_list" target="_blank" rel="noopener">Linked List (sorted)</a></td>        <td><code>-</code></td> <!-- heapify -->        <td><code class="green">O(1)</code></td> <!-- Find max -->        <td><code class="green">O(1)</code></td> <!-- Extract max -->        <td><code class="red">O(n)</code></td> <!-- Increase -->        <td><code class="red">O(n)</code></td> <!-- insert -->        <td><code class="green">O(1)</code></td> <!-- delete -->        <td><code class="red">O(m+n)</code></td> <!-- merge --></tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Linked_list" target="_blank" rel="noopener">Linked List (unsorted)</a></td>        <td><code>-</code></td> <!-- heapify -->        <td><code class="red">O(n)</code></td> <!-- Find max -->        <td><code class="red">O(n)</code></td> <!-- Extract max -->        <td><code class="green">O(1)</code></td> <!-- Increase -->        <td><code class="green">O(1)</code></td> <!-- insert -->        <td><code class="green">O(1)</code></td> <!-- delete -->        <td><code class="green">O(1)</code></td> <!-- merge --></tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Binary_heap" target="_blank" rel="noopener">Binary Heap</a></td>        <td><code class="yellow">O(n)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="red">O(m+n)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Binomial_heap" target="_blank" rel="noopener">Binomial Heap</a></td>        <td><code>-</code></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="yellow">O(log(n))</code></td>        <td><code class="yellow">O(log(n))</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Fibonacci_heap" target="_blank" rel="noopener">Fibonacci Heap</a></td>        <td><code>-</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="yellow" title="Amortized" rel="tooltip">O(log(n))<em></em></code></td>        <td><code class="green" title="Amortized" rel="tooltip">O(1)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="yellow" title="Amortized" rel="tooltip">O(log(n))<em></em></code></td>        <td><code class="green">O(1)</code></td>     </tr>   </tbody></table>  <h2 id="graphs">Graphs</h2>  <table class="table table-bordered table-striped" border="1"><tbody>     <tr>       <th>Node / Edge Management</th>        <th>Storage</th>        <th>Add Vertex</th>        <th>Add Edge</th>        <th>Remove Vertex</th>        <th>Remove Edge</th>        <th>Query</th>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Adjacency_list" target="_blank" rel="noopener">Adjacency list</a></td>        <td><code class="yellow">O(|V|+|E|)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="yellow">O(|V| + |E|)</code></td>        <td><code class="yellow">O(|E|)</code></td>        <td><code class="yellow">O(|V|)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Incidence_list" target="_blank" rel="noopener">Incidence list</a></td>        <td><code class="yellow">O(|V|+|E|)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="yellow">O(|E|)</code></td>        <td><code class="yellow">O(|E|)</code></td>        <td><code class="yellow">O(|E|)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Adjacency_matrix" target="_blank" rel="noopener">Adjacency matrix</a></td>        <td><code class="red">O(|V|^2)</code></td>        <td><code class="red">O(|V|^2)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="red">O(|V|^2)</code></td>        <td><code class="green">O(1)</code></td>        <td><code class="green">O(1)</code></td>     </tr>      <tr>       <td><a href="http://en.wikipedia.org/wiki/Incidence_matrix" target="_blank" rel="noopener">Incidence matrix</a></td>        <td><code class="red">O(|V| ⋅ |E|)</code></td>        <td><code class="red">O(|V| ⋅ |E|)</code></td>        <td><code class="red">O(|V| ⋅ |E|)</code></td>        <td><code class="red">O(|V| ⋅ |E|)</code></td>        <td><code class="red">O(|V| ⋅ |E|)</code></td>        <td><code class="yellow">O(|E|)</code></td>     </tr>   </tbody></table>  <h2 id="growth">Notation for asymptotic growth</h2>  <table class="table table-bordered table-striped" border="1"><tbody>     <tr>       <th>letter</th>        <th>bound</th>        <th>growth</th>     </tr>      <tr>       <td>(theta) Θ</td>        <td>upper and lower, tight<a href="#footnote-1"><sup>[1]</sup></a></td>        <td>equal<a href="#footnote-1"><sup>[2]</sup></a></td>     </tr>      <tr>       <td>(big-oh) O</td>        <td>upper, tightness unknown</td>        <td>less than or equal<a href="#footnote-1"><sup>[3]</sup></a></td>     </tr>      <tr>       <td>(small-oh) o</td>        <td>upper, not tight</td>        <td>less than</td>     </tr>      <tr>       <td>(big omega) Ω</td>        <td>lower, tightness unknown</td>        <td>greater than or equal</td>     </tr>      <tr>       <td>(small omega) ω</td>        <td>lower, not tight</td>        <td>greater than</td>     </tr>   </tbody></table>  <p id="footnote-1">[1] Big O is the upper bound, while Omega is the lower bound. Theta requires both Big O and Omega, so that’s why it’s referred to as a tight bound (it must be both the upper and lower bound). For example, an algorithm taking Omega(n log n) takes at least n log n time but has no upper limit. An algorithm taking Theta(n log n) is far preferential since it takes AT LEAST n log n (Omega n log n) and NO MORE THAN n log n (Big O n log n).<sup><a href="http://stackoverflow.com/a/464081/412916" target="_blank" rel="noopener">SO</a></sup></p>  <p id="footnote-2">[2] f(x)=Θ(g(n)) means f (the running time of the algorithm) grows exactly like g when n (input size) gets larger. In other words, the growth rate of f(x) is asymptotically proportional to g(n).</p>  <p id="footnote-1">[3] Same thing. Here the growth rate is no faster than g(n). big-oh is the most useful because represents the worst-case behavior.</p> In short, if algorithm is <strong> then its performance is </strong>   <table class="table table-bordered table-striped" border="1"><tbody>     <tr>       <th>algorithm</th>        <th>performance</th>     </tr>      <tr>       <td>o(n)</td>        <td>&lt; n</td>     </tr>      <tr>       <td>O(n)</td>        <td>≤ n</td>     </tr>      <tr>       <td>Θ(n)</td>        <td>= n</td>     </tr>      <tr>       <td>Ω(n)</td>        <td>≥ n</td>     </tr>      <tr>       <td>ω(n)</td>        <td>&gt; n</td>     </tr>   </tbody></table>  <div id="middle-ad"><script type="text/javascript">&lt;!–<br>google_ad_client = “ca-pub-8154832549041429”;<br>/</em> BigO Middle */<br>google_ad_slot = “4018097420”;<br>google_ad_width = 728;<br>google_ad_height = 90;<br>//–&gt;<br></script><script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"><br></script></div>  <h2 id="chart">Big-O Complexity Chart</h2> <img title="Big O Complexity Graph" alt="Big O Complexity Graph" src="http://bigocheatsheet.com/img/big-o-complexity.png">   <div id="contribute-container">   <h2>Contribute</h2>   <a href="https://github.com/ericdrowell/BigOCheatSheet/blob/master/Tables.html" target="_blank" rel="noopener">Edit these tables!</a>     <br>    <br>    <p>Authors:</p>    <ol>     <li><a href="https://github.com/ericdrowell" target="_blank" rel="noopener">Eric Rowell</a> </li>      <li><a href="https://github.com/qpleple" target="_blank" rel="noopener">Quentin Pleple</a> </li>      <li><a href="https://github.com/ndizazzo" target="_blank" rel="noopener">Nick Dizazzo</a> </li>      <li><a href="https://github.com/vault" target="_blank" rel="noopener">Michael Abed</a> </li>      <li><a href="https://github.com/agfor" target="_blank" rel="noopener">Adam Forsyth</a> </li>      <li><a href="https://github.com/jay754" target="_blank" rel="noopener">Jay Engineer</a> </li>      <li><a href="https://github.com/jdavis" target="_blank" rel="noopener">Josh Davis</a> </li>      <li><a href="https://github.com/makosblade" target="_blank" rel="noopener">makosblade</a> </li>      <li><a href="https://github.com/j4n0" target="_blank" rel="noopener">Alejandro Ramirez</a> </li>      <li><a href="https://github.com/jfriedly" target="_blank" rel="noopener">Joel Friedly</a> </li>      <li><a href="https://github.com/sharpobject" target="_blank" rel="noopener">Robert Burke</a> </li>      <li><a href="https://github.com/wiz3kid" target="_blank" rel="noopener">David Dorfman</a> </li>      <li><a href="https://github.com/elefevre" target="_blank" rel="noopener">Eric Lefevre-Ardant</a> </li>      <li><a href="https://github.com/thomasahle" target="_blank" rel="noopener">Thomas Dybdahl Ahle</a> </li>   </ol> </div><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://bigocheatsheet.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Big-O Algorithm Complexity Cheat Sheet&lt;/a&gt; 列出了常见的算法的时间和空间复杂度，非
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="http://fresky.github.io/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>正则表达式中\d和[0-9]有什么区别</title>
    <link href="http://fresky.github.io/2013/06/04/d-0-9-difference-in-regex/"/>
    <id>http://fresky.github.io/2013/06/04/d-0-9-difference-in-regex/</id>
    <published>2013-06-03T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.260Z</updated>
    
    <content type="html"><![CDATA[<p>今天看到Stackoverflow上一个有趣的<a href="http://stackoverflow.com/questions/16621738/d-is-less-efficient-than-0-9?newsletter=1&amp;nlcode=55866%7cc739" target="_blank" rel="noopener">问题</a>，为什么正则表达式在中\d比[0-0]低效？</p><br><p>提问者用了如下的代码来做测试：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">var</span> rand = <span class="keyword">new</span> Random(<span class="number">1234</span>);</span><br><span class="line">            <span class="keyword">var</span> strings = <span class="keyword">new</span> List&lt;<span class="keyword">string</span>&gt;();</span><br><span class="line">            <span class="comment">//10K random strings</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//Generate random string</span></span><br><span class="line">                <span class="keyword">var</span> sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> c = <span class="number">0</span>; c &lt; <span class="number">1000</span>; c++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//Add a-z randomly</span></span><br><span class="line">                    sb.Append((<span class="keyword">char</span>)(<span class="string">'a'</span> + rand.Next(<span class="number">26</span>)));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//In roughly 50% of them, put a digit</span></span><br><span class="line">                <span class="keyword">if</span> (rand.Next(<span class="number">2</span>) == <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//Replace one character with a digit, 0-9</span></span><br><span class="line">                    sb[rand.Next(sb.Length)] = (<span class="keyword">char</span>)(<span class="string">'0'</span> + rand.Next(<span class="number">10</span>));</span><br><span class="line">                &#125;</span><br><span class="line">                strings.Add(sb.ToString());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> baseTime = testPerfomance(strings, <span class="string">@"\d"</span>);</span><br><span class="line">            Console.WriteLine();</span><br><span class="line">            <span class="keyword">var</span> testTime = testPerfomance(strings, <span class="string">"[0-9]"</span>);</span><br><span class="line">            Console.WriteLine(<span class="string">"  &#123;0:P2&#125; of first"</span>, testTime.TotalMilliseconds / baseTime.TotalMilliseconds);</span><br><span class="line">            testTime = testPerfomance(strings, <span class="string">"[0123456789]"</span>);</span><br><span class="line">            Console.WriteLine(<span class="string">"  &#123;0:P2&#125; of first"</span>, testTime.TotalMilliseconds / baseTime.TotalMilliseconds);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> TimeSpan <span class="title">testPerfomance</span>(<span class="params">List&lt;<span class="keyword">string</span>&gt; strings, <span class="keyword">string</span> regex</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">var</span> sw = <span class="keyword">new</span> Stopwatch();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> successes = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> rex = <span class="keyword">new</span> Regex(regex);</span><br><span class="line"></span><br><span class="line">            sw.Start();</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> str <span class="keyword">in</span> strings)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (rex.Match(str).Success)</span><br><span class="line">                &#123;</span><br><span class="line">                    successes++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            sw.Stop();</span><br><span class="line"></span><br><span class="line">            Console.Write(<span class="string">"Regex &#123;0,-12&#125; took &#123;1&#125; result: &#123;2&#125;/&#123;3&#125;"</span>, regex, sw.Elapsed, successes, strings.Count);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> sw.Elapsed;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>得到的输出结果是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Regular expression \d           took 00:00:00.2141226 result: 5077/10000</span><br><span class="line">Regular expression [0-9]        took 00:00:00.1357972 result: 5077/10000  63.42 % of first</span><br><span class="line">Regular expression [0123456789] took 00:00:00.1388997 result: 5077/10000  64.87 % of first</span><br></pre></td></tr></table></figure><p>从这个测试中可以看出\d比[0-9]慢了一倍。</p><br><h3>&nbsp;</h3><br><p>原因在于，\d会比较所有的unicode的数字，包括</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0123456789٠١٢٣٤٥٦٧٨٩۰۱۲۳۴۵۶۷۸۹߀߁߂߃߄߅߆߇߈߉०१२३४५६७८९০১২৩৪৫৬৭৮৯੦੧੨੩੪੫੬੭੮੯૦૧૨૩૪૫૬૭૮૯୦୧୨୩୪୫୬୭୮୯௦௧௨௩௪௫௬௭௮௯౦౧౨౩౪౫౬౭౮౯೦೧೨೩೪೫೬೭೮೯൦൧൨൩൪൫൬൭൮൯๐๑๒๓๔๕๖๗๘๙໐໑໒໓໔໕໖໗໘໙༠༡༢༣༤༥༦༧༨༩၀၁၂၃၄၅၆၇၈၉႐႑႒႓႔႕႖႗႘႙០១២៣៤៥៦៧៨៩᠐᠑᠒᠓᠔᠕᠖᠗᠘᠙᥆᥇᥈᥉᥊᥋᥌᥍᥎᥏᧐᧑᧒᧓᧔᧕᧖᧗᧘᧙᭐᭑᭒᭓᭔᭕᭖᭗᭘᭙᮰᮱᮲᮳᮴᮵᮶᮷᮸᮹᱀᱁᱂᱃᱄᱅᱆᱇᱈᱉᱐᱑᱒᱓᱔᱕᱖᱗᱘᱙꘠꘡꘢꘣꘤꘥꘦꘧꘨꘩꣐꣑꣒꣓꣔꣕꣖꣗꣘꣙꤀꤁꤂꤃꤄꤅꤆꤇꤈꤉꩐꩑꩒꩓꩔꩕꩖꩗꩘꩙０１２３４５６７８９</span><br></pre></td></tr></table></figure><p>可以从<a href="http://www.fileformat.info/info/unicode/category/Nd/list.htm" target="_blank" rel="noopener">这里</a>看到更全的列表，列出了所有Unicode中属于数字的字符。</p><br><h3>&nbsp;</h3><br><p>如果在生成Regex的时候传入一个参数<code>RegexOptions.ECMAScript</code>，如下所示，那么\d就和[0-9]的效率一样了。可以从<a href="http://msdn.microsoft.com/en-us/library/yd1hzczs.aspx" target="_blank" rel="noopener">这里</a>找到更多的Regex的选项。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rex = <span class="keyword">new</span> Regex(regex, RegexOptions.ECMAScript);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天看到Stackoverflow上一个有趣的&lt;a href=&quot;http://stackoverflow.com/questions/16621738/d-is-less-efficient-than-0-9?newsletter=1&amp;amp;nlcode=55866%7c
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Regex" scheme="http://fresky.github.io/tags/Regex/"/>
    
  </entry>
  
  <entry>
    <title>推荐试试这两个应用：Workflowy和Trello。</title>
    <link href="http://fresky.github.io/2013/06/03/useful-tools-worflowy-trello/"/>
    <id>http://fresky.github.io/2013/06/03/useful-tools-worflowy-trello/</id>
    <published>2013-06-02T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.259Z</updated>
    
    <content type="html"><![CDATA[<p></p><p>周末发现了两个有意思的网站，分别都有iOS的应用。</p><ol><li>一个是<a href="https://workflowy.com/" target="_blank" rel="noopener">WorkFlowy - Organize your brain.</a>，一个大纲软件，可以用来记笔记和各种想法，主要是输入很流畅。</li><li>一个是<a href="https://trello.com/" target="_blank" rel="noopener">Trello</a>是一个看板的实现，可以自己贴sticker，能和别人协作做项目管理，也能设置到期时间当一个GTD的工具。</li></ol><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;周末发现了两个有意思的网站，分别都有iOS的应用。&lt;/p&gt;&lt;ol&gt;&lt;li&gt;一个是&lt;a href=&quot;https://workflowy.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;WorkFlowy - Organize your 
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>大数据还是小数据</title>
    <link href="http://fresky.github.io/2013/05/28/big-data-or-small-data/"/>
    <id>http://fresky.github.io/2013/05/28/big-data-or-small-data/</id>
    <published>2013-05-27T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.259Z</updated>
    
    <content type="html"><![CDATA[<p>最近读了<a href="http://book.douban.com/subject/20429677/" target="_blank" rel="noopener">大数据时代</a>一书，对大数据做了一个很好的介绍。同时看到了一篇很有意思的文章<a href="http://qz.com/81661/most-data-isnt-big-and-businesses-are-wasting-money-pretending-it-is/" target="_blank" rel="noopener">Most data isn&rsquo;t &ldquo;big,&rdquo; and businesses are wasting money pretending it is</a></p><p>这篇文章说的是绝大部分的数据都不是&ldquo;大&rdquo;数据，如果公司假装它是&ldquo;大&rdquo;数据来处理的话，反而会给公司带来很多坏处，里面有很多有趣的链接，感兴趣的可以看看。</p><p>其中一篇是说什么是小数据（<a href="http://blog.okfn.org/2013/04/26/what-do-we-mean-by-small-data/" target="_blank" rel="noopener">What Do We Mean By Small Data | Open Knowledge Foundation Blog</a>），&ldquo;小数据是指你能很方便的用一台机器（比如一个高端的笔记本或者服务器）来存储和处理的数据&rdquo;。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近读了&lt;a href=&quot;http://book.douban.com/subject/20429677/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;大数据时代&lt;/a&gt;一书，对大数据做了一个很好的介绍。同时看到了一篇很有意思的文章&lt;a href=&quot;ht
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>一个很cool的展示编程语言相互影响关系的网状图</title>
    <link href="http://fresky.github.io/2013/05/28/cool-website-network-graph-programming-languages-influence/"/>
    <id>http://fresky.github.io/2013/05/28/cool-website-network-graph-programming-languages-influence/</id>
    <published>2013-05-27T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.259Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://visual.ly/network-graph-programming-languages-influence?view=true" target="_blank" rel="noopener">Network Graph of Programming Languages Influence | Visual.ly</a>是一个交互的网络图，可以显示各种编程语言之间的互相影响，很cool。</p>  <p>下图是一个截图。</p>  <p><a href="http://images.cnitblog.com/blog/163228/201305/28172719-9254a3504ad44228b1b61dc02b08d2dc.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201305/28172722-4c185cb38847461cb39b0b61b015f9c7.png" width="578" height="418"></a></p>  <p>点击语言的节点，可以看见更多的信息。</p>  <p><a href="http://images.cnitblog.com/blog/163228/201305/28172724-73b12effe9344988869d6710c97e3c6a.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201305/28172725-7b205fff30cc4309aa8b2647deca1f5d.png" width="600" height="270"></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://visual.ly/network-graph-programming-languages-influence?view=true&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Network Graph of Progra
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>C++的C4305和C4800的编译警告</title>
    <link href="http://fresky.github.io/2013/05/24/c4305-and-c4800-compiler-warning-in-cpp/"/>
    <id>http://fresky.github.io/2013/05/24/c4305-and-c4800-compiler-warning-in-cpp/</id>
    <published>2013-05-23T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.259Z</updated>
    
    <content type="html"><![CDATA[<p>今天在改代码时发现了这两个warning，<a href="http://msdn.microsoft.com/en-us/library/0as1ke3f%28v=vs.80%29.aspx" target="_blank" rel="noopener">C4305</a> - ‘identifier’ : truncation from ‘type1’ to ‘type2’ 和<a href="http://msdn.microsoft.com/en-us/library/b6801kcy%28v=VS.71%29.aspx" target="_blank" rel="noopener">C4800</a> - ‘type’ : forcing value to bool ‘true’ or ‘false’ (performance warning)。</p>  <p>大家看看下面的代码吧，一目了然。：）</p>  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a1 = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> a2 = <span class="number">2</span>;</span><br><span class="line">MyEnum m = MyEnum::a;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> b = <span class="number">1</span>;             <span class="comment">// no warning</span></span><br><span class="line">b = <span class="number">2</span>;                  <span class="comment">// warning C4305: '=' : truncation from 'int' to 'bool'</span></span><br><span class="line">b = a1;                 <span class="comment">// warning C4800: 'int' : forcing value to bool 'true' or 'false' (performance warning)    </span></span><br><span class="line">b = a2;                 <span class="comment">// warning C4800: 'int' : forcing value to bool 'true' or 'false' (performance warning)    </span></span><br><span class="line">b = MyEnum::a;          <span class="comment">// no warning</span></span><br><span class="line">b = m;                  <span class="comment">// warning C4800: 'MyEnum' : forcing value to bool 'true' or 'false' (performance warning)    </span></span><br><span class="line">b = !!a2;               <span class="comment">// no warning</span></span><br><span class="line">b = a2!=<span class="number">0</span>;              <span class="comment">// no warning</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天在改代码时发现了这两个warning，&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/0as1ke3f%28v=vs.80%29.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;C4305&lt;/a
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>从大数据时代上看来的另一个有趣的应用 - reCAPTCHA</title>
    <link href="http://fresky.github.io/2013/05/22/intresting-app-recaptcha/"/>
    <id>http://fresky.github.io/2013/05/22/intresting-app-recaptcha/</id>
    <published>2013-05-21T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.259Z</updated>
    
    <content type="html"><![CDATA[<p>从大数据时代上看来的另一个有趣的应用，<a href="http://www.google.com/recaptcha/learnmore" target="_blank" rel="noopener">What is reCAPTCHA?</a>。利用人们输入验证码的&ldquo;废料&rdquo;改进OCR。</p><p>&nbsp;</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;从大数据时代上看来的另一个有趣的应用，&lt;a href=&quot;http://www.google.com/recaptcha/learnmore&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;What is reCAPTCHA?&lt;/a&gt;。利用人们输入验证码的&amp;l
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>大数据的例子：Google Books Ngram</title>
    <link href="http://fresky.github.io/2013/05/21/google-book-ngram-example-of-big-data/"/>
    <id>http://fresky.github.io/2013/05/21/google-book-ngram-example-of-big-data/</id>
    <published>2013-05-20T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.258Z</updated>
    
    <content type="html"><![CDATA[<p>最近在看大数据时代这本书，从里面看到的<a href="http://books.google.com/ngrams" target="_blank" rel="noopener">Google Ngram Viewer</a>还挺有意思的，大家可以上去填几个感兴趣的词看看。</p>  <p>比如下图是1990到2008年中microsoft，yahoo，google的图示：</p>  <p><a href="http://images.cnitblog.com/blog/163228/201305/21121429-c086fd733c484f94a5ec2f71352cc50a.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="ngram" border="0" alt="ngram" src="http://images.cnitblog.com/blog/163228/201305/21121430-dbb8213eb74741518696e50752cf774e.png" width="926" height="258"></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近在看大数据时代这本书，从里面看到的&lt;a href=&quot;http://books.google.com/ngrams&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Google Ngram Viewer&lt;/a&gt;还挺有意思的，大家可以上去填几个感兴趣的词看看
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>如何在TFS中配置别的diff/merge的工具</title>
    <link href="http://fresky.github.io/2013/05/21/how-to-config-diff-merge-tool-in-tfs/"/>
    <id>http://fresky.github.io/2013/05/21/how-to-config-diff-merge-tool-in-tfs/</id>
    <published>2013-05-20T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.258Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://blogs.msdn.com/b/jmanning/archive/2006/02/20/diff-merge-configuration-in-team-foundation-common-command-and-argument-values.aspx" target="_blank" rel="noopener">diff/merge configuration in Team Foundation - common Command and Argument values - James Manning’s blog - Site Home - MSDN Blogs</a>列举了TFS中diff/merge的参数是什么意思，如下：</p><blockquote><ul><li>%1 = Original file (in diff, the pre-changes file, in merge, the “server” or “theirs” file, the file that is the base file after “their” changes were applied) </li><li>%2 = Modified file (in diff, the post-changes file, in merge the “yours” file - the base file with “your” changes applied) </li><li>%3 = Base file (in the 3-way merge operation, the file which both “theirs” and “yours” are derived from - the common ancestor.&nbsp; This doesn’t mean it’s the version the changes were based from, since this may be a cherry-pick merge) </li><li>%4 = Merged file (The output file for the merge operation - the filename that the merge tool should write to) </li><li>%5 = Diff options (any additional command-line options you want to pass to your diff tool - this comes into play only when using “tf diff /options” from the command-line) </li><li>%6 = Original file label (The label for the %1 file) </li><li>%7 = Modified file label (The label for the %2 file) </li><li>%8 = Base file label (The label for the %3 file) </li><li>%9 = Merged file label (The label for the %4 file)</li></ul><p>并且列出了如何配置如下的第三方diff/merge工具。</p><p><strong><span style="text-decoration: underline;">Compare tools</span></strong></p><table border="1"><tbody><tr><th>Product</th> <th>Command</th> <th>Arguments</th></tr><tr><td>TFS default</td><td>diffmerge.exe</td><td>%1 %2 %6 %7 %5 /ignorespace</td></tr><tr><td><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/tools/tools/windiff.asp" target="_blank" rel="noopener">WinDiff</a></td><td>windiff.exe</td><td>%1 %2</td></tr><tr><td><a href="http://www.softinterface.com/MD/MD.htm" target="_blank" rel="noopener">DiffDoc (for Word files)</a></td><td>DiffDoc.exe</td><td>/M%1 /S%2</td></tr><tr><td><a href="http://winmerge.sourceforge.net/" target="_blank" rel="noopener">WinMerge</a></td><td>winmerge.exe</td><td>/ub /dl %6 /dr %7 %1 %2</td></tr><tr><td><a href="http://www.scootersoftware.com/" target="_blank" rel="noopener">Beyond Compare</a></td><td>bc2.exe</td><td>%1 %2 /title1=%6 /title2=%7</td></tr><tr><td><a href="http://kdiff3.sourceforge.net/" target="_blank" rel="noopener">KDiff3</a></td><td>kdiff3.exe</td><td>%1 –fname %6 %2 –fname %7</td></tr><tr><td><a href="http://www.araxis.com/merge/command_line.html" target="_blank" rel="noopener">Araxis</a></td><td>compare.exe</td><td>/wait /2 /title1:%6 /title2:%7 %1 %2</td></tr><tr><td><a href="http://www.grigsoft.com/wincmp.htm" target="_blank" rel="noopener">Compare It!</a></td><td>Wincmp3.exe</td><td>%1 /=%6 %2 /=%7</td></tr><tr><td><a href="http://www.sourcegear.com/diffmerge/downloads.html" target="_blank" rel="noopener">SourceGear DiffMerge</a></td><td>DiffMerge.exe</td><td>/title1=%6 /title2=%7 %1 %2</td></tr><tr><td><a href="http://www.scootersoftware.com/beta3/" target="_blank" rel="noopener">Beyond Compare 3</a></td><td>BComp.exe</td><td>%1 %2 /title1=%6 /title2=%7</td></tr><tr><td><a href="http://tortoisesvn.tigris.org/TortoiseMerge.html" target="_blank" rel="noopener">TortoiseMerge</a></td><td>TortoiseMerge.exe</td><td>/base:%1 /mine:%2 /basename:%6 /minename:%7</td></tr><tr><td><a href="http://www.slickedit.com/" target="_blank" rel="noopener">Visual SlickEdit</a></td><td>win\vsdiff.exe</td><td>%1 %2</td></tr></tbody></table><p><strong><span style="text-decoration: underline;">Merge tools</span></strong></p><table style="width: 570px; height: 186px;" border="1"><tbody><tr><th>Product</th> <th>Command</th> <th>Arguments</th></tr><tr><td>TFS default</td><td>diffmerge.exe</td><td>/merge %1 %2 %3 %4 %6 %7</td></tr><tr><td><a href="http://kdiff3.sourceforge.net/" target="_blank" rel="noopener">KDiff3</a></td><td>kdiff3.exe</td><td>%3 –fname %8 %2 –fname %7 %1 –fname %6 -o %4</td></tr><tr><td><a href="http://msdn.microsoft.com/ssafe/" target="_blank" rel="noopener">Visual SourceSafe</a></td><td>ssexp.exe</td><td>/merge %1 %2 %3 %4 %6 %7</td></tr><tr><td><a href="http://www.araxis.com/" target="_blank" rel="noopener">Araxis</a></td><td>compare.exe</td><td>/wait /swap /a3 /3 /title1:%6 /title2:%7 /title3:%8 %1 %2 %3 %4</td></tr><tr><td><a href="http://www.scootersoftware.com/" target="_blank" rel="noopener">Beyond Compare (2-way merge)</a></td><td>bc2.exe</td><td>%1 %2 /savetarget=%4 /title1=%6 /title2=%7</td></tr><tr><td><a href="http://winmerge.sourceforge.net/" target="_blank" rel="noopener">WinMerge (2-way merge)</a></td><td>winmerge.exe</td><td>/ub /dl %6 /dr %7 %1 %2 %4</td></tr><tr><td><a href="http://www.guiffy.com/" target="_blank" rel="noopener">Guiffy</a></td><td>guiffy.exe</td><td>-s -h1%6 -h2%7 -hm%9 %1 %2 %3 %4</td></tr><tr><td><a href="http://www.elliecomputing.com/Home/default.asp" target="_blank" rel="noopener">Ellie Computing</a></td><td>guimerge.exe</td><td>–mode=merge3 %3 %1 %2 –to=%4 –title0=%8 –title1=%6 –title2=%7 –to-title=%9</td></tr><tr><td><a href="http://www.sourcegear.com/diffmerge/downloads.html" target="_blank" rel="noopener">SourceGear DiffMerge</a></td><td>DiffMerge.exe</td><td>/title1=%6 /title2=%8 /title3=%7 /result=%4 %1 %3 %2</td></tr><tr><td><a href="http://www.scootersoftware.com/beta3/" target="_blank" rel="noopener">Beyond Compare 3</a></td><td>BComp.exe</td><td>%1 %2 %3 %4 /title1=%6 /title2=%7 /title3=%8 /title4=%9</td></tr><tr><td><a href="http://tortoisesvn.tigris.org/TortoiseMerge.html" target="_blank" rel="noopener">TortoiseMerge</a></td><td>TortoiseMerge.exe</td><td>/base:%3 /mine:%2 /theirs:%1 /basename:%8 /minename:%7 /theirsname:%6 /merged:%4 /mergedname:%9</td></tr><tr><td><a href="http://www.slickedit.com/" target="_blank" rel="noopener">Visual SlickEdit</a></td><td>win\vsmerge.exe</td><td>%3 %1 %2 %4</td></tr></tbody></table></blockquote><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://blogs.msdn.com/b/jmanning/archive/2006/02/20/diff-merge-configuration-in-team-foundation-common-command-and-argume
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>理解程序语言语法的merge工具semanticmerge</title>
    <link href="http://fresky.github.io/2013/05/21/semanticmerge-understand-programming-syntax/"/>
    <id>http://fresky.github.io/2013/05/21/semanticmerge-understand-programming-syntax/</id>
    <published>2013-05-20T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.258Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.semanticmerge.com/" target="_blank" rel="noopener">Semantic Merge</a> 是一个能理解程序语言语法的merge工具，现在支持C#和VB，随后会支持C, C++, Objective-C, JavaScript…</p>  <p>它能和Git, Subversion, Perforce, ClearCase, Team Foundation Server, Mercurial的版本控制工具一起使用，你可以<a href="http://www.semanticmerge.com/documents/SemanticMerge-TFS.pdf" target="_blank" rel="noopener">这里</a>找到怎么集成到TFS上。</p>  <p>它不是一个免费的软件，但是现在可以免费申请beta的license。（到2013年8月过期）</p>  <p>&#160;</p>  <p>下面是我用他的diff功能做的一个小例子。安装后你可以在安装目录找到更多的使用示例。</p>  <p>用beyond compare比较一下两个文件，只修改了enum的位置和重命名。</p>  <p><a href="http://images.cnitblog.com/blog/163228/201305/21180547-11d4772467f34efcb38ded84cab10b42.jpg" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="clip_image001" border="0" alt="clip_image001" src="http://images.cnitblog.com/blog/163228/201305/21180549-e031a6f65c834070a9dc061e710ba977.jpg" width="744" height="525"></a></p>  <p>用semanticmerge返回的diff结果，1个移动，2个重命名。</p>  <p><a href="http://images.cnitblog.com/blog/163228/201305/21180549-4bcadb8674e8488b95e072840bf17527.jpg" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="clip_image002" border="0" alt="clip_image002" src="http://images.cnitblog.com/blog/163228/201305/21180550-0a99cb2303994211a7a5eb3fef64c9b5.jpg" width="485" height="646"></a></p>  <p>它自带的diff工具可以很清楚的看出来那里修改了。</p>  <p><a href="http://images.cnitblog.com/blog/163228/201305/21180550-c5192771005d4990b3172c6d3fa88247.jpg" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="clip_image003" border="0" alt="clip_image003" src="http://images.cnitblog.com/blog/163228/201305/21180551-db752e021f4e4fd9ba8dff93709f98df.jpg" width="579" height="508"></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.semanticmerge.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Semantic Merge&lt;/a&gt; 是一个能理解程序语言语法的merge工具，现在支持C#和VB，随后会支持C, C++, Obj
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>8件你不该做的事情（转）</title>
    <link href="http://fresky.github.io/2013/05/20/8-things-you-should-not-do-every-day/"/>
    <id>http://fresky.github.io/2013/05/20/8-things-you-should-not-do-every-day/</id>
    <published>2013-05-19T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.258Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://www.inc.com/jeff-haden/8-things-you-should-not-do-every-day.html?goback=.gde_60439_member_233861910" target="_blank" rel="noopener">Productivity: 8 Things You Should Not Do Every Day | Inc.com</a>列举了8件不该做的事情，看看你中招了几个？</p><ol><li>当和别人谈话时查看手机</li><li>开会时多任务</li><li>想一些不会改变你的生活的人</li><li>用多种提醒手段</li><li>用过去指示将来</li><li>一直等，直到确定自己能成功</li><li>背后评论别人</li><li>当想说&ldquo;No&rdquo;的时候说&ldquo;Yes&rdquo;</li></ol><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://www.inc.com/jeff-haden/8-things-you-should-not-do-every-day.html?goback=.gde_60439_member_233861910&quot; target=&quot;_blan
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>把C#当作脚本语言来用</title>
    <link href="http://fresky.github.io/2013/05/16/use-csharp-as-script-language/"/>
    <id>http://fresky.github.io/2013/05/16/use-csharp-as-script-language/</id>
    <published>2013-05-15T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.257Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://scottksmith.com/blog/2013/05/08/getting-started-with-scriptcs/" target="_blank" rel="noopener">Getting started with ScriptCS</a>介绍<a href="http://scriptcs.net/" target="_blank" rel="noopener">ScriptCS</a>，它能让你把把C#当作脚本语言来用。</p>  <p>这样你就能用脚本语言来写C#，比如把如下内容写在一个Sample.csx文件里。</p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">var</span> y = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">var</span> z = x * y;</span><br><span class="line">Console.WriteLine(z);</span><br></pre></td></tr></table></figure><p>然后在命令行写：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scriptcs Sample.csx</span><br></pre></td></tr></table></figure><p>然后就能得到如下的输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">d:\&gt;scriptcs Sample.csx</span><br><span class="line">INFO : Starting to create execution components</span><br><span class="line">INFO : Starting execution</span><br><span class="line">6</span><br><span class="line">INFO : Finished execution</span><br></pre></td></tr></table></figure><p><a href="https://github.com/scriptcs/scriptcs/wiki/Goals-and-Roadmap" target="_blank" rel="noopener">这里</a>写了ScriptCS的Value和Roadmap。</p><h3>价值：</h3><p>1. 简单 - 不是要重复一个VS，不需要读文档</p><p>2. 灵活</p><p>3.快速开发的平台。</p><h3>用处：</h3><p>1. 快速原型开发</p><p>2. 构建简单应用</p><p>3. 写自动化脚本</p><p>4. 初始化程序，比如某些事的引导程序</p><p>5. 用脚本扩展一个应用</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://scottksmith.com/blog/2013/05/08/getting-started-with-scriptcs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Getting started with Scrip
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>允许OSQA上传任意类型的文件</title>
    <link href="http://fresky.github.io/2013/05/15/allow-upload-file-of-any-type-in-osqa/"/>
    <id>http://fresky.github.io/2013/05/15/allow-upload-file-of-any-type-in-osqa/</id>
    <published>2013-05-14T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.257Z</updated>
    
    <content type="html"><![CDATA[<p>OSQA是一个很好的Q&amp;A的开源软件，我在之前的博客<a href="/2012/10/25/setup-osqa-in-windows/">用开源的OSQA在Windows上搭建Q&amp;A网站</a>中写过怎么用Zoo在IIS中搭建。今天介绍一下怎么允许用户上传任意类型的文件。</p>  <p>默认的OSQA只允许上传图片，然后图片会直接显示在question和answer中。可以通过修改forum\views\writers.py这个文件，删掉下面2行代码。</p>  <p>   <div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">     <pre><span style="color: #0000ff">if</span> <span style="color: #0000ff">not</span> file_name_suffix <span style="color: #0000ff">in</span> (<span style="color: #800000">‘</span><span style="color: #800000">.jpg</span><span style="color: #800000">‘</span>, <span style="color: #800000">‘</span><span style="color: #800000">.jpeg</span><span style="color: #800000">‘</span>, <span style="color: #800000">‘</span><span style="color: #800000">.gif</span><span style="color: #800000">‘</span>, <span style="color: #800000">‘</span><span style="color: #800000">.png</span><span style="color: #800000">‘</span>, <span style="color: #800000">‘</span><span style="color: #800000">.bmp</span><span style="color: #800000">‘</span>, <span style="color: #800000">‘</span><span style="color: #800000">.tiff</span><span style="color: #800000">‘</span>, <span style="color: #800000">‘</span><span style="color: #800000">.ico</span><span style="color: #800000">‘</span><span style="color: #000000">):<br>            </span><span style="color: #0000ff">raise</span> FileTypeNotAllow()</pre><br>  </div><br>这样用户就可以通过点那个image按钮上传任意类型的文件了，这些文件也会和图片一样，放在forum\upfiles里面。这个时候是需要修改markdown，把![alt text][url]改成[text][url]，就可以了，上传的文件会作为一个链接存在，可以下载。<br><br>  </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;OSQA是一个很好的Q&amp;amp;A的开源软件，我在之前的博客&lt;a href=&quot;/2012/10/25/setup-osqa-in-windows/&quot;&gt;用开源的OSQA在Windows上搭建Q&amp;amp;A网站&lt;/a&gt;中写过怎么用Zoo在IIS中搭建。今天介绍一下怎么允许用户上
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Python" scheme="http://fresky.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>怎么用windbg查看managed dump里面的string的值</title>
    <link href="http://fresky.github.io/2013/05/12/how-to-see-string-value-in-managed-dump-with-windbg/"/>
    <id>http://fresky.github.io/2013/05/12/how-to-see-string-value-in-managed-dump-with-windbg/</id>
    <published>2013-05-11T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.257Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://stackoverflow.com/a/5352242/304115" target="_blank" rel="noopener">stackoverflow</a>上这个回答很不错，用一个脚本把string的值打印到文本文件里，很方便。</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$$ Dumps the managed strings to a file</span><br><span class="line">$$ Platform x86</span><br><span class="line">$$ Usage $$&gt;a&lt;&quot;c:\temp\dumpstringtofolder.txt&quot; 6544f9ac 5000 c:\temp\stringtest</span><br><span class="line">$$ First argument is the string method table pointer</span><br><span class="line">$$ Second argument is the Min size of the string that needs to be used filter</span><br><span class="line">$$ the strings</span><br><span class="line">$$ Third is the path of the file</span><br><span class="line">.foreach ($string &#123;!dumpheap -short -mt $&#123;$arg1&#125;  -min $&#123;$arg2&#125;&#125;)</span><br><span class="line">&#123; </span><br><span class="line"></span><br><span class="line">  $$ MT        Field      Offset               Type  VT     Attr    Value Name</span><br><span class="line">  $$ 65452978  40000ed        4         System.Int32  1 instance    71117 m_stringLength</span><br><span class="line">  $$ 65451dc8  40000ee        8          System.Char  1 instance       3c m_firstChar</span><br><span class="line">  $$ 6544f9ac  40000ef        8        System.String  0   shared   static Empty</span><br><span class="line"></span><br><span class="line">  $$ start of string is stored in the 8th offset, which can be inferred from above</span><br><span class="line">  $$ Size of the string which is stored in the 4th offset</span><br><span class="line">  r@$t0=  poi($&#123;$string&#125;+4)*2</span><br><span class="line">  .writemem $&#123;$arg3&#125;$&#123;$string&#125;.txt $&#123;$string&#125;+8 $&#123;$string&#125;+8+@$t0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>把上面的代码村到一个文件里面，比如<code>c:\temp\dumpstringtofolder.txt。</code></p><p><code>然后在windbg里面敲如下的命令：</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$$&gt;a&lt;”c:\temp\dumpstringtofolder.txt” 6544f9ac 5000 c:\temp\stringtest</span><br></pre></td></tr></table></figure><p><font face="Courier New"></font>就能把string的值打印在c:\temp\stringtest+address.txt里。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/a/5352242/304115&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;stackoverflow&lt;/a&gt;上这个回答很不错，用一个脚本把string的值打印到文本文件里，很方便。&lt;
      
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>穷人如何用5个简单的步骤玩scrum</title>
    <link href="http://fresky.github.io/2013/05/10/poor-mans-agile-scrum-in-5-simple-steps/"/>
    <id>http://fresky.github.io/2013/05/10/poor-mans-agile-scrum-in-5-simple-steps/</id>
    <published>2013-05-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.257Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.scottporad.com/2013/03/19/poor-mans-agile-scrum-in-5-simple-steps/" target="_blank" rel="noopener">Poor Man&rsquo;s Agile: Scrum in 5 Simple Steps at Scott Porad</a>用简单的语言描述了scrum的5个步骤。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.scottporad.com/2013/03/19/poor-mans-agile-scrum-in-5-simple-steps/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Poor Man&amp;rsquo;s A
      
    
    </summary>
    
    
      <category term="Agile" scheme="http://fresky.github.io/tags/Agile/"/>
    
  </entry>
  
  <entry>
    <title>颜色在市场推广中的学问</title>
    <link href="http://fresky.github.io/2013/05/07/how-color-affect-marketing/"/>
    <id>http://fresky.github.io/2013/05/07/how-color-affect-marketing/</id>
    <published>2013-05-06T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.256Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://blog.bufferapp.com/the-science-of-colors-in-marketing-why-is-facebook-blue" target="_blank" rel="noopener">Why Facebook is blue: The science of colors in marketing - The Buffer Blog</a>介绍了颜色对用户的影响，写的非常棒。</p><p>开头说的例子是为什么facebook是蓝色的呢？</p><p>因为Mark Zuckerberg是红绿色盲……</p><p>附一个图吧，Logo设计中的颜色心理学。<br><img src="https://blog.bufferapp.com/wp-content/uploads/2013/04/color-guide.png" alt="Psychology Of Color In Logo Design"></p><p>An infographic by the team at <a href="http://thelogocompany.net/blog/infographics/psychology-color-logo-design/" target="_blank" rel="noopener">The Logo Company</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://blog.bufferapp.com/the-science-of-colors-in-marketing-why-is-facebook-blue&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Why Facebook i
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>关于google的Jeff Dean的一些笑话</title>
    <link href="http://fresky.github.io/2013/05/07/jokes-about-jeff-dean-in-google/"/>
    <id>http://fresky.github.io/2013/05/07/jokes-about-jeff-dean-in-google/</id>
    <published>2013-05-06T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.257Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.businessinsider.com/astounding-facts-about-googles-most-badass-engineer-jeff-dean-2012-1?op=1#ixzz2SOSn2fL7" target="_blank" rel="noopener">Astounding ‘Facts’ About Google’s Most Badass Engineer, Jeff Dean - Business Insider</a>讲了一些关于google的天才程序员Jeff Dean的一些笑话。很有意思。</p><ol><li>编译器不警告Jeff Dean，Jeff Dean警告编译器。</li><li>Jeff Dean在提交代码之前会编译自己的代码，但是这么做仅仅是为了检查编译器和链接器有没有bug。</li><li>Jeff Dean穿裤子一次只穿一条腿，但是如果他有更过的腿，你会看见他用O（logn）的方式来穿。</li><li>Richard Stallman听说Jeff Dean的自传只会在kindle上出现，他就去买了一个kindle。</li><li>Jeff Dean直接写2进制。然后他写成源代码的形式作为给其他程序员看的文档。</li><li>Jeff Dean在被google面试时被问到P=NP是不是对的，他说当P=0或者N=1的时候是对的。接着，还没等面试官笑完，他就在白板上写出了google的私钥。</li><li>x86-64的规范标记一些没有被说明的指令为私有的，但是其实是给Jeff Dean用的。</li><li>当Jeff Dean做人体工学的评估时，他是为了保护自己的键盘。</li><li>所有的指针都指向了Jeff Dean。</li><li>当Jeff Dean在2000年更新usb 2.0的键盘时，他写代码的速度提高了40倍。</li></ol><p>&nbsp;</p><p>&nbsp;</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.businessinsider.com/astounding-facts-about-googles-most-badass-engineer-jeff-dean-2012-1?op=1#ixzz2SOSn2fL7&quot; target=&quot;
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>C++的几个晦涩特性</title>
    <link href="http://fresky.github.io/2013/05/06/obscure-cpp-features/"/>
    <id>http://fresky.github.io/2013/05/06/obscure-cpp-features/</id>
    <published>2013-05-05T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.256Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://madebyevan.com/obscure-cpp-features/" target="_blank" rel="noopener">Obscure C++ Features - Made by Evan</a>列举了几个C++的晦涩特性，挺有意思的，下面简单列几个：</p><h1 id="是啥意思"><a href="#是啥意思" class="headerlink" title="[]是啥意思"></a>[]是啥意思</h1><p><code>ptr[3]</code>只是<code>(ptr + 3)</code>的简写，所以也就是<code>*(3 + ptr)</code>，所以它和<code>3[ptr]</code>是一样的。</p><h1 id="运算符重载"><a href="#运算符重载" class="headerlink" title="运算符重载"></a>运算符重载</h1><p>运算符重载可以做很多奇怪的事情，比如可以通过运算符重载实现python style的<code>print</code>。如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> __hidden__ &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">print</span> &#123;</span></span><br><span class="line">        <span class="keyword">bool</span> space;</span><br><span class="line">        print() : space(<span class="literal">false</span>) &#123;&#125;</span><br><span class="line">        ~print() &#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">        print &amp;<span class="keyword">operator</span> , (<span class="keyword">const</span> T &amp;t) &#123;</span><br><span class="line">            <span class="keyword">if</span> (space) <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">            <span class="keyword">else</span> space = <span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; t;</span><br><span class="line">            <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> print __hidden__::print(),</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">     <span class="keyword">int</span> a = <span class="number">1</span>, b = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">     print <span class="string">"this is a test"</span>;</span><br><span class="line">     print <span class="string">"the sum of"</span>, a, <span class="string">"and"</span>, b, <span class="string">"is"</span>, a + b;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="函数的try"><a href="#函数的try" class="headerlink" title="函数的try"></a>函数的try</h1><p>可以在函数名称后面加上<code>try</code>，对应整个函数体。例如下面的代码。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">()</span> </span>&#123; <span class="keyword">throw</span> <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Here there is no way to catch the error thrown by f()</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">A</span> &#123;</span></span><br><span class="line">  <span class="keyword">int</span> a;</span><br><span class="line">  A::A() : a(f()) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The value thrown from f() can be caught if a try-catch block is used as</span></span><br><span class="line"><span class="comment">// the function body and the initializer list is moved after the try keyword</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">B</span> &#123;</span></span><br><span class="line">  <span class="keyword">int</span> b;</span><br><span class="line">  B::B() <span class="keyword">try</span> : b(f()) &#123;</span><br><span class="line">  &#125; <span class="keyword">catch</span>(<span class="keyword">int</span> e) &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">int</span> B::C() <span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="number">2</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span>(<span class="keyword">int</span> e) &#123;</span><br><span class="line">      <span class="built_in">cout</span>&lt;&lt;<span class="string">"exception "</span>&lt;&lt;e&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://madebyevan.com/obscure-cpp-features/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Obscure C++ Features - Made by Evan&lt;/a&gt;列举了几个C++的晦涩特性
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>高效学习的工具Mnemosyne</title>
    <link href="http://fresky.github.io/2013/05/02/mnemosyne-improve-your-learning-efficiency/"/>
    <id>http://fresky.github.io/2013/05/02/mnemosyne-improve-your-learning-efficiency/</id>
    <published>2013-05-01T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.256Z</updated>
    
    <content type="html"><![CDATA[<p>最近在读<a href="http://book.douban.com/subject/5372651/" target="_blank" rel="noopener">程序员的思维修炼</a>里面介绍了一个有趣的开源工具<a href="http://mnemosyne-proj.org/" target="_blank" rel="noopener">The Mnemosyne Project</a>，用来更高效的学习。</p><p>&nbsp;</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近在读&lt;a href=&quot;http://book.douban.com/subject/5372651/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;程序员的思维修炼&lt;/a&gt;里面介绍了一个有趣的开源工具&lt;a href=&quot;http://mnemosyne-
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>每个程序员都需要知道的数字（续）</title>
    <link href="http://fresky.github.io/2013/05/01/numbers-every-programmer-should-know-continued/"/>
    <id>http://fresky.github.io/2013/05/01/numbers-every-programmer-should-know-continued/</id>
    <published>2013-04-30T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.255Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://highscalability.com/numbers-everyone-should-know" target="_blank" rel="noopener">High Scalability - High Scalability - Numbers Everyone Should Know</a>列举了另外一些数字：</p>  <h3>写很昂贵</h3>  <ul>   <li>写是transactional的</li>    <li>disk access意味着disk seek</li>    <li>经验法则：disk seek需要10毫秒</li>    <li>算一算：1s/10ms = 100 seeks/s，每秒最多100次disk seek</li>    <li>和数据的大小的形状有关系，批量处理。</li> </ul>  <h3>读很便宜</h3>  <ul>   <li>都不需要transaction</li>    <li>数据从磁盘中读取一次，很容易就被缓存</li>    <li>所有后续的读取都是从内存来的</li>    <li>经验法则：内存中读取1m的数据需要250微秒</li>    <li>算一算：1s/250usec=4g/sec，美妙最多读4g的数据。对于1m的数据，每秒可以取4000次</li> </ul>  <h3>一些数字</h3>  <ul>   <li>L1缓存寻址需要0.5纳秒</li>    <li>branch mipredict需要5纳秒</li>    <li>L2缓存需要7纳秒</li>    <li>mutex lock/unlock需要100纳秒</li>    <li>内存寻址需要100纳秒</li>    <li>压缩1k的数据需要10000纳秒</li>    <li>通过1gbps的网络发送2k的数据需要20000纳秒</li>    <li>内存中读取连续的1m数据需要250000纳秒</li>    <li>round trip within same datacenter需要500000纳秒</li>    <li>硬盘须知需要10000000纳秒</li>    <li>从网络上读1m的连续数据需要10000000纳秒</li>    <li>从磁盘上都1m的连续数据需要30000000纳秒</li> </ul>  <p>&#160;</p>  <h3>小结</h3>  <ul>   <li>写比读昂贵40倍</li>    <li>全局共享的数据很昂贵。这是分布式系统的瓶颈。</li>    <li>系统设计时就要考虑写操作的可扩展性。</li>    <li>优化以减少写竞争。</li>    <li>让写操作尽可能地并行。</li> </ul><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://highscalability.com/numbers-everyone-should-know&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;High Scalability - High Scalabili
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="http://fresky.github.io/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>每个程序员都应该知道的14个数字（关于算法运行时间的）</title>
    <link href="http://fresky.github.io/2013/05/01/numbers-every-programmer-should-know/"/>
    <id>http://fresky.github.io/2013/05/01/numbers-every-programmer-should-know/</id>
    <published>2013-04-30T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.256Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://www.infoarena.ro/blog/numbers-everyone-should-know" target="_blank" rel="noopener">14 numbers every developer should know</a>列举了14个数字，可以作为大家设计算法时的一个参考。下表列出了秒数量级下各种算法复杂度能接受的输入个数。</p><p></p><table style="width: 1002px; height: 801px;" border="1" cellpadding="0"><br><tbody><br><tr><br><td width="176"><br><p><strong>maximum n</strong></p><br></td><br><td width="143"><br><p><strong>complexity</strong></p><br></td><br><td width="363"><br><p><strong>algorithms</strong></p><br></td><br><td width="476"><br><p><strong>data structures</strong></p><br></td><br></tr><br><tr><br><td width="176"><br><p>1,000,000,000 and higher</p><br></td><br><td width="143"><br><p>log n, sqrt n</p><br></td><br><td width="363"><br><p>binary search, ternary search, fast exponentiation, euclid algorithm</p><br></td><br><td width="476">&nbsp;</td><br></tr><br><tr><br><td width="176"><br><p>10,000,000</p><br></td><br><td width="143"><br><p>n, n log log n, n log* n</p><br></td><br><td width="363"><br><p>set intersection, Eratosthenes sieve, radix sort, KMP, topological sort, Euler tour, strongly connected components, 2sat</p><br></td><br><td width="476"><br><p>disjoint sets, tries, hash_map, <a href="http://www.infoarena.ro/blog/rolling-hash" target="_blank" rel="noopener">rolling hash</a> deque</p><br></td><br></tr><br><tr><br><td width="176"><br><p>1,000,000</p><br></td><br><td width="143"><br><p>n log n</p><br></td><br><td width="363"><br><p>sorting, divide and conquer, sweep line, Kruskal, Dijkstra</p><br></td><br><td width="476"><br><p>segment trees, range trees, heaps, treaps, binary indexed trees, suffix arrays</p><br></td><br></tr><br><tr><br><td width="176"><br><p>100,000</p><br></td><br><td width="143"><br><p>n log<sup>2</sup> n</p><br></td><br><td width="363"><br><p>divide and conquer</p><br></td><br><td width="476"><br><p>2d range trees</p><br></td><br></tr><br><tr><br><td width="176"><br><p>50,000</p><br></td><br><td width="143"><br><p>n<sup>1.585</sup>, n sqrt n</p><br></td><br><td width="363"><br><p>Karatsuba, <a href="http://www.infoarena.ro/blog/square-root-trick" target="_blank" rel="noopener">square root trick</a></p><br></td><br><td width="476"><br><p>two level tree</p><br></td><br></tr><br><tr><br><td width="176"><br><p>1000 - 10,000</p><br></td><br><td width="143"><br><p>n<sup>2</sup></p><br></td><br><td width="363"><br><p>largest empty rectangle, Dijkstra, Prim (on dense graphs)</p><br></td><br><td width="476">&nbsp;</td><br></tr><br><tr><br><td width="176"><br><p>300-500</p><br></td><br><td width="143"><br><p>n<sup>3</sup></p><br></td><br><td width="363"><br><p>all pairs shortest paths, largest sum submatrix, naive matrix multiplication, matrix chain multiplication, gaussian elimination, network flow</p><br></td><br><td width="476">&nbsp;</td><br></tr><br><tr><br><td width="176"><br><p>30-50</p><br></td><br><td width="143"><br><p>n<sup>4</sup>, n<sup>5</sup>, n<sup>6</sup></p><br></td><br><td width="363">&nbsp;</td><br><td width="476">&nbsp;</td><br></tr><br><tr><br><td width="176"><br><p>25 - 40</p><br></td><br><td width="143"><br><p>3<sup>n/2</sup>, 2<sup>n/2</sup></p><br></td><br><td width="363"><br><p><a href="http://www.infoarena.ro/blog/meet-in-the-middle" target="_blank" rel="noopener">meet in the middle</a></p><br></td><br><td width="476"><br><p>hash tables (for set intersection)</p><br></td><br></tr><br><tr><br><td width="176"><br><p>15 - 24</p><br></td><br><td width="143"><br><p>2<sup>n</sup></p><br></td><br><td width="363"><br><p>subset enumeration, brute force, dynamic programming with exponential states</p><br></td><br><td width="476">&nbsp;</td><br></tr><br><tr><br><td width="176"><br><p>15 - 20</p><br></td><br><td width="143"><br><p>n<sup>2</sup> 2<sup>n</sup></p><br></td><br><td width="363"><br><p>dynamic programming with exponential states</p><br></td><br><td width="476"><br><p>bitsets, hash_map</p><br></td><br></tr><br><tr><br><td width="176"><br><p>13-17</p><br></td><br><td width="143"><br><p>3<sup>n</sup></p><br></td><br><td width="363"><br><p>dynamic programming with exponential states</p><br></td><br><td width="476"><br><p>hash_map (to store the states)</p><br></td><br></tr><br><tr><br><td width="176"><br><p>11</p><br></td><br><td width="143"><br><p>n!</p><br></td><br><td width="363"><br><p>brute force, backtracking, next_permutation</p><br></td><br><td width="476">&nbsp;</td><br></tr><br><tr><br><td width="176"><br><p>8</p><br></td><br><td width="143"><br><p>n<sup>n</sup></p><br></td><br><td width="363"><br><p>brute force, cartesian product</p><br></td><br><td width="476">&nbsp;</td><br></tr><br></tbody><br></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://www.infoarena.ro/blog/numbers-everyone-should-know&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;14 numbers every developer shou
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="http://fresky.github.io/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>C#的预处理指令</title>
    <link href="http://fresky.github.io/2013/04/25/preprocessor-directives-in-csharp/"/>
    <id>http://fresky.github.io/2013/04/25/preprocessor-directives-in-csharp/</id>
    <published>2013-04-24T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.255Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://www.codeguru.com/csharp/.net/using-preprocessor-directives-in-c.htm" target="_blank" rel="noopener">Using Preprocessor Directives in C#</a>介绍了C#中的预处理指令，包含：</p><ol><li>#define和#undef</li><li>#if，#else，#elif和#endif</li><li>#warning和#error</li><li>#region和#endregion</li><li>#line</li><li>#pragma warning和#pragma checksum</li></ol><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://www.codeguru.com/csharp/.net/using-preprocessor-directives-in-c.htm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Using Preproce
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>用GifCam在OSQA的回答中放录屏录像</title>
    <link href="http://fresky.github.io/2013/04/25/use-gifcam-to-upload-video-in-osqa/"/>
    <id>http://fresky.github.io/2013/04/25/use-gifcam-to-upload-video-in-osqa/</id>
    <published>2013-04-24T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.255Z</updated>
    
    <content type="html"><![CDATA[<p>OSQA只支持上传图片，所以如果想录屏给别人演示就只能用gif格式了，推荐一个很cool的录屏小工具GifCam，可以把录屏存成gif模式。</p>  <p><a href="http://blog.bahraniapps.com/?page_id=21" target="_blank" rel="noopener">GifCam | BahraniApps Blog</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;OSQA只支持上传图片，所以如果想录屏给别人演示就只能用gif格式了，推荐一个很cool的录屏小工具GifCam，可以把录屏存成gif模式。&lt;/p&gt;  &lt;p&gt;&lt;a href=&quot;http://blog.bahraniapps.com/?page_id=21&quot; target=&quot;
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>Visual Studio 2012的新插件Code Digger （类似Pex）</title>
    <link href="http://fresky.github.io/2013/04/24/code-digger-vs2012-extension-of-pex/"/>
    <id>http://fresky.github.io/2013/04/24/code-digger-vs2012-extension-of-pex/</id>
    <published>2013-04-23T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.255Z</updated>
    
    <content type="html"><![CDATA[<p>在我的这篇博客<a href="/2012/12/04/csharp-exploratory-testing-tool-pex/">.NET自动exploratory测试工具Pex</a>中介绍了.NET自动exploratory测试工具Pex，Pex只能在visual studio2008 和2010中使用。前天微软放出了一个新的VS2012的插件<a href="http://visualstudiogallery.msdn.microsoft.com/fb5badda-4ea3-4314-a723-a1975cbdabb4" target="_blank" rel="noopener">Microsoft Code Digger extension</a>。</p><br><p>Code Digger使用起来更方便，很容易就能对一个函数生成一个表格，把有趣的输入输出列出来。不过只支持Portable Class Library，感兴趣的同学可以试试。</p><br><p>多谢 @kfzj 的提醒，从版本0.95.2开始（2013年6月10号发布），用户可以设置移除Portable Class Library的限制。如下图所示。</p><br><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAvUAAAG5CAIAAACBUlxQAAAgAElEQVR4nO29y4slR56g63+MJLLUS0lB5tn3aqhi4NYiVVxpAiXp9Tf0ZmqiJVVI5CXxxe2F0KY2LWnIQJWQ1BFFVdGooZhS0zcXIhc5ESAQ1EzMxGtykZCbArsLf9nbzfy4n2Nu5/v4IUX6MTc39+OP75iZmxVf/Of/QBAEQRAEkVMUX/zn//Df//kDgiAIgiCIqPhv//E/phBmwfAbgiAIgiBGxs7NBr8hCIIgCGLi2LnZ4DcEQRAEQUwcOzcb/IYgCIIgiIlj52aD3xAEQRAEMRC3JELS79xs8BuCIAiCIHxxy2BwlZ2bDX5DEARBEIQvZKeZ22+EEEII/xL8hiAIgiCIKWML9Tey0GwiN/gNQRDj47e/VGqt/8txfCb/9LP3bt26Vf585/tCEIQ/ttY+JSRonyIIYsvx86Nbt27duvP5/9ss+dd/uHPr1q3/+x9+Mbjuv/7DnVu3/v7r3e8CQRChseX+xZvLDX5DEMSY+O0vFbmp41//4Y650Az8hiAWF+Fy89+pvyEIYrHx8yNro5LU2PTbX9669dOffV52v/pq7/nF5z+VGrR++rNv//nnR0qtT10tpDd46bn99Gff/rP0kbIJgiB2HFPV3ND/hiCI7cbx3//E3tvmF5//tJGPRjsaB6q1pqmzUetvJL9R++LItUFKbv/0s/faVeSsfvtL/IYg5ort1N/w/hRBEDuNUL+RGqH+6Wfvtau4/EZfpc6tqw3qP1K3ItXlEAQxU2yzfWqqMAuG3xAE4Y1Av1HMo/cYh9/0NtNFl4mWW//Puspn3KtbBEHMEzs3G/yGIIhR4XqpW2o52pLf/PMHbYa36LNMEInEzs0GvyEIYmQMvj+lNzZJVT4j26fcfqPlQxDEbmPnZoPfEAQxOgbGv1H7F//8SHrpSX2NPLh/sc1v+j7FUv8egiB2Gzs3G/yGIIiNQh2/WKnO+e0vb9366d//l+5tcKOtyv5+eNufRsvQ7Td9aipvCCKR2LnZ4DcEQcwVvNlEEERqgd8QBLFp4DcEQaQW+A1BEJsGfkMQRGqB3xAEQRAEkVvgNwRBEARB5Bb4DUEQBEEQuQV+QxAEQRBEboHfEARBEASRW+A3BEEQBEHkFk6/+f3/838RBEEQBEGkH3F+8wIAAAAgbfAbAAAAyA38BgAAAHIDvwEAAIDcwG8AAAAgN/AbAAAAyA38BgAAAHIDvwEAAIDcmMZv/vG4IojMYtwV9RsAAJiNHfiNAMiITfzm5au/EQRBEP4QQoy4wYYnxm8gf2IvIYHfEARBzBwjbs74DYBC7CUk8BuCIIiZY8TNGb8BUIi9hAR+QxAEMXOMuDnjNwAKsZeQwG8IgiBmjhE35/31m3VZlGv5X6vqzP6ZupKUzPJpjz0DSJ7YS0ik5jfPHh4URVEUHzyOXPHx/aIoDh48nzIlQRDEFDHi5ry/fqNIzFm1KnpzOatWDosZ9Jv207NqheEsk9hLSCTmN98/uFMbdrR/+K3l8f3emfAbgiC2G66b8+HhoecGG343zstvJIs5q1ZlVa0aIXHrTbjfDKSEdIm9hMT8fvPN7/90fPxJ2F3g+ae3i+L2/Q9uF8Xth99H3UG81vL1vVF1QgRBEFOE9eZ82OK6wYbfjfPym95j6j+6+hypYuesWinNTeuyWFXrZqHhL5LT9Hmsy2JVlqsmhz5Dc2Nq9U+5NjdvLU+fOUxB7CUkZvab333zh5+8+eZrr78RdBd49vCgKA4ePP/+wZ2iuPPps7+9fNWIS3H7Tt1u1XhP24zVL2n85smnt4t23ScfFEVx++Gn96SW13tPFBOS8jl48LxZpUu563siQRB5hHlzPlSx3mDD78aZ+U3nFutyVZ1J/5PVpPOV9rPWa86qlW44cv+bTjjWZSFbj2wq6ubW5WqlCJfRDcheHqqJpiX2EhJz+k0tN3fv3g30m15rZAVp/Obh923rlVIN06Vs/6jTHDx43tnSS63+plullhupoujre0XvVQRBEBOFdnOW78mu+/Ne+00jEK1G1FbRt05JdS2tsSitTkYvZK3/Tf23s1NOs3q7vXW5qtb13+0itVfQYHlgEmIvITGb33Ry8+6774b5zfNPbxcKUsVMXZvSu8sro+pFs5Z7T+RKIKvfKLm9+tvLTXr/EARBuMN6c3b9s7vBht+Ns/Obs2q1qtZyx5uyUnrl6O0+sk+YH1s/HfKbrnWsMZtyrfb/qa2mba3ylAemIfYSEvP4jSw3oX6j1KY875uZbH5T+4qiNX2VT73u/Q/u9XUzHr/RO+XUmyviOwARBEE4wrw5a7dT/Eajlge5U7CraclY4rcNa/2N3j4l9WeWWqbKstScpa/isZQHv5mY2EtIzOM3x8efvPb6G118/PGvB69/rTal/6fFb/pONlqyenWzGkZRGXf7VBtNxx38hiCISULwfngsWi8aSUC6j/X2oLJcaV1s5LVbHC9S9RlqC00xkvMz+zvTPjUXsZeQSOX9cKnCpl7Sdbuxtk+1tSwHty1+0zZdyT1p2o7D3v7FX/c9kemFQxDEZDHi5rzvfgOgEXsJiVT8Ztqo3zOnAoYgiCRixM0ZvwFQiL2ERJZ+I705RRAEsfMYcXPGbwAUYi8hkZ3fNG1MjF5DEEQyMeLmjN8AKMReQiI7vyEIgkgthBD/Xwwv8BsAjVhHEfgNQRDEzCHwG4ANiXUUgd8QBEHMHAK/AdiQWEcRO/WbXR8tgKzgmkoZ/AZgI2IdReA3ALnANZUy+A3ARsQ6isBvAHKBaypl9tBvrKMGD2GZ/Xv72EYfNscsDlzRShK7uTBiHUXgNwC5wDWVMvvpN9KUULM8zWeaBsHIVp7T6qyqnILjLw+TNmxErKOI5PxGmsXDdyJ058mmJ4w+q0nEegHbjbiq2ylrPZ/H/AgaD78rFot6Tck/nl3fKPfb7ZGP3/z5z39++fJlQEJtAsutiMhM2YZuB7+ZkVhHEUn5zVm1kmUjyJKjThiblK/KcjXilPNsd9w57PebsRoWsXWuu8Vj+M3gd8r3vj3y8Zsvvvjiq6++urq6Gkpo9ZtuIsxyLZQftO0NTpvrW2sSkhdJCl+uram7HNUP1mWxqqpSd/82g1VVGReGOUO4v/Dmvmulte6mmo9eQucO7gmxjiIS8hvLpPZupvGbenL7dor7KLbvN7M+h3jO5QB+kzJZ+c3FxcXnn3/+17/+1ZvQ2j4li4L0u61PYbu5r8tVdWarXFbSDD1A5JzbDfdF6P86q1a2Ks9GLyQFCSv88EJrPka5hncwc2IdRaTjNx69CbTkONcXrd70/+9zNsze/gPgTC30uixWq5WyFfl81sqn/bM7d80C9BuXbhaWA9L+KFqXxapaN2nKdZ/csTub/66AJBj0G8dpLCwXz77/VJyerPxGCHF1dVVV1enpqTuh3ETanUba/UW5f7a3wk5mCiUDy0NCv1vZb0n6LdTmGeZjwHpz61oZ/IUP95uBfPQDss/33FhHEUn5jfvUDLDkSNdXtihv22r2Zg7tH5JS+85MszC6i8t+Y/1poZTQqvvyjyL5V4D0u2lod/SFYb8rIA08/W/U78l3GqsJuqsJNiU3vxFCnJ+fHx0d3dzcOBJaLSHKb9Tz1u83XRLtdO/X6m70G/hNl9/2/ca1g3tDrKOIpPzG+qUFnkWxrq+ezlJax3nl/AEgeUnvEQPncLtJ+RJS628810Xc5RC7O84yD153sHOG26dc37t2NppXE2xMbn5zfX0dUH/j9Rv9J5R2B5R/tIkuke83a5tI/ymp/8gc+D1nqShZV/LDoqtXdxdefaZE/I70PAYcO7g3xDqKSMdvXIIT4TdRrq/8upXu4v4nveUHgNGJJ8xvujJa26dm9Zvw3zP4zaIY8JuB7106G6P6wkEYWfnN5eVlVP8b58JepW23FVm0JVnQbtjNP/RPhL6N/l2SgZ99rv7Fevb+wndrlGW3sC+tfTe9N27nDu4LsY4iEvIbpelDiO79qUHFH+X6tmpN5/Pb/wNAfwnLeu0437puHzXBfhOn+/G7s8HvCtgtA34z8L0LoZyNfLUTk5XfhL0/NY71vnejBQexjiKS8huh+rrSeuSy25Gubz6Z2ye4007cPwBkEVC24qoxUjv1dkUL9Jtg3Xf+be7OZr8rIA2G2qfcp7H5y9ByNcFG5OM3wePfjIK7CjiIdRSRmt8sE35wQArkdE3lRz5+MxeNU2M3YCfWUQR+szl729sLEiOfaypH8BuAjYh1FIHfbET9gwO7gSTI4prKFvwGYCNiHUXgNwC5wDWVMvgNwEbEOorAbwBygWsqZfAbgI2IdRSxmd+MWxEAYK8Q+A3Ahoy46nZYf0MQBLEPIfAbgA2JdRSB3xAEQcwcYk/9ZmdD7krjN837/gfD9WyPWEcR+A1BEMTMIfbRb+RpPprR6LdCN8X3yE1HKQt+sz1iHUXgNwRBEDOHyMlvQscv3s2jf/PJ0/CbRIl1FJGY33z/4E43KPzBg+eB6T94vPv7F0EQhCtETn4TPP+UbRozqeGotRDnlDRluVKm9JbXMhZI+Tv0xrXpqptWU5mqpJutpi/GQOFhXmIdRaTkN1/fKyRZefIpfkMQRBYhMvObi4uLgPnDRWcEkg3IgjIwu688D55nqmTrFLEGrk3LkxNapwBUJgT3Fh7mJdZRxPx+883v/3R8/MlwymcPD4qiuPck6q6B3xAEkX6IzPxGCHF1dVVV1enp6fAKXYcYtXKlnbdvaEphs0pGnv1Vq8Fx1d+M27S7GLYcYF5iHUXM7De/++YPP3nzzddef2MwpdNUHt83W6zkZqx+rdqQam4//H7XdzSCIIg6RH5+I4Q4Pz8/Ojq6ubkZXKVxgyn9xtXHxvEZfrN8Yh1FzOk3tdzcvXs3xG++vlcUxZ1Pn6nLa7m59+SlLEDSQqlJ68kHXfXPqKoggiCImULk5zfX19cD9Tfrqn3wd805WhNP37emWdg3B8neYG2fcmuF1OhUr101ImJuOsZvhnOAeYl1FDGb33Ry8+677wb7jV5/oyxsrUVeqEuPDH5DEEQaITLzm8vLy4D+N1pfXSGE3LQkaUGXsCxtkqFkZfQvto2tI3+qaJK2yK4yzcba/sV9MQZygHmJdRQxj9/IchPoN7WgaO9MhftN/UfIK1cEQRBbDpGZ34S9PwUwJbGOIubxm+PjT157/Y0uPv741wG3gOef3parcJ58+uC5LD02lZFWaTrf3P+6zu3xQ72piyAIYkchcvKb0PFvACYl1lFESu+Hd76i9Ca29S+uq3A6LP2Lza48BEEQOwqRk98A7IRYRxFp+Q1BEESGIfAbgA2JdRSB3xAEQcwcAr8B2JBYRxH4DUEQxMwh8BuADYl1FIHfEARBzBwCvwHYkFhHEfgNQRDEzCHwG4ANiXUUgd8QBEHMHAK/AdiQWEcRO/WbXR8tgKzgmkqZvfMbafRic8TijTIzxituBxE2J3KAjIh1FIHfAOQC11TK7J3ftMTOYGBN78/E/JRpEzIk1lEEfgOQC1xTKZOP30SOX4zfwDTEOorAbwBygWsqZfLxm8j5pwzV6GepLNdyk9K6LFYrx6yZNl9p81lVlTorpzGvpzTdZpvruixWZbmyTc4JiRLrKCIhv9EmtRfLUXCz5EI0l1Rg+Zeyp5A06jUl91jg7No9WfnNxcVFwPzhNeZM4O0/1+WqOhNiXRbluvmvmb5bS3OWdanYizbruDYxuDzreJeAy2JhxDqKSMtvVquV7AlLeerXJTfrR8OfK0vZU0gaw2+akyq416X2UOCcnJKs/EYIcXV1VVXV6enpUHL1TJKqUlRXUWpWhtunzirplmtqjZT+rJIfK61GcX4vj1hHEYn5TbW2nrSJ09R0KmVdl0VZBpd/KXsKSePym+ATDL+Zkdz8Rghxfn5+dHR0c3PjTW76je39J/wGhoh1FJGa35yptZdSw6zaetrKkNyIq1XEK4285r+VHJSaTL3xV8/IWNC1+Xbr1Needok5M5aajy1bAwgkwG/UXgfKySZ3Wiilvyv98cBjYRS5+c319fWY+htLw1Bg+5SlhnxU+5RnK5A0sY4i0vMbxylqpinMP6UT2WjklfVDqKtZqu+71c3PrM3H6haanxZKaa3tv+7Ls8scIJSA9in54eI8k81P5d/WePc4svKby8vLsf1v1CaqsupOzu40bUzbvF9r3cnaZUb/YulD/cct9ZMLJtZRRIp+091E1SXK+emqSG//Nht59e6+yund37W1DZmVqZbmY2mjUnc5tTBG/ai1etXaNg0Qhrt/cXcm2esU9TNZSyn/tOaZMJas/Cbm/SmAaYh1FJGm3zRGYPpBJwUhfmOxg/qWbjS/tqnNDdn9RstZruyRuxCN8xukBkbibp+yLfSdyfrq9dmqnLMQST5+Ezn+DcA0xDqKSNRvuh+Xaq250rjj9RtLI2+fcVcHKlXfq85zZtaZyuX0tVgVlvp/V/uvtX2KWlMYSZzf+M9k83o0+tBDFPn4DcBOiHUUkazfKE/9riNud4cd9ButkVfuPdl30CnLlVp9b25IWPocaznrVUH+tgC1iUxvPjYzBwgl0m8sJ5vcaUHrBSFJOowBvwHYiFhHEQn5zZahexnkxqzXFD2LNwS/AdiIWEcR+A1ALsx4TdH1ZmPwG4CNiHUUgd8A5MI811TdiMXFsin4DcBGxDqK2F+/AcgNrqmUwW8ANiLWUQR+A5ALXFMpg98AbESso4id+g1BEMQ+hNhLv7ENOuxMOXULaPCssrAUYh1FUH8DkAtcUymzn36jDrPhfAOP7pAwTKyjCPwGIBe4plImH78JHr/YHG3JJTj4DQwT6ygCvwHIBa6plMnHb4Lnn9KsRRIcZeb6NuW6HV7VnADWNliqdVxU21yb67JerDWTWfOBhIl1FIHfAOQC11TKZOU3FxcXAfOHu/zGOnO9PFq9Z5R657w2toX9p8asONZVIGliHUUk5DdyX7Tgk61eacpzc23Yf0tkfzV1vFc1t/oze4YBw+oD2NCvqbXxk9VcAtsiK78RQlxdXVVVdXp66k5o+k03jbCEPsdNd+t0zJxsnZfYXGi/lftXgaSJdRSRlt9I810GnW5zTInj9psROXWFU38ieAeD9V6VAG5e2uefkv+QWgM4nbZLbn4jhDg/Pz86Orq5uXEkdPS/GZi53lbNg99ALn4TfL7NcVpO5zfSFXRWrcqqm3nTP9Y9fgMjUa4p6SxrvEYSbqZb2D65+c319XVM/Y38Y9Q6c73887ZvOGpW6T8f1z4V2M4FSRPrKCJ1v+lm+e683zIhuHRdWGcIrxO78hHyurbeaWYJB/qrSddN16K8qs7kX8/Gz2i9AFJrXVd9q3e/A1BQr6nu9GvON/0XK7Nlbpes/Oby8jKs/42jz4E+c313g5bvylIGZSl32WlzrLwLh34pWvOBhIl1FJGk30jtU7LoWzul2c/brsuafCp78/HYv1lCV381LVupHbnZTLu1/kdJyM+Pdot6WgAF/ZpqHyKabguB3+yArPwm7P2pmbG+cO57Cz0mH0iPWEcRafmNYvTtQr2Gw94pbaDLmjflQOutXEJve65egPYp0j5L6u2o7QYhzceevwF6/O1T+M1uycdvgse/mRezlcu1cEQ+kCCxjiLS8hvzJNO8xN0pbaDLmjflZH5j+y2xqtZyx5uykjaG38CUyNeUxWbof7NT8vGbnaK3bLkXjsgHkibWUcSC/MbeKS38U3/K2PYpe381Ywfqi0htZrLUToW0T+E3MIByTakdDVbVmaTgnEI7AL8B2IhYRxFL8ht7p7SwT/0pXb3TetTuPgEtX3LHZWnLaueZgb5uzTL/vgC0aNeU2Y2+O834wbp98BuAjYh1FJGQ3wDARnBNpQx+A7ARsY4i8BuAXOCaShn8BmAjYh1F4DcAucA1lTL4DcBGxDqKwG8AcoFrKmXwG4CNiHUUgd8A5ALXVMrsod9sMsqS8TZH+6qG8uJH//YH5E+so4id+g1BEMQ+hMBvbJ96zMQzEFnI6pAhsY4iqL8ByAWuqZTJx2+Cxy/Gb2BKYh1F4DcAucA1lTL5+E3w/FNrZSZhZUZiqZVJGtlUHZLMM02m/Z/dFMp97r1fGcNBWcaHgqSJdRSB3wDkAtdUymTlNxcXF2Hzh0vjp3pmJLZPehzrN9bZqOpl2jir1i1C6sQ6isBvAHKBayplsvIbIcTV1VVVVaenp+6Eav2NZUabkOmRI+pv1IHipdoi66SD+hYhdWIdRSTjN1N0ijdnVEgK2othXvCblMnNb4QQ5+fnR0dHNzc3joRRfuOaHjneb/rc2nlk7X6D1CyMWEcRyfhNS6wELGhipsSLB4sHv0mZ3Pzm+vp6svob3/TI8X5jaZWytk9xP14YsY4i8JvtkXjxYPHgNymTld9cXl5G9r+x3KalCYQ90yOPaJ9q81qV5UpRKEf/YtqnlkGso4j0/Ubv5C7/W+uDbwqEv0/9uixW1brJr1z3Wfe5qFuXXndUa0ONK1RO1hZAvk65oGB68JuUycpvwt6fApiSWEcRqfuN0cldH1FBr+NUhdzfp35ddi4j/Wnv4K9tfV2uVquu5rN74VH6YdDnq9aa0u4Lc4HfpEw+fhM8/g3AlMQ6ikjcb8xO7mfVSlEWf/uUt0+9c115QHBj643LrKp1/be9B1srQnq2K70VGGAy8JuUycdvAHZCrKOIBfiNpbKjFg+rQDj9xuxTH+Q32tbrdevKnLNqVa67zIL8plitqL2BucBvUga/AdiIWEcRifuNu5O71CoU5jeWPvVDfmPb+lm1klumyrKUNiC3Tzn71dHNGGYCv0kZ/AZgI2IdRaTuN0Ynd1snYX//Ynef+kG/sXWxl1801F467BP7s9Xb2AAmAb9JGfwGYCNiHUUk5zcAMBKuqZTBbwA2ItZRBH4DkAtcUymD3wBsRKyjCPwGIBe4plIGvwHYiFhHEfgNQC5wTaXMHvqNPCJZcIfDeqVU+yduPFEi75eMJ9ZRBH4DkAtcUymzn37TPMvN+Z/cqyxiBI3RmoLfjCfWUcRO/YYgCGIfQuTkN8HjF4+YHXApj3/8ZgfEOoqg/gYgF7imUiYfvwmef2pw1I1+lLCyXFkafUKm9PPOIGifdLAqjaYlvUzmAveuaemlFRzl74cJcW8ATGIdReA3ALnANZUyWfnNxcVF2PzhZvuUMaufZZa+bvXBKf38MwiaJZEmN+6Tma1nZiGdu+Yvqm1hu9N4TSSxjiLwG4Bc4JpKmaz8RghxdXVVVdXp6ak7odwZt32Ym7P6+ap5hqf0G/g7ZNJBcyIeSyHNXXNOJNQU1V9+RnmNJ9ZRBH4DkAtcUymTm98IIc7Pz4+Ojm5ubhwJbX1NLLP6zeY3gZMO2v3GX7uysd9069E+FUyso4hk/Gbj1+70PNIzY+v0EbYCB79rACCD36RMbn5zfX0dUH9j3sjMWf08mhI0pZ/z79BJB63tU/57sL99Sm8Ac5S/+YSbfSCxjiKS8ZuW2N7lI3ro7wr/9FhSu/CUm4A9Ar9Jmaz85vLyMqr/jYI+q5/7Jh46pZ/r76hJB139iwPap+xF9Zbf2CAMEusoAr/ZHn6/CakTHbEJ2CPwm5TJym/C3p8CmJJYRxHp+43+Fp38b6l9xz1/ePsuoeNVQe/bhdrWpS7vajOxXjT3y4xKF36twJ3gyCn78tteKPQcDX95ViutbRgvWj74Tcrk4zfB498ATEmso4jU/cZ4TU9/q85exdg+0a2tqKpn+N4udG99Xa5Wq64KtKtvHHqZcVWdybU0IX5je3GyeWPR+1bjYHlUWaOONAPwm5TJx28AdkKso4jE/cZ8TU9/q87fPqUuCXlVUP7buvXGZVbVuv67XRTW2X+1chVe2Pr4ay8TmIfC/SJCUHk6WaPyJgfwm5TBbwA2ItZRxAL8xlKzIL1VF+w3ga8Kyn9btl6vWwvBWbUq111mQT7hbRaydLF3+orj4ET5TbMz9N/PBvwmZfAbgI2IdRSRuN+4X9OTWoXC/Cb0VUGh6oWe41m1klumyrKUNhD0MqOtTOrqVr+xFCaqfcr2cuJZtepfLIDFg9+kDH4DsBGxjiJS9xvjNT1bJ2F//+J2SdSrgrZWIXMob00wQl9m7NrY5A5D1l5H7tY6de8LqceQrX+xUwFlq4Klg9+kDH4DsBGxjiKS8xvYKvQszgmuqZTBbwA2ItZRBH6zz9D1Ji+4plIGvwHYiFhHEfjNnlK3XWE3WcE1lTJ76DfKiB0b3GwmHp9LKdaYsjFe2G6IdRSB3wDkAtdUyuyn36ijkzkbw/3GMJNPjM4Wv9kNsY4i8BuAXOCaSpl8/CZ4/OLwCWjwGxgm1lHEZn4zbkUAgL1C5OQ3wfNPuQZo19771GeWsb0k28+kYxmv3pgS07XAWzzrjDbOaW76V2HdG4BpGXHV7bD+hiAIYh9CZOY3FxcX8fOHmxU4jpEwLJ8WklE4RgHxzN1jH6LdMtiadUYb20LrFmFeYh1F4DcEQRAzh8jMb4QQV1dXVVWdnp66E7omoPHPlTPwaS8VWjJt7h5zRht/8awjvvuHgddnC4J5iXUUgd8QBEHMHCI/vxFCnJ+fHx0d3dzcOBI6BMI/V87ATDrtx5Zk7ceFRU0iitd+Nuw32hZhZmIdReA3BEEQM4fIz2+ur69j6m+khh7/XDn2T9uPO+GwJGuQ5u7xV67426f6nkID09wwkNi2iHUUkZjffP/gTlefePDgeWD6Dx4P5vzkA3W8gz7zx/cDt0UQBDEuRGZ+c3l5Gdb/xjrEjDlXjjyzjH0mnbJcqQ1NRjKjv7FtRhuteK7+xWHT7phbhDmJdRSRkt98fa+QZOXJp5P7ze2H30trFfeevHyF3xAEMXuIzPwm7P0pgCmJdRQxv9988/s/HR9/Mpzy2cODzjmCY5zfvHz1/NPbRVHc+fTZ7m98BEFkHyInvwke/+iHW54AACAASURBVAZgSmIdRczsN7/75g8/efPN115/YzCl01Qe3zcbleRmrH6t2pBqepWpQ/MbaXNS/Y0129BtyUuK+1/v+n5KEEQ6IXLyG4CdEOsoYk6/qeXm7t27IX7z9T1bhUotN/eevDSMpF4oNWk9+aCr/rFUBdn95uDB895vJNHps7UutG6r8RvqhAiC0EPgNwAbEusoYja/6eTm3XffDfYbvf5GWdiahLxQlx6ZAL+RDcaabcS26uLp9UYEQRD4DcDGxDqKmMdvZLkJ9BtrP99wv+nrY+z5W/vf3P/61Ri/sW8LvyEIwhECvwHYkFhHEfP4zfHxJ6+9/kYXH3/864BbQO0c6vtTRucYVS+kVZrmobbjy+OHajuR4je1tTSC0m7Cmm3EtvAbgiAcIfAbgA2JdRSR0vvhnUPUyP6hLGkFpcPS51fvB6ONfyN9avSwKYri4Hbf2dm60LIt/IYgCEcI/AZgQ2IdRaTlN6mE9WWu4HfRCYIglBD4DcCGxDqKwG8soXdGdi8kCIIYDrGXfiOPX6zM2FTWo/8ak4lrRE56YJ2EHPIh1lEEftOH1IbVe4x1IUEQRESIffUbi3CcVat6GobSLiOjNQW/yZxYRxH4DUEQxMwhcvKb4PGLDeEIqqLBb8BOrKMI/IYgCGLmEDn5TfD8U1bhcLROedaSpsns17EsVKYU19PD8om9hAR+QxAEMXOMuDkn7TcXFxeR84dLFuJtnTL8Zl12655Vq6KbUdy6sJ3WG6/JkWX5zVufCYIgpor6OQpzcxKPyMxvhBBXV1dVVZ2enroTaqYiVbmY9TGutc6qlZSqURfrwm7Fs2oV3TcZFgB+QxB7G/jNdjg5OYm6VebpN0KI8/Pzo6Ojm5sbR0JL+1TTuXhduv1jY7/p1qN9Ki/wG4LY28BvtsPJycn/iaH2mxE32PDEO/Cb6+vryPqbetGqOmstJ2gtrSmq/tO1UNncWbWiFicn8BuC2NvAb7YDfvPF5eVlWP+bEYLh6V+s1etoC6X+N3QvzpFF+8230o78+LRd/kj8KMRvHgXd37+1pbQulOM3Xe3qjfhF2IPEk+fmexEY8oamynmqAzi4SmgBpOM2Os+QA/jtHzfLLfD7neE0kEPyG0tXB3okTMXJyclNDBn6Tdj7UwBTsnS/6W793wohftj46Tj4rH0kfpSfbY/Eb8Kec36/2XAvYnf2F0+nMbMJD+BkfhNc8o229UchhPjVFAdwOyV3hVl/U2sOYjMt++43wePfAExJNn5TPzgDHzn+B4nn6fKbm5E/3EMfw6P2YkQZwp+g0/qN6wAuzG+mO4DbKbkr8JvtcHJych1Dbn4DsBPy8Rvp2dkt79pB6uW/+qHd7R+kHP4ofhRCSG1DfbaPmo9E7Rwe+ZBSypUTXc7OPAP2wp/PYObf/tD80/54tpW8W6vnh3kPYLeKuQntS9T+aapAt8RVtu6AWHen/vRH2cP+2FR3KfU3XQWYcczlEvZNWj/4vg7/Kv5v6jdPm4V94+ZUfqO0WZXrddl9pLxrIifDjGycnJxcSRweHl6paEvwG4AJyNlv/uhs65Efgc2DytZvQ36e/fhUvPVI/Oho1vm2e+So+dQLf/FUCFeeAX7jyicwc1M75PYpV8ktsjLzAbRrivYlGt+p32+sZTM94FvzU2lDv/qh/0YafrAVoN5HbwmtB/Y3N3qRrCbq+qaazcU0mXUR5jets9j9Zl12psMbtg5OTk4uJQ4PDw8PD13/vLy8xG8AJiAzv1Eeq4/Ej9rD7I/9jptdUOXHWLd6zw/u6gd1eZOP+ix35hmyF9Z84jP/VvrwV56SexpiZjqARteWfhPal2h8pwP1N66yBezOt10dmNYJWt4Lxz66Smj523ZMBpMNf1MT+o38tonpN+YEQfiNwcnJyYXEYYv2dwd+AzAB+fiN9ACQl9fVG41wSC0I5vNMrzixPXjs3Uci/cbzMLPsRaTfDD8pB0vubcma5QDaVuk2oXyJxj8D/cbV6ufZnV88FT8+bf6r5dwvdBibq4T5+Q39dUI4OTn5XyqHKtqn+A3ABGTjN99qnRKkG33zNPqjt7XCpkeWtow/CuF4/UduO/iVWiStCcnfGGHuhSufEZlbW5qsJbesNfMBbFqjjE0oX6LxT7/feMrm2h3FNW/EtzdeO3E0eLlKaP17XPuU75ua02+kRqluYFh5rqAK1TEx/UZWHPMj/AZgApbuNx3ynb1/WLYoHT+lh9a3Ukdaix7JrQ9dpwp5oa2Tqdn84eoC3DUh+fbClU9w5gPPP1vJtZadLrf5DqD8sFc2oX2JxncqHz3NJwbK5tgd+RD96gdHVxu5D5O2j0YJ5QPocR25nPZVhr6p2f1GHiFt5ehfTFWOjZOTk3Mbh4eH1uX4DcAELNpv9i6srSFzvlK+59E1A+Uapt/AHJycnPzPGPbWb8zxi5slZjevfuBho8OXNF2mZ0BkJcsILe+nH4fUwW8WFL/6wTIun3UhMUG43/bKJvCb7YDfBOL0G88/V/qcUbW4hPiN2vRKx/jswG/Sj99Ik+3+yruQmPaYxzb3LC7wm+1wcnLyP2LIzW+Cxy8e4zdlqQrOuizKsozzG32CccgD/IYg9jbwm+2w734TPP/UGL+pztZlryb1FODraL+RBafvUCaP6yR3rm9XbD9ZVZWyxarUm730PBszo9ZoVvAbgtjbwG+2w0k8IjO/ubi4CJs/3GTQb0QvOLXeiE38Rlq+LtXctRXXpWJA/cLeYSSbUfIU65K++POzZb8ZtyIAwF4hMvMbIcTV1VVVVaenp+6E4+pvOq3pVGSc37RZaaNVSvJi3aiam9atx5Gnr2AwGcuqvyEIgtiHEPn5jRDi/Pz86Ojo5ubGkXCs39Suse6EI95vuuobR0ccdUaSEX6j5YnfbAP8hiAIIrUQ+fnN9fX1XPU3QhldO95v+pYkT8uRVEnkb58y/MaSJ36zDfAbgiCI1EJk5jeXl5dh/W/G+o04q1ZdHYkiFo5BbuSP1E/k5qRyLSW0dKZp16989TdmnvjNVsBvCIIgUguRmd+EvT+1WHi9PEmW7DdPPlC72R88eN589Pi+8s+txa62SxBEXiFy8pvg8W+WCm9Dpcni/eb2w+9f/e3lq799/+BOURTFvScvX23XMx7fL4rig8f93/gNQRAbhsjJbzJFb3OC1EjQb775/Z+Ojz8JSKn4zctXzz+9XRTFnU+fbfU29PW9ovcbgiCIKULgNwAbkprf/O6bP/zkzTdfe/2NgFuA5jdNFc4Hj6V6lGcPDzrB1mp6Wrr0xe07B2rKZrnS+CU1it17UstN90+l/kbaNDU6BEFEhcBvADYkKb+p5ebu3bub+M3Bg+eWdqJuifRRX/XS+M3D7w1Jqhu8uoVf39OriJT6G82rpLIRBEGEh8BvADYkHb/p5Obdd9+drP7mlV6PIuuIR2W0lE0m9550dT+dPFn9pjetXd8lCYJYYgj8BmBDEvEbWW7G+k3d/+b+1696z6jlQ6622dBvXr6SGq1uP/ze6zd0yiEIYlwI/AZgQxLxm+PjT157/Y0uPv741wG3AMVvepV51XnGk67HcWctUs1K7UNOv5ErgQxf6TetfET7FEEQU4TAbwA2JBG/GRXa+DdStxi1t01RFAe3+wajrlNwvdDpN68s/YulDsXd5tpi0L+YIIiJQuyv30gDCytjytTL5XGJV9XZWbWKH3nGnKY8MgtGH14GS/abTYNWJIIg0gyxp36jjJQny4s+RdQUA86M1hT8Zhnssd/o3ZMJgiASCZGT3wSPX2xMc9AvcMzrtBH4Tebsn99IrVrIDUEQSYbIyW9C55+yzOJUT9rdNyitqqpUGpW0KTabj5pcjAUqhqZIIxL3K1gWdisObAB2y/75DUEQROohMvObi4uL4fnDa5nRF9Xq4Kq/UVTDmCG8b92y1beYs5HLYtT39LEtbOUKr0kY/IYgCCK1EJn5jRDi6uqqqqrT01NnOmf9jRj2G3NdeXooewWL6jdqDo26WBcqG6WlKl3wG4IgiNRC5Oc3Qojz8/Ojo6ObmxtHwhH9b/x+469d2dhvuvVon0qSZfnNro8WQFZwTaXMiBtseOId+M319fVA/Y3QXo2SX6Ya1z7lr1zxt091XmVdqGRsaViDBMBvAPYWrqmUGXGDDU+8bb+5vLwc7n9TI41OI1WKDPqNsqbRvzigfUpJr9XraAul/jd0L04Y/AZgb+GaSpkRN9jwxEm+PwUwKfgNwN7CNZUyI26w4YnTHP8GYEoy8BvvWJbWcZi6hf63+5RBvNXeZFtva93JRiF31GvKccIrMLDZ9hhxgw1PnOr4xQDTsXi/OatWq7J0du7a0G/Uht1tN7HyLIF5Mfxm8HzjnNweI26w4YnxG8ifpftN3W/d3Xt9Kr8JedlwcniWwLzgNykz4gYbnhi/gfxZuN+0YqMJTtvhfVVV/e3YsrDzm3UpjftteyFRWAfStPSet2/FzNw66rc82Lf2EoF3FHKAUQz6jXGGuwem56ycmhE32PDE+A3kz7L9ptcaWXD6DjnS6JKuhf0YB8ZwB8N+0yJXCNk3bcvcGPVbr04KHOUBYCSe/jeqpKwVWfefq/ah8CGaETfY8MT4DeTPov1Glpq++Uipy5EGtzQXavU3ukmYfmMsX6tTvTm3MjDYpjRUprzJsFE6AcYy3D6lneGugemHh8KHaEbcYMMT4zeQP0v2G+XnZn9bnclvzLErTaXa0G+67RTuGeXwG5iOAb+x/GhwDEzPaTkDI26w4YnxG8ifBfuNZYjsTgtGtE/5/UZ+CV2qotebjFxbsWZujvrd74m6AWHdGMCGDPiN/Qy3Dkw/OBQ+RDPiBhueOE2/kX+zRp1Oc/R7t780y5SaC2K5fmOe0OqUIUb/YsvCQb+xXmtGF0v5BXX7VszMbaN+2zpz2voXMyg4TMNQ+5R5hrsHph8YCh+iGXGDDU+crN/0PSpjLGImv1mt9Ddz6xMfv1kGy/Wb1KHGHpJnYdfUnjHiBhueOM3xix2/BeNWnIp1WRhjq63LoiwZI2Ep4DczQX09pM+yrql9Y8QNNjxxmvNP2f3GVmGtDUeg1rp3/RS0tbwDhxjVjnWeWufIeomrYPaxQMaWpBEs6kNHg99MCnX0sCSWcE3tLyNusOGJt+03FxcXAfOH+9unPJ0Q64+sleaDo3e4BjZoPuoFp+lsNjBAiDkCyNiS8CN5U/AbgL2FayplRtxgwxNv22+EEFdXV1VVnZ6euhPKfR4lOTDH4bCpw0qTnpDRO3wDG+gv37ai4x4gxNW+NrIkczS67Rf4DcDewjWVMiNusOGJd+A3Qojz8/Ojo6ObmxtHQtsT3ToOh8VvitVqpTYABYze4esmKVcXrap1t7p7gJCBIT1iS4LfbMqy/IYgCGIfQuTnN9fX1wH1N8YT3dIq5WqfUvvshI7e4ZIIvQJG+odngBDDb8aXBL/ZlGX5za6PFkBWcE2lzIgbbHjibfvN5eVlVP8bCds4HHqfXXXQjlV1Fjp6h6fTpFyYs2rVfeYZIMQ5ZNmokuA3m4LfAOwtXFMpM+IGG544zfentkU6o3ekU5IcwW8A9hauqZQZcYMNT5zm+DdbIp0Xk9IpSZbgNwB7C9dUyoy4wYYnTnP84llJZ/SOdEqSOUv2G/ldQsmBdzJBE7NCwQJ5qc/PYLugFOgSsD1G3GDDE++h38DesXC/UXubbduEudfDsjH8ZvB85pzfHiNusOGJ8RvIn1z8Zif9tLjXw7LBb1JmxA02PDF+A/mTj9/0guOdt8Qy74d9zhC5jdScIrlcS5X5+qt8zglNAJJi0G/sE+zIL712n3DWT82IG2x4YvwG8idvvzFSOsdVMuYMkWYP6frWyDOt6QXwTI0CkCie/jeqpKyVHwP+a0GfxgdGMuIGG54Yv4H8yctvLPOUKd0lreNiD4yp3Swt14oTGQUIGe8bIC2G26dcE+xo14JvGh8YyYgbbHhi/AbyJx+/6cUict6PcL/ptqOPmelcESBlBvxmYIId6VrgtJ+BETfY8MRp+o1chUgtIGxKLn4jT0Y/Yt4Ps5lJa59S7t3SfLK0T8GCGfCbgQl2hFCuBU77iRlxgw1PnKzfNGcR91HYnIX7jdX1Y+f9cMxp31e5m61dfWdLW/9iS7dmgAQZap9yT7BjnuOMWTY1I26w4YlT9xte1YPNWbLfbAY16rD3THxNwaSMuMGGJ96N3/zLv/zLJ5984v588LdmuZZrdlAg8LK3fkN9OgB+kzIjbrDhiXfgN3/605/+7u/+7o033nAnsbZPme/m1R0i9Xf4ADT2zG+oQwfowW9SZsQNNjzxtv2mlpu7d+8O+Y1xg7a+m7eTAethaeyZ3wBAD9dUyoy4wYYn3qrfdHLz7rvvBtbf9Fh7EuA3EAB+A7C3cE2lzIgbbHji7fmNLDdj/MbSl4D2KQhiy34zbkUAgL1CZOM3n3zyyRsSv/71r91pHR2GlX4FVdczh3fIwc+y6m8IgiD2IUQ2fgOwK/AbgiCI1ELgNwAbgt8QBEGkFgK/AdgQ/IYgCCK1EPgNwIYs2G+ePTyQRkU4ePA8Yt3H96NXIQiC2FYI/AZgQxbvN7cffj9i3dT85vH9oig+eLzrYhAEkUYI/MbPD4mxq+MAHhL0m29+/6fj40+GU27iN4nF1/cK/IYgiC4EfuPnhx9+eJUM+E2apOY3v/vmDz95883XXn9j+BZg+s3j+0VRFLfvNO1Wtx9+/+r5p7eLorjz6TN1la7+Rmnkuv91l4nc5mXJtsuqXVjc+eDenebPe0+UEspr2bKq5UZflyCIPQ6B3/jBb2CQpPymlpu7d+9G+E3LB487e3j4/au/ff/gjrywNhXLwiaTVoDqHO49MRPr2Up2VS8s7j15qejUkw86X6kT33tiz4r6G4Ig1BD4jR/8BgZJx286uXn33Xc3qr+R7OTgwfPGM/q6nL6SpvebNhPFMzQp0bLtPlW2Vedw59NnSj1QXzdjLyF+QxCEEgK/8WPxm2cPbvcV5g+ezegzj++pG8Bv0iQRv5HlZmq/aZ3jcW8kW/AbeeHLoBLiNwRBNCHwGz+63zx7cFtyjsf37j3Gb/aeRPzm+PiT115/o4uPP/718C0g2G/qlAe372jtUKbfeBqzoutvmpav+183OT/sK3WMteS2KoIgCIHf+FH95tmD28WsRoPfLJFE/GZMqP1vPK0/bbcYm8e4JKkoCq1/cazf6CW84/GbphGtoH8xQRB/e4nfDKL4jUdv+karOsHje8XtBw/u6a1YtmT37t2u//m4ewek2Qh+swwW7DcEQRCZhsBv/Oh+0/pGKyr1vyUReXzv9oNnjat0DiNLj5HM6MPTJcNvlgF+QxAEkVoI/MaPt/6m9Q+5x3HR1cV0ahKYTK7AwW+WBH5DEASRWgj8xo/a/0YTDllctHYrl9+4k/WfdtVE+M0ywG8IgiBSC4Hf+NHen3r24HbRO4rckKQ1M9n8xp+s+7N/RQu/WQb4DUEQRGoh8Bs/lvFv+lYka8dhd/vUQLKuS8+9e9TfLAr8hiAIIrUQ+I0fxi+GQZblN7s+WgBZwTWVMiNusOGJ8ZspwW/SBL8B2Fu4plJmxA02PDF+MyX4TZrgNwB7C9dUyoy4wYYnxm+mBL9JE/wGYG/hmkqZETfY8MQ5+E1S7Oo4gIcM/GZdFkW5nvMgrctiVZ2FLOxL1LFZ0TxbUTmrVoEplcx7+pXHZBXPdrYCXvCblBlxgw1PvHi/ARhk8X5zVq1WZbma9Uk5wm/ajzaVL7/fBNvP8OrrcmMX27g8sG3wm5QZcYMNT4zfQP4s3W/OqtWqOqv/O9tB2sBvplSQ2E8jMz+rVpsKDn6zMPCblBlxgw1PjN9A/izcb1qxUQTnrFrJbUPaP80F67JYVetmYbnuP5cqYfoEysIzVQqa57taf9MVTN+up2Bdnt36pjNJrUvlWkngyqcqLfvV60i3L8pGy3LlOpDqIq08zmK0GVoL7DgyMA/4TcqMuMGGJ8ZvIH+W7Te91kiCsy6Vp6L2T1U+VtVZ0zTTPdC7x3/ftCQt7XuNtPlI+bd/Gk9663YtBZNFR9Maa52Qa6E1H3lvJLEb8BubDDXHzexBozd4WYthZDh4ZGAu8JuUGXGDDU+cqt/0N8/+HiD9UnLcUsPymRylB6Py2zE8A2q8Z2TRfiPX2vQVKWfVSu8tq/9TvVhczUlWjZAlpvu01YXejDoBaC8uc7uWgimXrlmVEuQ3A/k490s6nLYE9vJrtw4tfVgxBo8MzAZ+kzIjbrDhiZP0G/WOWfX3c+VW0v7LLQe2fOZktKbgN/OyZL8x5Vk3fq0dpVxbe5lE+Y1ZyWH2AdI/UtZTcRVsB37Tr+jyG7X8U/qN98jAbOA3KTPiBhueeKt+8+c///nly5fD6czHveXuYP4OC8hnXvCbRFmw3+inhn4laJ2O23/KTSRmRs4WH0NT1Ge58g7XUCYqcsGkBh1tK9Le9TmFtE+ZTVEuPRrs9KOVP6p9yl8M/5GBucBvUka+eR4eHmq3U3NJun7zxRdffPXVV1dXV0MJjXuBra1a6hrguj/Y7im2fpdluSqK1crSidKT3vzRZZTE0vfQ37+SLoezsFy/caq+1vBqtsPKDSLB7VNluXKcmc0/XO3CvQVo2/UVzFaeLn1ZdgubZc7+xcPKVegp9R1XK3i0Iuv7IJUnvBgBRwbmAb9JGfnmeXh4KAuN9s/uBht+N96231xcXHz++ed//etfh9I2N4P+HmLcBKRfhJ7fP0o+ll5+sgOtrZ0o3el1tJKsXX0Pnf0rbRoHm7Ncv0kKTk9YIilfUyDfPA9btL+1G2z43XjbfiOEuLq6qqrq9PR0eIWu043tzhrmN2o+w/0u1U6UA+k1XC39Utb+Bnu6HM4DfjMBtKPAMkn3mgKj/82hivUGG3433oHfCCHOz8+Pjo5ubm4GV2l8YFz/m6B89Gp2pRPlUHrh+WiE33TrUWc9KfjNZtSnJHYDiyTJawoazFuoR25epO8319fXA/U360p+j8PWPU9+m8rTv9jMx9/vsutE2dnFUHp1e972KX1cDkeHxLYUPEymA78B2Fu4plLGehd1yc2LxP3m8vIyoP+N1CVQqsdQG4uUVxisHQjt+fj6XQrVnELSa8V29S+2dmA0OiHS5XAe8BuAvYVrKmVG3GDDE6f5/lQAjSVQzQHDbNlvxq0IALBXiJz8JnT8G4BJWVb9DUEQxD6EyMlvAHYCfkMQBJFaCPwGYEPwG4IgiNRC4DcAG7JlvwEAgJnAbwB6tuk3AACQAvgN5A9+AwCwb+A3kD/4DQDAvoHfQP5s02923TYNAJAzy/YbZUBiy6jEu8nKkX1Afv0kE7Abtuw341YEAAA/i/ebljB7CEofm1WyW4Qx4DcAABmQrt9Ejl+M38A04DcAABmQrt9Ezj/lma6yXMutPuuyWK3UWTCjsmoTrJuFTe5Ke5aSQFnYFkGdg9M6Jee6LFZVVeotZWddthVWNAf4DQBABiTtNxcXFwHzh9doUiL9c122022X6+a/ZvrYrIpeQgpZW7rM26W9WZlbVFXmzFwo56f/dVatmDF0DvAbAIAMSNpvhBBXV1dVVZ2eng4lV+2hr3FRq136+ppgv7FkZdUR4fCVTqkUT1J7MA9m0v59Vq2UjPGb6dm13zw6VDu5Hxw/lT/p/+nBmjJg9afHB5btDqU/fOQtx4b7EoW8A9NuYKpDOn7HjTW7BTMdTOPrc3/RYzIefyYDhJG63wghzs/Pj46Obm5uvMlNKTFansb7jZZVlN9060uO0lfB4DfJkYTftHf05ulYP1hm9pv6adY+wx4dT+U3G+5LFPU26nzV/Rnm0aEv+VSHdHl+I31hUYbjOZ7+Assr4jewAan7zfX19Zj6G7Eu9cabTdqnzKwG/aZd2ttM+2mXyt50NdxoRfvUrCTlN+oTO5gRD+MhVRm10hT7MqJA9RYi92jgAT7VIZ3QbybIM2CLY00jXog2XRFAI2m/uby8HNv/Rm1XKqtOJTqpaNqI4voXR7RPleWqULageE1RFMWqLNvaGKkwfr/p27boXzwTifmN9JTsP5EaDg4fWVqV6pSHhwfmwjpjYxWnDEib6gqltQI1a1kat0L2xZ5b6CaUdIePjPobuSBK0dQVD/vPZz6k3Squw9XvsO2fnvobrWzWI+NMcHBgOXCSaWg7M1R4pWVLO57tx+ZxOzh+qq/o/xLrJXXZtYMDkLjfxLw/lRRbaTmytsHBxqTpN3IzhPOXtPZgkp6yaiuG1ADQPrfseVofcNJC/U81z5B9kZP0uVkXWjfRPB21NjDpAenaC21FV7XBPIdUWer4Wt06E1Y2Ywf1tdQE2oq6RitHJmhnleOpFUYrg1pGe62R51T0CzrsMen6TeT4N0mxDb8xm81gEtL0G/mp3z3E9ZafbqH5+1j+Kax3G+1/cNvaUtRHlJpSf9KoeYbsizW3iE1oD8jB56UmRlJK/QjMc0hdVT7m12p8y2H9b9w7qO+R9dA1FT2aW6pJbTtrnpOWw65+1u2ypmBWv7F/iYb0UIMDMun6zZKZz2/0pjKYnMT8Rvpdaq2rPzg+PjSewd6Hsf1JYKttCPcbx9NleF/C/ca+iXn8pq8XmPqQajuu5yx9rU/1f27kN5bN6YVu1jw81Eoj1dRpVUQaauHD/cZn1fgNbAB+A6CQlN9IjxXzeSl3u1AfWNZ6e71hQntTyrZU2qLtuSmtYs9zeF+suUVsIsBvrHthppSetXojzwyH9JFlE7YTwGExlk/0sin52vbIcQSMb0zpEOX+rvXCK+7i8Bvr96WsaNt7a1MpfgMm+A2AQhJ+02N58EkplG4SfR9RLQ/zlWy1b6lqB+pSfWOWIlo6/+r1D859kRPV5ZdrULSFlk2E+I11Lywp20RdxcAch9Ro0uo2oZXRKLJSAmtWJ66IGgAAEjxJREFUStlsSqHskbMBy97E1OYg2YSvtOrxdPmNmpXeABbYvxi/AQf4DYDCrv1mf7G2VtBvdItIfW8Alg9+A6CA3+wIb3eVHZVpv0BvIC/wGwAF/Ga72Fo27AthRuTWJ4A8wG8AFPAbAIAMWLzfdBMutP+SXsxWP1NX8ry/3c9+GTHCTL1SqgPSyLsUuWOTZ5X6tFn4DQBABizebxSJUedkUiaj1Nfx+400eVTQs7ifFiptYt0ifJau+cqwbfAbAIAMSNdvQscvlizmrFqVVbVqRMOtN8F+E/wwTv2Z3YLfDIPfAABkQLp+Ezz/VOcx9R/yDOFtlUo/6q80lfe6neZSf9g6/MaWSTeJptJSIw0yLE+uWZaropnDvN96ue6Ty1tV11+X9XyaeoH1MpkL3LtmTS//W2qJipyFtE/uOBTKPKOJVX3hNwAAGZC031xcXITMH96KzLpsJgZv5weX5aCdfLufO1ybT1zJz2yfsmciTeqtyIlkG91k4OoM4P1iaQv6g16eS1zSKslF1KKbhTQPlbzYSK/3WAqvv3HutW2h9gWlBX4DAJABSfuNEOLq6qqqqtPTU1/S+knZPi/rapy+dUqesqmxBOXZbDxn5R60Zg2QNROtmqfPr3cve5uX4+++CKoTyMnM+cMthTSPlLX2R6lKUntoh/mNda/9h0LfVirs1m8eHWoTNatj/jaD0se+Mz1ilUnotrurAmjFMHh6fLBpwSzj744vj5KmR50katFvzMeeCVOdObs9A0dh/64DdmSCk0Q+/aY6btaSz/u9pO43Qojz8/Ojo6Obmxtn0rNqtarWcsebslJ65TjrRawf2x7qA5lM6jd9Dp2khfuNv0rEJyVKNoVZ7IisgvxG31Yq7Lj+RhYcdby1p8cH7XQMIXcEOdkmN5FJ1k3Vbzbk6fGBOuX4cdDwMYF+o05nkMnINCP2PfZsH73daZlpi9vZkX4rMbLkLxt+I1H7zfX19XD9TfOU1LqvdA9NuW3IWDIgLrZVLMk87VNSj59Av1E6qLj9xt4+5a8RsTQqWdO3YjW6fUpvS3McCnlbqbBjv2ktpv7z8Pj4oJ97KcoV8BuzGNPy9PhgnHXEPuM32FRy4DdpZuvZSvgW8ZsYv7m8vAzpfyOMR73elUVuiGmblrquwUblgeOhbsvE/ppVnzKmTcrseLsqS0/9Tbujyl7ohRzaNS29rWNzfFZhh8LYViLs2G96j6n/6Opz5D/a+af1losaaX7IouibtAZWaXI+PJSrJLR8lNYY83nbp+5nfzb8xshBqrFSk6kbsGeu75R74VPVEZpNqSU8brZhHqKD42P9RuxxDutRsmalfwXy7upTXx4+sh9Ja4berZhftKvYjsNiW8ecA3XUvgeduurJYJylRukc27WU0DzRjdPQd5606V1FUo/8wEZDv2v3yTPw9RnXlJmDvRjaGXJ4KE23ah6CwQt2YHfGk7TfhL0/BTAlu/ab7nn/6LBpjmpbpfrbRNHfvmTpae8YRjNW+CrmTVDPR3qMuX54mVoj/2HkIJnbwYEid0OZt8XtC+NaqB1D6SDLK/azgut/WaZmchbRepSsWZlfgfWwv7D5jSvDkK24vmh7sY2DoZTKKPa0+249dc2UrroB3yGynCFdYaRTxczTc57Y81RXtzza7Rsd/K4HD6D/6zPTW5ZI37Hzy7XskaswrmvTtzvjSddvQse/AZiUnftNc5trb3b1Y1R6mNp+Wkm/q9rfP64a5sBV5NLIP7CUGhDLr75C/q1o3LysOfQdiw6OH9V/29zBmblcGP9C2aS6W7aZm1RaJbOw+hvvPg59BbbD3mRqHElrhkFbsX3R9i/XdRY5jsD0++7423sy6MdM366thFphnFONui4l/6GzrT680div1dyK9+uzHEbLB33WsWdI1AXr253xpOs3ADth937z9Pjg4PiR3PHm8Fi6ww3fYZ3JIlaxLfT7Tf+p2VXI/yRoW+Iaszl8ZOqNL3P544GFblmM9xuX4MQ948N+Uvcpx/lNwBe9A78J2Xf/qevtlBbnN45v0to+NZnf+Dca+7WaWwn8+szrbeMzJPaC9e3OePAbAIXd+01zi5PvGvJt1npDkWuJPcnCV3HlI1dQO+78vspnew5Pjw/klqnDQ6OC2p65XIfe18LbFkq33YPDQ4ssOg+Rs32q/Wb6o9C8P2XdR2tW5lcwdNgHyha4FdcXbS22pwJgsH1qkn03/vadafY9crdPGaeNivHkHzhPHIfOtbp/o8Pf9dAB9H59lsNoLae8MPgMibhgB3dnPPgNgEICfqPfcOTnm/cHk1K721QPe9qq9FWsNzU5H3kVM2X7WS8QtvusNQd5hy13W2fmXcdG+fFvXSj//rUdTPdtuimr0b9YLZeyQ9Z9tGZlfGt6av1QD5UtaCv2L9pWbL/fKOWUnnwb7vvgqWueDOpZapTOsV3tDJQKY+yW5fgPndW2IqnHcGCjQ9+17+QJ8BvbYbSX01jDcYbIuxxxwQ6eD6PBbwAUUvAbCGDw97FztTE3z3nqz6fBWraUCwywFfAbAAX8ZiGM8huzp0HwxqavPZ8Ia9lSLjDAdsBvABTwm4UQ6zdar6YQZqgxnwxr2VIuMMC2wW8AFPAbAIAMWLzfqLNjqoPq1p9ZZgj3ZDbtVAHyVJ1zzyU5dlsRx2cvwG8AADJg8X6jCI46JXX8xEZz+M3W1MGYtyGtaQ8WQ+wlJPAbAID0SNdvQscvPlNmCi8reRrxWLfIxm9C5hIHO7GXkJjFb6SOFP0LsBv2FzVyGBg+BABgwaTrN8HzT3UeU//R1efIf0izVFal3oLTTWdZVb0iSBNPatkpJnFW61SfWnUKm98YOUvzfdZTXK6qdZOmaV5TChy4LUlw9DW0f6/NvZYOxcBBkw5PtwvLJvYSEnOMX2wfNW5qvwn6CABgkSTtNxcXFyHzh7fmsS6beanb6an7ObC7R7X0ODb+klq3pAnIu+4pki+tVopSaZ2A1KL1tDJh5CzWZa8O67KQS9Eu79bzbcvqN9Ly+tDoOSjHx3oobAdNzVPZhWUTewmJ6ecPt776gt8AAESQtN8IIa6urqqqOj099SWtH9jtY7t2Dql1Sq2/6XuorKozrRVLWigpQJNxm3Jdrqp1/Xe7SO33o5ZMXWzN2Vow19+h21LKpkiWnoP3ULjLoIrbNlvi5iX2EhLT+o1zWLZeQTxDxrbTOamfGzkYSx4dFgfHj9oRR6Uh1g8PD7pxZNVMu08PDg5sAwIDAOyU1P1GCHF+fn50dHRzc+NMelatVtVa7nhTVtKzeiK/6dq/GrMp12oPn/qhP9A+tbnfBG6r25CjI46Uwzi/0fLEb8Zg9xu7H7jtRBuR1zlAr99vWq+xzhfjWKUXLmm4dcZdAYAUSN1vrq+vh+tvmoe1+vZQ/wD2PqqD2qekHstSy1RZltoj3ejSbD71rTlH+83QtqStuFuO+gqpgUNhP2hDe7pUYi8hsfX6G6ku5eD4qTH3o30qyBfD9TfSJDKWCZC1jepT27Qz5lB5AwBpkLTfXF5ehvS/EcYYLvLjfchv+k4yjv7FWqWInEDPwehd6+9fHOU07d++bXWYlUbSSnoO/kPhKI+WJ34zijH9b/rPlaqeulFKG8g2rn1KmhxS9xvLRpXc6qVjJz8AAJiepP0m7P0pmIE9fr089hISk78/9eiw8Lw/pUyirOiEpheGbQy0TzWf9Sqj1hhZWq/UmZAtsxADAOyMdP0mdPwbmIF83oaKJ/YSEnOMfyPPI6SPf9N+1vmE1vXX6Anc0n/Q5qrU3xweHqir6ZU6ykYNW3p0yJRHAJAQ6foNbB29zWk/ib2EBOMXv3jxgp7FAJAY+A2AQuwlJPCbF57XvgAAdgN+A6AQewmJffebuukKuwGAtMBvABRiLyGx734DAJAi+A2AQuwlJPAbAID0wG8AFORz9fDwUDt7zSUCvwEASA/8BkBBPlcPDw9lodH+WSPwGwCA9Fi836iTYauj6Dqn2jbzMAZ7qUfybabb3nAoGGUW8Yi8tFGZYSvI5+phi/a3jMBvAADSY/F+o0iMOjO2MUOTJwv3LFHT+I06N9b+Di6zALTT9VDFPJ8FfgMAkB7p+k3o+MWSxTQTh0uzYYZ5idVvnBNbxuOY2RuSxDxjPXLzAr8BAEiSdP0meP6pzmPqP7r6HKliRxqYV66VKctVO+FkPy12UZal0pZkn1TS2IaaTBEYzZDUGcmV/LR/Wzatz3xZlVJRrXnKewrDWE9al9y82NhvAABgJsLvxtv2m4uLi5D5w1vJWJeNj7Ra0jzQpcamvkeLPMNSrRFyvYq1/saWj2RTq5XiWWoBrX6jTNzddPWxi1G/aakJTmrq6j838tzruaTGEOsoYgO/AQCAFNi23wghrq6uqqo6PT31Ja21oJWDWi96yVDbg3oZUg1mpXTltfmNNZ92M+tyVa3rv812MdNvugwlyrXWf0jZdL90rdTfWAqp5jlB+9p+EXtVCPwGAGDh7MBvhBDn5+dHR0c3NzfOpGfValWt5Y43ZaX0yhn2m2K10lKF+U3XKNaYTbm2dPtx9L9xdMSpFUUpZJzfaHniN3HEXhUCvwEAWDg78Jvr6+vh+ptGCdR3lPrHvNauZLTjtH8rTTvD7VNSN2apZaosS9u75krZpFYwu3r0tUID7VP2Qnpbx2CA2KtC4DcAAAtn235zeXkZ0v9GGCPFyBLRfqx1w7XKQScPjvenLPmo27aPWCOPf6N+Kjcn1U1sRtfg3ris/Yt9haR9agyxV4XAbwAAFk6S498A7BrenwIASJAd+A1BZBbj/GbXYgYAkDPb9hsAAACAdMBvAAAAIDfwGwAAAMgN/AYAAAByA78BAACA3MBvAAAAIDfwGwAAAMgN/AYAAAByA78BAACA3MBvAAAAIDfwGwAAAMgN/AYAAAByA78BAACA3MBvAAAAIDfwGwAASI63PhN7Hp6Dc7L3hJxC+A0AACSH/wGfPYN+s7WSJAh+AwAAS+Wtz8T/2WMG/WbXBdwl+A0AACwV/MZzcPCbkFMIvwEAgOR46zNxs8cM+s2uC7hL8BsAAFgq+I3n4OA3IacQfgMAAMnx1mfieo8Z9JtdF3CX4DcAALBUtu03//U/FS3vfPzv0tLuX//+8TtF8Z/+63aKs3W/+feP37Hs/0TIh3EC8BsAAFgqb30mrrbGV+8XxTsf/Vv9j3/76J3uH1+93/7Z/7UVBv1myo3920fvFMX7X/X//OgrX/J4Jj54+A0AACyVLfrNv330jvR0VxY0D2Yjxexs0W+2sHP4DQAAwIsXL168eOszcbkdvvvoneL9r/RF73z03eXl5VfvF+989NH7Rf2vLTLoN5NtybL7DV+937ZYNZ+3R6NuxeoPyXcfvaMm1Bd8Ne0RxG8AAGCpvPWZuNgO33349tsffqcvKt7/8uLi4sv6Yf7+l1sqS8eg30y2Jcvua3z5flGn+PL97lh8+X7713cfvl2oGXTpLy6+fP/tD79TlkwBfgMAAEtlq36jC0z3zP/y/eLtD780nuDzs1W/cfnbl10FjnQ0vus+e/vD72yrf/fh24XE+1/iNwAAAA3b8xvzEd0vaB/MfXXFltie37gEp1+s2l6Q32j54TcAAAAvXrx48eKtz8T/3hpfvlcU730p/ePtD//S/t38+ZcP3+6WboFBv5lyY1++V0j7/7//8uGHX0q73u95fzSsH8vZGUumPHb4DQAALJW3PhP/a5t88V7XovLeF/LSt//xL1KS/l/zMug3E2/vL//YNyo1+9guevu9996uF8lHQ/tbPXRybu99oR3GzcFvAABgqWzbbxJj236zKPAbAABYKviN5+DgNyGnEH4DAADJ8dZn4nyPGfSbXRdwl+A3AACwVN76TPzPPWbQb3ZdwF2C3wAAwFLBbzwHB78JOYXwGwAASI63PhP/Y48Z9JtdF3CX4DcAALBU8BvPwcFvQk4h/AYAAJLjrc/Enofn4JzsPSGnEH4DAAAAuYHfAAAAQG7gNwAAAJAb+A0AAADkBn4DAAAAuYHfAAAAQG7gNwAAAJAb+A0AAADkBn4DAAAAuYHfAAAAQG7gNwAAAJAb+A0AAADkBn4DAAAAuYHfAAAAQG7gNwAAAJAb0X5DEARBEASRfkT4DUEQBEEQxEIDvyEIgiAIIrfAbwiCIAiCyC3wG4IgCIIgcgv8hiAIgiCI3AK/IQiCIAgit2j8hiAIgiAIIqf4/wE3DogjVcDmYgAAAABJRU5ErkJggg==" alt width="661" height="386"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在我的这篇博客&lt;a href=&quot;/2012/12/04/csharp-exploratory-testing-tool-pex/&quot;&gt;.NET自动exploratory测试工具Pex&lt;/a&gt;中介绍了.NET自动exploratory测试工具Pex，Pex只能在visual s
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>SneakPeekit – 打印 iOS 及不同分辨率浏览器线框图</title>
    <link href="http://fresky.github.io/2013/04/23/sneakpeekit/"/>
    <id>http://fresky.github.io/2013/04/23/sneakpeekit/</id>
    <published>2013-04-22T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.254Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.appinn.com/sneakpeekit/" target="_blank" rel="noopener">SneakPeekit &ndash; 打印 iOS 及不同分辨率浏览器线框图 - 小众软件</a>介绍了一个有用的网站，做iOS设计的可以看看。：）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.appinn.com/sneakpeekit/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;SneakPeekit &amp;ndash; 打印 iOS 及不同分辨率浏览器线框图 - 小众软件&lt;/a&gt;介绍了一个有用的网站，
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>另眼看代码-通过tag cloud</title>
    <link href="http://fresky.github.io/2013/04/23/tag-cloud-for-code/"/>
    <id>http://fresky.github.io/2013/04/23/tag-cloud-for-code/</id>
    <published>2013-04-22T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.254Z</updated>
    
    <content type="html"><![CDATA[<p>今天在一个培训中Kevlin Henney展示了一张图片<a href="http://philcalcado.com/2009/04/29/tag-clouds-see-how-noisy-your-code-is/" target="_blank" rel="noopener">See How Noisy Your Code Is</a>显示了用tag cloud来看源代码，是一个很有趣的视角。如下图所示。</p>  <p><img src="http://farm4.static.flickr.com/3377/3485582094_bcc78376da.jpg"></p>  <p>&#160;</p>  <p><a href="http://sourcecodecloud.codeplex.com/" target="_blank" rel="noopener">Source Code Word Cloud Generator</a> 是一个开源的小工具可以生成这个图，适用于C#，Java，VB。它使用<a href="http://http://www.wordle.net/" target="_blank" rel="noopener">Wordle</a>这个工具。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天在一个培训中Kevlin Henney展示了一张图片&lt;a href=&quot;http://philcalcado.com/2009/04/29/tag-clouds-see-how-noisy-your-code-is/&quot; target=&quot;_blank&quot; rel=&quot;noope
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>Bing在这次搜索里面战胜了Google：）</title>
    <link href="http://fresky.github.io/2013/04/19/bing-win-google-with-this-keyword/"/>
    <id>http://fresky.github.io/2013/04/19/bing-win-google-with-this-keyword/</id>
    <published>2013-04-18T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.254Z</updated>
    
    <content type="html"><![CDATA[<p>今天发现OSQA的tag中不能有+符号，比如说，如果写了tag是c++，那么点这个tag就啥都得不到。于是就像搜搜有啥解决办法，结果搜索了如下关键词（+会被解析成%2b）</p>  <p>%2b osqa   <br>结果发现Bing在对这个关键词上比Google好了太多，上图：</p>  <p><a href="http://images.cnitblog.com/blog/163228/201304/19153522-fcb8b53cbfbb45ab9116cfd71c2cbcc8.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="bing" border="0" alt="bing" src="http://images.cnitblog.com/blog/163228/201304/19153524-9ea7a2314b41492f97701aecc82ba8cc.png" width="153" height="244"></a><a href="http://images.cnitblog.com/blog/163228/201304/19153528-1560aa97dad24dea93a6665ac5fa326e.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="google" border="0" alt="google" src="http://images.cnitblog.com/blog/163228/201304/19153529-cdd43b65aadd4560952a6057b3a4e800.png" width="244" height="214"></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天发现OSQA的tag中不能有+符号，比如说，如果写了tag是c++，那么点这个tag就啥都得不到。于是就像搜搜有啥解决办法，结果搜索了如下关键词（+会被解析成%2b）&lt;/p&gt;  &lt;p&gt;%2b osqa   &lt;br&gt;结果发现Bing在对这个关键词上比Google好了太多，
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>C#如何阻止计算机进入屏保或者省电模式</title>
    <link href="http://fresky.github.io/2013/04/18/how-to-avoid-computer-to-sleep-or-screen-saver-in-csharp/"/>
    <id>http://fresky.github.io/2013/04/18/how-to-avoid-computer-to-sleep-or-screen-saver-in-csharp/</id>
    <published>2013-04-17T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.254Z</updated>
    
    <content type="html"><![CDATA[<p>有时候我们希望阻止计算机进入屏保或者省电模式，比如计算机进入了屏保或者省电模式后可能会导致automation test失败，或者我们就是想在自己出去玩的时候让屏幕一直亮着让老板以为自己刚出去：）</p><br><p>那这篇文章介绍一下如何用C#程序阻止计算机进入屏保或者省电模式。</p><br><p>要实现这个功能可以使用下面两个API。</p><br><h3>1. <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa373208%28v=vs.85%29.aspx" target="_blank" rel="noopener">SetThreadExecutionState</a></h3><br><p>通过这个API应用程序可以通知系统它正在运行,从而阻止计算机进入屏保.</p><br><p>实例代码如下:</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Runtime.InteropServices;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">NoSleepMonitor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">internal</span> <span class="keyword">class</span> <span class="title">NoSleepWay1</span></span><br><span class="line">    &#123;</span><br><span class="line">       [<span class="meta">Flags()</span>]</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">enum</span> EXECUTION_STATE : <span class="keyword">uint</span> <span class="comment">//Determine Monitor State</span></span><br><span class="line">        &#123;</span><br><span class="line">            ES_AWAYMODE_REQUIRED = <span class="number">0x00000040</span>,</span><br><span class="line">            ES_CONTINUOUS = <span class="number">0x80000000</span>,</span><br><span class="line">            ES_DISPLAY_REQUIRED = <span class="number">0x00000002</span>,</span><br><span class="line">            ES_SYSTEM_REQUIRED = <span class="number">0x00000001</span></span><br><span class="line">            <span class="comment">// Legacy flag, should not be used.</span></span><br><span class="line">            <span class="comment">// ES_USER_PRESENT = 0x00000004</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>, CharSet = CharSet.Auto, SetLastError = true)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">extern</span> EXECUTION_STATE <span class="title">SetThreadExecutionState</span>(<span class="params">EXECUTION_STATE esFlags</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Sleep</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            SetThreadExecutionState(EXECUTION_STATE.ES_CONTINUOUS);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">NoSleep</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            SetThreadExecutionState(EXECUTION_STATE.ES_DISPLAY_REQUIRED | EXECUTION_STATE.ES_CONTINUOUS);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3>2.<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx" target="_blank" rel="noopener">&nbsp;</a><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx" target="_blank" rel="noopener">SystemParametersInfo</a></h3><p></p><p>通过这个API应用程序可以设置系统参数,其中可以设置屏保的参数,从而取消屏保.</p><br><p>示例代码如下:</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Runtime.InteropServices;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">NoSleepMonitor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">NoSleepWay2</span></span><br><span class="line">    &#123;</span><br><span class="line">        [<span class="meta">DllImport(<span class="meta-string">"user32"</span>, EntryPoint = <span class="meta-string">"SystemParametersInfo"</span>, CharSet = CharSet.Auto, SetLastError = true)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">SystemParametersInfo</span>(<span class="params"><span class="keyword">int</span> uAction, <span class="keyword">int</span> uParam, <span class="keyword">string</span> lpvParam, <span class="keyword">int</span> fuWinIni</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">const</span> <span class="keyword">int</span> SPI_SETSCREENSAVEACTIVE = <span class="number">0x0011</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">NoSleep</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            SystemParametersInfo(SPI_SETSCREENSAVEACTIVE, <span class="number">0</span>, <span class="string">"0"</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Sleep</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            SystemParametersInfo(SPI_SETSCREENSAVEACTIVE, <span class="number">1</span>, <span class="string">"0"</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&nbsp;</p><br><p>我在<a href="https://github.com/fresky/NoSleepMonitor" target="_blank" rel="noopener">github</a>上放了一个wpf的小程序,包含了上述代码.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;有时候我们希望阻止计算机进入屏保或者省电模式，比如计算机进入了屏保或者省电模式后可能会导致automation test失败，或者我们就是想在自己出去玩的时候让屏幕一直亮着让老板以为自己刚出去：）&lt;/p&gt;&lt;br&gt;&lt;p&gt;那这篇文章介绍一下如何用C#程序阻止计算机进入屏保或者省
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>debug利器——Code Map （集成在Visual Studio2012的Update2）</title>
    <link href="http://fresky.github.io/2013/04/07/codemap-vs-debugging-tool/"/>
    <id>http://fresky.github.io/2013/04/07/codemap-vs-debugging-tool/</id>
    <published>2013-04-06T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.253Z</updated>
    
    <content type="html"><![CDATA[<!--[if !mso]><style>v\:* {behavior:url(#default#VML);}o\:* {behavior:url(#default#VML);}w\:* {behavior:url(#default#VML);}.shape {behavior:url(#default#VML);}</style><![endif]--><p class="MsoNormal">VS2012 <a href="http://click.email.microsoftemail.com/?qs=c1ae04b75156db7952f666a3efc25ce235a186ecc1dd37e7cd76ae55107ffddf7106298261c1cc62b8f55342a1236042" target="_blank" rel="noopener">Update2</a><br>中集成的Code Map是一个非常方便的debug工具, VS2012会在你debug的时候自动生成call stack的图表。适用于 <b>C#</b>, Visual Basic .NET, <b>C++</b>, 和JavaScript.</p><p class="MsoNormal">下图是从MSDN上复制的一个例子.</p><p class="MsoNormal">&nbsp;<img style="max-width: 800px;" src="http://i.msdn.microsoft.com/dynimg/IC651756.bmp"><br></p><p class="MsoNormal">可以从这里找到更多的信息：</p><a href="http://msdn.microsoft.com/library/dn194476.aspx" target="_blank" rel="noopener">http://msdn.microsoft.com/library/dn194476.aspx</a><br><br><p class="MsoNormal"><a href="http://channel9.msdn.com/Series/Visual-Studio-2012-Premium-and-Ultimate-Overview/Visual-Studio-Ultimate-2012Debug-visually-with-Code-Map-debugger-integration" target="_blank" rel="noopener">http://channel9.msdn.com/Series/Visual-Studio-2012-Premium-and-Ultimate-Overview/Visual-Studio-Ultimate-2012Debug-visually-with-Code-Map-debugger-integration</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!--[if !mso]&gt;
&lt;style&gt;
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {beha
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>高性能软件需要知道的一些数字（zz）</title>
    <link href="http://fresky.github.io/2013/03/15/numbers-to-understand-high-performance-software/"/>
    <id>http://fresky.github.io/2013/03/15/numbers-to-understand-high-performance-software/</id>
    <published>2013-03-14T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.253Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://kellabyte.com/2013/03/10/numbers-to-understand-if-you-are-writing-high-performance-software/" target="_blank" rel="noopener">Numbers to understand if you are writing high performance software</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://kellabyte.com/2013/03/10/numbers-to-understand-if-you-are-writing-high-performance-software/&quot; target=&quot;_blank&quot; rel=&quot;noopen
      
    
    </summary>
    
    
      <category term="Algorithm" scheme="http://fresky.github.io/tags/Algorithm/"/>
    
  </entry>
  
  <entry>
    <title>没有初始化的指针会是个什么值呢？</title>
    <link href="http://fresky.github.io/2013/03/15/what-is-the-value-of-uninitialized-pointer-in-cpp/"/>
    <id>http://fresky.github.io/2013/03/15/what-is-the-value-of-uninitialized-pointer-in-cpp/</id>
    <published>2013-03-14T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.253Z</updated>
    
    <content type="html"><![CDATA[<p>在C++的构造函数中我们应该把所有成员变量都初始化，如果我们忘记了初始化一个成员指针，会发生什么呢？</p>  <p>假设有如下代码：</p>  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">my</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    my()&#123;&#125;;</span><br><span class="line">    ~my()&#123;<span class="keyword">delete</span>[] r;&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">float</span>* r;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">my2</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    my m;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">float</span>* f;</span><br><span class="line">    my m;</span><br><span class="line">    my2* m2=  <span class="keyword">new</span> my2();</span><br><span class="line">    <span class="comment">//delete[] f; </span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&#160;</p><p>Visual Studio 2012调试结果如下：</p><p><a href="http://images.cnitblog.com/blog/163228/201303/15163039-d46979d842144e87ad29c392b1593968.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201303/15163039-cc8e1dfda0ce468bb5c76928b8b5eab1.png" width="244" height="60"></a></p><p>Visual Studio 2008调试结果如下：</p><p><a href="http://images.cnitblog.com/blog/163228/201303/15163039-a1e66d95d84145f698b4fa9ec85f1653.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201303/15163040-dac19fd40dd54735ac08a0e8b4a97007.png" width="244" height="56"></a></p><p>&#160;</p><p>可以复习复习这个，<a href="/2012/07/06/what-is-oxcdcdcdcd/">oxcdcdcdcd是什么？</a></p><p>&#160;</p><p>如果把上面代码类my的构造函数和析构函数注释掉，那么类my和my2就变成了POD。POD就是Plain Old Data Structure，就是C++中没有用户自己定义的构造函数，析构函数和虚函数的类，并且每个成员也是POD。</p><p>Visual Studio2012和2008的调试结果都如下：</p><p><a href="http://images.cnitblog.com/blog/163228/201303/15163040-cb8d42aa8c0b4e759f212e352e64c13f.png" target="_blank" rel="noopener"><img style="background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://images.cnitblog.com/blog/163228/201303/15163041-06b4fdb3912c4a3ca501e22ff290c412.png" width="218" height="55"></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在C++的构造函数中我们应该把所有成员变量都初始化，如果我们忘记了初始化一个成员指针，会发生什么呢？&lt;/p&gt;  &lt;p&gt;假设有如下代码：&lt;/p&gt;  

&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;p
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>SEH（Structured Exception Handling）详细解释</title>
    <link href="http://fresky.github.io/2013/03/08/what-is-structured-exception-handling/"/>
    <id>http://fresky.github.io/2013/03/08/what-is-structured-exception-handling/</id>
    <published>2013-03-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.253Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.microsoft.com/msj/0197/exception/exception.aspx" target="_blank" rel="noopener">A Crash Course on theDepths of Win32 Structured Exception Handling, MSJ January 1997</a>详细解释了什么是SECH（Structured Exception Handling）。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.microsoft.com/msj/0197/exception/exception.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;A Crash Course on theDepths of Win32 
      
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>用Doxygen加上Graphviz来理解代码。</title>
    <link href="http://fresky.github.io/2013/03/07/understand-your-code-with-doxygen-and-graphviz/"/>
    <id>http://fresky.github.io/2013/03/07/understand-your-code-with-doxygen-and-graphviz/</id>
    <published>2013-03-06T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.252Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.doxygen.nl/" target="_blank" rel="noopener">Doxygen</a>加上<a href="http://www.graphviz.org/" target="_blank" rel="noopener">Graphviz</a>可以做出非常直观的doc和类图之类的，非常有利于阅读代码。这里有一个使用说明，<a href="http://blog.csdn.net/zxgis/article/details/8106027" target="_blank" rel="noopener">用Doxygen+Graphviz生成函数调用流程图</a>。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.doxygen.nl/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Doxygen&lt;/a&gt;加上&lt;a href=&quot;http://www.graphviz.org/&quot; target=&quot;_blank&quot; rel=&quot;noop
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>developer应该知道的image知识（JPG和PNG）</title>
    <link href="http://fresky.github.io/2013/03/01/Developers-Guide-to-Images/"/>
    <id>http://fresky.github.io/2013/03/01/Developers-Guide-to-Images/</id>
    <published>2013-02-28T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.252Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.jessechapo.com/posts/Developers-Guide-to-Images.html" target="_blank" rel="noopener">Jesse Chapo - Developers Guide to Images</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.jessechapo.com/posts/Developers-Guide-to-Images.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Jesse Chapo - Developers Guide t
      
    
    </summary>
    
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
  </entry>
  
  <entry>
    <title>Command Query Responsibility Segregation</title>
    <link href="http://fresky.github.io/2013/03/01/command-query-responsibility-segregation/"/>
    <id>http://fresky.github.io/2013/03/01/command-query-responsibility-segregation/</id>
    <published>2013-02-28T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.252Z</updated>
    
    <content type="html"><![CDATA[<p>Martin Flowler 11年写得<a href="http://www.martinfowler.com/bliki/CQRS.html" target="_blank" rel="noopener">CQRS</a>。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Martin Flowler 11年写得&lt;a href=&quot;http://www.martinfowler.com/bliki/CQRS.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CQRS&lt;/a&gt;。&lt;br&gt;&lt;blockquote&gt;&lt;/block
      
    
    </summary>
    
    
      <category term="Design" scheme="http://fresky.github.io/tags/Design/"/>
    
  </entry>
  
  <entry>
    <title>C#的yield return是怎么被调用到的？</title>
    <link href="http://fresky.github.io/2013/02/27/yield-return-in-csharp/"/>
    <id>http://fresky.github.io/2013/02/27/yield-return-in-csharp/</id>
    <published>2013-02-26T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.252Z</updated>
    
    <content type="html"><![CDATA[<p>假设有如下代码：</p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> IEnumerable&lt;<span class="keyword">int</span>&gt; <span class="title">getInt</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>      &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">          &#123;</span><br><span class="line">              Console.WriteLine(<span class="string">"get "</span> + i);</span><br><span class="line">              <span class="keyword">yield</span> <span class="keyword">return</span> i;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>      &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; getInt().Count(); i++)</span><br><span class="line">          &#123;</span><br><span class="line">              Console.WriteLine(getInt().ElementAt(i));</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>输出结果是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">get 0</span><br><span class="line">get 1</span><br><span class="line">get 2</span><br><span class="line">get 0</span><br><span class="line">0</span><br><span class="line">get 0</span><br><span class="line">get 1</span><br><span class="line">get 2</span><br><span class="line">get 0</span><br><span class="line">get 1</span><br><span class="line">1</span><br><span class="line">get 0</span><br><span class="line">get 1</span><br><span class="line">get 2</span><br><span class="line">get 0</span><br><span class="line">get 1</span><br><span class="line">get 2</span><br><span class="line">2</span><br><span class="line">get 0</span><br><span class="line">get 1</span><br><span class="line">get 2</span><br></pre></td></tr></table></figure><p>呵呵，说明了.Count()和ElementAt都是需要迭代的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;假设有如下代码：&lt;/p&gt;  

&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>C#中Func和Expression的区别</title>
    <link href="http://fresky.github.io/2013/02/24/difference-between-func-and-expression/"/>
    <id>http://fresky.github.io/2013/02/24/difference-between-func-and-expression/</id>
    <published>2013-02-23T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.251Z</updated>
    
    <content type="html"><![CDATA[<p>LINQ中IEnumerable&lt;T&gt;的where接受的是Func，但是IQueryable&lt;T&gt;接受的是Expression。</p>  <p>区别在于Func直接会被编译器编译成IL代码，但是Expression只是存储了一个表达式树，在运行期作处理。比如在LINQ TO SQL的时候就可以把这个表达式树变成sql语句。</p>  <p>可以调用Expression的Compile方法，把一个Expression编译成一个Func，反之则没有，不能把一个Func转换成Expression。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;LINQ中IEnumerable&amp;lt;T&amp;gt;的where接受的是Func，但是IQueryable&amp;lt;T&amp;gt;接受的是Expression。&lt;/p&gt;  &lt;p&gt;区别在于Func直接会被编译器编译成IL代码，但是Expression只是存储了一个表达式树，在运行期作
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>C#中各种serialization的比较</title>
    <link href="http://fresky.github.io/2013/02/20/compare-of-csharp-different-serialization/"/>
    <id>http://fresky.github.io/2013/02/20/compare-of-csharp-different-serialization/</id>
    <published>2013-02-19T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.251Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://stackoverflow.com/questions/1154198/what-are-the-differences-between-the-xmlserializer-and-binaryformatter" target="_blank" rel="noopener">c# - What are the differences between the XmlSerializer and BinaryFormatter - Stack Overflow</a><br><img src="http://img690.imageshack.us/img690/1238/serializertable.png" alt="Serialization Comparison"><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/1154198/what-are-the-differences-between-the-xmlserializer-and-binaryformatter&quot; target=&quot;_blan
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>C#的static constructor抛了异常会怎么处理？</title>
    <link href="http://fresky.github.io/2013/02/19/exception-in-csharp-static-constructor/"/>
    <id>http://fresky.github.io/2013/02/19/exception-in-csharp-static-constructor/</id>
    <published>2013-02-18T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.251Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://stackoverflow.com/questions/4737875/exception-in-static-constructor/4737910#4737910" target="_blank" rel="noopener">stackoverflow</a>上举了这个例子说明在C#中，如果static constructor只会被调用一次，即使抛了异常，也不会重试调用。如果抛了异常，那么在这个appdomain里面，这个类就不能用了。</p>  <p>示例代码：</p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title">Bang</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="title">Bang</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">"In static constructor"</span>);</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"Bang!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Foo</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">Test</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                Bang.Foo();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception e)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(e.GetType().Name);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In static constructor</span><br><span class="line">TypeInitializationException</span><br><span class="line">TypeInitializationException</span><br><span class="line">TypeInitializationException</span><br><span class="line">TypeInitializationException</span><br><span class="line">TypeInitializationException</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/4737875/exception-in-static-constructor/4737910#4737910&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;stack
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>C#的继承类中static constructor的调用问题</title>
    <link href="http://fresky.github.io/2013/02/19/static-constructor-surprise-in-csharp/"/>
    <id>http://fresky.github.io/2013/02/19/static-constructor-surprise-in-csharp/</id>
    <published>2013-02-18T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.251Z</updated>
    
    <content type="html"><![CDATA[<p>Eric Lippert写了一系列的关于static constructor的文章，<a href="http://ericlippert.com/2013/02/06/static-constructors-part-one/?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=static-constructors-part-one" target="_blank" rel="noopener">1</a>，<a href="http://ericlippert.com/2013/02/11/static-constructors-part-two/?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=static-constructors-part-two" target="_blank" rel="noopener">2</a>，<a href="http://ericlippert.com/2013/02/14/static-constructors-part-three/?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=static-constructors-part-three" target="_blank" rel="noopener">3</a>，<a href="http://ericlippert.com/2013/02/18/static-constructors-part-four/?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=static-constructors-part-four" target="_blank" rel="noopener">4</a>，可以读读对static constructor有更好的理解。</p>  <p>转一个其中的例子吧，假设有如下代码。</p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">class</span> <span class="title">B</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="title">B</span>(<span class="params"></span>)</span> &#123; Console.WriteLine(<span class="string">"B cctor"</span>); &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">B</span>(<span class="params"></span>)</span> &#123; Console.WriteLine(<span class="string">"B ctor"</span>); &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">M</span>(<span class="params"></span>)</span> &#123; Console.WriteLine(<span class="string">"B.M"</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">D</span> : <span class="title">B</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="title">D</span>(<span class="params"></span>)</span> &#123; Console.WriteLine(<span class="string">"D cctor"</span>); &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">D</span>(<span class="params"></span>)</span> &#123; Console.WriteLine(<span class="string">"D ctor"</span>); &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">N</span>(<span class="params"></span>)</span> &#123; Console.WriteLine(<span class="string">"D.N"</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title">P</span> </span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    System.Console.WriteLine(<span class="string">"Main"</span>);</span><br><span class="line">    <span class="keyword">new</span> D();</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果main函数是这样的，</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>) </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  D.M();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>哪个static constructor会被调到呢？</p><p>答案是只有B的会被调到。</p><p>如果main函数是这样的，</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>) </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  D.N();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>哪个static constructor会被调到呢？</p><p>答案是只有D的会被调到。</p><p>是不是有点意外：）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Eric Lippert写了一系列的关于static constructor的文章，&lt;a href=&quot;http://ericlippert.com/2013/02/06/static-constructors-part-one/?utm_source=rss&amp;amp;utm
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>10个没有让你成为更好的developer的原因</title>
    <link href="http://fresky.github.io/2013/02/18/10-reasons-you-fail-to-be-a-better-developer/"/>
    <id>http://fresky.github.io/2013/02/18/10-reasons-you-fail-to-be-a-better-developer/</id>
    <published>2013-02-17T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.251Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.aaronstannard.com/post/2013/02/06/10-Reasons-Why-Youe28099re-Failing-to-Realize-Your-Potential-as-a-Developer.aspx" target="_blank" rel="noopener">Aaronontheweb | 10 Reasons Why You’re Failing to Realize Your Potential as a Developer</a>列举了10个没有让你成为更好的developer的原因，写的很好。<br><ol><li>害怕学习新的工具/语言/框架会失败。</li><li>直到最后一刻才提交代码。</li><li>知其然，不知其所以然。</li><li>过度调研。</li><li>不花时间掌握开发工具和开发流程。</li><li>害怕向别人求助。</li><li>不知道如何让别人更好的使用你写的代码。</li><li>不知道怎么读别人的代码（或者不愿意）。</li><li>不能从用户的角度来写代码。</li><li>不能评估每项技术任务的商业价值。</li></ol><br><br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.aaronstannard.com/post/2013/02/06/10-Reasons-Why-Youe28099re-Failing-to-Realize-Your-Potential-as-a-Developer.aspx&quot; t
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>一个免费轻量的Mathematica替代Mathics</title>
    <link href="http://fresky.github.io/2013/02/17/mathics-lightweight-alternative-to-mathematica/"/>
    <id>http://fresky.github.io/2013/02/17/mathics-lightweight-alternative-to-mathematica/</id>
    <published>2013-02-16T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.250Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.mathics.org/index.html" target="_blank" rel="noopener">Mathics - A free, light-weight alternative to Mathematica</a>是一个免费轻量的Mathematica替代Mathics<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.mathics.org/index.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Mathics - A free, light-weight alternative to Mathematica&lt;/a&gt;是
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>为啥只有IPv4和IPv6，没有IPv5呢？</title>
    <link href="http://fresky.github.io/2013/02/17/where-is-ipv5/"/>
    <id>http://fresky.github.io/2013/02/17/where-is-ipv5/</id>
    <published>2013-02-16T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.250Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://programmers.stackexchange.com/questions/185380/ipv4-to-ipv6-where-is-ipv5?newsletter=1&amp;nlcode=55865%7cc70a" target="_blank" rel="noopener">terminology - IPv4 to IPv6. where is IPv5?</a>解释了这个问题，因为IPv5给了Internet Stream Protocol。<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://programmers.stackexchange.com/questions/185380/ipv4-to-ipv6-where-is-ipv5?newsletter=1&amp;amp;nlcode=55865%7cc70a&quot; target=&quot;_
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>用于展现图表的50个JavaScript库</title>
    <link href="http://fresky.github.io/2013/02/16/50-javascript-charting-and-graphics-libraries/"/>
    <id>http://fresky.github.io/2013/02/16/50-javascript-charting-and-graphics-libraries/</id>
    <published>2013-02-15T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.250Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://techslides.com/50-javascript-charting-and-graphics-libraries/" target="_blank" rel="noopener">50 JavaScript Libraries for Charts and Graphs | TechSlides</a>列举了50个javascript的图表库，Infoq上有个中文的介绍<a href="http://www.infoq.com/cn/news/2013/01/50-javascript-chart-lib" target="_blank" rel="noopener">用于展现图表的50种JavaScript库</a>。<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://techslides.com/50-javascript-charting-and-graphics-libraries/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;50 JavaScript Libraries for
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
  </entry>
  
  <entry>
    <title>C#中静态构造函数导致的一个deadlock</title>
    <link href="http://fresky.github.io/2013/02/05/deadlock-caused-by-csharp-static-constructor/"/>
    <id>http://fresky.github.io/2013/02/05/deadlock-caused-by-csharp-static-constructor/</id>
    <published>2013-02-04T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.249Z</updated>
    
    <content type="html"><![CDATA[<p id="site-description">Eric Lipper的这篇<a href="http://ericlippert.com/2013/01/31/the-no-lock-deadlock/" target="_blank">博客</a>举了一个C#中静态构造函数导致的deadlock的例子，很有意思。</p><br><p>代码如下：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">C</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="title">C</span>(<span class="params"></span>) </span></span><br><span class="line"><span class="function"></span>  &#123;</span><br><span class="line">    <span class="comment">// Let's run the initialization on another thread!</span></span><br><span class="line">    <span class="keyword">var</span> thread = <span class="keyword">new</span> System.Threading.Thread(Initialize);</span><br><span class="line">    thread.Start();</span><br><span class="line">    thread.Join();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Initialize</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>原因很简单，静态构造函数需要在第一次用到这个类静态方法或者实例之前调用结束，就是说C（）在等Initialize（），但是Initialize（）必须在C()结束后才能被调到。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p id=&quot;site-description&quot;&gt;Eric Lipper的这篇&lt;a href=&quot;http://ericlippert.com/2013/01/31/the-no-lock-deadlock/&quot; target=&quot;_blank&quot;&gt;博客&lt;/a&gt;举了一个C#中静态构造函数
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>一个C++的轻量级的logger实现</title>
    <link href="http://fresky.github.io/2013/02/05/a-lightweight-logger-for-cpp/"/>
    <id>http://fresky.github.io/2013/02/05/a-lightweight-logger-for-cpp/</id>
    <published>2013-02-04T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.249Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.drdobbs.com/cpp/a-lightweight-logger-for-c/240147505?pgno=1" target="_blank" rel="noopener">这里</a>介绍了一个C++的轻量级的logger实现，可以参考参考。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.drdobbs.com/cpp/a-lightweight-logger-for-c/240147505?pgno=1&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;这里&lt;/a&gt;介绍了一个C++的轻量级的logger
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>在线C++编译器</title>
    <link href="http://fresky.github.io/2013/02/05/online-cpp-compiler/"/>
    <id>http://fresky.github.io/2013/02/05/online-cpp-compiler/</id>
    <published>2013-02-04T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.250Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://isocpp.org/blog/2013/01/online-c-compilers" target="_blank">在线C++编译器</a>列举了如下网站：</p><br><ul><br><ul><br><li><a href="http://liveworkspace.org/" target="_blank" rel="noopener">LiveWorkspace</a>&nbsp;(Clang 3.2, GCC 4.6.3 - 4.7.2)</li><br><li><a href="http://gcc.godbolt.org/" target="_blank" rel="noopener">gcc.godbolt.org</a>&nbsp;(Clang 3.0, GCC 4.5.3 - 4.8.0 prerelease, Intel ICC 13.0.1)</li><br><li><a href="http://rise4fun.com/vcpp" target="_blank" rel="noopener">Rise4Fun</a>&nbsp;(Microsoft VC++ 2012 and November 2012 CTP)</li><br><li><a href="http://stacked-crooked.com/" target="_blank" rel="noopener">Stacked-Crooked</a>&nbsp;(GCC 4.7)</li><br><li><a href="http://ideone.com/" target="_blank" rel="noopener">ideone.com</a><span>&nbsp;(GCC 4.3.4 and 4.5.1)</span></li><br><li><a href="http://comeaucomputing.com/tryitout/" target="_blank" rel="noopener">Comeau Test Drive</a>&nbsp;(EDG 4.3.3)</li><br></ul><br></ul><br><p>&nbsp;</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://isocpp.org/blog/2013/01/online-c-compilers&quot; target=&quot;_blank&quot;&gt;在线C++编译器&lt;/a&gt;列举了如下网站：&lt;/p&gt;&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;&lt;a href=&quot;http
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>一行语句让你的浏览器变成记事本</title>
    <link href="http://fresky.github.io/2013/01/31/one-line-browser-notepad/"/>
    <id>http://fresky.github.io/2013/01/31/one-line-browser-notepad/</id>
    <published>2013-01-30T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.249Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://coderwall.com/p/lhsrcq" target="_blank" rel="noopener">Jose Jesus Perez Aguinaga : One line browser notepad</a><code class="xml">， 只需要在浏览器地址栏键入：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data:text/html, <span class="tag">&lt;<span class="name">html</span> <span class="attr">contenteditable</span>&gt;</span></span><br></pre></td></tr></table></figure></code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://coderwall.com/p/lhsrcq&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Jose Jesus Perez Aguinaga : One line browser notepad&lt;/a&gt;&lt;code cla
      
    
    </summary>
    
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
  </entry>
  
  <entry>
    <title>怎么让Visual Studiot在遇到一个project编译错误时停止编译其它project</title>
    <link href="http://fresky.github.io/2013/01/22/stop-compiling-other-projects-when-compiler-failed/"/>
    <id>http://fresky.github.io/2013/01/22/stop-compiling-other-projects-when-compiler-failed/</id>
    <published>2013-01-21T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.249Z</updated>
    
    <content type="html"><![CDATA[<p>Visual studio一个solution中含有多个project时，当编译整个solution，如果一个project编译出错，visual studio会继续编译其它的project，这在大多数情况下都是不需要的，只是浪费了时间。<br><a href="http://visualstudiogallery.msdn.microsoft.com/91aaa139-5d3c-43a7-b39f-369196a84fa5" target="_blank" rel="noopener">StopOnFirstBuildError extension</a>是一个Visual Studio2012 和2010的插件，可以让Visual Studiot在遇到一个project编译错误时停止编译其它project。对于2008，可以用<a href="http://www.csharpfritz.com/blog/stop-that-build-dont-waste-time-building-projects-in" target="_blank" rel="noopener">Stop that Build! Don’t waste time building projects in Visual Studio</a>的方法。<br>打开菜单：Tools-&gt;Macros-&gt;Macros IDE，双击”MyMacros”,在EnviromentEvents中加入如下代码：</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Private</span> <span class="keyword">Sub</span> BuildEvents_OnBuildProjConfigDone(<span class="keyword">ByVal</span> Project <span class="keyword">As</span> <span class="built_in">String</span>, <span class="keyword">ByVal</span> ProjectConfig <span class="keyword">As</span> <span class="built_in">String</span>, <span class="keyword">ByVal</span> Platform <span class="keyword">As</span> <span class="built_in">String</span>, <span class="keyword">ByVal</span> SolutionConfig <span class="keyword">As</span> <span class="built_in">String</span>, <span class="keyword">ByVal</span> Success <span class="keyword">As</span> <span class="built_in">Boolean</span>) <span class="keyword">Handles</span> BuildEvents.OnBuildProjConfigDone</span><br><span class="line"></span><br><span class="line">    <span class="comment">'-- When the build of a project fails</span></span><br><span class="line">    <span class="keyword">If</span> (<span class="keyword">Not</span> Success) <span class="keyword">Then</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">'-- Cancel the remaining builds in the Solution</span></span><br><span class="line">        DTE.ExecuteCommand(<span class="string">"Build.Cancel"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">'-- Write a polite message to the OutputWindow that's logging all information about this build</span></span><br><span class="line">        DTE.ToolWindows.OutputWindow.ActivePane.OutputString(vbCrLf &amp; vbCrLf &amp; <span class="string">"Build failed while compiling "</span> &amp; Project)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Visual studio一个solution中含有多个project时，当编译整个solution，如果一个project编译出错，visual studio会继续编译其它的project，这在大多数情况下都是不需要的，只是浪费了时间。&lt;br&gt;&lt;a href=&quot;http:
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>一个C++的unit库</title>
    <link href="http://fresky.github.io/2013/01/21/unit-library-for-cpp/"/>
    <id>http://fresky.github.io/2013/01/21/unit-library-for-cpp/</id>
    <published>2013-01-20T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.248Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://calumgrant.net/units/index.html" target="_blank" rel="noopener">C++ Units</a>是一个C++的库，提供了unit转换等一些功能，能够避免全用double导致的潜在问题，比如把一个length加到了一个area上。<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://calumgrant.net/units/index.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;C++ Units&lt;/a&gt;是一个C++的库，提供了unit转换等一些功能，能够避免全用double导致的潜在问题，
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>C#中如何用Windows Management Instrumentation (WMI)得到系统信息</title>
    <link href="http://fresky.github.io/2013/01/21/get-system-info-with-windows-management-instrumentation-in-csharp/"/>
    <id>http://fresky.github.io/2013/01/21/get-system-info-with-windows-management-instrumentation-in-csharp/</id>
    <published>2013-01-20T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.248Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.codeguru.com/csharp/.net/working-with-windows-management-instrumentation.htm" target="_blank" rel="noopener">Working with Windows Management Instrumentation</a>演示了怎么通过<span class="body">Windows Management Instrumentation (WMI)拿到系统信息，包括CPU ID，MAC ID，硬盘信息等。<br></span></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.codeguru.com/csharp/.net/working-with-windows-management-instrumentation.htm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Working 
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>web开发者的checklist</title>
    <link href="http://fresky.github.io/2013/01/21/web-developer-checklist/"/>
    <id>http://fresky.github.io/2013/01/21/web-developer-checklist/</id>
    <published>2013-01-20T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.248Z</updated>
    
    <content type="html"><![CDATA[<p>转一个<a href="http://webdevchecklist.com/" target="_blank" rel="noopener">Web Developer Checklist</a><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;转一个&lt;a href=&quot;http://webdevchecklist.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Web Developer Checklist&lt;/a&gt;&lt;br&gt;&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>VS2012插件：可视化TFS代码版本历史</title>
    <link href="http://fresky.github.io/2013/01/11/vs-addin-tfs-source-control-history-visualization/"/>
    <id>http://fresky.github.io/2013/01/11/vs-addin-tfs-source-control-history-visualization/</id>
    <published>2013-01-10T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.248Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://visualstudiogallery.msdn.microsoft.com/6a8e7330-8395-4915-935f-941dc3bde29c" target="_blank" rel="noopener">TFS Source Control History Visualization extension</a>非常cool，能把TFS的代码版本历史变成一个动画，可以很直观的看到代码是怎么演变的。<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://visualstudiogallery.msdn.microsoft.com/6a8e7330-8395-4915-935f-941dc3bde29c&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;TFS Source Co
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>用了story point就一定agile了吗？</title>
    <link href="http://fresky.github.io/2013/01/09/stop-using-story-point/"/>
    <id>http://fresky.github.io/2013/01/09/stop-using-story-point/</id>
    <published>2013-01-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.247Z</updated>
    
    <content type="html"><![CDATA[<p>用了story point就一定agile了吗？听听Industrial logic的人怎么说？<br><a href="http://www.industriallogic.com/blog/stop-using-story-points/" target="_blank" rel="noopener">Stop Using Story Points | Industrial Logic</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;用了story point就一定agile了吗？听听Industrial logic的人怎么说？&lt;br&gt;&lt;a href=&quot;http://www.industriallogic.com/blog/stop-using-story-points/&quot; target=&quot;_blank
      
    
    </summary>
    
    
      <category term="Agile" scheme="http://fresky.github.io/tags/Agile/"/>
    
  </entry>
  
  <entry>
    <title>Sysinternals自动更新的工具SyncTools</title>
    <link href="http://fresky.github.io/2013/01/08/synctools-keep-sysinternals-up-to-date/"/>
    <id>http://fresky.github.io/2013/01/08/synctools-keep-sysinternals-up-to-date/</id>
    <published>2013-01-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.247Z</updated>
    
    <content type="html"><![CDATA[<p>Sysinternals是一堆很好用的小工具，SyncTools是另外一个小工具可以帮助你保持他们都是最新版本的。<br><a href="http://kennykerr.ca/2013/01/04/synctools-for-sysinternals/" target="_blank" rel="noopener">SyncTools for Sysinternals « Kenny Kerr</a><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Sysinternals是一堆很好用的小工具，SyncTools是另外一个小工具可以帮助你保持他们都是最新版本的。&lt;br&gt;&lt;a href=&quot;http://kennykerr.ca/2013/01/04/synctools-for-sysinternals/&quot; target=
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>怎么做一个开源项目</title>
    <link href="http://fresky.github.io/2013/01/05/how-to-start-open-source-project/"/>
    <id>http://fresky.github.io/2013/01/05/how-to-start-open-source-project/</id>
    <published>2013-01-04T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.247Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://coding.smashingmagazine.com/2013/01/03/starting-open-source-project/" target="_blank" rel="noopener">Starting An Open-Source Project | Smashing Coding</a>介绍了作者在开源CSS Lint中的一些体会，很有借鉴意义。<br>包括如下内容：<br><ol><li>选择哪个license</li><li>怎么组织代码</li><li>写文档，包括用户手册，开发指南</li><li>使用邮件列表来和使用者开发者沟通</li><li>使用版本号，这样便于跟踪bug。在代码中加tag，写版本更新记录。</li><li>其它开发者如何贡献代码</li></ol></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://coding.smashingmagazine.com/2013/01/03/starting-open-source-project/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Starting An Open-Sou
      
    
    </summary>
    
    
      <category term="Opensource" scheme="http://fresky.github.io/tags/Opensource/"/>
    
  </entry>
  
  <entry>
    <title>一篇关于如何组织unit tests的文章，很有趣</title>
    <link href="http://fresky.github.io/2013/01/04/how-to-organize-unit-test/"/>
    <id>http://fresky.github.io/2013/01/04/how-to-organize-unit-test/</id>
    <published>2013-01-03T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.246Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx/" target="_blank" rel="noopener">Structuring Unit Tests</a><br>每个被测试类对应一个单元测试类，每个被测方法都对应一个嵌入类。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Structuring Unit Tests&lt;/a&gt;&lt;br
      
    
    </summary>
    
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
  </entry>
  
  <entry>
    <title>怎么回答哪个更快的问题</title>
    <link href="http://fresky.github.io/2012/12/28/how-to-answer-which-is-faster/"/>
    <id>http://fresky.github.io/2012/12/28/how-to-answer-which-is-faster/</id>
    <published>2012-12-27T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.246Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://ericlippert.com/2012/12/17/performance-rant/" target="_blank" rel="noopener">Which is faster? | Fabulous Adventures In Coding</a><br>1. 为什么问？你该自己测试一下<br>2. 真的需要知道吗？等你遇到performance问题时再考虑<br>3. 这真的是瓶颈吗？<br>4. 哪个快哪个慢重要吗？<br>5. 更快是什么意思？启动速度还是运行速度？最坏情况下还是正常情况下？<br>6. 你看到big picture了吗？除了速度还有很多别的东西，比如内存。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://ericlippert.com/2012/12/17/performance-rant/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Which is faster? | Fabulous Adventures In Co
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>什么情况下要替换C++自带的new和delete</title>
    <link href="http://fresky.github.io/2012/12/28/when-to-replace-default-new-and-delete-in-cpp/"/>
    <id>http://fresky.github.io/2012/12/28/when-to-replace-default-new-and-delete-in-cpp/</id>
    <published>2012-12-27T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.246Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://stackoverflow.com/questions/7149461/why-would-one-replace-default-new-and-delete-operators" target="_blank" rel="noopener">c++ - Why would one replace default new and delete operators? - Stack Overflow</a><br><br><ol><li>用来检测用户错误，比如（1）new的时候可以记录所有new出来的地址，然后用户忘记delete时帮用户delete（2）new出地址时前后放一些记号，防止overrun和underrun</li><li>用来提高效率</li><li>用来收集统计数据，比如（1）地址分布，生存期分布，分配顺序，内存使用在时间上的变化（2）统计一个类生成了多少个对象，或者限制</li><li>补偿内存对齐</li><li>把相关的对象地址放在一起</li><li>实现非常规的行为，比如delete后设为0</li></ol><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/7149461/why-would-one-replace-default-new-and-delete-operators&quot; target=&quot;_blank&quot; rel=&quot;noopener
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>Windows下C++的同步机制的演变</title>
    <link href="http://fresky.github.io/2012/12/28/evolution-of-synchronization-in-windows-and-cpp/"/>
    <id>http://fresky.github.io/2012/12/28/evolution-of-synchronization-in-windows-and-cpp/</id>
    <published>2012-12-27T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.246Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://msdn.microsoft.com/en-us/magazine/jj721588.aspx" target="_blank" rel="noopener">Windows with C++ - The Evolution of Synchronization in Windows and C++</a>介绍了如下概念：<br>critical section<br>mutex<br>event<br>slim reader/writer lock<br>condition variable<br>C++11的mutex和condition_variable<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/magazine/jj721588.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Windows with C++ - The Evolution of Synch
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>C#的内存模型和并发情况下受到的影响</title>
    <link href="http://fresky.github.io/2012/12/26/csharp-memory-model/"/>
    <id>http://fresky.github.io/2012/12/26/csharp-memory-model/</id>
    <published>2012-12-25T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.245Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://msdn.microsoft.com/en-us/magazine/jj863136.aspx" target="_blank" rel="noopener">C# - The C# Memory Model in Theory and Practice</a>讲了C#的内存模型和在并发下的影响。<br>内存操作重排：当一个线程读一段内存，如果这段内存同时被另外一个线程写，那么读的线程有可能拿到一个不新鲜的值。<br>用volatile关键字可以限制内存重拍。<br>原子读写操作：reference，bool，char，byte，sbyte，short，ushort，unit，int，float。<br>非重排优化，例如读一个field，然后存在一个variable中，后面被多次读到，有可能被优化成没有variable，直接多次从field中读取。<br><br>线程交换的模式：<br>锁<br>通过Threading API<br>通过type初始化（static field）<br>通过volatile的filed<br>lazy initialize<br>Interlocked <br>使用Concurrency Primitives<br><br><br><br><br><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/magazine/jj863136.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;C# - The C# Memory Model in Theory and Pr
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>玩大数据需要知道的12个工具</title>
    <link href="http://fresky.github.io/2012/12/25/12-tools-about-big-data/"/>
    <id>http://fresky.github.io/2012/12/25/12-tools-about-big-data/</id>
    <published>2012-12-24T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.245Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://gigaom.com/data/a-programmers-guide-to-big-data-12-tools-to-know/" target="_blank" rel="noopener">A programmer’s guide to big data: 12 tools to know — Data | GigaOM</a><br>包括：<br>1. BitDeli<br>2. Continuuity<br>3. Flurry<br>4. Google Prediction API<br>5. Infochimps<br>6. Keen IO<br>7. Kontagent<br>8. Mortar Data<br>9. Placed Analytics<br>10. Precog<br>11. Spring for Apache Hadoop<br>12. StatsMix<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://gigaom.com/data/a-programmers-guide-to-big-data-12-tools-to-know/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;A programmer’s guide to
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>CoffeeScript, Ruby 和 C++的复杂度比较</title>
    <link href="http://fresky.github.io/2012/12/25/cpp-ruby-coffeescript-language-complexity/"/>
    <id>http://fresky.github.io/2012/12/25/cpp-ruby-coffeescript-language-complexity/</id>
    <published>2012-12-24T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.245Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://cpprocks.com/cpp-ruby-coffeescript-language-complexity/#!prettyPhoto" target="_blank" rel="noopener">C++, Ruby, CoffeeScript: a visual comparison of language complexity</a>用concept的种类和个数来比较了一下三种语言的复杂度。<br><img style="max-width: 800px;" src="http://www.cpprocks.com/wp-content/uploads/coffeescript-ruby-cpp-comparison.png"><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://cpprocks.com/cpp-ruby-coffeescript-language-complexity/#!prettyPhoto&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;C++, Ruby, CoffeeScr
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
      <category term="Ruby" scheme="http://fresky.github.io/tags/Ruby/"/>
    
  </entry>
  
  <entry>
    <title>用python替代javascript？</title>
    <link href="http://fresky.github.io/2012/12/25/python-replace-javascript/"/>
    <id>http://fresky.github.io/2012/12/25/python-replace-javascript/</id>
    <published>2012-12-24T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.245Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.brython.info/index_en.html" target="_blank" rel="noopener">Brython</a>被设计来取代javascript，作为web使用的脚本语言，有兴趣的可以看一眼。<blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.brython.info/index_en.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Brython&lt;/a&gt;被设计来取代javascript，作为web使用的脚本语言，有兴趣的可以看一眼。&lt;blockq
      
    
    </summary>
    
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
      <category term="Python" scheme="http://fresky.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>C#用extern alias解决两个assembly中相同的类型全名</title>
    <link href="http://fresky.github.io/2012/12/24/extern-alias-to-solve-same-type-name-in-2-assemblies-in-csharp/"/>
    <id>http://fresky.github.io/2012/12/24/extern-alias-to-solve-same-type-name-in-2-assemblies-in-csharp/</id>
    <published>2012-12-23T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.244Z</updated>
    
    <content type="html"><![CDATA[<p>如果你使用到的第三方库中有2个assembly中出现了完全一样的类型，C#中可以用<a href="http://http://msdn.microsoft.com/en-us/library/ms173212(v=vs.110).aspx" target="_blank" rel="noopener">extern alias</a>来解决。</p>  <p>比如grid.dll和grid20.dll中都有一个类 Grid.SmallGrid，在我们的代码中必须通过命令行编译程序，</p>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">csc /r:GridV1=grid.dll /r:GridV2=grid20.dll mygrid.cs</span><br></pre></td></tr></table></figure><p>在mygrid.cs中就能用extern alias了。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">alias</span> GridV1;</span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">alias</span> GridV2;</span><br><span class="line">GridV1::Grid.SmallGrid …</span><br><span class="line">GridV2::Grid.SmallGrid …</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;如果你使用到的第三方库中有2个assembly中出现了完全一样的类型，C#中可以用&lt;a href=&quot;http://http://msdn.microsoft.com/en-us/library/ms173212(v=vs.110).aspx&quot; target=&quot;_blank&quot;
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>怎么看C++对象的内存结构 和 怎么解密C++的name mangling</title>
    <link href="http://fresky.github.io/2012/12/23/how-to-dump-cpp-objects-memory-layout-and-crack-name-mangling/"/>
    <id>http://fresky.github.io/2012/12/23/how-to-dump-cpp-objects-memory-layout-and-crack-name-mangling/</id>
    <published>2012-12-22T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.243Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://eli.thegreenplace.net/2012/12/17/dumping-a-c-objects-memory-layout-with-clang/" target="_blank" rel="noopener">Dumping a C++ object’s memory layout with Clang</a>这篇文章讲述了怎么用Clang来看C++对象的结构，回复中Marek提到了怎么在Visual Studio中看。具体方法如下：</p>  <p>C++项目右键属性，C/C++下的Command Line，加上这个选项</p><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/d1reportAllClassLayout</span><br></pre></td></tr></table></figure><br><br><p>这样在编译时就会在output窗口看到所有的对象的内存结构了。</p><p>由于C++编译器会做Name Mangling，我们可以用<strong>undname</strong>这个工具来看到没有被mangling样子。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;undname</span><br><span class="line">Microsoft (R) C++ Name Undecorator</span><br><span class="line">Copyright (C) Microsoft Corporation. All rights reserved.</span><br><span class="line"></span><br><span class="line">Usage: undname [flags] fname [fname...]</span><br><span class="line">   or: undname [flags] file</span><br></pre></td></tr></table></figure><p>&#160;</p><p>下面是个例子，假设我们有如下的A和B两个类。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> a;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="keyword">virtual</span> <span class="title">foo</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span><span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> b;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>它们通过<strong>/d1reportAllClassLayout</strong>的结果如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">1&gt;  class A    size(8):</span><br><span class="line">1&gt;      +---</span><br><span class="line">1&gt;   0    | &#123;vfptr&#125;</span><br><span class="line">1&gt;   4    | a</span><br><span class="line">1&gt;      +---</span><br><span class="line">1&gt;  </span><br><span class="line">1&gt;  A::$vftable@:</span><br><span class="line">1&gt;      | &amp;A_meta</span><br><span class="line">1&gt;      |  0</span><br><span class="line">1&gt;   0    | &amp;A::foo</span><br><span class="line">1&gt;  </span><br><span class="line">1&gt;  A::foo this adjustor: 0</span><br><span class="line">1&gt;  </span><br><span class="line">1&gt;  </span><br><span class="line">1&gt;  class B    size(12):</span><br><span class="line">1&gt;      +---</span><br><span class="line">1&gt;      | +--- (base class A)</span><br><span class="line">1&gt;   0    | | &#123;vfptr&#125;</span><br><span class="line">1&gt;   4    | | a</span><br><span class="line">1&gt;      | +---</span><br><span class="line">1&gt;   8    | b</span><br><span class="line">1&gt;      +---</span><br><span class="line">1&gt;  </span><br><span class="line">1&gt;  B::$vftable@:</span><br><span class="line">1&gt;      | &amp;B_meta</span><br><span class="line">1&gt;      |  0</span><br><span class="line">1&gt;   0    | &amp;B::foo</span><br><span class="line">1&gt;  </span><br><span class="line">1&gt;  B::foo this adjustor: 0</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://eli.thegreenplace.net/2012/12/17/dumping-a-c-objects-memory-layout-with-clang/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Dumping a 
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>C#中如何正确的实现IDisposable接口</title>
    <link href="http://fresky.github.io/2012/12/23/how-to-implement-idisposable-interface-correctly-in-csharp/"/>
    <id>http://fresky.github.io/2012/12/23/how-to-implement-idisposable-interface-correctly-in-csharp/</id>
    <published>2012-12-22T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.244Z</updated>
    
    <content type="html"><![CDATA[<p>Stackoverflow上的这个<a href="http://stackoverflow.com/a/538238/304115" target="_blank" rel="noopener">回答</a>是我见过的讲的最清楚的怎么正确实现<span style="color: #000000;">IDisposable</span>接口，我简单挑重点翻译翻译吧。：）</p><br><h3>&nbsp;</h3><br><p>Disposed的出现就是要解决一个问题，那就是释放非托管的资源。.NET的垃圾回收不知道怎么去释放非托管的资源。</p><br><p>所以，如果你的对象中有非托管的资源，你就需要提供一个函数给外面的人来释放它。我们有一个标准的名字：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Dispose</span>(<span class="params"></span>)</span></span><br></pre></td></tr></table></figure><p>在C#中有个接口，只包含了这个函数，所以如果你的类需要释放非托管资源，就需要实现这个接口，实现了这个借口，意味着你承诺在Dispose方法中释放非托管资源。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface IDisposable</span><br><span class="line">&#123;</span><br><span class="line">    void Dispose();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下面是个释放非托管资源的例子。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public void Dispose()</span><br><span class="line">&#123;</span><br><span class="line">   Win32.DestroyHandle(this.gdiCursorBitmapStreamFileHandle);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这其实就搞定了：）但是你可以做的更好。</p><br><h3>&nbsp;</h3><br><p>如果你的对象中有托管的资源，而且很大，比如有个250m的bitmap。当然C#的垃圾回收会把它释放掉，但是更好的是我们能在不需要的时候就把它释放掉而不必等到垃圾回收。怎么做呢？我们已经有了一个方法来释放非托管的资源，好办，我们把在Dispose中把托管的资源也释放掉就好了，这样我们的Dispose干两件事情：</p><br><ol><br><li>释放非托管资源，因为必须</li><br><li>释放托管资源，因为这样好：）</li><br></ol><br><p>新的Dispose函数长这个样子：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public void Dispose()</span><br><span class="line">&#123;</span><br><span class="line">   //Free unmanaged resources</span><br><span class="line">   Win32.DestroyHandle(this.gdiCursorBitmapStreamFileHandle);</span><br><span class="line"></span><br><span class="line">   //Free managed resources too</span><br><span class="line">   if (this.databaseConnection != null)</span><br><span class="line">   &#123;</span><br><span class="line">      this.databaseConnection.Dispose();</span><br><span class="line">      this.databaseConnection = null;</span><br><span class="line">   &#125;</span><br><span class="line">   if (this.frameBufferImage != null)</span><br><span class="line">   &#123;</span><br><span class="line">      this.frameBufferImage.Dispose();</span><br><span class="line">      this.frameBufferImage = null;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>看起来搞定了，但是，我们可以做的更好！</p><br><h3>&nbsp;</h3><br><p>如果我们的使用者没有调用Dispose怎么办呢？我们就会有资源泄露了！（当然只有非托管的资源泄露，因为托管的C#的垃圾回收会帮我们搞定它）</p><br><p>嗯，我们把这个Dispose放到Finalize里面，这样我的对象被销毁的时候，它就能自动调到，不错，代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~MyObject()</span><br><span class="line">&#123;</span><br><span class="line">    //we&apos;re being finalized (i.e. destroyed), call Dispose in case the user forgot to</span><br><span class="line">    Dispose(); //&lt;--Warning: subtle bug! Keep reading!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是，我们可能会引入一个bug。因为C#地垃圾回收是在后台运行，我们不知道它会先回收哪个对象，所以我们的对象中包含的托管资源可能已经被回收掉了，就会发生：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public void Dispose()</span><br><span class="line">&#123;</span><br><span class="line">   //Free unmanaged resources</span><br><span class="line">   Win32.DestroyHandle(this.gdiCursorBitmapStreamFileHandle);</span><br><span class="line"></span><br><span class="line">   //Free managed resources too</span><br><span class="line">   if (this.databaseConnection != null)</span><br><span class="line">   &#123;</span><br><span class="line">      this.databaseConnection.Dispose(); &lt;-- crash, GC already destroyed it</span><br><span class="line">      this.databaseConnection = null;</span><br><span class="line">   &#125;</span><br><span class="line">   if (this.frameBufferImage != null)</span><br><span class="line">   &#123;</span><br><span class="line">      this.frameBufferImage.Dispose(); &lt;-- crash, GC already destroyed it</span><br><span class="line">      this.frameBufferImage = null;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>所以我们需要一种办法让在Finalize中调到的Dispose函数不去释放托管的资源，留给垃圾回收来做，我们习惯用这样的函数来实现：</p><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protected void Dispose(Boolean disposing)</span><br></pre></td></tr></table></figure><br><br><p>这个参数名字disposing有点不太好，我们改个名字吧：） </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">protected void Dispose(Boolean freeManagedObjectsAlso)</span><br><span class="line">&#123;</span><br><span class="line">   //Free unmanaged resources</span><br><span class="line">   Win32.DestroyHandle(this.gdiCursorBitmapStreamFileHandle);</span><br><span class="line"></span><br><span class="line">   //Free managed resources too, but only if i&apos;m being called from Dispose</span><br><span class="line">   //(If i&apos;m being called from Finalize then the objects might not exist</span><br><span class="line">   //anymore</span><br><span class="line">   if (freeManagedObjectsAlso)  </span><br><span class="line">   &#123;    </span><br><span class="line">      if (this.databaseConnection != null)</span><br><span class="line">      &#123;</span><br><span class="line">         this.databaseConnection.Dispose();</span><br><span class="line">         this.databaseConnection = null;</span><br><span class="line">      &#125;</span><br><span class="line">      if (this.frameBufferImage != null)</span><br><span class="line">      &#123;</span><br><span class="line">         this.frameBufferImage.Dispose();</span><br><span class="line">         this.frameBufferImage = null;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>所以我们先前写的Dispose函数变成了这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public void Dispose()</span><br><span class="line">&#123;</span><br><span class="line">   Dispose(true); //i am calling you from Dispose, it&apos;s safe</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public ~MyObject()</span><br><span class="line">&#123;</span><br><span class="line">   Dispose(false); //i am *not* calling you from Dispose, it&apos;s *not* safe</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>提醒一下，如果我们的类的父类也是IDisposable的，我们需要调用父类的Dispose函数。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public Dispose()</span><br><span class="line">&#123;</span><br><span class="line">   try</span><br><span class="line">   &#123;</span><br><span class="line">      Dispose(true); //true: safe to free managed resources</span><br><span class="line">   &#125;</span><br><span class="line">   finally</span><br><span class="line">   &#123;</span><br><span class="line">      base.Dispose();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>看起来搞定了，但是我们可以做的更好！</p><br><h3>&nbsp;</h3><br><p>如果我们的客户代码调用了Dispose，那意味着托管和非托管的资源都被释放掉了，但是随后C#的垃圾回收还会再次调用Dispose。不仅仅是浪费，而且如果万一我们没有在Dispose非托管资源时把它设成null，就是说它还指着东西，那就会被再释放一次，这可不是好玩的。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">protected void Dispose(Boolean iAmBeingCalledFromDisposeAndNotFinalize)</span><br><span class="line">&#123;</span><br><span class="line">   //Free unmanaged resources</span><br><span class="line">   Win32.DestroyHandle(this.gdiCursorBitmapStreamFileHandle); &lt;--double destroy </span><br><span class="line">   //...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改这个问题的方法就是，如果已经调用过Dispose了，就不要再调Finalize了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public void Dispose()</span><br><span class="line">&#123;</span><br><span class="line">   Dispose(true); //i am calling you from Dispose, it&apos;s safe</span><br><span class="line">   GC.SuppressFinalize(this); //Hey, GC: don&apos;t bother calling finalize later</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>好了，万事大吉：）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Stackoverflow上的这个&lt;a href=&quot;http://stackoverflow.com/a/538238/304115&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;回答&lt;/a&gt;是我见过的讲的最清楚的怎么正确实现&lt;span style=&quot;co
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>.NET中使用Unity和StructureMap来实现依赖注入Dependency Injection</title>
    <link href="http://fresky.github.io/2012/12/22/dependency-injection-in-net-by-unity-and-strcturemap/"/>
    <id>http://fresky.github.io/2012/12/22/dependency-injection-in-net-by-unity-and-strcturemap/</id>
    <published>2012-12-21T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.243Z</updated>
    
    <content type="html"><![CDATA[<p>本文用一个非常简单的示例来演示一下如何使用<a href="http://unity.codeplex.com/" target="_blank" rel="noopener">Unity</a>和<a href="http://docs.structuremap.net/index.html" target="_blank" rel="noopener">StructureMap</a>在C#中实现Dependency Injection。</p>  <p>我们来做一个非常简单的程序，这个程序会把用户输入的字符串做个逆序，然后输出，同时要求记录一下每次用户的输入和结果，我们支持两种Logger，一种是命令行的，一种是对话框的，用户可以选择使用哪种Logger。</p>  <p>界面如下：</p>  <img src="/images/DIExample.png"><p>这个程序使用MVP来实现的，我们有4个接口如下，分别对应V，P，M和Logger：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IView</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">DisplayResult</span>(<span class="params"><span class="keyword">string</span> result</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IPresenter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">HandleReverse</span>(<span class="params"><span class="keyword">string</span> text, IView view</span>)</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">SetLogger</span>(<span class="params">ILogger logger</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">internal</span> <span class="keyword">interface</span> <span class="title">IModel</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">string</span> <span class="title">Reverse</span>(<span class="params"><span class="keyword">string</span> text</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">ILogger</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">LogMessage</span>(<span class="params"><span class="keyword">string</span> message</span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3>1. 手工实现依赖注入和singleton。</h3><p>在App.xaml.cs中我们通过下面的方法来打开UI。可以看到我们用了一堆的new关联起来，创建了一个view。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">protected override void OnStartup(StartupEventArgs e)</span><br><span class="line">&#123;</span><br><span class="line">createViewByHand().Show();</span><br><span class="line">&#125;</span><br><span class="line">private static Window createViewByHand()</span><br><span class="line">&#123;</span><br><span class="line">return new MainWindow(new Presenter(LoggerFactory.CreateLogger(), ModelFactory.CreateModel()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里ModelFactory和LoggerFactory是为了保证我们的应用中只有一个Model和Logger的实例。（其实主要是logger，因为model在我们的应用里就一个，但是用户可以选择不同的logger，我们不希望每回用户选择之后都生成一个新的logger）</p><p>用户选择下拉框的代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">private void loggerTypeChanged(object sender, SelectionChangedEventArgs e)</span><br><span class="line">&#123;</span><br><span class="line">m_Controller.SetLogger(getLoggerByHand());</span><br><span class="line">&#125;</span><br><span class="line">private ILogger getLoggerByHand()</span><br><span class="line">&#123;</span><br><span class="line">return LoggerFactory.CreateLogger(loggerType.SelectedItem.ToString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3>2. 使用StructureMap实现依赖注入和singleton。</h3><p>代码如下，我们创建一个Container，配置对应于每个接口，我们使用哪个实例。注意我们在ILogger和IModel中使用了Singleton方法，同时我们配置了2个ILogger的实例，分别设置了一个名字，在用户改变下拉框时，我们从Container中取出相应的实例。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">private static Window createViewByStructureMap()</span><br><span class="line">&#123;</span><br><span class="line">StructureMapContainer = new StructureMap.Container(x =&gt;</span><br><span class="line">&#123;</span><br><span class="line">x.For&lt;IPresenter&gt;().Use&lt;Presenter&gt;();</span><br><span class="line">x.For&lt;IView&gt;().Use&lt;MainWindow&gt;();</span><br><span class="line">x.For&lt;IModel&gt;().Singleton().Use&lt;ReverseModel&gt;();</span><br><span class="line">x.AddType(typeof(ILogger), typeof(MessageBoxLogger), LoggerFactory.MessageboxLoggerName);</span><br><span class="line">x.AddType(typeof(ILogger), typeof(ConsoleLogger), LoggerFactory.ConsoleLoggerName);</span><br><span class="line">x.For&lt;ILogger&gt;().Singleton().UseSpecial(y =&gt; y.TheInstanceNamed(LoggerFactory.ConsoleLoggerName));</span><br><span class="line">&#125;);</span><br><span class="line">StructureMapContainer.AssertConfigurationIsValid();</span><br><span class="line"></span><br><span class="line">return StructureMapContainer.GetInstance&lt;MainWindow&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private ILogger getLoggerByStructureMap()</span><br><span class="line">&#123;</span><br><span class="line">return App.StructureMapContainer.GetInstance&lt;ILogger&gt;(loggerType.SelectedItem.ToString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3>3. 使用Unity实现依赖注入和singleton。</h3><p>代码非常类似，只是用ContainerControlledLifetimeManager来实现singleton。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">private Window createViewByUnity()</span><br><span class="line">&#123;</span><br><span class="line">UnityContainer = new UnityContainer();</span><br><span class="line">UnityContainer.RegisterType&lt;IPresenter, Presenter&gt;();</span><br><span class="line">UnityContainer.RegisterType&lt;IView, MainWindow&gt;();</span><br><span class="line">UnityContainer.RegisterType&lt;IModel, ReverseModel&gt;(new ContainerControlledLifetimeManager());</span><br><span class="line">UnityContainer.RegisterType&lt;ILogger, ConsoleLogger&gt;(LoggerFactory.ConsoleLoggerName,</span><br><span class="line">new ContainerControlledLifetimeManager());</span><br><span class="line">UnityContainer.RegisterType&lt;ILogger, MessageBoxLogger&gt;(LoggerFactory.MessageboxLoggerName,</span><br><span class="line">   new ContainerControlledLifetimeManager());</span><br><span class="line">return UnityContainer.RegisterInstance(typeof(ILogger), UnityContainer.Resolve&lt;ILogger&gt;(LoggerFactory.ConsoleLoggerName)).Resolve&lt;MainWindow&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private ILogger getLoggerByUnity()</span><br><span class="line">&#123;</span><br><span class="line">return App.UnityContainer.Resolve&lt;ILogger&gt;(loggerType.SelectedItem.ToString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>另外StructureMap和Unity都支持Attribute来制定应该往哪个属性上Inject。StructureMap是[SetterProperty]，Unity是 [Dependency]。</p><p>具体的实现就不详细列出来，可以在<a href="https://github.com/fresky/DIExample" target="_blank" rel="noopener">github</a>上找到源码。<br><br><br><br><br><br><br><br><br><br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;本文用一个非常简单的示例来演示一下如何使用&lt;a href=&quot;http://unity.codeplex.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Unity&lt;/a&gt;和&lt;a href=&quot;http://docs.structuremap.net/
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>C#中把null作为参数传过去会调用哪个overload？</title>
    <link href="http://fresky.github.io/2012/12/21/which-overload-function-will-be-called-when-pass-null-in-csharp/"/>
    <id>http://fresky.github.io/2012/12/21/which-overload-function-will-be-called-when-pass-null-in-csharp/</id>
    <published>2012-12-20T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.243Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://stackoverflow.com/questions/13877501/why-do-i-get-an-exception-when-passing-null-constant-but-not-when-passing-a-n?newsletter=1&amp;nlcode=55866%7cc739" target="_blank" rel="noopener">Stack Overflow</a>上有个有趣的问题，如果向下面这么写，没问题。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Console.WriteLine( String.Format( <span class="string">"&#123;0&#125;"</span>, (<span class="keyword">object</span>)<span class="literal">null</span>) );</span><br></pre></td></tr></table></figure><p><br><code></code></p><br><p><code>但是如果这么写,会出一个<code>ArgumentNullException。</code></code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Console.WriteLine( String.Format( &quot;&#123;0&#125;&quot;, null) );</span><br></pre></td></tr></table></figure><p><br>原因在于C#编译器会把null转换成最容易转到的类型，因为Fromat函数有下面几个重载：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Format(String, Object)</span><br><span class="line">Format(String, Object[])</span><br><span class="line">Format(IFormatProvider, String, Object[])</span><br><span class="line">Format(String, Object, Object)</span><br><span class="line">Format(String, Object, Object, Object)</span><br></pre></td></tr></table></figure><p>而object[]可以转化成object，但是object不能转换成object[]，所以编译器会调用<a href="http://msdn.microsoft.com/en-us/library/b1csw23d.aspx" target="_blank" rel="noopener">object[]</a>。</p><br><p>但是从MSDN离我们可以看出如果调用<a href="http://msdn.microsoft.com/en-us/library/b1csw23d.aspx" target="_blank" rel="noopener">object[]</a>则需要保证format和ojbect[]都不是null，但是如果调用<a href="http://msdn.microsoft.com/en-us/library/fht0f5be.aspx" target="_blank" rel="noopener">object</a>版本的，只要format不是null就行了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/13877501/why-do-i-get-an-exception-when-passing-null-constant-but-not-when-passing-a-n?newsle
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>Fuslogvw——解决.NET framework找不到Assembly问题的好帮手</title>
    <link href="http://fresky.github.io/2012/12/20/fuslogvw-help-to-solve-dot-net-framework-can-not-find-assembly/"/>
    <id>http://fresky.github.io/2012/12/20/fuslogvw-help-to-solve-dot-net-framework-can-not-find-assembly/</id>
    <published>2012-12-19T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.242Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.110).aspx" target="_blank" rel="noopener">Fuslogvw.exe (Assembly Binding Log Viewer)</a>显示assembly绑定的具体信息，可以帮助调试.NET framework找不到assembly的问题。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.110).aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Fuslogvw.exe (Assembly Binding L
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>Visual Studio 2012 Ultimate的可视化代码功能</title>
    <link href="http://fresky.github.io/2012/12/19/vs2012-visualizing-and-understanding-code/"/>
    <id>http://fresky.github.io/2012/12/19/vs2012-visualizing-and-understanding-code/</id>
    <published>2012-12-18T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.242Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://msdn.microsoft.com/en-US/library/dd409365.aspx" target="_blank" rel="noopener">Visualizing and Understanding Code</a>综合了如何使用visual studio可视化代码来帮助理解代码，包括下面：<br><ol><li>理解代码和代码之间的关系：（1）Code Map（2）Dependency Graphs</li><li>理解代码交互：Sequence Diagrams</li><li>理解类结构：（1）UML Diagram（2）Class Diagram</li><li>描述系统设计和验证按照设计进行的编码：Layer Diagram</li><li>用户需求和系统架构之间的沟通：（1）需求建模（2）架构建模</li></ol><br><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-US/library/dd409365.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Visualizing and Understanding Code&lt;/a&gt;综合了如
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>使用MPGO和NGEN来优化C#桌面程序的启动性能</title>
    <link href="http://fresky.github.io/2012/12/18/using-mpgo-and-ngen-to-optimize-csharp-app-starting-performance/"/>
    <id>http://fresky.github.io/2012/12/18/using-mpgo-and-ngen-to-optimize-csharp-app-starting-performance/</id>
    <published>2012-12-17T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.242Z</updated>
    
    <content type="html"><![CDATA[<p>C#桌面程序可以通过NGen创建本机映像（包含经编译的特定于处理器的机器代码的文件），并将它们安装到本地计算机，这样在运行时可从缓存中使用本机映像，而不必使用实时 (JIT) 编译器编译原来的IL代码。具体参见<a href="http://msdn.microsoft.com/en-us/magazine/cc163610.aspx" target="_blank" rel="noopener">CLR Inside Out: The Performance Benefits of NGen.</a></p>  <p>在Visual Studio2012中，有一个新的工具可以进一步优化启动性能，叫做<a href="http://msdn.microsoft.com/en-us/library/hh873180.aspx" target="_blank" rel="noopener">Mpgo.exe (Managed Profile Guided Optimization Tool)</a>。它的工作原理就是先用MPGO跑一遍应用程序，然后把收集到的性能数据放到IL中，这样NGEN再生成本机映像时可以利用这些信息做进一步的优化。具体参见：<a href="http://blogs.msdn.com/b/dotnet/archive/2012/03/20/improving-launch-performance-for-your-desktop-applications.aspx" target="_blank" rel="noopener">Improving Launch Performance for Your Desktop Applications</a>。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;C#桌面程序可以通过NGen创建本机映像（包含经编译的特定于处理器的机器代码的文件），并将它们安装到本地计算机，这样在运行时可从缓存中使用本机映像，而不必使用实时 (JIT) 编译器编译原来的IL代码。具体参见&lt;a href=&quot;http://msdn.microsoft.c
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>怎么写Move构造函数（zz）</title>
    <link href="http://fresky.github.io/2012/12/17/how-to-write-move-constructor-in-cpp11/"/>
    <id>http://fresky.github.io/2012/12/17/how-to-write-move-constructor-in-cpp11/</id>
    <published>2012-12-16T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.242Z</updated>
    
    <content type="html"><![CDATA[<p>MSDN上<a href="http://msdn.microsoft.com/en-us/library/dd293665.aspx" target="_blank" rel="noopener">How to: Write a Move Constructor</a>介绍了怎么写move constructor，写的很清楚。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;MSDN上&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/dd293665.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;How to: Write a Move Constructor&lt;/a&gt;介
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>5个有用的XAML工具</title>
    <link href="http://fresky.github.io/2012/12/14/5-good-xaml-tools/"/>
    <id>http://fresky.github.io/2012/12/14/5-good-xaml-tools/</id>
    <published>2012-12-13T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.241Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.infragistics.com/community/blogs/ux/archive/2012/12/11/jeffs-top-5-xaml-tools.aspx" target="_blank" rel="noopener">Jeff’s Top 5 XAML Tools.</a><br><ol><li>Fireworks to XAML</li><li>Snoop and XAMLSpy</li><li>Pistachio</li><li>KAXAML</li><li>XAVIOR - XAML Color Extractor (Not Public, Yet)</li></ol><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.infragistics.com/community/blogs/ux/archive/2012/12/11/jeffs-top-5-xaml-tools.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Je
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>SWIG——帮助使用C或者C++编写的软件能与其它各种高级编程语言进行嵌入联接的开发工具</title>
    <link href="http://fresky.github.io/2012/12/12/swig-connect-cpp-programs-with-other-languages/"/>
    <id>http://fresky.github.io/2012/12/12/swig-connect-cpp-programs-with-other-languages/</id>
    <published>2012-12-11T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.241Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.swig.org/" target="_blank" rel="noopener">Simplified Wrapper and Interface Generator</a>，SWIG是个帮助使用C或者C++编写的软件能与其它各种高级编程语言进行嵌入联接的开发工具。支持的语言有：<br><ul><li>Tcl 8.0 and newer versions.</li><li>Python 1.5 and newer.<br> </li><li> Perl 5.003 or newer.<br> </li><li> Guile 1.3.4 and newer.</li><li>Java JDK 1.1 and newer.<br> </li><li> Ruby.<br> </li><li> Mzscheme.</li><li>PHP support was added in swig-1.3.11.</li><li><br> Objective Caml (Ocaml) and Pike support was added in swig-1.3.14.</li><li>C# and the Chicken scheme compiler was added in swig-1.3.18.</li><li><br> Allegro CL and Modula-3 was added in swig-1.3.22.</li><li><br> Lua, CLISP and Common Lisp with UFFI was added in swig-1.3.26.</li><li><br> Common Lisp with CFFI was added in swig-1.3.28.</li><li><br> R was added in swig-1.3.30.</li><li><br> Octave was added in swig-1.3.35.</li><li><br> Go language was added in swig-2.0.1.</li><li><br> D was added in swig-2.0.2.</li></ul><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.swig.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Simplified Wrapper and Interface Generator&lt;/a&gt;，SWIG是个帮助使用C或者C++编写的软件能与其它各种高
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>C++，想要提高性能，那就值传递（pass by value）吧。</title>
    <link href="http://fresky.github.io/2012/12/11/want-speed-pass-by-value/"/>
    <id>http://fresky.github.io/2012/12/11/want-speed-pass-by-value/</id>
    <published>2012-12-10T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.241Z</updated>
    
    <content type="html"><![CDATA[<p>通常我们在学习写C++程序的时候都听过这样的说法，作为函数的参数，应该引用传递pass by const refercence，这样不会有值传递引起拷贝问题，可以提高性能，但是<a href="http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/" target="_blank" rel="noopener">Want Speed? Pass by Value</a>这篇文章的标题就是想要提高性能吗？那就值传递吧。</p><br><p>这篇文章讲了右值rvalue和返回值优化RVO，然后得出了原则：</p><br><h3>不要复制函数的参数。应该通过值传递的方式让编译器来复制。</h3><br><p>其实这并不是要颠覆我们以前说的值传递和引用传递的取舍，而是说，如果在我们的函数里面需要拷贝一份参数的话，那就不要通过传递引用，然后函数内部在调用拷贝构造的方式。而是应该直接用值传递的方式，这样编译器会有更大的空间来进行优化，提高性能。</p><br><p>贴两个文章中举得例子吧。</p><br><h2>1. 对vector排序。</h2><br><p>下面的代码性能不好，因为显示的拷贝不能被编译器优化。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; </span><br><span class="line">sorted(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; <span class="keyword">const</span>&amp; names) <span class="comment">// names passed by reference</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; r(names);        <span class="comment">// and explicitly copied</span></span><br><span class="line">    <span class="built_in">std</span>::sort(r);</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下面的代码性能好，因为编译器可以用RVO优化，可以避免拷贝。而且就算编译器没有优化，最坏也就是和上面的代码一样，而且还少了一行，看起来更清楚一些。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">std::vector&lt;std::string&gt; </span><br><span class="line">sorted(std::vector&lt;std::string&gt; names)</span><br><span class="line">&#123;</span><br><span class="line">    std::sort(names);</span><br><span class="line">    return names;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h2>2.赋值运算符。（其实就是Copy-And-Swap-Idiom）</h2><p></p><p>性能不好：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">T&amp; T::operator=(T const&amp; x) // x is a reference to the source</span><br><span class="line">&#123; </span><br><span class="line">    T tmp(x);          // copy construction of tmp does the hard work</span><br><span class="line">    swap(*this, tmp);  // trade our resources for tmp&apos;s</span><br><span class="line">    return *this;      // our (old) resources get destroyed with tmp </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>性能好：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">T&amp; operator=(T x)    // x is a copy of the source; hard work already done</span><br><span class="line">&#123;</span><br><span class="line">    swap(*this, x);  // trade our resources for x&apos;s</span><br><span class="line">    return *this;    // our (old) resources get destroyed with x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;通常我们在学习写C++程序的时候都听过这样的说法，作为函数的参数，应该引用传递pass by const refercence，这样不会有值传递引起拷贝问题，可以提高性能，但是&lt;a href=&quot;http://cpp-next.com/archive/2009/08/want
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>Nokia Meego的故事（转载）</title>
    <link href="http://fresky.github.io/2012/12/10/the-story-of-nokia-meego/"/>
    <id>http://fresky.github.io/2012/12/10/the-story-of-nokia-meego/</id>
    <published>2012-12-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.240Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://taskumuro.com/artikkelit/the-story-of-nokia-meego" target="_blank" rel="noopener">The story of Nokia MeeGo</a>讲述了Nokia Meego的故事，很长，但是很有趣，有兴趣的可以看看。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://taskumuro.com/artikkelit/the-story-of-nokia-meego&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;The story of Nokia MeeGo&lt;/a&gt;讲述了Nokia Me
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>C++怎么寻找重载函数</title>
    <link href="http://fresky.github.io/2012/12/10/how-cpp-find-overload-functions/"/>
    <id>http://fresky.github.io/2012/12/10/how-cpp-find-overload-functions/</id>
    <published>2012-12-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.240Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://accu.org/index.php/journals/268" target="_blank" rel="noopener">ACCU :: Overload Resolution - Selecting the Function</a>这篇文章详细介绍了C++中寻找重载函数的方法。下面给个小例子吧，C++的重载有时候会违背你的直觉。</p>  <p>考虑如下代码：</p>  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OverLoadBase</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">DoSomething</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="number">0</span>;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OverLoadSub</span> :</span> <span class="keyword">public</span> OverLoadBase</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">DoSomething</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;<span class="keyword">return</span> <span class="number">1</span>;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestOverLoadSub</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    OverLoadSub b;</span><br><span class="line">    b.DoSomething(); <span class="comment">//这样写会编译出错</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>错误消息如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">In function &apos;void TestOverLoadSub()&apos;:</span><br><span class="line">Line 17: error: no matching function for call to &apos;OverLoadSub::DoSomething()&apos;</span><br><span class="line">compilation terminated due to -Wfatal-errors.</span><br></pre></td></tr></table></figure><p>如果换成这样：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b.OverLoadBase::DoSomething();</span><br></pre></td></tr></table></figure><p>就没有问题了。或者把子类中的DoSomething（）去掉也没有问题。</p><p>为什么会这样呢？因为在上面那个例子中，两个DoSomething不是重载。上面的那篇文章里一开头就说“Declaring two or more items with the same name in a scope is called <em>overloading</em>”，只有在一个scope中才算重载。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://accu.org/index.php/journals/268&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ACCU :: Overload Resolution - Selecting the Function&lt;/a&gt;这
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>从上而下和从下而上的编程语言</title>
    <link href="http://fresky.github.io/2012/12/10/top-down-bottom-up-in-programming-languages/"/>
    <id>http://fresky.github.io/2012/12/10/top-down-bottom-up-in-programming-languages/</id>
    <published>2012-12-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.241Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.johndcook.com/blog/2012/12/06/top-down-bottom-up/" target="_blank" rel="noopener">Top down, bottom up</a>中引用<a href="http://channel9.msdn.com/Shows/Going+Deep/Brian-Beckman-Dont-fear-the-Monads" target="_blank" rel="noopener">Don’t fear the Monad</a>，提了一个有趣的说法，编程语言分为2类：<br><ol><li>Bottom-up，从机器开始，逐步抽象，比如C#。</li><li>Top-down，从数学开始，具体到机器，比如Haskell。</li></ol>而程序员则习惯用从何语言相反的方向进行编程，就是说C#程序员喜欢由上而下，而Haskell程序员喜欢由下而上。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.johndcook.com/blog/2012/12/06/top-down-bottom-up/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Top down, bottom up&lt;/a&gt;中引用&lt;a href=&quot;
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>C++应该用引用来捕捉异常</title>
    <link href="http://fresky.github.io/2012/12/09/should-use-reference-in-cpp-exception/"/>
    <id>http://fresky.github.io/2012/12/09/should-use-reference-in-cpp-exception/</id>
    <published>2012-12-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.240Z</updated>
    
    <content type="html"><![CDATA[<p>在C++中catch异常时的参数应该用引用，主要原因还是对象，引用，指针的构造析构原理。下面用代码实例解释一下原因。</p>  <p>先来看我们定义了两个异常，SubException继承BaseException，有一个虚函数打印信息。</p>  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseException</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    BaseException()&#123; <span class="built_in">cout</span>&lt;&lt;<span class="string">"BaseExeption"</span>&lt;&lt;<span class="built_in">endl</span>; &#125;;</span><br><span class="line">    BaseException(BaseException&amp; )&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"BaseExeption Copy from BaseException"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;;</span><br><span class="line">    BaseException(SubException&amp; )&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"BaseExeption Copy from SubException"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;;</span><br><span class="line">    ~BaseException()&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"~BaseExeption"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">PrintMessage</span><span class="params">()</span></span>&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"I'm BaseException"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubException</span>:</span><span class="keyword">public</span> BaseException</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    SubException()&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"SubException"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line">    SubException(SubException&amp; ):BaseException()&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"SubException Copy from SubException"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;;</span><br><span class="line">    ~SubException()&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"~SubException"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">PrintMessage</span><span class="params">()</span></span>&#123;<span class="built_in">cout</span>&lt;&lt;<span class="string">"I'm SubException"</span>&lt;&lt;<span class="built_in">endl</span>;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3>1. Catch对象。</h3><p>再来看用对象做为参数catch的例子。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CatchBaseObject</span><span class="params">(<span class="keyword">bool</span> throwbase)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"==================="</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"CatchBaseObject "</span>&lt;&lt;(throwbase?<span class="string">"ThrowBase"</span>:<span class="string">"ThrowSub"</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        throwbase? <span class="keyword">throw</span> BaseException(): <span class="keyword">throw</span> SubException();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (BaseException e)</span><br><span class="line">    &#123;</span><br><span class="line">        e.PrintMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">===================</span><br><span class="line">CatchBaseObject ThrowBase</span><br><span class="line">BaseExeption</span><br><span class="line">BaseExeption Copy from BaseException</span><br><span class="line">I&apos;m BaseException</span><br><span class="line">~BaseExeption</span><br><span class="line">~BaseExeption</span><br><span class="line">===================</span><br><span class="line">CatchBaseObject ThrowSub</span><br><span class="line">BaseExeption</span><br><span class="line">SubException</span><br><span class="line">BaseExeption Copy from BaseException</span><br><span class="line">I&apos;m BaseException</span><br><span class="line">~BaseExeption</span><br><span class="line">~SubException</span><br><span class="line">~BaseExeption</span><br></pre></td></tr></table></figure><p>从这个输出中我们可以看出问题：</p><ol><br>  <li>有2个对象被构建出来。</li><br><br>  <li>catch BaseException时发生了slicing，sub的信息丢掉了。</li><br></ol><p>除了这些问题之外，如果catch住在throw的话，要注意只能用throw，而不能用throw e，那样会再次生成临时对象，并且丢失原来的sub信息。测试代码如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CatchBaseObjectForThrowSubAndThrowItAgain</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"==================="</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"CatchBaseObjectForThrowSubAndThrowItAgain "</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">throw</span> SubException();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (BaseException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.PrintMessage();</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (SubException e)</span><br><span class="line">    &#123;</span><br><span class="line">        e.PrintMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">===================</span><br><span class="line">CatchBaseObjectForThrowSubAndThrowItAgain</span><br><span class="line">BaseExeption</span><br><span class="line">SubException</span><br><span class="line">BaseExeption Copy from BaseException</span><br><span class="line">I&apos;m BaseException</span><br><span class="line">BaseExeption Copy from BaseException</span><br><span class="line">Press any key to continue . . .</span><br></pre></td></tr></table></figure><p>再次throw时已经变成了一BaseException，所以第二个catch不能抓住，导致程序终止。</p><h3>2. Catch指针。</h3><p>如果在throw exception的地方用的栈上的对象的地址，像如下代码所示：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CatchBasePointer</span><span class="params">(<span class="keyword">bool</span> throwbase)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"==================="</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"CatchBasePointer "</span>&lt;&lt;(throwbase?<span class="string">"ThrowBase"</span>:<span class="string">"ThrowSub"</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        throwbase? <span class="keyword">throw</span> &amp;BaseException(): <span class="keyword">throw</span> &amp;SubException();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (BaseException* e)</span><br><span class="line">    &#123;</span><br><span class="line">        e-&gt;PrintMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>得到输出如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">===================</span><br><span class="line">CatchBasePointer ThrowBase</span><br><span class="line">BaseExeption</span><br><span class="line">~BaseExeption</span><br><span class="line">I&apos;m BaseException</span><br><span class="line">===================</span><br><span class="line">CatchBasePointer ThrowSub</span><br><span class="line">BaseExeption</span><br><span class="line">SubException</span><br><span class="line">~SubException</span><br><span class="line">~BaseExeption</span><br><span class="line">I&apos;m BaseException</span><br></pre></td></tr></table></figure><p>我们可以看到如下问题：</p><ol><br>  <li>生成的那个exception时临时对象，除了try块就被析构了。</li><br><br>  <li>catch住的异常对象发生了slicing。</li><br></ol><p>为了保证不被析构，我们得new在堆上或者用static，如下代码展示用static：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CatchBasePointerThrowStaticSub</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"==================="</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"CatchBasePointerThrowStaticSub "</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">static</span> SubException s;</span><br><span class="line">        <span class="keyword">throw</span> &amp;s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (BaseException* e)</span><br><span class="line">    &#123;</span><br><span class="line">        e-&gt;PrintMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>得到输入如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">===================</span><br><span class="line">CatchBasePointerThrowStaticSub</span><br><span class="line">BaseExeption</span><br><span class="line">SubException</span><br><span class="line">I&apos;m SubException</span><br></pre></td></tr></table></figure><p>这时这个对象还在，因为用的是指针，所以也还有多态，但是要不要delete就不好办了，如果是static的，不需要delete，但是如果是new出来的，需要delete。</p><h3>3.Catch引用。</h3><p>如果换成引用，输出如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">===================</span><br><span class="line">CatchBaseRef ThrowBase</span><br><span class="line">BaseExeption</span><br><span class="line">I&apos;m BaseException</span><br><span class="line">~BaseExeption</span><br><span class="line">===================</span><br><span class="line">CatchBaseRef ThrowSub</span><br><span class="line">BaseExeption</span><br><span class="line">SubException</span><br><span class="line">I&apos;m SubException</span><br><span class="line">~SubException</span><br><span class="line">~BaseExeption</span><br></pre></td></tr></table></figure><p>我们可以看到，没有多余的临时对象被创建出来，而且保持了多态，是我们期望的行为。</p><p>所以永远要用引用的方式来捕捉异常。本文例子的完整代码在<a href="https://github.com/fresky/CppExample" target="_blank" rel="noopener">github</a>上。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在C++中catch异常时的参数应该用引用，主要原因还是对象，引用，指针的构造析构原理。下面用代码实例解释一下原因。&lt;/p&gt;  &lt;p&gt;先来看我们定义了两个异常，SubException继承BaseException，有一个虚函数打印信息。&lt;/p&gt;  

&lt;figure cl
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>Windows调试工具箱</title>
    <link href="http://fresky.github.io/2012/12/08/windows-debugging-tools/"/>
    <id>http://fresky.github.io/2012/12/08/windows-debugging-tools/</id>
    <published>2012-12-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.240Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://blogs.msdn.com/b/debuggingtoolbox/archive/2012/10/04/tools-for-your-debugging-toolbox.aspx" target="_blank" rel="noopener">Tools for Your Debugging Toolbox</a>是windows下的调试工具大集合，包含下面这些工具的简介和下载地址。<br><blockquote>-        Performance Monitor - PAL<br><br>-        Process Monitor<br><br>-        Process Explorer<br><br>-        MPSReport<br><br>-        SPSReport<br><br>-        SPDisposeCheck<br><br>-        Dependency Walker<br><br>-        SQL Nexus<br><br>-        LogParser<br><br>-        Indihiang<br><br>-        PowerShell<br><br>-        Application Verifier<br><br>-        Logger/LogViewer<br><br>-        XPerf – Windows Performance Analyzer<br><br>-        PerfView – Low Level Profiler for .NET applications<br><br>-        DebugDiag – Debug Diagnostic<br><br>-        ProcDump – Process Dump<br><br>-        WinDbg – Windows Debugging Tools<br><br>-        WinDbg Scripts – Automate the Debugging<br><br>-        Netmon – Microsoft Network Monitor<br><br>-        Fiddler – HTTP Debugger Proxy<br><br>-        NP .NET Profiler - Lightweight profiler designed to assist in troubleshooting issues such as slow performance, memory related issues, and first chance exceptions in .NET applications</blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://blogs.msdn.com/b/debuggingtoolbox/archive/2012/10/04/tools-for-your-debugging-toolbox.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener
      
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>推荐一个免费的.NET代码分析工具Nitriq</title>
    <link href="http://fresky.github.io/2012/12/08/free-csharp-code-analysis-tool-nitriq/"/>
    <id>http://fresky.github.io/2012/12/08/free-csharp-code-analysis-tool-nitriq/</id>
    <published>2012-12-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.239Z</updated>
    
    <content type="html"><![CDATA[<blockquote></blockquote><a href="http://www.nitriq.com/" target="_blank" rel="noopener">Nitriq Code Analysis for .Net</a>是一个免费的.NET代码分析工具，有两个版本，一个UI版，适合开发人员使用，一个命令行版，适合自动编译系统使用。我试了以下，还是很方便的，内建了很多规则，如果违反了很清楚的就能看出来。使用LINQ语句查询分析结果，可以很容易的自定义规则。下面贴一个官网的图吧。<br><img style="max-width: 800px;" src="http://www.nitriq.com/content/images/largeScreenShot.png"><br><blockquote></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;&lt;/blockquote&gt;&lt;a href=&quot;http://www.nitriq.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Nitriq Code Analysis for .Net&lt;/a&gt;是一个免费的.NET代码分析工具，有
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>如何做test review</title>
    <link href="http://fresky.github.io/2012/12/07/how-to-review-unit-test-code/"/>
    <id>http://fresky.github.io/2012/12/07/how-to-review-unit-test-code/</id>
    <published>2012-12-06T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.239Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://artofunittesting.com/unit-testing-review-guidelines/" target="_blank" rel="noopener">Test Review Guidelines</a>给出了一些review unit test时的一些准则，我简单翻译一下。</p>  <h2>可读性：</h2>  <ol>   <li>确保setup和teardown方法没有被滥用。最好用factory method来提高可读性。</li>    <li>确保每个test只测试了一件事。</li>    <li>检查是否符合好的，一致的命名规范。</li>    <li>确保只有有意义的assert message才被用到，用有意义的test名称更好。</li>    <li>确保assert和action分开。</li>    <li>确保测试没有使用magic string/value作为输入，用可能的最简单的输入来验证。</li>    <li>确保测试放置的位置具有一致性，可以方便的找到一个方法，一个类，一个项目相关的测试。</li> </ol>  <h2>可维护性：</h2>  <ol>   <li>确保test之间没有依赖关系，并且是可以重复的。</li>    <li>确保测试private或者protected地测试是个例，测试public的总是更好。</li>    <li>确保测试没有过分详细。</li>    <li>确保总是优先考虑基于状态的测试，其次才是基于交互的测试。</li>    <li>确保尽量少使用精确的mock（否则会导致过分详细和脆弱的测试）。</li>    <li>确保每个测试中只是用了一个mock。</li>    <li>确保在同一个测试中没有混淆mock和正常的assert。</li>    <li>确保测试只验证一个mock的函数调用。（否则会导致过分详细和脆弱的测试）。</li>    <li>确保测试只验证一个mock的一个函数调用。（否则会导致过分详细和脆弱的测试）。</li>    <li>确保只有在非常少的情况下，一个mock被同时当作一个stub来使用，在验证的同时返回值。</li> </ol>  <h2>可信性：</h2>  <ol>   <li>确保测试不包含逻辑或者动态的数值。</li>    <li>通过改变数值（布尔或者常量）来检查测试覆盖率。</li>    <li>确保单元测试和集成测试分开。</li>    <li>确保测试没有使用一直在变化的值（比如系统当前时间），应该使用固定的值。</li>    <li>确定测试没有assert动态产生的期望值。（你可能只是在重复的你的production code，没有起到测试的作用）。</li> </ol><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://artofunittesting.com/unit-testing-review-guidelines/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Test Review Guidelines&lt;/a&gt;给出了
      
    
    </summary>
    
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
  </entry>
  
  <entry>
    <title>C++中运算符重载需要注意什么？</title>
    <link href="http://fresky.github.io/2012/12/05/cpp-operator-overloading-checklist/"/>
    <id>http://fresky.github.io/2012/12/05/cpp-operator-overloading-checklist/</id>
    <published>2012-12-04T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.239Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://stackoverflow.com/questions/4421706/operator-overloading" target="_blank" rel="noopener">c++ - Operator overloading - Stack Overflow</a>这篇FAQ讲的很清楚，把要点整理如下：</p>  <h2>C++中operator重载的基本语意：</h2>  <ol>   <li>只能重载用户定义类型的operator。</li>    <li>以下operator不能重载：.,::,sizeof,?:</li>    <li>其余的都能重载，分别是：</li>    <ol>     <li>算数运算符：二元：+ - <em> / %&#160; += -= </em>= /= %=，一元：+ - ++ –</li>      <li>位运算符：二元 &amp; | ^ &lt;&lt; &gt;&gt; and &amp;= |= ^= &lt;&lt;= &gt;&gt;= ;一元 ~</li>      <li>布尔运算符：二元：== != &lt; &gt; &lt;= &gt;= || &amp;&amp;， 一元！</li>      <li>地址管理：new new[] delete delete[]</li>      <li>显示转换运算符</li>      <li>其它：二元：= [] -&gt;，一元：* &amp;，函数调用： ()</li>   </ol> </ol>  <h2>三个基本原则：</h2>  <ol>   <li>如果operator的含义模糊不清，就不要重载，用一个函数名清楚的函数替代</li>    <li>永远坚持operator众所周知的语意</li>    <li>永远提供相关的运算符重载，比如重载了+，就要重载+=</li> </ol>  <h2>运算符实现成员还是非成员</h2>  <ol>   <li>赋值运算符=，数组下标运算符[]，成员访问运算符-&gt;和函数调用运算符()必须是成员内的。</li>    <li>如果需要修改左操作数，通常实现在非成员，比如&lt;&lt;和&gt;&gt;。</li>    <li>对于别的，遵守下面的规则：</li>    <ol>     <li>如果是一元运算符，成员</li>      <li>如果二元运算符，左右操作数对等，非成员</li>      <li>如果二元运算符，左右操作数不对等，成员</li>   </ol> </ol><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/4421706/operator-overloading&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;c++ - Operator overloadin
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>C++中怎么阻止一个类被继承</title>
    <link href="http://fresky.github.io/2012/12/04/how-to-prevent-class-being-base-class-in-cpp/"/>
    <id>http://fresky.github.io/2012/12/04/how-to-prevent-class-being-base-class-in-cpp/</id>
    <published>2012-12-03T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.238Z</updated>
    
    <content type="html"><![CDATA[<p>C#中可以用sealed关键字，但是，C++中怎么阻止一个类被继承呢？</p>  <p>方法就是把这个类的构造函数声明成private的，这样就不能被继承了。当然更好的办法是用非技术的手段了：）</p>  <p>方法1： 构造函数private，提供一个Factory方法，缺点就是使用者必须用这个factory方法，不能直接使用这个类。</p><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NoDerive</span> &#123;</span></span><br><span class="line">    NoDerive()&#123;&#125;;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> NoDerive <span class="title">GetNoDerive</span><span class="params">()</span></span>&#123; <span class="keyword">return</span> NoDerive();&#125;;</span><br><span class="line">    ~NoDerive()&#123;&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><br><p>方法2： 构造函数public，但是虚拟继承自一个private构造函数，没有方法1的缺点，但是看着有点hack。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NoDerive</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NoDeriveBase</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">NoDerive</span>;</span></span><br><span class="line">    NoDeriveBase()&#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NoDerive</span>:</span><span class="keyword">private</span> <span class="keyword">virtual</span> NoDeriveBase &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    NoDerive()&#123;&#125;;</span><br><span class="line">    ~NoDerive()&#123;&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;C#中可以用sealed关键字，但是，C++中怎么阻止一个类被继承呢？&lt;/p&gt;  &lt;p&gt;方法就是把这个类的构造函数声明成private的，这样就不能被继承了。当然更好的办法是用非技术的手段了：）&lt;/p&gt;  &lt;p&gt;方法1： 构造函数private，提供一个Factory方法，
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>.NET自动exploratory测试工具Pex</title>
    <link href="http://fresky.github.io/2012/12/04/csharp-exploratory-testing-tool-pex/"/>
    <id>http://fresky.github.io/2012/12/04/csharp-exploratory-testing-tool-pex/</id>
    <published>2012-12-03T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.238Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://research.microsoft.com/en-us/projects/pex/" target="_blank" rel="noopener">Pex</a>还是很好用的，安装之后可以在visual studio2008和2010中直接用，也能用命令行。</p>  <p>我写了下面这个很简单的小程序：</p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">PexClass</span>]</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Calculator</span></span><br><span class="line">   &#123;</span><br><span class="line">      [<span class="meta">PexMethod</span>]</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">divide</span>(<span class="params"><span class="keyword">int</span> a,<span class="keyword">int</span> b</span>)</span></span><br><span class="line"><span class="function"></span>      &#123;</span><br><span class="line">          <span class="keyword">return</span> a/b;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>用pex.exe命令行跑过之后出了一个report。</p><img src="/images/Pex.png"><p>并且针对这3种情况自动生成3个unit test，很不错。</p><p>就是为啥还不支持2012呢？</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://research.microsoft.com/en-us/projects/pex/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Pex&lt;/a&gt;还是很好用的，安装之后可以在visual studio2008和2010中直接
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
  </entry>
  
  <entry>
    <title>有时间了要研究一下Stack Exchange的开源项目</title>
    <link href="http://fresky.github.io/2012/12/04/stackexchange-open-source-projects/"/>
    <id>http://fresky.github.io/2012/12/04/stackexchange-open-source-projects/</id>
    <published>2012-12-03T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.239Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://blog.stackoverflow.com/2012/02/stack-exchange-open-source-projects/" target="_blank" rel="noopener">Stack Exchange Open Source Projects « Blog – Stack Exchange</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://blog.stackoverflow.com/2012/02/stack-exchange-open-source-projects/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Stack Exchange Open S
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>C++中子类的数组不能用父类指针来表示</title>
    <link href="http://fresky.github.io/2012/12/03/can-not-use-base-class-pointer-for-array-of-child-class-pointer-in-cpp/"/>
    <id>http://fresky.github.io/2012/12/03/can-not-use-base-class-pointer-for-array-of-child-class-pointer-in-cpp/</id>
    <published>2012-12-02T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.238Z</updated>
    
    <content type="html"><![CDATA[<p>假设我们有一个父类A，一个子类B，如果我们创建一个B的数组，我们能这样用吗？</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A* barray = <span class="keyword">new</span> B[<span class="number">10</span>];</span><br></pre></td></tr></table></figure><p>写段代码在Visual Studio中来试试吧：）<span><br></span></p><br><p>&nbsp;</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    A();</span><br><span class="line">    ~A();</span><br><span class="line">    <span class="keyword">int</span> aa;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span><span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    B();</span><br><span class="line">    ~B();</span><br><span class="line">    <span class="keyword">int</span> bb;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">A::A()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"A"</span>&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    aa=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">A::~A()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"~A"</span>&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    aa=<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">B::B()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"B"</span>&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">    bb=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">B::~B()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"~B"</span>&lt;&lt;<span class="string">" "</span>;</span><br><span class="line"></span><br><span class="line">    bb=<span class="number">-2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"size of A: "</span>&lt;&lt;<span class="keyword">sizeof</span>(A)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"size of B: "</span>&lt;&lt;<span class="keyword">sizeof</span>(B)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    A* aarray = <span class="keyword">new</span> B[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"aa value of A* is:"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;aarray[i].aa&lt;&lt;<span class="string">", "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    B* baaray = (B*)aarray;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"aa value of B* is:"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;baaray[i].aa&lt;&lt;<span class="string">", "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span>[] aarray;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"After delete[]"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"aa value of A* is:"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;aarray[i].aa&lt;&lt;<span class="string">", "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    baaray = (B*)aarray;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="string">"aa value of B* is:"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;baaray[i].aa&lt;&lt;<span class="string">", "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&nbsp;</p><br><p>我们可以看到输出的结果是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">size of A: 4</span><br><span class="line">size of B: 8</span><br><span class="line">A B A B A B A B A B A B A B A B A B A B</span><br><span class="line"></span><br><span class="line">aa value of A* is:</span><br><span class="line">1, 2, 1, 2, 1, 2, 1, 2, 1, 2,</span><br><span class="line"></span><br><span class="line">aa value of B* is:</span><br><span class="line">1, 1, 1, 1, 1, 1, 1, 1, 1, 1,</span><br><span class="line"></span><br><span class="line">~A ~A ~A ~A ~A ~A ~A ~A ~A ~A</span><br><span class="line"></span><br><span class="line">After delete[]</span><br><span class="line"></span><br><span class="line">aa value of A* is:</span><br><span class="line">4408224, -1, -1, -1, -1, -1, -1, -1, -1, -1,</span><br><span class="line"></span><br><span class="line">aa value of B* is:</span><br><span class="line">4408224, -1, -1, -1, -1, 1, 1, 1, 1, 1,</span><br></pre></td></tr></table></figure><p>说明尽管我们创建时用的是new B，但是因为声明的是A*，所以被认为是一个A的数组，按照A的大小来操作，所以可以看到成员变量aa的值是不对的。而且最后析构的时候只调用了A的析构函数，说明这个数组在delete的时候也是有问题的。</p><br><p>&nbsp;</p><br><p>如果我们把A的析构函数加上virtual，可以得到如下的结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">size of A: 8</span><br><span class="line">size of B: 12</span><br><span class="line">A B A B A B A B A B A B A B A B A B A B</span><br><span class="line"></span><br><span class="line">aa value of A* is:</span><br><span class="line">1, 668240, 2, 1, 668240, 2, 1, 668240, 2, 1,</span><br><span class="line"></span><br><span class="line">aa value of B* is:</span><br><span class="line">1, 1, 1, 1, 1, 1, 1, 1, 1, 1,</span><br><span class="line"></span><br><span class="line">~B ~A ~B ~A ~B ~A ~B ~A ~B ~A ~B ~A ~B ~A ~B ~A ~B ~A ~B ~A</span><br><span class="line"></span><br><span class="line">After delete[]</span><br><span class="line"></span><br><span class="line">aa value of A* is:</span><br><span class="line">-1, 668248, -2, -1, 668248, -2, -1, 668248, -2, -1,</span><br><span class="line"></span><br><span class="line">aa value of B* is:</span><br><span class="line">-1, -1, -1, -1, -1, -1, -1, -1, -1, -1,</span><br></pre></td></tr></table></figure><p>说明只要我们加上virtual，在delete的时候编译器是知道怎么delete的。</p><br><p>&nbsp;</p><br><p>但是这并不是C++标准中制定的，不同的编译器会有不同的结果，比如如果把带virtual的代码放在g++中，会得到如下的结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">size of A: 8</span><br><span class="line">size of B: 12</span><br><span class="line">A B A B A B A B A B A B A B A B A B A B </span><br><span class="line"></span><br><span class="line">aa value of A* is:</span><br><span class="line">1, 134540944, 2, 1, 134540944, 2, 1, 134540944, 2, 1, </span><br><span class="line"></span><br><span class="line">aa value of B* is:</span><br><span class="line">1, 1, 1, 1, 1, 1, 1, 1, 1, 1, </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Segmentation fault</span><br></pre></td></tr></table></figure><p>&nbsp;</p><br><p>所以，C++中子类的数组不能用父类指针来表示。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;假设我们有一个父类A，一个子类B，如果我们创建一个B的数组，我们能这样用吗？&lt;/p&gt;

&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>一篇很不错的讲怎么测试复杂系统的文章</title>
    <link href="http://fresky.github.io/2012/12/02/how-to-test-complex-systems/"/>
    <id>http://fresky.github.io/2012/12/02/how-to-test-complex-systems/</id>
    <published>2012-12-01T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.238Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.drdobbs.com/testing/testing-complex-systems/240008913?pgno=1" target="_blank" rel="noopener">Testing Complex Systems | Dr Dobb’s</a><br>覆盖了下面几点：<br><ol><li>第三方代码</li><li>跨平台</li><li>UI</li><li>网络</li><li>数据库</li><li>异步</li><li>多线程/多进程</li><li>多语言</li><li>异常</li></ol><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.drdobbs.com/testing/testing-complex-systems/240008913?pgno=1&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Testing Complex Systems 
      
    
    </summary>
    
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
  </entry>
  
  <entry>
    <title>云数据存在哪里？</title>
    <link href="http://fresky.github.io/2012/12/01/where-your-cloud-data-really-lives/"/>
    <id>http://fresky.github.io/2012/12/01/where-your-cloud-data-really-lives/</id>
    <published>2012-11-30T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.238Z</updated>
    
    <content type="html"><![CDATA[<p>From:<a href="http://www.techhive.com/article/2014323/infographic-where-your-cloud-data-really-lives.html" target="_blank" rel="noopener">Infographic: Where your cloud data really lives | TechHive</a><br><br><br><img style="max-width: 800px;" src="http://images.techhive.com/images/article/2012/11/xx_donotuse_datacenter_info-100014881-orig.jpg"><br><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;From:&lt;a href=&quot;http://www.techhive.com/article/2014323/infographic-where-your-cloud-data-really-lives.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>扔掉ppt，用白板吧</title>
    <link href="http://fresky.github.io/2012/11/30/use-whiteboard-instead-of-ppt/"/>
    <id>http://fresky.github.io/2012/11/30/use-whiteboard-instead-of-ppt/</id>
    <published>2012-11-29T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.237Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://blog.corporatevisions.com/2012/10/22/killing-them-softly-with-powerpoint-wake-them-up-with-whiteboarding/" target="_blank" rel="noopener">Killing them Softly with PowerPoint? Wake them up with Whiteboarding!</a><br>这篇文章讲了为什么销售应该扔掉ppt，而用白板来给顾客讲故事，很有启发。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://blog.corporatevisions.com/2012/10/22/killing-them-softly-with-powerpoint-wake-them-up-with-whiteboarding/&quot; target=&quot;_blank
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>C#判断一个进程是不是64位的</title>
    <link href="http://fresky.github.io/2012/11/27/how-to-check-process-is-64bit-in-csharp/"/>
    <id>http://fresky.github.io/2012/11/27/how-to-check-process-is-64bit-in-csharp/</id>
    <published>2012-11-26T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.237Z</updated>
    
    <content type="html"><![CDATA[<p>C#中的Environment 类有 <a href="http://msdn.microsoft.com/en-us/library/system.environment.is64bitoperatingsystem%28VS.100%29.aspx" target="_blank" rel="noopener">Is64BitOperatingSystem</a> 属性，可以判断当前操作系统是不是64bit的。还有<a href="http://msdn.microsoft.com/en-us/library/system.environment.is64bitprocess%28VS.100%29.aspx" target="_blank" rel="noopener">Is64BitProcess</a> 属性，可以判断当前进程是不是64bit的。</p>  <p>但是如果要判断别的进程是不是64bit的，就需要用windows API，<a href="http://msdn.microsoft.com/en-us/library/ms684139%28v=vs.85%29.aspx" target="_blank" rel="noopener"><code>IsWow64Process</code></a>。</p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title">ProcessDetector</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">IsWin64</span>(<span class="params">Process process</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Environment.Is64BitOperatingSystem)</span><br><span class="line">            &#123;</span><br><span class="line">                IntPtr processHandle;</span><br><span class="line">                <span class="keyword">bool</span> retVal;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    processHandle = Process.GetProcessById(process.Id).Handle;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> Win32API.IsWow64Process(processHandle, <span class="keyword">out</span> retVal) &amp;&amp; retVal;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">Win32API</span></span><br><span class="line">    &#123;</span><br><span class="line">        [<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>, SetLastError = true, CallingConvention = CallingConvention.Winapi)</span>]</span><br><span class="line">        [<span class="meta">return: MarshalAs(UnmanagedType.Bool)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">internal</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">bool</span> <span class="title">IsWow64Process</span>(<span class="params">[In] IntPtr process, [Out] <span class="keyword">out</span> <span class="keyword">bool</span> wow64Process</span>)</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;C#中的Environment 类有 &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/system.environment.is64bitoperatingsystem%28VS.100%29.aspx&quot; target=&quot;_
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>C#中你可能不知道的8件事（zz）</title>
    <link href="http://fresky.github.io/2012/11/26/8-things-you-probably-didnt-know-about-csharp/"/>
    <id>http://fresky.github.io/2012/11/26/8-things-you-probably-didnt-know-about-csharp/</id>
    <published>2012-11-25T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.237Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://damieng.com/blog/2012/10/29/8-things-you-probably-didnt-know-about-csharp" target="_blank" rel="noopener">8 things you probably didn’t know about C# » DamienG</a><br>1. Indexers can use params<br>2. Strings defined multiple times in your code are folded into one instance<br>3. Exposing types as a less capable type doesn’t prevent use as their real type<br>4. Variables in methods can be scoped with just braces<br>5. Enums can have extension methods<br>6. Order of static variable declaration in your source code matters<br>7. Private instance variables of a class can be accessed by other instances<br>8. The C# Language specification is already on your computer<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://damieng.com/blog/2012/10/29/8-things-you-probably-didnt-know-about-csharp&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;8 things you pr
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>通过注册表查看 .NET Framework的版本信息</title>
    <link href="http://fresky.github.io/2012/11/26/how-to-check-dot-net-framework-version-in-registry/"/>
    <id>http://fresky.github.io/2012/11/26/how-to-check-dot-net-framework-version-in-registry/</id>
    <published>2012-11-25T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.237Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://msdn.microsoft.com/en-us/kb/kbarticle.aspx?id=318785" target="_blank" rel="noopener">这里</a>详细说明了怎么通过注册表查看 .NET Framework的版本信息。<br><table class="table" cellspacing="1"><tbody><tr><td><b>.NET Framework</b></td><td><b>Service Pack Level</b></td><td><b>Registry Key Name</b></td><td><b>Value</b></td></tr><tr><td>4 - Client</td><td>Original Release</td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Client</td><td>Name: <b>Install</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td><br></td><td><br></td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Client</td><td>Name: <b>Version</b>, Type: <b>REG_SZ</b>, Data: <b>4.0.30319.0</b></td></tr><tr><td>4 - Full</td><td>Original Release</td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full</td><td>Name: <b>Install</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td><br></td><td><br></td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full</td><td>Name: <b>Version</b>, Type: <b>REG_SZ</b>, Data: <b>4.0.30319.0</b></td></tr><tr><td>3.5</td><td>Original Release</td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.5</td><td>Name: <b>Install</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td><br></td><td><br></td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.5</td><td>Name: <b>SP</b>, Type: <b>REG_DWORD</b>, Data: <b>0</b></td></tr><tr><td>3.5</td><td>Service Pack 1</td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.5</td><td>Name: <b>Install</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td><br></td><td><br></td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.5</td><td>Name: <b>SP</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td>3.0</td><td>Original Release</td><td>Follow the deployment and detection guidance in this document: <a href="http://msdn.microsoft.com/en-us/library/aa480173.aspx" target="_blank" rel="noopener">http://msdn.microsoft.com/en-us/library/aa480173.aspx</a></td></tr><tr><td><br></td><td><br></td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.0</td><td>Name: <b>SP</b>, Type: <b>REG_DWORD</b>, Data: <b>0</b></td></tr><tr><td>3.0</td><td>Service Pack 1</td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.0</td><td>Name: <b>Install</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td><br></td><td><br></td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.0</td><td>Name: <b>SP</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td>3.0</td><td>Service Pack 2</td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.0</td><td>Name: <b>Install</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td><br></td><td><br></td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.0</td><td>Name: <b>SP</b>, Type: <b>REG_DWORD</b>, Data: <b>2</b></td></tr><tr><td>2.0</td><td>Original Release</td><td>HKEY_LOCAL_MACHINE\Software\Microsoft\NET Framework Setup\NDP\v2.0.50727 </td><td>Name: <b>Install</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td><br></td><td><br></td><td>HKEY_LOCAL_MACHINE\Software\Microsoft\NET Framework Setup\NDP\v2.0.50727 </td><td>Name: <b>SP</b>, Type: <b>REG_DWORD</b>, Data: <b>0</b></td></tr><tr><td>2.0</td><td>Service Pack 1</td><td>HKEY_LOCAL_MACHINE\Software\Microsoft\NET Framework Setup\NDP\v2.0.50727 </td><td>Name: <b>Install</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td><br></td><td><br></td><td>HKEY_LOCAL_MACHINE\Software\Microsoft\NET Framework Setup\NDP\v2.0.50727 </td><td>Name: <b>SP</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td>2.0</td><td>Service Pack 2</td><td>HKEY_LOCAL_MACHINE\Software\Microsoft\NET Framework Setup\NDP\v2.0.50727 </td><td>Name: <b>Install</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td><br></td><td><br></td><td>HKEY_LOCAL_MACHINE\Software\Microsoft\NET Framework Setup\NDP\v2.0.50727 </td><td>Name: <b>SP</b>, Type: <b>REG_DWORD</b>, Data: <b>2</b></td></tr><tr><td>1.1</td><td>Original Release</td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v1.1.4322</td><td>Name: <b>Install</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td><br></td><td><br></td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v1.1.4322</td><td>Name: <b>SP</b>, Type: <b>REG_DWORD</b>, Data: <b>0</b></td></tr><tr><td>1.1</td><td>Service Pack 1</td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v1.1.4322</td><td>Name: <b>Install</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td><br></td><td><br></td><td>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v1.1.4322</td><td>Name: <b>SP</b>, Type: <b>REG_DWORD</b>, Data: <b>1</b></td></tr><tr><td>1.0 (on supported platforms except for Windows XP Media Center and Tablet PC)</td><td>Original Release</td><td><br><br>HKEY_LOCAL_MACHINE\Software\Microsoft\Active Setup\Installed Components{78705f0d-e8db-4b2d-8193-982bdda15ecd} <br><br></td><td>Name: <b>Version</b>, Type: <b>REG_SZ</b>, Data: <b>1.0.3705.0</b></td></tr><tr><td>1.0 (on supported platforms except for Windows XP Media Center and Tablet PC)</td><td>Service Pack 1</td><td><br><br>HKEY_LOCAL_MACHINE\Software\Microsoft\Active Setup\Installed Components{78705f0d-e8db-4b2d-8193-982bdda15ecd} <br><br></td><td>Name: <b>Version</b>, Type: <b>REG_SZ</b>, Data: <b>1.0.3705.1</b></td></tr><tr><td>1.0 (on supported platforms except for Windows XP Media Center and Tablet PC)</td><td>Service Pack 2</td><td><br><br>HKEY_LOCAL_MACHINE\Software\Microsoft\Active Setup\Installed Components{78705f0d-e8db-4b2d-8193-982bdda15ecd} <br><br></td><td>Name: <b>Version</b>, Type: <b>REG_SZ</b>, Data: <b>1.0.3705.2</b></td></tr><tr><td>1.0 (on supported platforms except for Windows XP Media Center and Tablet PC)</td><td>Service Pack 3</td><td><br><br>HKEY_LOCAL_MACHINE\Software\Microsoft\Active Setup\Installed Components{78705f0d-e8db-4b2d-8193-982bdda15ecd} <br><br></td><td>Name: <b>Version</b>, Type: <b>REG_SZ</b>, Data: <b>1.0.3705.3</b></td></tr><tr><td>1.0 (shipped with Windows XP Media Center 2002/2004 and Tablet PC 2004)</td><td>Service Pack 2</td><td><br><br>HKEY_LOCAL_MACHINE\Software\Microsoft\Active Setup\Installed Components{FDC11A6F-17D1-48f9-9EA3-9051954BAA24} <br><br></td><td>Name: <b>Version</b>, Type: <b>REG_SZ</b>, Data: <b>1.0.3705.2</b></td></tr><tr><td>1.0 (shipped with Windows XP Media Center 2005 and Tablet PC 2005)</td><td>Service Pack 3</td><td><br><br>HKEY_LOCAL_MACHINE\Software\Microsoft\Active Setup\Installed Components{FDC11A6F-17D1-48f9-9EA3-9051954BAA24} <br><br></td><td>Name: <b>Version</b>, Type: <b>REG_SZ</b>, Data: <b>1.0.3705.3</b></td></tr></tbody></table><br><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/kb/kbarticle.aspx?id=318785&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;这里&lt;/a&gt;详细说明了怎么通过注册表查看 .NET Framework的
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>Visual Studio中打开编译器中有虚函数的类的析构函数不是虚函数的警告——/we4265</title>
    <link href="http://fresky.github.io/2012/11/25/turn-on-c4265-in-visual-studio-destructor-is-not-virtual/"/>
    <id>http://fresky.github.io/2012/11/25/turn-on-c4265-in-visual-studio-destructor-is-not-virtual/</id>
    <published>2012-11-24T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.236Z</updated>
    
    <content type="html"><![CDATA[<p>C++中一个类如果有虚函数，那么它的析构函数应该也是虚的，否则会出现很多问题。<br>其实visual studi中有一个专门的warning是给这个的，<a href="http://msdn.microsoft.com/en-us/library/wzxffy8c%28v=vs.110%29.aspx" target="_blank" rel="noopener">Compiler Warning (level 3) C4265</a>：’class’ : class has virtual functions, but destructor is not virtual<br>但是这个warning默认是关闭的，这里可以看所有默认关系的warning：<a href="http://msdn.microsoft.com/en-us/library/23k5d385(v=vs.110).aspx" target="_blank" rel="noopener">Compiler Warnings That Are Off by Default</a><br>我们可以指定编译器选项 /we4265 把特定的warning打开，具体见<a href="http://msdn.microsoft.com/en-us/library/thxezb7y(v=vs.110).aspx" target="_blank" rel="noopener">/w, /Wn, /WX, /Wall, /wln, /wdn, /wen, /won (Warning Level)</a>。<br><blockquote></blockquote><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;C++中一个类如果有虚函数，那么它的析构函数应该也是虚的，否则会出现很多问题。&lt;br&gt;其实visual studi中有一个专门的warning是给这个的，&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/wzxffy8c%28
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>C++编译器什么时候为我们自动生成拷贝构造函数？</title>
    <link href="http://fresky.github.io/2012/11/25/when-cpp-compiler-generate-copy-constructors-for-us/"/>
    <id>http://fresky.github.io/2012/11/25/when-cpp-compiler-generate-copy-constructors-for-us/</id>
    <published>2012-11-24T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.237Z</updated>
    
    <content type="html"><![CDATA[<p>StackOverflow上有个一个有趣的问题，<a href="http://stackoverflow.com/questions/13374984/c-copy-by-value-to-function-params-produce-two-objects-in-vs2012/13551240#13551240" target="_blank" rel="noopener">copy by value to function params produce two objects in vs2012</a></p>  <p>给出程序：</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    A() &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"1"</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line">    ~A() &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"2"</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    B() &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"3"</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line">    ~B() &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"4"</span> &lt;&lt; <span class="built_in">endl</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(A a)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    B b;</span><br><span class="line">    func(b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Visual Studio给出的输出是：132242。</p><p>前两个13和最后两个42.是对应的，分别是main函数中的局部变量b的构造和析构。问题出在中间的两个2，说明在调用函数func的时候创建了两个临时的A。</p><p>看到这个程序，第一眼的感觉应该是：因为func是参数是值传递，所以b传给func时，调用了A的拷贝构造函数，从b生成了一个A的临时变量，推出func时，这个临时变量析构，所以应该只有一个2.</p><p>&#160;</p><p>但是为什么会有两次呢？打开disassembly window，我们可以看到如下的汇编代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">B b;</span><br><span class="line">00B317F8  lea         ecx,[b]  </span><br><span class="line">00B317FB  call        B::B (0B31650h)  </span><br><span class="line">00B31800  mov         dword ptr [ebp-4],0  </span><br><span class="line">func(b);</span><br><span class="line">00B31807  mov         al,byte ptr [ebp-12h]  </span><br><span class="line">00B3180A  mov         byte ptr [ebp-13h],al  </span><br><span class="line">00B3180D  mov         byte ptr [ebp-4],1  </span><br><span class="line">00B31811  movzx       ecx,byte ptr [ebp-13h]  </span><br><span class="line">00B31815  push        ecx  </span><br><span class="line">00B31816  call        func (0B31730h)</span><br></pre></td></tr></table></figure><p>如果我们把原来的程序的中A的析构函数改成virtual，这样，输出的结果就是13242，中间只有1个2，说明只有一个临时的A被创建了出来，是我们期望的结果。汇编代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">B b;</span><br><span class="line"> lea         ecx,[b]  </span><br><span class="line">0033189B  call        B::B (03316A0h)  </span><br><span class="line">003318A0  mov         dword ptr [ebp-4],0  </span><br><span class="line">func(b);</span><br><span class="line">003318A7  push        ecx  </span><br><span class="line">003318A8  mov         ecx,esp  </span><br><span class="line">003318AA  mov         dword ptr [ebp-1Ch],esp  </span><br><span class="line">003318AD  lea         eax,[b]  </span><br><span class="line">003318B0  push        eax  </span><br><span class="line">003318B1  call        A::A (0331900h)  </span><br><span class="line">003318B6  mov         dword ptr [ebp-20h],eax  </span><br><span class="line">003318B9  call        func (03317D0h)</span><br></pre></td></tr></table></figure><p>回想Inside C++ object model中说到的只有在4中情况下编译器才会给我们生成缺省拷贝构造函数：</p><ol><br>  <li>类包含的成员变量是object，并且这个object的类有拷贝构造函数。</li><br><br>  <li>类继承自一个基类，这个基类有拷贝构造函数。</li><br><br>  <li>类声明了1个或者多个虚函数。</li><br><br>  <li>类继承自一个基类，这个基类有1个或者多个虚函数。</li><br></ol><p>所以在原来的代码中A不属于上面4类，所以编译器不会为它生成一个缺省拷贝构造函数。</p><p>我把我的理解写在了这个<a href="http://stackoverflow.com/a/13551240/304115" target="_blank" rel="noopener">答案</a>里。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;StackOverflow上有个一个有趣的问题，&lt;a href=&quot;http://stackoverflow.com/questions/13374984/c-copy-by-value-to-function-params-produce-two-objects-in-vs
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>Prezi——一个超cool的presentation网站</title>
    <link href="http://fresky.github.io/2012/11/22/prezi-cool-presentation-website/"/>
    <id>http://fresky.github.io/2012/11/22/prezi-cool-presentation-website/</id>
    <published>2012-11-21T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.236Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://prezi.com/index/" target="_blank" rel="noopener">Prezi - Ideas matter.</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://prezi.com/index/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Prezi - Ideas matter.&lt;/a&gt;&lt;br&gt;&lt;blockquote&gt;&lt;/blockquote&gt;&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>用PBKDF2 或BCrypt 来存储密码</title>
    <link href="http://fresky.github.io/2012/11/22/using-pbkdf2-orbcrypt-to-store-password/"/>
    <id>http://fresky.github.io/2012/11/22/using-pbkdf2-orbcrypt-to-store-password/</id>
    <published>2012-11-21T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.236Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://blog.8thlight.com/adam-gooch/2012/11/04/taking-password-storage-up-a-notch.html" target="_blank" rel="noopener">Taking Password Storage Up A Notch | 8th Light</a>中介绍了只是用Hash加盐的做法是不够安全的，应该用<a href="http://www.ietf.org/rfc/rfc2898.txt" target="_blank" rel="noopener">PBKDF2</a> 或 <a href="http://www.openbsd.org/papers/bcrypt-paper.pdf" target="_blank" rel="noopener">BCrypt</a>来做密码存储算法。PBKDF2用在了 iOS, Android, 和LastPass。BCrypt用于OpenBSD。<a href="http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx" target="_blank" rel="noopener">Rfc2898DeriveBytes</a>是C#的一个实现。<br><blockquote><br></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://blog.8thlight.com/adam-gooch/2012/11/04/taking-password-storage-up-a-notch.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Taking Pa
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>（C#）IdleMonitor 实现监测用户是否离开应用程序</title>
    <link href="http://fresky.github.io/2012/11/22/idlemonitor-monitor-user-away-application-in-csharp/"/>
    <id>http://fresky.github.io/2012/11/22/idlemonitor-monitor-user-away-application-in-csharp/</id>
    <published>2012-11-21T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.235Z</updated>
    
    <content type="html"><![CDATA[<p>写了一个C#的小程序，用来监测用户是否离开应用程序，就像MSN，QQ的离开功能一样。代码在<a href="https://github.com/fresky/IdleMonitor" target="_blank" rel="noopener">github</a>上。简单接介绍一下：</p>  <p><strong>1. IdleMonitor abstract class</strong></p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">IdleMonitor</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="comment">// ...</span></span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">event</span> EventHandler TimeoutEventHandler;</span><br><span class="line"></span><br><span class="line">       <span class="function"><span class="keyword">protected</span> <span class="title">IdleMonitor</span>(<span class="params">TimeSpan timeout</span>)</span>&#123;...&#125;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span>;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">Stop</span>(<span class="params"></span>)</span>;</span><br><span class="line">       <span class="comment">//...</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>&#160;</p><p>在WinForm和WPF的应用中，只需要通过IdleMonitorFactory得到一个IdleMonitor，然后调用Start()来开始监测，调用Stop()来结束监测。应用程序可以加event handler到TimeoutEventHandler上，这样当时间到了的时候就能被调到。</p><p><strong>2. IdleMonitor 的实现。</strong></p><p>实现了3中IdleMonitor。</p><p>（1）GetLastInputInfoIdleMonitor。</p><p>使用了<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms646272%28v=vs.85%29.aspx" target="_blank" rel="noopener">GetLastInputInfo</a> API。WinForm和WPF都能用。</p><p>（2）MessageFilterIdleMonitor。</p><p>使用了MessageFilter，过滤键盘和鼠标消息。所有的消息列表在<a href="http://wiki.winehq.org/List_Of_Windows_Messages" target="_blank" rel="noopener">这里</a>。WinForm和WPF都能用。</p><p>（3）ComponentDispatcherIdleMonitor。</p><p>用到了<a href="http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherhooks.operationposted.aspx" target="_blank" rel="noopener">Operationposted</a> and <a href="http://msdn.microsoft.com/en-us/library/system.windows.interop.componentdispatcher.threadidle%28v=vs.110%29.aspx" target="_blank" rel="noopener">ThreadIdle</a> 事件。只能在WPF中使用。</p><p>3. WinForm和WPF的使用例子。</p><p>combobox中是可选的3种IdleMonitor。</p><img src="/images/IdleMonitor1.png"><p>打开IdleMonitor。</p><img src="/images/IdleMonitor2.png"><p>时间到的时候会调用wpf中写好的event handler，抛如下对话框。</p><img src="/images/IdleMonitor3.png"><p>在WinForm中的例子类似。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;写了一个C#的小程序，用来监测用户是否离开应用程序，就像MSN，QQ的离开功能一样。代码在&lt;a href=&quot;https://github.com/fresky/IdleMonitor&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;github&lt;/a&gt;上。简
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>有空应该看看Rx是怎么玩的</title>
    <link href="http://fresky.github.io/2012/11/22/rx-is-open-source/"/>
    <id>http://fresky.github.io/2012/11/22/rx-is-open-source/</id>
    <published>2012-11-21T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.236Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.hanselman.com/blog/ReactiveExtensionsRxIsNowOpenSource.aspx" target="_blank" rel="noopener">Reactive Extensions (Rx) is now Open Source - Scott Hanselman</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.hanselman.com/blog/ReactiveExtensionsRxIsNowOpenSource.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Reactive Extensions (Rx) 
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>通过位操作简洁的写KB，MB，GB</title>
    <link href="http://fresky.github.io/2012/11/19/use-bit-operator-for-memory-allocation/"/>
    <id>http://fresky.github.io/2012/11/19/use-bit-operator-for-memory-allocation/</id>
    <published>2012-11-18T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.235Z</updated>
    
    <content type="html"><![CDATA[<p>1 &lt;&lt; 10 = KB, 1 &lt;&lt; 20 = MB, 1 &lt;&lt; 30 = GB … 所以如果想开一个2KB的buffer，可以写2&lt;&lt;10，比较简洁。<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;1 &amp;lt;&amp;lt; 10 = KB, 1 &amp;lt;&amp;lt; 20 = MB, 1 &amp;lt;&amp;lt; 30 = GB … 所以如果想开一个2KB的buffer，可以写2&amp;lt;&amp;lt;10，比较简洁。&lt;br&gt;&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>[ -~] 所有的可打印字符</title>
    <link href="http://fresky.github.io/2012/11/19/match-all-printable-character-in-regex/"/>
    <id>http://fresky.github.io/2012/11/19/match-all-printable-character-in-regex/</id>
    <published>2012-11-18T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.235Z</updated>
    
    <content type="html"><![CDATA[<p>正则表达式[ -~]， 可以匹配ASCII中所有的可打印字符。<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;正则表达式[ -~]， 可以匹配ASCII中所有的可打印字符。&lt;br&gt;&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="Regex" scheme="http://fresky.github.io/tags/Regex/"/>
    
  </entry>
  
  <entry>
    <title>20个最好的在线IDE</title>
    <link href="http://fresky.github.io/2012/11/17/top-20-online-ide/"/>
    <id>http://fresky.github.io/2012/11/17/top-20-online-ide/</id>
    <published>2012-11-16T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.235Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.netmagazine.com/features/top-20-online-coding-tools" target="_blank" rel="noopener">The top 20 online coding tools | Feature | .net magazine</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.netmagazine.com/features/top-20-online-coding-tools&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;The top 20 online coding tools | 
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>bug值多少钱（图片转自typemock）</title>
    <link href="http://fresky.github.io/2012/11/15/how-much-of-bug/"/>
    <id>http://fresky.github.io/2012/11/15/how-much-of-bug/</id>
    <published>2012-11-14T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.234Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.typemock.com/software-bugs-infographic" target="_blank" rel="noopener"> <img src="http://www.typemock.com/images/severity-of-bugs-are-we-doomed-infographic.jpg" alt="The Severity of Bugs: Are We Doomed Infographic"></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.typemock.com/software-bugs-infographic&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt; &lt;img src=&quot;http://www.typemock.com/images/seve
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>使用C# 4.5中提供的CallerInfo做log</title>
    <link href="http://fresky.github.io/2012/10/27/callerinfo-to-log-in-csharp-45/"/>
    <id>http://fresky.github.io/2012/10/27/callerinfo-to-log-in-csharp-45/</id>
    <published>2012-10-26T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.234Z</updated>
    
    <content type="html"><![CDATA[<p></p><p><a href="http://blogs.msdn.com/b/mvpawardprogram/archive/2012/09/04/caller-details.aspx" target="_blank" rel="noopener">Caller Details</a>讲了怎么用，我也在<a href="https://github.com/fresky/CallerInfo" target="_blank" rel="noopener">github</a>上放了个小例子。主要是用了[CallerMemberName]，[CallerLineNumber]，[CallerFilePathAttribute] 三个属性作为log函数的参数。</p><p></p><p></p><p>&nbsp;</p><p></p><div><embed id="lingoes_plugin_object" width="0" height="0" type="application/lingoes-npruntime-capture-word-plugin" hidden="true"></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://blogs.msdn.com/b/mvpawardprogram/archive/2012/09/04/caller-details.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Caller Det
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>OSQA不能搜索question的解决办法。</title>
    <link href="http://fresky.github.io/2012/10/26/how-to-make-osqa-search-work/"/>
    <id>http://fresky.github.io/2012/10/26/how-to-make-osqa-search-work/</id>
    <published>2012-10-25T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.234Z</updated>
    
    <content type="html"><![CDATA[<p></p><p>昨天搭建好的OSQA，发现不能搜索question，只能搜索tag和user，搜索后发现在settings_local.py中的disabled modules里面加上 mysqlfulltext 就好了。但是这样就不能全文搜索了，只能支持问题的搜索。</p><p></p><p></p><p><br>还得在研究研究。</p><p></p><div><embed id="lingoes_plugin_object" width="0" height="0" type="application/lingoes-npruntime-capture-word-plugin" hidden="true"></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;p&gt;昨天搭建好的OSQA，发现不能搜索question，只能搜索tag和user，搜索后发现在settings_local.py中的disabled modules里面加上 mysqlfulltext 就好了。但是这样就不能全文搜索了，只能支持问题的搜索。&lt;/p&gt;
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>用开源的OSQA在Windows上搭建Q&amp;A网站</title>
    <link href="http://fresky.github.io/2012/10/25/setup-osqa-in-windows/"/>
    <id>http://fresky.github.io/2012/10/25/setup-osqa-in-windows/</id>
    <published>2012-10-24T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.234Z</updated>
    
    <content type="html"><![CDATA[<p>今天想在Windows上搭建一个Q&amp;A网站，用的是开源的<a href="http://www.osqa.net/" target="_blank" rel="noopener">OSQA</a>，通过<a href="http://www.helicontech.com/articles/installing-osqa-on-windows-in-production/" target="_blank" rel="noopener">Installing OSQA on Windows in production | Helicon Tech Blog</a>安装在IIS上，非常简单。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天想在Windows上搭建一个Q&amp;amp;A网站，用的是开源的&lt;a href=&quot;http://www.osqa.net/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;OSQA&lt;/a&gt;，通过&lt;a href=&quot;http://www.helicontech.
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>C#的overload检查总是发生在编译时吗？</title>
    <link href="http://fresky.github.io/2012/10/25/csharp-overload-checking-not-always-performed-at-compiler-time/"/>
    <id>http://fresky.github.io/2012/10/25/csharp-overload-checking-not-always-performed-at-compiler-time/</id>
    <published>2012-10-24T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.233Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://stackoverflow.com/questions/12842712/why-does-the-c-sharp-compiler-not-fault-code-where-a-static-method-calls-an-inst?newsletter=1&amp;nlcode=55866|c739" target="_blank" rel="noopener">stackoverflow</a>上有人问为什么下面的代码可以编译成功，但是运行时报错：</p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title">Example</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Foo</span>(<span class="params"> <span class="keyword">dynamic</span> x </span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Bar(x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Bar</span>(<span class="params"> <span class="keyword">dynamic</span> x </span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>原因是C#如果参数中有dynamic，或者传进来的值是dynamic时，overload的检查发生在运行时，而不是编译时。<a href="http://msdn.microsoft.com/en-us/library/dd264736.aspx" target="_blank" rel="noopener">MSDN</a>上有详细的说明。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/12842712/why-does-the-c-sharp-compiler-not-fault-code-where-a-static-method-calls-an-inst?new
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>一个超cool的单反在线模拟网站</title>
    <link href="http://fresky.github.io/2012/10/24/cool-slr-simulation-website/"/>
    <id>http://fresky.github.io/2012/10/24/cool-slr-simulation-website/</id>
    <published>2012-10-23T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.233Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://camerasim.com/camera-simulator/" target="_blank" rel="noopener">CameraSim simulates a digital SLR camera - SLR Photography Demystified</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://camerasim.com/camera-simulator/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CameraSim simulates a digital SLR camera - SLR Photograph
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>.NET反编译的可视化插件-Assembly Visualizer</title>
    <link href="http://fresky.github.io/2012/10/24/csharp-decompiler-plugin-assembly-visualizer/"/>
    <id>http://fresky.github.io/2012/10/24/csharp-decompiler-plugin-assembly-visualizer/</id>
    <published>2012-10-23T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.233Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.denismarkelov.com/p/assembly-visualizer.html" target="_blank" rel="noopener">Denis Markelov: Assembly Visualizer</a><br><blockquote></blockquote>可以在<a href="https://github.com/icsharpcode/ILSpy/wiki/Plugins" target="_blank" rel="noopener">Plugins · icsharpcode/ILSpy Wiki</a>找到更多的ILSpy插件。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.denismarkelov.com/p/assembly-visualizer.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Denis Markelov: Assembly Visualizer&lt;/a&gt;&lt;
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>全球实时的IT 攻击地图，很cool</title>
    <link href="http://fresky.github.io/2012/10/23/visualize-worldwide-attack-in-real-time/"/>
    <id>http://fresky.github.io/2012/10/23/visualize-worldwide-attack-in-real-time/</id>
    <published>2012-10-22T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.233Z</updated>
    
    <content type="html"><![CDATA[<p>HoneyMap - Visualizing Worldwide Attacks in Real-Time <a href="http://map.honeynet.org/" target="_blank" rel="noopener">HoneyMap</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;HoneyMap - Visualizing Worldwide Attacks in Real-Time &lt;a href=&quot;http://map.honeynet.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;HoneyMap&lt;/a&gt;&lt;br&gt;&lt;
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>用Visual Studio做profiling</title>
    <link href="http://fresky.github.io/2012/10/19/profiling-with-visual-studio/"/>
    <id>http://fresky.github.io/2012/10/19/profiling-with-visual-studio/</id>
    <published>2012-10-18T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.233Z</updated>
    
    <content type="html"><![CDATA[<p>步骤可以参见：<a href="http://msdn.microsoft.com/en-us/library/ms182372.aspx" target="_blank" rel="noopener">Beginners Guide to Performance Profiling</a><br>刚才试了一下，挺好用的。而且能attach到process上去，很方便就能找到性能瓶颈，C#和C++都行。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;步骤可以参见：&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ms182372.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Beginners Guide to Performance Prof
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>关于scrum的一些有趣的讨论</title>
    <link href="http://fresky.github.io/2012/10/19/discussion-about-scrum/"/>
    <id>http://fresky.github.io/2012/10/19/discussion-about-scrum/</id>
    <published>2012-10-18T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.232Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.infoq.com/news/2012/09/moving-beyond-scrum" target="_blank" rel="noopener">Moving Beyond Scrum</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.infoq.com/news/2012/09/moving-beyond-scrum&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Moving Beyond Scrum&lt;/a&gt;&lt;br&gt;&lt;blockquote&gt;&lt;/b
      
    
    </summary>
    
    
      <category term="Agile" scheme="http://fresky.github.io/tags/Agile/"/>
    
  </entry>
  
  <entry>
    <title>看看stackoverflow上面这些欢乐的注释吧</title>
    <link href="http://fresky.github.io/2012/10/17/funny-comments/"/>
    <id>http://fresky.github.io/2012/10/17/funny-comments/</id>
    <published>2012-10-16T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.232Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://stackoverflow.com/questions/184618/what-is-the-best-comment-in-source-code-you-have-ever-encountered" target="_blank" rel="noopener">polls - What is the best comment in source code you have ever encountered? - Stack Overflow</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/184618/what-is-the-best-comment-in-source-code-you-have-ever-encountered&quot; target=&quot;_blank&quot; rel
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>推荐一个firefox插件，可以在douban电影里显示imdb评分</title>
    <link href="http://fresky.github.io/2012/10/17/firefox-plugin-display-imdb-in-douban/"/>
    <id>http://fresky.github.io/2012/10/17/firefox-plugin-display-imdb-in-douban/</id>
    <published>2012-10-16T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.232Z</updated>
    
    <content type="html"><![CDATA[<p>推荐一个firefox插件，可以在douban电影里显示imdb评分。<br><a href="http://vasters.com/clemensv/2012/09/06/Are+You+Catching+Falling+Knives.aspx" target="_blank" rel="noopener">http://userscripts.org/scripts/show/103552</a><br>也有chrom版本的，<a href="https://chrome.google.com/webstore/detail/doubanimdb/nfibbjnhkbjlgjaojglmmibdjicidini" target="_blank" rel="noopener">https://chrome.google.com/webstore/detail/doubanimdb/nfibbjnhkbjlgjaojglmmibdjicidini</a><br><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;推荐一个firefox插件，可以在douban电影里显示imdb评分。&lt;br&gt;&lt;a href=&quot;http://vasters.com/clemensv/2012/09/06/Are+You+Catching+Falling+Knives.aspx&quot; target=&quot;_bla
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>C#中不能catch Fatal的exception</title>
    <link href="http://fresky.github.io/2012/10/15/fatal-exceptions-you-can-not-catch-in-csharp/"/>
    <id>http://fresky.github.io/2012/10/15/fatal-exceptions-you-can-not-catch-in-csharp/</id>
    <published>2012-10-14T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.232Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://vasters.com/clemensv/2012/09/06/Are+You+Catching+Falling+Knives.aspx" target="_blank" rel="noopener">Clemens Vasters - Are you catching falling knives?</a>里给了一个判断C#的exception是不是fatal的代码，可以参考参考。</p>  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">IsFatal</span>(<span class="params"><span class="keyword">this</span> Exception exception</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (exception != <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (exception <span class="keyword">as</span> OutOfMemoryException != <span class="literal">null</span> &amp;&amp; exception <span class="keyword">as</span> InsufficientMemoryException == <span class="literal">null</span> || exception <span class="keyword">as</span> ThreadAbortException != <span class="literal">null</span> || </span><br><span class="line">            exception <span class="keyword">as</span> AccessViolationException != <span class="literal">null</span> || exception <span class="keyword">as</span> SEHException != <span class="literal">null</span> || exception <span class="keyword">as</span> StackOverflowException != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (exception <span class="keyword">as</span> TypeInitializationException == <span class="literal">null</span> &amp;&amp; exception <span class="keyword">as</span> TargetInvocationException == <span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            exception = exception.InnerException;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://vasters.com/clemensv/2012/09/06/Are+You+Catching+Falling+Knives.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Clemens Vasters - Ar
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>根据代码的现状调整估计</title>
    <link href="http://fresky.github.io/2012/10/11/check-list-for-estimation-on-legacy-code/"/>
    <id>http://fresky.github.io/2012/10/11/check-list-for-estimation-on-legacy-code/</id>
    <published>2012-10-10T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.231Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.mlibby.com/grading-code/" target="_blank" rel="noopener">Grading Code</a>这篇文章说在legacy code（遗留代码）中做开发时估计要根据现有代码的状况来做个调整了，给了如下11个评估标准：<br><ol><li>代码有单元测试，并且测试可以跑过。</li><li>单元测试覆盖了主要的应用逻辑。</li><li>业务逻辑和数据存储逻辑分开。</li><li>业务逻辑和显示逻辑分开。</li><li>大系统中代码被合适的分到了不同的项目中。</li><li>代码编译没有warning和error。</li><li>代码符合某种编码规范。</li><li>没有长方法。（作者认为应该小于32行，如果大于64行就是长方法，如果在32-64行之间，不能有超过2层if/for等。</li><li>封装。在OO中行为属于自己的类。</li><li>没有滥用pattern。比如只有一个strategy时用strategy pattern。</li><li>没有在该用pattern的时候没有用pattern。<br></li></ol></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.mlibby.com/grading-code/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Grading Code&lt;/a&gt;这篇文章说在legacy code（遗留代码）中做开发时估计要根据现有代码的状况来做个调
      
    
    </summary>
    
    
      <category term="Development" scheme="http://fresky.github.io/tags/Development/"/>
    
  </entry>
  
  <entry>
    <title>飞信登录不了，错误码10032002 的解决办法</title>
    <link href="http://fresky.github.io/2012/10/10/fix-fetion-login-issue/"/>
    <id>http://fresky.github.io/2012/10/10/fix-fetion-login-issue/</id>
    <published>2012-10-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.231Z</updated>
    
    <content type="html"><![CDATA[<pre class="reply-text mb10" id="content-954086387" data-accusearea="aContent">在登录界面的下面，打开“网络设置”按钮，在“网络联接”中选择“更多设置”，“登录协议”中选择“http协议”，“确定”就行了。 </pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;pre class=&quot;reply-text mb10&quot; id=&quot;content-954086387&quot; data-accusearea=&quot;aContent&quot;&gt;在登录界面的下面，打开“网络设置”按钮，在“网络联接”中选择“更多设置”，“登录协议”中选择“http协议”，“确定”就行
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>软件开发10个致命错误（转自Construx）</title>
    <link href="http://fresky.github.io/2012/10/10/10-mistakes-in-software-development/"/>
    <id>http://fresky.github.io/2012/10/10/10-mistakes-in-software-development/</id>
    <published>2012-10-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.231Z</updated>
    
    <content type="html"><![CDATA[<p>（转自<a href="http://www.construx.com/" target="_blank">Construx</a>，可以从<a href="http://info.construx.com/rs/construx/images/Poster_Tombstone.pdf下载poster）" target="_blank" rel="noopener">http://info.construx.com/rs/construx/images/Poster_Tombstone.pdf下载poster）</a><br><ol><li>混淆估计和目标的区别</li><li>过度乐观的时间表</li><li>不切实际的期望</li><li>一厢情愿</li><li>克扣质量保证</li><li>过度多任务</li><li>功能蔓延</li><li>吵闹拥挤的办公室</li><li>压力下放弃规划</li><li>风险管理不够<br></li></ol><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;（转自&lt;a href=&quot;http://www.construx.com/&quot; target=&quot;_blank&quot;&gt;Construx&lt;/a&gt;，可以从&lt;a href=&quot;http://info.construx.com/rs/construx/images/Poster_Tombsto
      
    
    </summary>
    
    
      <category term="Development" scheme="http://fresky.github.io/tags/Development/"/>
    
  </entry>
  
  <entry>
    <title>用windows7自带的Problem Steps Recorder制作错误报告</title>
    <link href="http://fresky.github.io/2012/10/10/report-bugs-with-problem-steps-recorder-in-win7/"/>
    <id>http://fresky.github.io/2012/10/10/report-bugs-with-problem-steps-recorder-in-win7/</id>
    <published>2012-10-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.231Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.hanselman.com/blog/HelpYourUsersRecordAndReportBugsWithTheProblemStepsRecorder.aspx" target="_blank" rel="noopener">Help your users record and report bugs with the Problem Steps Recorder - Scott Hanselman</a><br>Windows7和8自带的，开始，敲 PSR，就行了，然后开始录制，每次用户点击就做个抓屏，最后生成一个.mht文件，挺方便的。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.hanselman.com/blog/HelpYourUsersRecordAndReportBugsWithTheProblemStepsRecorder.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;H
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>c#中判断一个process是32bit还是64bit</title>
    <link href="http://fresky.github.io/2012/10/09/check-process-is-64bit-in-csharp/"/>
    <id>http://fresky.github.io/2012/10/09/check-process-is-64bit-in-csharp/</id>
    <published>2012-10-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.230Z</updated>
    
    <content type="html"><![CDATA[<p>下面的代码能判断一个process是32bit还是64bit.</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title">ProcessDetector</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">IsWin64</span>(<span class="params">Process process</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (Environment.Is64BitOperatingSystem)</span><br><span class="line">            &#123;</span><br><span class="line">                IntPtr processHandle;</span><br><span class="line">                <span class="keyword">bool</span> retVal;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    processHandle = Process.GetProcessById(process.Id).Handle;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> Win32API.IsWow64Process(processHandle, <span class="keyword">out</span> retVal) &amp;&amp; retVal;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">Win32API</span></span><br><span class="line">    &#123;</span><br><span class="line">        [<span class="meta">DllImport(<span class="meta-string">"kernel32.dll"</span>, SetLastError = true, CallingConvention = CallingConvention.Winapi)</span>]</span><br><span class="line">        [<span class="meta">return: MarshalAs(UnmanagedType.Bool)</span>]</span><br><span class="line">        <span class="function"><span class="keyword">internal</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">bool</span> <span class="title">IsWow64Process</span>(<span class="params">[In] IntPtr process, [Out] <span class="keyword">out</span> <span class="keyword">bool</span> wow64Process</span>)</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;下面的代码能判断一个process是32bit还是64bit.&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;s
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>怎么用python和javascript把多张png拼成一个gif</title>
    <link href="http://fresky.github.io/2012/10/09/combine-multiple-png-to-gif-with-python-and-javascript/"/>
    <id>http://fresky.github.io/2012/10/09/combine-multiple-png-to-gif-with-python-and-javascript/</id>
    <published>2012-10-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.230Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.sublimetext.com/~jps/animated_gifs_the_hard_way.html" target="_blank" rel="noopener">Animated GIFs the Hard Way</a><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.sublimetext.com/~jps/animated_gifs_the_hard_way.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Animated GIFs the Hard Way&lt;/a&gt;&lt;b
      
    
    </summary>
    
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
      <category term="Python" scheme="http://fresky.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>.NET assembly结构</title>
    <link href="http://fresky.github.io/2012/10/09/dot-net-assembly-structure/"/>
    <id>http://fresky.github.io/2012/10/09/dot-net-assembly-structure/</id>
    <published>2012-10-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.231Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://blog.vuscode.com/malovicn/archive/2007/12/24/net-foundations-net-assembly-structure.aspx" target="_blank" rel="noopener">.NET assembly structure</a>这篇文章讲述的很清楚。正在看CLR via C#这本书，随后会把看书的心得总结总结写出来。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://blog.vuscode.com/malovicn/archive/2007/12/24/net-foundations-net-assembly-structure.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>IntelliTrace Collector for Visual Studio 2012</title>
    <link href="http://fresky.github.io/2012/10/08/intellitrace-collector-for-visual-studio-2012/"/>
    <id>http://fresky.github.io/2012/10/08/intellitrace-collector-for-visual-studio-2012/</id>
    <published>2012-10-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.230Z</updated>
    
    <content type="html"><![CDATA[<p>可以在production环境下手机IIS下的应用的intellitrace，用来debug。暂时没有需求，不过还是记在这里备用吧。</p><p><a href="http://www.microsoft.com/en-us/download/details.aspx?id=30665&quot;" target="_blank" rel="noopener">Download: IntelliTrace Collector for Visual Studio 2012 - Microsoft Download Center - Download Details</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;可以在production环境下手机IIS下的应用的intellitrace，用来debug。暂时没有需求，不过还是记在这里备用吧。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.microsoft.com/en-us/download/details.aspx?i
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>Visual studio 可视化调试扩展。</title>
    <link href="http://fresky.github.io/2012/10/08/debug-canvas-visual-studio-extension/"/>
    <id>http://fresky.github.io/2012/10/08/debug-canvas-visual-studio-extension/</id>
    <published>2012-10-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.230Z</updated>
    
    <content type="html"><![CDATA[<p>看了看<a href="http://msdn.microsoft.com/en-us/devlabs/debuggercanvas" target="_blank" rel="noopener">Debugger Canvas</a>的介绍视频，挺酷的，但是暂时还没有2012的版本，登出了2012的，我也试试。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;看了看&lt;a href=&quot;http://msdn.microsoft.com/en-us/devlabs/debuggercanvas&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Debugger Canvas&lt;/a&gt;的介绍视频，挺酷的，但是暂时还没有20
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>为什么有+0和-0？（zz）</title>
    <link href="http://fresky.github.io/2012/10/06/why-we-have-minus-zero/"/>
    <id>http://fresky.github.io/2012/10/06/why-we-have-minus-zero/</id>
    <published>2012-10-05T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.229Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.johndcook.com/blog/2010/06/15/why-computers-have-signed-zero/" target="_blank" rel="noopener">Why computers have two zeros: +0 and -0 — The Endeavour</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.johndcook.com/blog/2010/06/15/why-computers-have-signed-zero/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Why computers have two 
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>怎么回答“在C#里这样和那样写有什么区别”</title>
    <link href="http://fresky.github.io/2012/10/02/whats-the-difference-between-doing-this-and-that-in-charp/"/>
    <id>http://fresky.github.io/2012/10/02/whats-the-difference-between-doing-this-and-that-in-charp/</id>
    <published>2012-10-01T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.229Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://blog.filipekberg.se/2012/09/24/whats-the-difference-between-doing-this-and-that-in-c/" target="_blank" rel="noopener">What’s the difference between doing this and that in C#?</a>讲了怎么回答“在C#里这样和那样写有什么区别”，挺有意思的，值得借鉴，发现<a href="http://www.linqpad.net/" target="_blank" rel="noopener">LINQPad</a>真是个好东西，以后应该多用用。可以参看<a href="http://blog.filipekberg.se/2012/09/17/use-linqpad-for-more-than-linq/" target="_blank" rel="noopener">Use LINQPad for more than LINQ</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://blog.filipekberg.se/2012/09/24/whats-the-difference-between-doing-this-and-that-in-c/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Wha
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>一个有用的coding checklist（转载自code complete作者公司网站）</title>
    <link href="http://fresky.github.io/2012/09/29/coding-checklist-from-construx/"/>
    <id>http://fresky.github.io/2012/09/29/coding-checklist-from-construx/</id>
    <published>2012-09-28T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.229Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://info.construx.com/rs/construx/images/CodingChecklist_082411.pdf" target="_blank" rel="noopener">CodingChecklist_082411.pdf (application/pdf Object)</a><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://info.construx.com/rs/construx/images/CodingChecklist_082411.pdf&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CodingChecklist_082411.pd
      
    
    </summary>
    
    
      <category term="Development" scheme="http://fresky.github.io/tags/Development/"/>
    
  </entry>
  
  <entry>
    <title>C# XMLSerialize 去掉xml声明和xml namespace</title>
    <link href="http://fresky.github.io/2012/09/28/remove-xml-declaration-and-xml-namespace-in-c#-xml-serializer/"/>
    <id>http://fresky.github.io/2012/09/28/remove-xml-declaration-and-xml-namespace-in-c#-xml-serializer/</id>
    <published>2012-09-27T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.228Z</updated>
    
    <content type="html"><![CDATA[<p>下面的代码可以在C# XMLSerialize 时去掉xml声明和xml namespace。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OutputXml</span>(<span class="params"><span class="keyword">string</span> xmlFilePath, ObjectToSerialize  objectToSerialize </span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">XmlSerializer xmlSerializer = <span class="keyword">new</span> XmlSerializer(<span class="keyword">typeof</span>(ObjectToSerialize ));</span><br><span class="line">XmlSerializerNamespaces ns = <span class="keyword">new</span> XmlSerializerNamespaces();</span><br><span class="line">ns.Add(<span class="string">""</span>, <span class="string">""</span>);</span><br><span class="line">XmlWriterSettings settings = <span class="keyword">new</span> XmlWriterSettings &#123;OmitXmlDeclaration = <span class="literal">true</span>, Indent = <span class="literal">true</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> (XmlWriter xmlWriter = XmlWriter.Create(xmlFilePath, settings))</span><br><span class="line">&#123;</span><br><span class="line">xmlSerializer.Serialize(xmlWriter, objectToSerialize, ns);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;下面的代码可以在C# XMLSerialize 时去掉xml声明和xml namespace。&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>BuildZipper——给c#项目添加postbuildevent，每次build完把build结果做个zip放在solution目录。</title>
    <link href="http://fresky.github.io/2012/09/10/buildzipper-zip-build-result-for-csharp-project/"/>
    <id>http://fresky.github.io/2012/09/10/buildzipper-zip-build-result-for-csharp-project/</id>
    <published>2012-09-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.228Z</updated>
    
    <content type="html"><![CDATA[<p>最近几次发布项目到github上，都手动把最后build的结果做个zip，传上去，供直接下载binary用。觉得很费事，就写了个小程序，BuildZipper。<br>源代码在<a href="https://github.com/fresky/BuildZipper" target="_blank" rel="noopener">github</a>上，运行文件<a href="https://github.com/fresky/BuildZipper/blob/master/BuildZipper.zip" target="_blank" rel="noopener">这里</a>下载。<br>用了<a href="http://dotnetzip.codeplex.com/" target="_blank" rel="noopener">DotNetZip Library</a>来做zip，用了C#的<a href="http://msdn.microsoft.com/en-us/library/microsoft.build.evaluation.project.aspx" target="_blank" rel="noopener">Project</a>来操作project文件。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近几次发布项目到github上，都手动把最后build的结果做个zip，传上去，供直接下载binary用。觉得很费事，就写了个小程序，BuildZipper。&lt;br&gt;源代码在&lt;a href=&quot;https://github.com/fresky/BuildZipper&quot; t
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>FreeEverything-基于everything的一个简易磁盘清理工具</title>
    <link href="http://fresky.github.io/2012/09/10/freeverything-simple-disk-cleanup-tool-based-on-everything/"/>
    <id>http://fresky.github.io/2012/09/10/freeverything-simple-disk-cleanup-tool-based-on-everything/</id>
    <published>2012-09-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.228Z</updated>
    
    <content type="html"><![CDATA[<p>用Visual Studiode attach to process调试时，无论你有没有设置symbol path，Visual Studio都会把下载的symbol乱放，特别是会放到solution下面，导致文件夹很乱，所以写了一个小工具来删除这些symbol文件夹。同时也能删除resharper和mstest的临时文件。</p><br><p><a href="http://www.voidtools.com/" target="_blank" rel="noopener">Everything</a>是一个非常快的磁盘搜索，正好基于他的<a href="http://support.voidtools.com/everything/SDK" target="_blank" rel="noopener">SDK</a>来做这个小工具。</p><br><p>界面如下：</p><img src="/images/freeeverything.png"><p>搜索因为是基于Everything的，所以很快。可以增加新的过滤，用正则表达式搜索，这些过滤存放在启动目录下的GarbageCan.xml里面。还能对搜索到的结果计算大小（如果文件很多会比较慢）。</p><br><p>源代码放在<a href="https://github.com/fresky/FreeEverything" target="_blank" rel="noopener">Github</a>上，可执行文件在<a href="https://github.com/fresky/FreeEverything/blob/master/FreeEverything.zip" target="_blank" rel="noopener">这里</a>下载。</p><br><p>1. 使用<a href="http://www.galasoft.ch/mvvm/" target="_blank" rel="noopener">MVVMLight</a>这个mvvm的框架，这个框架很容易上手。</p><br><p>2. 使用XmlSerializer存储filter配置文件。</p><br><p>3. 检查everything是否启动。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">StartEverything</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>      &#123;</span><br><span class="line">          Regex regex = <span class="keyword">new</span> Regex(<span class="string">@"Everything([-.0-9])"</span>);</span><br><span class="line">          <span class="keyword">bool</span> found = <span class="literal">false</span>;</span><br><span class="line">          <span class="keyword">foreach</span> (<span class="keyword">var</span> process <span class="keyword">in</span> Process.GetProcesses())</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="keyword">if</span> (regex.Match(process.ProcessName).Success)</span><br><span class="line">              &#123;</span><br><span class="line">                  found = <span class="literal">true</span>;</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span> (!found)</span><br><span class="line">          &#123;</span><br><span class="line">              ProcessStartInfo processStartInfo = <span class="keyword">new</span> ProcessStartInfo(<span class="string">@"ThirdParty\Everything.exe"</span>);</span><br><span class="line">              processStartInfo.CreateNoWindow = <span class="literal">true</span>;</span><br><span class="line">              processStartInfo.WindowStyle = ProcessWindowStyle.Hidden;</span><br><span class="line">              Process.Start(processStartInfo);</span><br><span class="line">              m_EverythingLaunch = <span class="literal">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>4. 调用Everything SDK. Everything SDK上面就有C#的示例project，非常简单。</p><br><p>5. 删除文件。需要处理readonly的问题。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">deletePath</span>(<span class="params"><span class="keyword">string</span> path</span>)</span></span><br><span class="line"><span class="function"></span>      &#123;</span><br><span class="line">          FileSystemInfo fsi;</span><br><span class="line">          <span class="keyword">if</span> (File.Exists(path))</span><br><span class="line">          &#123;</span><br><span class="line">              fsi = <span class="keyword">new</span> FileInfo(path);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span> <span class="keyword">if</span> (Directory.Exists(path))</span><br><span class="line">          &#123;</span><br><span class="line">              fsi = <span class="keyword">new</span> DirectoryInfo(path);</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">          &#123;</span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          deleteFileSystemInfo(fsi);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">deleteFileSystemInfo</span>(<span class="params">FileSystemInfo fsi</span>)</span></span><br><span class="line"><span class="function"></span>      &#123;</span><br><span class="line"></span><br><span class="line">          fsi.Attributes = FileAttributes.Normal;</span><br><span class="line">          <span class="keyword">var</span> di = fsi <span class="keyword">as</span> DirectoryInfo;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (di != <span class="literal">null</span>)</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="keyword">foreach</span> (<span class="keyword">var</span> dirInfo <span class="keyword">in</span> di.GetFileSystemInfos())</span><br><span class="line">              &#123;</span><br><span class="line">                  deleteFileSystemInfo(dirInfo);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          fsi.Delete();</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>6. 计算文件大小。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CalculateSize</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>      &#123;</span><br><span class="line">          <span class="keyword">if</span>(Directory.Exists(Path))</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="keyword">double</span> result = <span class="number">0</span>;</span><br><span class="line">              <span class="keyword">foreach</span> (<span class="function">FileInfo file <span class="keyword">in</span> new <span class="title">DirectoryInfo</span>(<span class="params">Path</span>).<span class="title">GetFiles</span>(<span class="params"><span class="string">"*"</span>, SearchOption.AllDirectories</span>))</span></span><br><span class="line"><span class="function">                  result</span> = result + file.Length;</span><br><span class="line">              Size = result;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span> <span class="keyword">if</span> (File.Exists(Path))</span><br><span class="line">          &#123;</span><br><span class="line">              Size = <span class="keyword">new</span> FileInfo(Path).Length;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;用Visual Studiode attach to process调试时，无论你有没有设置symbol path，Visual Studio都会把下载的symbol乱放，特别是会放到solution下面，导致文件夹很乱，所以写了一个小工具来删除这些symbol文件夹。同时
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>在浏览器中运行C#</title>
    <link href="http://fresky.github.io/2012/09/10/run-csharp-in-browser/"/>
    <id>http://fresky.github.io/2012/09/10/run-csharp-in-browser/</id>
    <published>2012-09-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.228Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://tirania.org/blog/archive/2012/Sep-06.html" target="_blank" rel="noopener">2012 Update: Running C# on the Browser - Miguel de Icaza</a>， 这篇文章介绍了怎么把C#代码编译成javascript。<br><br><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://tirania.org/blog/archive/2012/Sep-06.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;2012 Update: Running C# on the Browser - Miguel
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
  </entry>
  
  <entry>
    <title>提高C++/C代码的安全性——banned.h</title>
    <link href="http://fresky.github.io/2012/09/05/microsoft-free-security-tools-banned-for-cpp/"/>
    <id>http://fresky.github.io/2012/09/05/microsoft-free-security-tools-banned-for-cpp/</id>
    <published>2012-09-04T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.227Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://blogs.technet.com/b/security/archive/2012/08/30/microsoft-s-free-security-tools-banned-h.aspx" target="_blank" rel="noopener">Microsoft’s Free Security Tools – banned.h - Microsoft Security Blog - Site Home - TechNet Blogs</a><br>banned.h是微软的一个头文件，通过include这个头文件，如果在代码中使用了有安全漏洞的函数，编译时会报错。<br>从这里下载：<a href="http://go.microsoft.com/?linkid=9707345" target="_blank" rel="noopener">http://go.microsoft.com/?linkid=9707345</a><br><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://blogs.technet.com/b/security/archive/2012/08/30/microsoft-s-free-security-tools-banned-h.aspx&quot; target=&quot;_blank&quot; rel=&quot;noope
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>把C#一个文件中的多个类自动分到各自的文件中</title>
    <link href="http://fresky.github.io/2012/08/31/move-multiple-types-to-files-with-resharper/"/>
    <id>http://fresky.github.io/2012/08/31/move-multiple-types-to-files-with-resharper/</id>
    <published>2012-08-30T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.227Z</updated>
    
    <content type="html"><![CDATA[<p>今天又发现了一个ReSharper的很cool的功能，在文件上右键，Refactor，然后&quot;Move Types Into Matching Files…”可以自动把这个文件中的多个类分别放到不同的文件中，并且帮你改好名字。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天又发现了一个ReSharper的很cool的功能，在文件上右键，Refactor，然后&amp;quot;Move Types Into Matching Files…”可以自动把这个文件中的多个类分别放到不同的文件中，并且帮你改好名字。&lt;/p&gt;
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>VS2012很cool的新功能：检查重复代码</title>
    <link href="http://fresky.github.io/2012/08/21/find-cloned-code-in-csharp-with-visual-studio-2012/"/>
    <id>http://fresky.github.io/2012/08/21/find-cloned-code-in-csharp-with-visual-studio-2012/</id>
    <published>2012-08-20T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.227Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://channel9.msdn.com/Series/Visual-Studio-2012-Premium-and-Ultimate-Overview/Visual-Studio-Ultimate-2012-Finding-and-managing-cloned-code" target="_blank" rel="noopener">Visual Studio Ultimate 2012: Finding and managing cloned code | Visual Studio 2012 Premium and Ultimate Overview | Channel 9</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://channel9.msdn.com/Series/Visual-Studio-2012-Premium-and-Ultimate-Overview/Visual-Studio-Ultimate-2012-Finding-and-managin
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>对msi的安装包 Run As Administrator</title>
    <link href="http://fresky.github.io/2012/08/17/run-as-administrator-for-msi/"/>
    <id>http://fresky.github.io/2012/08/17/run-as-administrator-for-msi/</id>
    <published>2012-08-16T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.227Z</updated>
    
    <content type="html"><![CDATA[<p>刚才有个同事装msi一直不能成功，抛错：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error 1001 the directory name is invalid</span><br></pre></td></tr></table></figure></p><p>发现是没有用管理员权限运行安装包，对于是exe的，可以直接右键“Run As Administrator”。</p><p>对于msi的，需要这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msiexec /a your.msi</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;刚才有个同事装msi一直不能成功，抛错：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td 
      
    
    </summary>
    
    
      <category term="Installer" scheme="http://fresky.github.io/tags/Installer/"/>
    
  </entry>
  
  <entry>
    <title>WPF中Cannot find resource named &#39;{XXX}&#39;的解决办法</title>
    <link href="http://fresky.github.io/2012/08/14/solve-can-not-find-resource-named-in-wpf/"/>
    <id>http://fresky.github.io/2012/08/14/solve-can-not-find-resource-named-in-wpf/</id>
    <published>2012-08-13T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.226Z</updated>
    
    <content type="html"><![CDATA[<p>今天遇到了一个wpf的bug，如果在App.xaml中没有指定StartupUri（而是想通过override OnStartup 来指定StartupUri），并且只有一个resource的话，会遇到Cannot find resource named ‘{XXX}’的错误。</p><p>解决这个问题的简单办法有两个：</p><ol><li>在App.xaml中指定一个<code>x:Name=&quot;App&quot;</code></li><li>在Resource中添加一个没用的resource，<code>&lt;Style x:Key=&quot;unused&quot; /&gt;</code></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天遇到了一个wpf的bug，如果在App.xaml中没有指定StartupUri（而是想通过override OnStartup 来指定StartupUri），并且只有一个resource的话，会遇到Cannot find resource named ‘{XXX}’的错
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>c++ construcor中需要注意的坑</title>
    <link href="http://fresky.github.io/2012/08/10/pay-attention-to-cpp-constructor/"/>
    <id>http://fresky.github.io/2012/08/10/pay-attention-to-cpp-constructor/</id>
    <published>2012-08-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.226Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://stackoverflow.com/questions/11691021/why-does-this-call-the-default-constructor?newsletter=1&amp;nlcode=55866%7cc739" target="_blank" rel="noopener">c++ - Why does this call the default constructor? - Stack Overflow</a>讲了几个c++ constructor中要注意的坑。<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/11691021/why-does-this-call-the-default-constructor?newsletter=1&amp;amp;nlcode=55866%7cc739&quot; tar
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>把excel搬到任何地方：）</title>
    <link href="http://fresky.github.io/2012/08/09/bring-excel-everywhere/"/>
    <id>http://fresky.github.io/2012/08/09/bring-excel-everywhere/</id>
    <published>2012-08-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.226Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://blogs.office.com/b/microsoft-excel/archive/2012/08/02/the-excel-button-bringing-excel-everywhere.aspx" target="_blank" rel="noopener">Excel Blog - The Excel Button - Bringing Excel Everywhere</a>，太cool了：）<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://blogs.office.com/b/microsoft-excel/archive/2012/08/02/the-excel-button-bringing-excel-everywhere.aspx&quot; target=&quot;_blank&quot; re
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>resharper的convert if to switch太好用了</title>
    <link href="http://fresky.github.io/2012/08/09/convert-if-to-switch-with-resharper/"/>
    <id>http://fresky.github.io/2012/08/09/convert-if-to-switch-with-resharper/</id>
    <published>2012-08-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.226Z</updated>
    
    <content type="html"><![CDATA[<p>在试着用多态，子类来解决<code>if/else</code>的问题时，resharper的<code>convert if to switch</code>太好用了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在试着用多态，子类来解决&lt;code&gt;if/else&lt;/code&gt;的问题时，resharper的&lt;code&gt;convert if to switch&lt;/code&gt;太好用了。&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>Visual Studio 2012RC unit test 改进</title>
    <link href="http://fresky.github.io/2012/08/09/unit-test-improvement-in-visual-stuido-2012/"/>
    <id>http://fresky.github.io/2012/08/09/unit-test-improvement-in-visual-stuido-2012/</id>
    <published>2012-08-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.226Z</updated>
    
    <content type="html"><![CDATA[<p>Visual Studio 2012 RC在unit test方面做了很多改进，具体见这里：</p>  <p><a title="http://blogs.msdn.com/b/visualstudioalm/archive/2012/06/19/visual-studio-2012-rc-what-s-new-in-code-coverage.aspx" href="http://blogs.msdn.com/b/visualstudioalm/archive/2012/06/19/visual-studio-2012-rc-what-s-new-in-code-coverage.aspx" target="_blank" rel="noopener">http://blogs.msdn.com/b/visualstudioalm/archive/2012/06/19/visual-studio-2012-rc-what-s-new-in-code-coverage.aspx</a></p>  <img src="/images/vs2012unittestcsharp.png"><img src="/images/vs2012unittestcpp.png">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Visual Studio 2012 RC在unit test方面做了很多改进，具体见这里：&lt;/p&gt;  &lt;p&gt;&lt;a title=&quot;http://blogs.msdn.com/b/visualstudioalm/archive/2012/06/19/visual-studio
      
    
    </summary>
    
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
  </entry>
  
  <entry>
    <title>WPF中radiobutton 的 data binding方法</title>
    <link href="http://fresky.github.io/2012/08/06/how-to-data-binding-radio-button-in-wpf/"/>
    <id>http://fresky.github.io/2012/08/06/how-to-data-binding-radio-button-in-wpf/</id>
    <published>2012-08-05T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.225Z</updated>
    
    <content type="html"><![CDATA[<p>WPF中的radiobox通过data binding绑定到一个bool属性后，如下所示，尽管UI可以正确的显示，但是data binding的属性不能正确的更新。比如user点了No之后属性UserChoice还是True。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;RadioButton Content=<span class="string">"Yes"</span> IsChecked=<span class="string">"&#123;Binding UserChoice&#125;"</span>/&gt;</span><br><span class="line">&lt;RadioButton Content=<span class="string">"No"</span> /&gt;</span><br></pre></td></tr></table></figure><p>需要用如下的方式：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;RadioButton Content=<span class="string">"Yes"</span> IsChecked=<span class="string">"&#123;Binding UserChoice&#125;"</span>/&gt;</span><br><span class="line">&lt;RadioButton Content=<span class="string">"No"</span> IsChecked=<span class="string">"&#123;Binding UserChoice, Converter=&#123;StaticResource radioConverter&#125;&#125;"</span>/&gt;</span><br></pre></td></tr></table></figure></p><p><code>radioConverter</code>如下：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">RadioButtonConverter</span> : <span class="title">IValueConverter</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">object</span> <span class="title">Convert</span>(<span class="params"><span class="keyword">object</span> <span class="keyword">value</span>, Type targetType, <span class="keyword">object</span> parameter, System.Globalization.CultureInfo culture</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">value</span> <span class="keyword">is</span> <span class="keyword">bool</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> !(<span class="keyword">bool</span>)<span class="keyword">value</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">value</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">object</span> <span class="title">ConvertBack</span>(<span class="params"><span class="keyword">object</span> <span class="keyword">value</span>, Type targetType, <span class="keyword">object</span> parameter, System.Globalization.CultureInfo culture</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">value</span> <span class="keyword">is</span> <span class="keyword">bool</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> !(<span class="keyword">bool</span>)<span class="keyword">value</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">value</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样就能正确更新了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;WPF中的radiobox通过data binding绑定到一个bool属性后，如下所示，尽管UI可以正确的显示，但是data binding的属性不能正确的更新。比如user点了No之后属性UserChoice还是True。&lt;/p&gt;
&lt;figure class=&quot;high
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>C# string.indexof（string)返回1！！！</title>
    <link href="http://fresky.github.io/2012/07/25/why-string-indexof-string-return-1-in-csharp/"/>
    <id>http://fresky.github.io/2012/07/25/why-string-indexof-string-return-1-in-csharp/</id>
    <published>2012-07-24T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.225Z</updated>
    
    <content type="html"><![CDATA[<p>下面的代码第一次indexof返回0，第二次indexof返回1。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">string</span> softHyphenPlusHyphen = <span class="string">"\xAD\x2D"</span>;</span><br><span class="line">Console.WriteLine(<span class="string">"softHyphenPlusHyphen.IndexOf(softHyphenPlusHyphen,</span></span><br><span class="line"><span class="string">StringComparison.Ordinal): "</span> +</span><br><span class="line">softHyphenPlusHyphen.IndexOf(softHyphenPlusHyphen,</span><br><span class="line">StringComparison.Ordinal));</span><br><span class="line">Console.WriteLine(<span class="string">"softHyphenPlusHyphen.IndexOf(softHyphenPlusHyphen): "</span> + softHyphenPlusHyphen.IndexOf(softHyphenPlusHyphen));</span><br></pre></td></tr></table></figure><p><a href="http://msdn.microsoft.com/en-us//library/dd465121%28v=vs.110%29.aspx" target="_blank" rel="noopener">Best Practices for Using Strings in the .NET Framework</a>讲了如何在.net中正确的使用字符串。摘要如下：</p><p>When you develop with the .NET Framework, follow these simple recommendations when you use strings:</p><blockquote><ol><li>Use overloads that explicitly specify the string comparison rules for string operations. Typically, this involves calling a method overload that has a parameter of type StringComparison.</li><li>Use StringComparison.Ordinal or StringComparison.OrdinalIgnoreCase for comparisons as your safe default for culture-agnostic string matching.</li><li>Use comparisons with StringComparison.Ordinal or StringComparison.OrdinalIgnoreCase for better performance.</li><li>Use string operations that are based on StringComparison.CurrentCulture when you display output to the user.</li><li>Use the non-linguistic StringComparison.Ordinal or StringComparison.OrdinalIgnoreCase values instead of string operations based on CultureInfo.InvariantCulture when the comparison is linguistically irrelevant (symbolic, for example).</li><li>Use the String.ToUpperInvariant method instead of the String.ToLowerInvariant method when you normalize strings for comparison.</li><li>Use an overload of the String.Equals method to test whether two strings are equal. </li><li>Use the String.Compare and String.CompareTo methods to sort strings, not to check for equality.</li><li>Use culture-sensitive formatting to display non-string data, such as numbers and dates, in a user interface. Use formatting with the invariant culture to persist non-string data in string form.</li><li>Avoid the following practices when you use strings:</li><li>Do not use overloads that do not explicitly or implicitly specify the string comparison rules for string operations. </li><li>Do not use string operations based on StringComparison.InvariantCulture in most cases. One of the few exceptions is when you are persisting linguistically meaningful but culturally agnostic data. </li><li>Do not use an overload of the String.Compare or CompareTo method and test for a return value of zero to determine whether two strings are equal.</li><li>Do not use culture-sensitive formatting to persist numeric data or date and time data in string form.</li></ol></blockquote><p>下表是如何选择StringComparison：</p><img src="/images/StringComparison.png">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;下面的代码第一次indexof返回0，第二次indexof返回1。&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>c#怎么取到一个dll中所有的类型</title>
    <link href="http://fresky.github.io/2012/07/24/how-get-all-types-in-dll-in-csharp/"/>
    <id>http://fresky.github.io/2012/07/24/how-get-all-types-in-dll-in-csharp/</id>
    <published>2012-07-23T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.225Z</updated>
    
    <content type="html"><![CDATA[<p>这篇<a href="http://haacked.com/archive/2012/07/23/get-all-types-in-an-assembly.aspx?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+haacked+%28you%27ve+been+HAACKED%29" target="_blank" rel="noopener">Get All Types in an Assembly</a>文章讲了怎么取到assembly中所有的types。<br>代码如下：<br></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IEnumerable&lt;Type&gt; <span class="title">GetLoadableTypes</span>(<span class="params"><span class="keyword">this</span> Assembly assembly</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (assembly == <span class="literal">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="string">"assembly"</span>);</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> assembly.GetTypes();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (ReflectionTypeLoadException e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> e.Types.Where(t =&gt; t != <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;这篇&lt;a href=&quot;http://haacked.com/archive/2012/07/23/get-all-types-in-an-assembly.aspx?utm_source=feedburner&amp;amp;utm_medium=feed&amp;amp;utm_camp
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>c# lock 使用不当引起的死锁</title>
    <link href="http://fresky.github.io/2012/07/19/deadlock-caused-by-locking-pulic-in-csharp/"/>
    <id>http://fresky.github.io/2012/07/19/deadlock-caused-by-locking-pulic-in-csharp/</id>
    <published>2012-07-18T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.225Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://msdn.microsoft.com/en-us/library/ms173179%28v=vs.110%29.aspx" target="_blank" rel="noopener">Thread Synchronization (C# and Visual Basic)</a>中提到最好不要lock public的东西，比如：</p><ol><li><code>lock（this）</code><br>2. <code>lock（“string”）</code><br>3. <code>lock（typeof（int))</code><br>我在<a href="https://github.com/fresky/DeadLock" target="_blank" rel="noopener">github</a>上放了个死锁的例子。<br></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ms173179%28v=vs.110%29.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Thread Synchronization (C# a
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>C#的cast问题</title>
    <link href="http://fresky.github.io/2012/07/17/not-everything-derives-from-object-in-csharp/"/>
    <id>http://fresky.github.io/2012/07/17/not-everything-derives-from-object-in-csharp/</id>
    <published>2012-07-16T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.224Z</updated>
    
    <content type="html"><![CDATA[<p>这篇<a href="http://blogs.msdn.com/b/ericlippert/archive/2009/08/06/not-everything-derives-from-object.aspx" target="_blank" rel="noopener">Not everything derives from object - Fabulous Adventures In Coding - Site Home - MSDN Blogs</a>文章讲了为什么在C#里面</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> enumerable = <span class="keyword">from</span> <span class="keyword">bool</span> b <span class="keyword">in</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>, <span class="number">2</span>&#125; <span class="keyword">select</span> b;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> element <span class="keyword">in</span> enumerable)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(element);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个可以编译通过，但是运行会抛exception。<br><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;这篇&lt;a href=&quot;http://blogs.msdn.com/b/ericlippert/archive/2009/08/06/not-everything-derives-from-object.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>定义Enum的开始和结束，这样就能循环Enum了</title>
    <link href="http://fresky.github.io/2012/07/17/define-first-and-last-in-enum-loop-it/"/>
    <id>http://fresky.github.io/2012/07/17/define-first-and-last-in-enum-loop-it/</id>
    <published>2012-07-16T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.224Z</updated>
    
    <content type="html"><![CDATA[<p>示例，这样还有个好处就是first=0成为一个不合法的enum，这样可以避免出现忘记初始化。但是要注意enum得顺序递增才能用loop。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> ProgrammingLanguage</span><br><span class="line">   &#123;</span><br><span class="line">       Language_First = <span class="number">0</span>,</span><br><span class="line">       CPP = <span class="number">1</span>,</span><br><span class="line">       CSharp = <span class="number">2</span>,</span><br><span class="line">       Java =<span class="number">3</span>,</span><br><span class="line">       Language_Last = <span class="number">4</span>,</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>       &#123;</span><br><span class="line">          <span class="keyword">for</span> (ProgrammingLanguage i = ProgrammingLanguage.Language_First + <span class="number">1</span>; i &lt; ProgrammingLanguage.Language_Last; i++)</span><br><span class="line">           &#123;</span><br><span class="line">               Console.WriteLine(i);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;示例，这样还有个好处就是first=0成为一个不合法的enum，这样可以避免出现忘记初始化。但是要注意enum得顺序递增才能用loop。&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>禁用C#的树的单个节点</title>
    <link href="http://fresky.github.io/2012/07/17/disable-single-tree-node-in-csharp/"/>
    <id>http://fresky.github.io/2012/07/17/disable-single-tree-node-in-csharp/</id>
    <published>2012-07-16T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.224Z</updated>
    
    <content type="html"><![CDATA[<p>C#的tree 控件有Enabled属性，可以用来确定整棵树能不能选。但是如果想只禁用掉某个节点，treenode上就没有Enabled这个属性了。可以用下面的方法来实现。</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Tree_BeforeSelect</span>(<span class="params"><span class="keyword">object</span> sender, TreeViewCancelEventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    e.Cancel = !IsTreeNodeSelectable(e.Node);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;C#的tree 控件有Enabled属性，可以用来确定整棵树能不能选。但是如果想只禁用掉某个节点，treenode上就没有Enabled这个属性了。可以用下面的方法来实现。&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>在bat中执行sql命令（for sql server）</title>
    <link href="http://fresky.github.io/2012/07/17/run-sql-command-in-bat-file/"/>
    <id>http://fresky.github.io/2012/07/17/run-sql-command-in-bat-file/</id>
    <published>2012-07-16T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.224Z</updated>
    
    <content type="html"><![CDATA[<p>用<a href="http://msdn.microsoft.com/en-us/library/ms162773.aspx" target="_blank" rel="noopener">sqlcmd Utility</a>可以在bat中执行sql sever命令，很方便。<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;用&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ms162773.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;sqlcmd Utility&lt;/a&gt;可以在bat中执行sql sever命令，很方
      
    
    </summary>
    
    
      <category term="Database" scheme="http://fresky.github.io/tags/Database/"/>
    
  </entry>
  
  <entry>
    <title>定制自己的Visual Studio的Debugger Visualizer</title>
    <link href="http://fresky.github.io/2012/07/16/customize-your-own-debugger-visualizer-in-csharp/"/>
    <id>http://fresky.github.io/2012/07/16/customize-your-own-debugger-visualizer-in-csharp/</id>
    <published>2012-07-15T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.224Z</updated>
    
    <content type="html"><![CDATA[<p>又加了一个debugger visualizer的例子。</p><img src="/images/debugvisualizer.png"><p>更新了代码，见<a href="https://github.com/fresky/DebuggerAttribute" target="_blank" rel="noopener">这里</a>。代码里包含了下面的属性：<br><br>    [DebuggerTypeProxy]<br>    [DebuggerDisplay]<br>    [DebuggerVisualizer]<br>    [DebuggerStepThrough]<br>    [DebuggerHidden]<br>    [Conditional(“DEBUG”)]<br>    [DebuggerBrowsable]<br>    [DebuggerVisualizer]</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;又加了一个debugger visualizer的例子。&lt;/p&gt;
&lt;img src=&quot;/images/debugvisualizer.png&quot;&gt;
&lt;p&gt;更新了代码，见&lt;a href=&quot;https://github.com/fresky/DebuggerAttribute&quot; 
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>如何把 Visutal studio中的“print-on-breakpoint”消息打印在程序的任何地方</title>
    <link href="http://fresky.github.io/2012/07/13/print-message-to-anywhere-in-visual-studio-print-on-breakpoint/"/>
    <id>http://fresky.github.io/2012/07/13/print-message-to-anywhere-in-visual-studio-print-on-breakpoint/</id>
    <published>2012-07-12T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.223Z</updated>
    
    <content type="html"><![CDATA[<p>这个问题<a href="http://stackoverflow.com/questions/7756250/in-vs-make-print-on-breakpoint-use-the-console" target="_blank" rel="noopener">visual studio - In VS, make print-on-breakpoint use the console - Stack Overflow</a>说明了怎么做。<br>我结合之前这篇<a href="http://www.cnblogs.com/fresky/articles/2133378.html" target="_blank" rel="noopener">文章</a>做了个小例子，放在<a href="https://github.com/fresky/DebuggerAttribute" target="_blank" rel="noopener">github</a>上。<br>几个截图：<br></p><ol><li>定制debug显示信息。<br>&nbsp;</li></ol><img src="/images/debugcustomization.png"><ol start="2"><li><p>隐藏函数调用。<br></p><img src="/images/debughidefunction.png"></li><li><p>输出 “print-on-breakpoint”消息在output上。<br></p></li></ol><img src="/images/debugprintonbreakpoint.png">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;这个问题&lt;a href=&quot;http://stackoverflow.com/questions/7756250/in-vs-make-print-on-breakpoint-use-the-console&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;vi
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>C#中 #if DEBUG 和 Conditional(&quot;DEBUG&quot;)的区别</title>
    <link href="http://fresky.github.io/2012/07/13/difference-between-if-debug-and-conditional-debug-in-csharp/"/>
    <id>http://fresky.github.io/2012/07/13/difference-between-if-debug-and-conditional-debug-in-csharp/</id>
    <published>2012-07-12T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.223Z</updated>
    
    <content type="html"><![CDATA[<p>这里<a href="http://stackoverflow.com/questions/3788605/if-debug-vs-conditionaldebug" target="_blank" rel="noopener">c# - #if DEBUG vs. Conditional(“DEBUG”) - Stack Overflow</a>解释了两者的区别。摘要如下：<br>#if DEBUG: 发生在编译时，release编译出的IL不包含if中的代码<br>[Conditional(“DEBUG”)]: 发生在运行时，releae编译出的IL包含代码，但是不会被执行。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;这里&lt;a href=&quot;http://stackoverflow.com/questions/3788605/if-debug-vs-conditionaldebug&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;c# - #if DEBUG vs. Con
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>WPF应用的图标</title>
    <link href="http://fresky.github.io/2012/07/11/why-you-can-not-see-your-wpf-app-icon/"/>
    <id>http://fresky.github.io/2012/07/11/why-you-can-not-see-your-wpf-app-icon/</id>
    <published>2012-07-10T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.223Z</updated>
    
    <content type="html"><![CDATA[<p>WPF应用的图标设置在 project右键-&gt;property-&gt;application-&gt;Icon。<br>但是要注意的是当你用Visual Studio的F5(debug)起的时候看不到图标，用Control—F5没问题。当然直接去点击build出来的exe也没有问题。<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;WPF应用的图标设置在 project右键-&amp;gt;property-&amp;gt;application-&amp;gt;Icon。&lt;br&gt;但是要注意的是当你用Visual Studio的F5(debug)起的时候看不到图标，用Control—F5没问题。当然直接去点击build出来的
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>使用windbg通过vtable找到优化后的this指针</title>
    <link href="http://fresky.github.io/2012/07/10/how-to-find-the-optimized-this-pointer-in-windbg/"/>
    <id>http://fresky.github.io/2012/07/10/how-to-find-the-optimized-this-pointer-in-windbg/</id>
    <published>2012-07-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.222Z</updated>
    
    <content type="html"><![CDATA[<p>如果用windbg调试的时候遇到优化过的代码，this指针的地址是不准确的，下面介绍如何通过vtable找到this指针。<br><br>1. <strong>kbn</strong><br># ChildEBP? RetAddr? Args to Child<br>00 1d61fad0 7c90d21a 7c8023f1 00000000 1d61fb04 ntdll!KiFastSystemCallRet<br>01 1d61fad4 7c8023f1 00000000 1d61fb04 1a314e78 ntdll!NtDelayExecution+0xc<br>02 1d61fb2c 7c802455 00000042 00000000 1d61fb6c kernel32!SleepEx+0x61<br>03 <span style="color: #ff0000;">1d61fb3c </span><span style="color: #3366ff;">(ChildEBPaftercall</span>) 4c08f466 00000042 6496c8a2 1a3128f0 kernel32!Sleep+0xf<br>04 1d61fb6c 5c2656d4 616c06bc 1d61fbbc 1d61fe74 DllName!NameSpaceName::ClassName::OnProcess+0x106 [source1.cpp @ 5908]<br>05 <span style="color: #ff0000;">1d61fbb0 </span>(<span style="color: #3366ff;">ChildEBPbeforecall</span>) 77520c9a 1a312b0c 1d61fd78 0ef5bd18<br>Dll2Name!Class2Name::Process+0xb4 [source2.cpp @ 104]<br>06 1d61fbc8 77587f67 4c0e4df0 1a312b0c 1d61fcfc ole32!CallFrame::Invoke+0x54<br><br>2. <strong>dpp </strong>(<span style="color: #3366ff;">ChildEBPaftercall</span>) (<span style="color: #3366ff;">ChildEBPbeforecall</span>) ，来找到vtable </p><p></p><p></p><p>0:022&gt; dpp 1d61fb3c 1d61fbb0<br>1d61fb3c 1d61fb6c 1d61fbb0 &lt;Unloaded_API.DLL&gt;+0x1d61fb7f<br>1d61fb40 4c08f466 d908ec83<br>1d61fb44 00000042<br>1d61fb48 6496c8a2 1e6041d6 &lt;Unloaded_API.DLL&gt;+0x1e6041a5<br>1d61fb4c <span style="color: #ff0000;">1a3128f0 </span><span style="color: #3366ff;">(init this pointer address</span>) <span style="color: #ff0000;">4c1a3e24 </span>(<span style="color: #3366ff;">vtable address</span>) DllName!ATL::CComObject::`vftable’<br><br>3. <strong>dds </strong>(<span style="color: #3366ff;">vtable address</span>)<strong>-4</strong>，来找到RTTI </p><p></p><p></p><p>0:022&gt; dds 4c1a3e24 -4<br><span style="color: #000000;">4c1a3e20 </span><span style="color: #ff0000;">4c1b99e0 </span>(<span style="color: #3366ff;">RTTI address</span>) DllName!ATL::CComObject::`RTTI Complete Object Locator’<br><br>4. <strong>dds </strong>(<span style="color: #3366ff;">RTTI address</span>)，来找到偏移量，是第二个 </p><p></p><p></p><p>0:022&gt; dds 4c1b99e0<br>4c1b99e0 00000000<br>4c1b99e4 <span style="color: #ff0000;">00000000 </span>(<span style="color: #3366ff;">offset</span>)<br>4c1b99e8 00000000<br><br>5. <strong>dt ModuleName <span style="color: #3366ff;">(init this pointer address</span>) - (<span style="color: #3366ff;">offset</span>)</strong> ，查看this指针，搞定：）<br>dt DllName!NameSpaceName::ClassName 1a3128f0-0 </p><p></p><div></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;如果用windbg调试的时候遇到优化过的代码，this指针的地址是不准确的，下面介绍如何通过vtable找到this指针。&lt;br&gt;&lt;br&gt;1. &lt;strong&gt;kbn&lt;/strong&gt;&lt;br&gt;# ChildEBP? RetAddr? Args to Child&lt;br&gt;00 
      
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>Macro 小总结</title>
    <link href="http://fresky.github.io/2012/07/10/summary-about-cpp-macro/"/>
    <id>http://fresky.github.io/2012/07/10/summary-about-cpp-macro/</id>
    <published>2012-07-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.223Z</updated>
    
    <content type="html"><![CDATA[<p>如果在C++中使用Macro，要注意：<br>1. parameter要加括号： #define ADD(x,y) ((x)+(y))<br>2. result要加括号： #define ADD(x,y) ((x)+(y))<br>3. 多行要加花括号： #define INCREASE(a, b) {++(a);++(b);}<br><br>这里有个例子：<a href="https://github.com/fresky/MacroExample" target="_blank" rel="noopener">https://github.com/fresky/MacroExample</a><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;如果在C++中使用Macro，要注意：&lt;br&gt;1. parameter要加括号： #define ADD(x,y) ((x)+(y))&lt;br&gt;2. result要加括号： #define ADD(x,y) ((x)+(y))&lt;br&gt;3. 多行要加花括号： #define I
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>Mozilla Thimble，在线html，javascript编辑器</title>
    <link href="http://fresky.github.io/2012/07/10/mozilla-thimble-online-html-editor/"/>
    <id>http://fresky.github.io/2012/07/10/mozilla-thimble-online-html-editor/</id>
    <published>2012-07-09T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.222Z</updated>
    
    <content type="html"><![CDATA[<p>今天看了一下，<a href="https://thimble.webmaker.org/en-US/" target="_blank" rel="noopener">Mozilla Thimble</a>，很不错，推荐试试：）<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天看了一下，&lt;a href=&quot;https://thimble.webmaker.org/en-US/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Mozilla Thimble&lt;/a&gt;，很不错，推荐试试：）&lt;br&gt;&lt;blockquote&gt;&lt;/block
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
  </entry>
  
  <entry>
    <title>记录C#程序的运行时间</title>
    <link href="http://fresky.github.io/2012/07/06/how-to-record-startup-time-in-csharp/"/>
    <id>http://fresky.github.io/2012/07/06/how-to-record-startup-time-in-csharp/</id>
    <published>2012-07-05T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.222Z</updated>
    
    <content type="html"><![CDATA[<p>从<a href="http://stackoverflow.com/questions/11318175/does-a-c-sharp-app-track-how-long-its-been-running?newsletter=1&amp;nlcode=55866%7cc739" target="_blank" rel="noopener">.net - Does a C# app track how long its been running? - Stack Overflow</a>看到的，很方便的。<br><code>System.Diagnostics.Process</code> 有个属性记录的应用的开始时间。<br></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.Diagnostics.Process current = System.Diagnostics.Process.GetCurrentProcess();</span><br><span class="line">DateTime startedTime = current.StartTime;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;从&lt;a href=&quot;http://stackoverflow.com/questions/11318175/does-a-c-sharp-app-track-how-long-its-been-running?newsletter=1&amp;amp;nlcode=55866%7c
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>oxcdcdcdcd是什么？</title>
    <link href="http://fresky.github.io/2012/07/06/what-is-oxcdcdcdcd/"/>
    <id>http://fresky.github.io/2012/07/06/what-is-oxcdcdcdcd/</id>
    <published>2012-07-05T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.222Z</updated>
    
    <content type="html"><![CDATA[<p>今天看到一个crash的dump，crash发生在尝试释放地址，但是从dump上可以看到地址的值是oxcdcdcdcd。从这可以知道这个地址没有被正确的初始化。还是debug编译出来的好啊：）<br>从网上总结了一下地址的信息，最主要的是：<br><table><tbody><tr><td>0xCDCDCDCD</td><td>堆上分配的地址，但是没有初始化<br></td></tr></tbody></table></p><tr><td>0xDDDDDDDD</td><td>堆上释放的地址。</td></tr><tr><td>0xFDFDFDFD</td><td>堆内存的边界<br></td></tr><p><tr><td>0xCCCCCCCC</td><td>栈上分配的内存，但是没有初始化</td></tr><br>更多的内容可以看看下面2篇文章。<br><a href="http://www.nobugs.org/developer/win32/debug_crt_heap.html" target="_blank" rel="noopener">Win32 Debug CRT Heap Internals</a><br><blockquote></blockquote><a href="http://www.highprogrammer.com/alan/windev/visualstudio.html" target="_blank" rel="noopener">Microsoft Visual C++ Tips and Tricks</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天看到一个crash的dump，crash发生在尝试释放地址，但是从dump上可以看到地址的值是oxcdcdcdcd。从这可以知道这个地址没有被正确的初始化。还是debug编译出来的好啊：）&lt;br&gt;从网上总结了一下地址的信息，最主要的是：&lt;br&gt;&lt;table&gt;&lt;tbody
      
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>从哪里开始学习Windows 8？（zz）</title>
    <link href="http://fresky.github.io/2012/07/05/where-do-i-start-learn-windows-8/"/>
    <id>http://fresky.github.io/2012/07/05/where-do-i-start-learn-windows-8/</id>
    <published>2012-07-04T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.221Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.sadev.co.za/content/where-do-i-start-learn-windows-8" target="_blank" rel="noopener">Where do I start to learn Windows 8? | Robert MacLean</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.sadev.co.za/content/where-do-i-start-learn-windows-8&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Where do I start to learn Window
      
    
    </summary>
    
    
      <category term="Resource" scheme="http://fresky.github.io/tags/Resource/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Fakes框架</title>
    <link href="http://fresky.github.io/2012/07/05/microsoft-fakes-framework/"/>
    <id>http://fresky.github.io/2012/07/05/microsoft-fakes-framework/</id>
    <published>2012-07-04T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.221Z</updated>
    
    <content type="html"><![CDATA[<p>Visual studio 2012RC中自带了一个Microsoft Fakes框架，可以用来mock .NET的任何方法，包括非virtual和static的方法。（Moq只能mock virutal的方法），从下面的链接可以找到更多的信息。<br><a href="http://msdn.microsoft.com/en-us/library/hh549175%28v=vs.110%29" target="_blank" rel="noopener">Isolating Unit Test Methods with Microsoft Fakes</a><br>我也写了一个用Microsoft Fakes的小例子，可以在这里找到。<a href="https://github.com/fresky/MSFackExample" target="_blank" rel="noopener">fresky/MSFackExample</a><br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Visual studio 2012RC中自带了一个Microsoft Fakes框架，可以用来mock .NET的任何方法，包括非virtual和static的方法。（Moq只能mock virutal的方法），从下面的链接可以找到更多的信息。&lt;br&gt;&lt;a href=&quot;h
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
  </entry>
  
  <entry>
    <title>Mutation test</title>
    <link href="http://fresky.github.io/2012/07/03/mutation-test/"/>
    <id>http://fresky.github.io/2012/07/03/mutation-test/</id>
    <published>2012-07-02T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.221Z</updated>
    
    <content type="html"><![CDATA[<p>Code coverage有时候是不够的，可以试试mutation test。<a href="http://galera.ii.pw.edu.pl/~adr/CREAM/index.php" target="_blank" rel="noopener">http://galera.ii.pw.edu.pl/~adr/CREAM/index.php</a> 是一个开源的C#的mutation test的框架，可以试试看。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Code coverage有时候是不够的，可以试试mutation test。&lt;a href=&quot;http://galera.ii.pw.edu.pl/~adr/CREAM/index.php&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://ga
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Testing" scheme="http://fresky.github.io/tags/Testing/"/>
    
  </entry>
  
  <entry>
    <title>Branch Prediction</title>
    <link href="http://fresky.github.io/2012/06/29/branch-prediction-why-is-processing-a-sorted-array-faster-than-an-unsorted-array/"/>
    <id>http://fresky.github.io/2012/06/29/branch-prediction-why-is-processing-a-sorted-array-faster-than-an-unsorted-array/</id>
    <published>2012-06-28T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.221Z</updated>
    
    <content type="html"><![CDATA[<p>stackoverflow上一个非常有趣的问题<a href="http://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array?newsletter=1&amp;nlcode=55866%7cc739" target="_blank" rel="noopener">java - Why is processing a sorted array faster than an unsorted array? - Stack Overflow</a><br>解释了什么是branch prediction，推荐看看。<br><blockquote></blockquote></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;stackoverflow上一个非常有趣的问题&lt;a href=&quot;http://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-arra
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>什么是GUID？</title>
    <link href="http://fresky.github.io/2012/05/08/guid/"/>
    <id>http://fresky.github.io/2012/05/08/guid/</id>
    <published>2012-05-08T14:52:46.000Z</published>
    <updated>2019-12-20T08:29:07.220Z</updated>
    
    <content type="html"><![CDATA[<p>最近看了下面几个文章，讲了GUID的一些相关知识，解释的很清楚，有兴趣的可以看看，我把大概要点翻译整理了一下。<br><a href="http://blogs.msdn.com/b/ericlippert/archive/2012/04/24/guid-guide-part-one.aspx" target="_blank" rel="noopener">GUID Guide, part one - Fabulous Adventures In Coding - Site Home - MSDN Blogs</a><br><a href="http://blogs.msdn.com/b/ericlippert/archive/2012/04/30/guid-guide-part-two.aspx" target="_blank" rel="noopener">GUID guide, part two - Fabulous Adventures In Coding - Site Home - MSDN Blogs</a><br><a href="http://blogs.msdn.com/b/ericlippert/archive/2012/05/07/guid-guide-part-three.aspx" target="_blank" rel="noopener">GUID guide, part three - Fabulous Adventures In Coding - Site Home - MSDN Blogs</a><br><br>GUID有如下的形式：<br>{xxxxxxxx-xxxx-1xxx-xxxx-xxxxxxxxxxxx} or <br>{xxxxxxxx-xxxx-4xxx-xxxx-xxxxxxxxxxxx}<br>这个1和4表明了GUID的生成策略。<br><br><b>策略1</b>使用了MAC地址和时间。<br>这种策略有2个缺点：<br>1）如果机器没有网卡，那么生成的GUID不保证是唯一的。<br>2）有可能生成一样的GUID。（比如2个GUID生成器同时尝试生成GUID，或者时间倒流）<br><br>使用1策略生成GUID有几个特点：<br>1）生成的GUID不是随机的，所以不能用来生成随机数。<br>2）有可能在特定机器上生成的GUID是单调递增的，这对于用这个GUID用来做数据库的primary key，并且数据库用primary key做index来说是个好消息。<br>3）可以通过GUID找到生成这个GUID的机器，有隐私问题。<br>4）他的子序列不具备全局唯一的特性。<br><br><b>策略4</b>使用了随机数：<br>1）第四段的第一个永远是8，9，a或者b，这表明了版本信息，加上第三段的第一个4，一共有6个bit被reserve了，剩下的122个bit可以随机生成。<br>2）122个bit的完全随机数，概率上7万年后可能有2个随机数一样，对于一个特定的数，3百亿万亿年后有可能生成一个一样的。<br><br><b>总结：</b><br>1）GUID保证唯一，但是不保证随机，所以不要用GUID当作随机数来使用。<br>2）随机数算法生成的GUID不是密码学强度的随机数。<br>3）只有大家遵守GUID生成规则，GUID才是唯一的，GUID是一个生成规则，而不是一个安全机制。<br>4）GUID有内部的结构，至少有6个bit的保留字有特殊含义。<br>5）GUID允许顺序生成。<br>6）完整的GUID才有唯一性，子串不具备唯一性。<br>7）GUID可以用多种算法生成出来。<br>8）用随机方法生成的GUID在可以预见的将来有非常低的概率重复。<br>9）GUID可以泄漏生成的时间空间信息（比如机器），无论是策略1（直接获得）还是策略4（通过密码分析）.<br>10）GUID在将来可能会用完全不同的算法来生成。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近看了下面几个文章，讲了GUID的一些相关知识，解释的很清楚，有兴趣的可以看看，我把大概要点翻译整理了一下。&lt;br&gt;&lt;a href=&quot;http://blogs.msdn.com/b/ericlippert/archive/2012/04/24/guid-guide-par
      
    
    </summary>
    
    
      <category term="Development" scheme="http://fresky.github.io/tags/Development/"/>
    
  </entry>
  
  <entry>
    <title>自动启动 Debugger（windbg，visual studio）</title>
    <link href="http://fresky.github.io/2012/05/04/how-to-start-debugger-windbg-visual-studio-automatically/"/>
    <id>http://fresky.github.io/2012/05/04/how-to-start-debugger-windbg-visual-studio-automatically/</id>
    <published>2012-05-03T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.220Z</updated>
    
    <content type="html"><![CDATA[<ol><li> 打开注册表，<b>HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Image File Execution Options</b>.<br></li><li> 找到你想debug的程序，比如myapp.exe. （如果没有，就创建一个）。<br></li><li> 右键myapp.exe文件夹, 添加一个String Value. 命名为: <b>debugger</b>, 值为: <b>vsjitdebugger.exe</b>.(用visual studio). 或者 <b>C:\Program Files (x86)\Debugging Tools for Windows (x86)\windbg.exe</b>.(using windbg)<br></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;&lt;li&gt; 打开注册表，&lt;b&gt;HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\Image File Execution Options&lt;/b&gt;.&lt;br&gt;&lt;/li&gt;&lt;li&gt; 找到你想debug的程
      
    
    </summary>
    
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>远程调试ASP .NET和Silverlight</title>
    <link href="http://fresky.github.io/2012/02/24/how-to-remote-debug-asp-dot-net-and-silverlight/"/>
    <id>http://fresky.github.io/2012/02/24/how-to-remote-debug-asp-dot-net-and-silverlight/</id>
    <published>2012-02-23T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.220Z</updated>
    
    <content type="html"><![CDATA[<p>这几天有个网站突然出了问题，是ASP .NET + Silverlight。用下面的方法可以远程调试。<br><br>ASP .NET远程调试。<br>1. 复制  [VSInstallFolder]\Common7\IDE\Remote Debugger\x86文件夹到服务器production server上。<br>2. 在服务器上运行msvsmon.exe。打开Tools-&gt;Options，选择Windows Authentication。<br>3. 在自己的机器上运行Visual Stuido，点Attach to process，然后在 Qualifier上输入服务器的IP。<br>4. 选择“Show processes from all users”, attach到 w3wp.exe进程.<br>5. 如果你有symbols和source code，就能debug，打断点了。<br><br>Silverlight是运行在客户端的， 不需要远程调试，直接打开Visual studio，attach到相应的进行就行了。对于IE来说一般是 iexplorer.exe，对于firefox，是plugin-container.exe。一般根据type，找有silverlight的就行了。<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;这几天有个网站突然出了问题，是ASP .NET + Silverlight。用下面的方法可以远程调试。&lt;br&gt;&lt;br&gt;ASP .NET远程调试。&lt;br&gt;1. 复制  [VSInstallFolder]\Common7\IDE\Remote Debugger\x86文件夹到服
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
      <category term="Debug" scheme="http://fresky.github.io/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>C++的vector::push_back()和vector::resize()比较</title>
    <link href="http://fresky.github.io/2011/06/24/difference-between-push-back-and-resize-in-cpp/"/>
    <id>http://fresky.github.io/2011/06/24/difference-between-push-back-and-resize-in-cpp/</id>
    <published>2011-06-23T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.220Z</updated>
    
    <content type="html"><![CDATA[<p>今天看别的code写着下面几行来往vector里面添加一个元素。<br></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;Type&gt; v;</span><br><span class="line"><span class="keyword">long</span> size = (<span class="keyword">long</span>)v.size();</span><br><span class="line">v.resize(size+<span class="number">1</span>);</span><br><span class="line">v[size] = newValue;</span><br></pre></td></tr></table></figure><p>觉得挺奇怪，就去查了查resize()和push_back()的区别，可以看到他们的源代码如下：<br></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">resize</span><span class="params">(size_type _Newsize)</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">// determine new length, padding with _Ty() elements as needed</span></span><br><span class="line">resize(_Newsize, _Ty());</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">resize</span><span class="params">(size_type _Newsize, _Ty _Val)</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">// determine new length, padding with _Val elements as needed</span></span><br><span class="line"><span class="keyword">if</span> (size() &lt; _Newsize)</span><br><span class="line">_Insert_n(end(), _Newsize - size(), _Val);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (_Newsize &lt; size())</span><br><span class="line">erase(begin() + _Newsize, end());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_back</span><span class="params">(<span class="keyword">const</span> _Ty&amp; _Val)</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">// insert element at end</span></span><br><span class="line"><span class="keyword">if</span> (size() &lt; capacity())</span><br><span class="line">_Mylast = _Ufill(_Mylast, <span class="number">1</span>, _Val);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">insert(end(), _Val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">iterator <span class="title">insert</span><span class="params">(const_iterator _Where, <span class="keyword">const</span> _Ty&amp; _Val)</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">// insert _Val at _Where</span></span><br><span class="line">size_type _Off = size() == <span class="number">0</span> ? <span class="number">0</span> : _Where - begin();</span><br><span class="line">_Insert_n(_Where, (size_type)<span class="number">1</span>, _Val);</span><br><span class="line"><span class="keyword">return</span> (begin() + _Off);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br>从代码可以看出来，如果size()小于capasity()肯定是push_back()比resize()要好。如果size()大于等于capacity()，那么push_back()和resize()差不多，但是怎么着都比resize()然后再赋值好。所以最开始的代码应该用push_back()。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天看别的code写着下面几行来往vector里面添加一个元素。&lt;br&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;
      
    
    </summary>
    
    
      <category term="CPP" scheme="http://fresky.github.io/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>.NET 2.0的Timer elapsed event 会自动catch住所有的exception</title>
    <link href="http://fresky.github.io/2011/06/23/dot-net-2-timer-elapsed-event-will-catch-all-exception-for-you/"/>
    <id>http://fresky.github.io/2011/06/23/dot-net-2-timer-elapsed-event-will-catch-all-exception-for-you/</id>
    <published>2011-06-22T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.219Z</updated>
    
    <content type="html"><![CDATA[<p>今天调试一个Access Violation的问题，用VS attach到程序上，打开所有的exception，结果无意中抓到了一个NullRefereceException，从一个Timer.Elapsed的event handler中抛了出来，很奇怪我没有try catch，但是怎么没有crash呢，查了一下MSDN<a href="http://msdn.microsoft.com/en-us/library/system.timers.timer%28v=vs.85%29.aspx" target="_blank" rel="noopener">Timer Class (System.Timers)</a>发现了下面这句话，原来在.NET 2.0之前会自动的catch住所有的exception，大家以后写程序注意一下。<br><br>In the .NET Framework version 2.0 and earlier, the <b>Timer</b> component catches and suppresses all exceptions thrown by event handlers for the <b>Elapsed</b> event. This behavior is subject to change in future releases of the .NET Framework.<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天调试一个Access Violation的问题，用VS attach到程序上，打开所有的exception，结果无意中抓到了一个NullRefereceException，从一个Timer.Elapsed的event handler中抛了出来，很奇怪我没有try cat
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>iphone原来只能有11屏的应用</title>
    <link href="http://fresky.github.io/2011/01/16/you-can-only-have-11-screen-apps-in-ipone1/"/>
    <id>http://fresky.github.io/2011/01/16/you-can-only-have-11-screen-apps-in-ipone1/</id>
    <published>2011-01-15T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.219Z</updated>
    
    <content type="html"><![CDATA[<p>我最近发现怎么新装的app都不能在iphone上面显示出来了，还以为同步出了啥问题，我这个是08年买的一代，好多应用现在不能装上。今天才发现原来是iphone只能显示11屏，我用了categories，把一些应用分类装了一下，才看到原来的那些已经装上的apps。<br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;我最近发现怎么新装的app都不能在iphone上面显示出来了，还以为同步出了啥问题，我这个是08年买的一代，好多应用现在不能装上。今天才发现原来是iphone只能显示11屏，我用了categories，把一些应用分类装了一下，才看到原来的那些已经装上的apps。&lt;br&gt;&lt;b
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>windows xp unlock 很慢</title>
    <link href="http://fresky.github.io/2011/01/16/windows-xp-take-too-long-to-unlock/"/>
    <id>http://fresky.github.io/2011/01/16/windows-xp-take-too-long-to-unlock/</id>
    <published>2011-01-15T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.219Z</updated>
    
    <content type="html"><![CDATA[<p>前段时间遇到了一个问题，就是我的XP每次锁屏后解锁都特别的慢，需要等几分钟才能进来，很苦恼。<br><br>后来终于找到了元凶，是因为我装了<a href="http://www.netopia.com/software/products/tb2/" target="_blank" rel="noopener">Timbuktu</a>，但是把Tb2 Launch服务关了，如果开了，就又能瞬间登录了。<br><br>如果装了Timbuktu，要确定把Tb2 Launch服务打开。<br><blockquote></blockquote><br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;前段时间遇到了一个问题，就是我的XP每次锁屏后解锁都特别的慢，需要等几分钟才能进来，很苦恼。&lt;br&gt;&lt;br&gt;后来终于找到了元凶，是因为我装了&lt;a href=&quot;http://www.netopia.com/software/products/tb2/&quot; target=&quot;_bl
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>http的url长度限制</title>
    <link href="http://fresky.github.io/2011/01/11/length-limit-of-http-url/"/>
    <id>http://fresky.github.io/2011/01/11/length-limit-of-http-url/</id>
    <published>2011-01-10T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.219Z</updated>
    
    <content type="html"><![CDATA[<p>http的url长度是有限制的，<a href="http://www.boutell.com/newfaq/misc/urllength.html" target="_blank" rel="noopener">WWW FAQs: What is the maximum length of a URL?</a><br>所以不能用get的方式时在url里面放太多的东西，举个简单的例子。<br>如果一个asp.net的页面中使用了treeview，并且treeview的enableviewstate是true（默认情况）。但是如果你不小心在form中设置成了get时，你会发现只添加6、7个节点就会出错（IE，不同浏览器的长度限制不一样），页面不能访问，因为如果用get，viewstate会放到http的url中，会超出url的最长限制。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;http的url长度是有限制的，&lt;a href=&quot;http://www.boutell.com/newfaq/misc/urllength.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;WWW FAQs: What is the maximum 
      
    
    </summary>
    
    
      <category term="Html" scheme="http://fresky.github.io/tags/Html/"/>
    
  </entry>
  
  <entry>
    <title>C# GetEnvironmentVariable 问题</title>
    <link href="http://fresky.github.io/2011/01/11/GetEnvironmentVariable-issue-in-csharp/"/>
    <id>http://fresky.github.io/2011/01/11/GetEnvironmentVariable-issue-in-csharp/</id>
    <published>2011-01-10T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.218Z</updated>
    
    <content type="html"><![CDATA[<p>今天遇到了一个奇怪的问题，有2个程序，一个是ClickOnce应用，一个是普通的C#可执行程序，都用到了一个系统环境变量，System environment variable，Machine级别的，程序中都是用的 Environment.GetEnvironmentVariable(env)。当这个环境变量被修改后，发现ClickOnce应用不能运行了，debug看到得到的环境变量不对，还是旧的，重启ClickOnce应用还是不行。但是C#的程序重启之后运行很正常。<br><br>然后就看了看MSDN关于Environment.GetEnvironmentVariable的<a href="http://msdn.microsoft.com/en-us/library/y6k3c7b0.aspx" target="_blank" rel="noopener">描述</a>。并且自己做了一些测试，基本搞清楚了原因。<br><br>Environment.GetEnvironmentVariable(env)等同于Environment.GetEnvironmentVariable(env, EnvironmentVariableTarget.Process)，取得时Process的环境变量。另外还有2个函数，分别是Environment.GetEnvironmentVariable(env, EnvironmentVariableTarget.Machine)，Environment.GetEnvironmentVariable(env, EnvironmentVariableTarget.User)，分别是取System的环境变量和User的环境变量。<br><br>Process的环境变量是指当Process起来的时候，把Machne（System）和User的环境变量加起来，存了个拷贝，放在了Process的信息里面。这个可以用<a href="http://technet.microsoft.com/en-us/sysinternals/bb896653" target="_blank" rel="noopener">Process Explorer</a>很清楚地看出来，双击Process，在Environment的tab里面可以看到所有的环境变量。<br><br>好的，搞清楚了背景知识，现在我们来看看为什么会出现本文一开始说的那个问题。<br><br>对于一个普通的C#程序。<br>如果我们要取的变量是System Variables，首先调用Environment.GetEnvironmentVariable(env, EnvironmentVariableTarget.Machine)和Environment.GetEnvironmentVariable(env)可以得到一样的值。如果这个时候修改了System Variable的值，再调用可以发现Environment.GetEnvironmentVariable(env, EnvironmentVariableTarget.Machine)已经是新的值了，但是Environment.GetEnvironmentVariable(env)还是修改前的值。因为Process中保存的是一份拷贝，还是原来的值。重启这个程序就能变得一样。<br><br>但是对于ClickOnce应用，变得有点复杂：）<br>因为ClickOnce是通过dfsvc.exe运行的，这个是ClickOnce的引擎，它负责检查更新，下载等。每当有ClickOnce的应用启动时，都需要通过它。它会自动关掉进程如果15分钟没有使用。参考<a href="http://windowsclient.net/blogs/faqs/archive/2004/06/11/what-is-the-dfsvc-exe-process-that-starts-when-i-use-clickonce.aspx" target="_blank" rel="noopener">What is the dfsvc.exe process that starts when I use “ClickOnce”? - Windows Forms FAQs</a><br>所以如果第一次运行ClickOnce程序，dfsvc.exe会拿到一份环境变量的拷贝，然后ClickOnce应用是这个process启动的，所以用的就是它的环境变量拷贝。等关掉ClickOnce应用，这个dfsvc.exe还不会退出（要等15分钟）。再重启ClickOnce还是同样的dfsvc.exe启动的，所以用的还是之前的环境变量拷贝。这就是为什么ClickOnce程序运行不正确。如果kill掉dfsvc.exe，再重启ClickOnce应用就一切正常了。<br><br>所以在写代码的时候要注意，如果有程序在运行过程中，System Variables被修改了，使用Environment.GetEnvironmentVariable(env)有可能得不到正确的值。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天遇到了一个奇怪的问题，有2个程序，一个是ClickOnce应用，一个是普通的C#可执行程序，都用到了一个系统环境变量，System environment variable，Machine级别的，程序中都是用的 Environment.GetEnvironmentVar
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>环境变量的注册表位置</title>
    <link href="http://fresky.github.io/2011/01/11/where-system-environment-variables-stored-in-registry/"/>
    <id>http://fresky.github.io/2011/01/11/where-system-environment-variables-stored-in-registry/</id>
    <published>2011-01-10T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.219Z</updated>
    
    <content type="html"><![CDATA[<p>另外说一下环境变量在注册表中存放的位置：<br>system environment variables: (machine)<br>HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Session Manager\Environment<br><br>user environment variables:<br>HKEY_CURRENT_USER\Environment<br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;另外说一下环境变量在注册表中存放的位置：&lt;br&gt;system environment variables: (machine)&lt;br&gt;HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Session Manager\En
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>Happy new year！</title>
    <link href="http://fresky.github.io/2011/01/01/happy-new-year/"/>
    <id>http://fresky.github.io/2011/01/01/happy-new-year/</id>
    <published>2010-12-31T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.218Z</updated>
    
    <content type="html"><![CDATA[<p>新年快乐！<br>刚刚在<a href="http://www.bjhjyd.gov.cn/index.html" target="_blank" rel="noopener">北京市小客车指标调控管理信息系统</a> 上申请了一个汽车配置指标。睡觉去了，2011，我来了：）<br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;新年快乐！&lt;br&gt;刚刚在&lt;a href=&quot;http://www.bjhjyd.gov.cn/index.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;北京市小客车指标调控管理信息系统&lt;/a&gt; 上申请了一个汽车配置指标。睡觉去了，2011，我来了：
      
    
    </summary>
    
    
      <category term="Life" scheme="http://fresky.github.io/tags/Life/"/>
    
  </entry>
  
  <entry>
    <title>C#操作.rtf文档</title>
    <link href="http://fresky.github.io/2010/12/16/how-to-work-with-rtf-in-csharp/"/>
    <id>http://fresky.github.io/2010/12/16/how-to-work-with-rtf-in-csharp/</id>
    <published>2010-12-15T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.218Z</updated>
    
    <content type="html"><![CDATA[<p>前段时间做过一些用C#操作.rtf文档的工作，当时就是直接根据RTF的规范用修改文本文件的方式修改.rtf文件。比如要插入一段文字，并且用红色表示，就自己弄一个colortable的定义，然后直接把下面的内容插入到.rtf文件中， {\b\cf1Bold Red!} \b表示黑体，\cf1表示用colortable定义中的第一种颜色。（假设我们的这个rtf文件中定义的第一种颜色是红色）。但是这种办法很不直观，而且有限制，需要编码时知道colortable是怎么定义的。<br><br>今天重新用System.Windows.Forms.RichTextBox来实现。下面的代码实现了在原来的rtf文件的最开始插入一行红色黑体的“Alert”，然后在rtf的commens：后面加上“new comment”，最后在末尾加一句“Bye!”。<br></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">RtfTest</span>(<span class="params"><span class="keyword">string</span> inpath, <span class="keyword">string</span> outpath</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="comment">// load rtf file</span></span><br><span class="line">   RichTextBox rtf = <span class="keyword">new</span> RichTextBox();</span><br><span class="line">   <span class="keyword">using</span> (StreamReader sr = <span class="keyword">new</span> StreamReader(inpath))</span><br><span class="line">   &#123;</span><br><span class="line">       rtf.Rtf = sr.ReadToEnd();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// add alert the begining of the rtf file</span></span><br><span class="line">   rtf.SelectionStart = <span class="number">0</span>;</span><br><span class="line">   rtf.SelectionLength = <span class="number">1</span>;</span><br><span class="line">   <span class="keyword">string</span> alert = <span class="string">"Alert!"</span> + Environment.NewLine;</span><br><span class="line">   rtf.SelectedText = alert + rtf.SelectedText;</span><br><span class="line">   rtf.SelectionStart = <span class="number">0</span>;</span><br><span class="line">   <span class="comment">// length of new line in string is 2, but in rtf is 1, so we need to minus the line count</span></span><br><span class="line">   rtf.SelectionLength = alert.Length - <span class="number">1</span>;</span><br><span class="line">   rtf.SelectionColor = Color.Red;</span><br><span class="line">   rtf.SelectionFont = <span class="keyword">new</span> Font(rtf.SelectionFont, System.Drawing.FontStyle.Bold);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// add comment after "Comments:"</span></span><br><span class="line">   <span class="keyword">string</span> commentStart = <span class="string">"Comments:"</span>;</span><br><span class="line">   <span class="keyword">string</span> newComment = <span class="string">"new comment"</span>;</span><br><span class="line">   rtf.Find(commentStart);</span><br><span class="line">   rtf.SelectedText = rtf.SelectedText + Environment.NewLine + newComment;</span><br><span class="line">   rtf.Find(commentStart);</span><br><span class="line">   rtf.SelectionStart += commentStart.Length;</span><br><span class="line">   rtf.SelectionLength += newComment.Length;</span><br><span class="line">   rtf.SelectionColor = Color.Black;</span><br><span class="line">   rtf.SelectionFont = <span class="keyword">new</span> Font(rtf.SelectionFont, System.Drawing.FontStyle.Regular);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// add "Bye!" to the end</span></span><br><span class="line">   rtf.AppendText(Environment.NewLine + <span class="string">"Bye!"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// save the rtf file</span></span><br><span class="line">   rtf.SaveFile(outpath);</span><br><span class="line">   rtf.Dispose();</span><br><span class="line">   rtf = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中有几个需要注意的地方：<br>1.不能直接给rtf.Text赋值，给Text赋值会导致整个rtf文档的格式丢失。这个示例中使用了selection来实现。<br>2.string中的换行的length是2，但是rtf中的换行的length是1，根据这个长度设置选择区域是要注意。<br>3.往rtf文档的最后以行加东西可以直接调用AppendText，会保留原来的格式。<br><br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;前段时间做过一些用C#操作.rtf文档的工作，当时就是直接根据RTF的规范用修改文本文件的方式修改.rtf文件。比如要插入一段文字，并且用红色表示，就自己弄一个colortable的定义，然后直接把下面的内容插入到.rtf文件中， {\b\cf1Bold Red!} \b表
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>ASP .NET调用javascript中Response.Write和ClientScript.RegisterStartupScript的区别</title>
    <link href="http://fresky.github.io/2010/12/08/difference-between-response-write-and-clientscript-registerstartupscript-in-asp-dot-net/"/>
    <id>http://fresky.github.io/2010/12/08/difference-between-response-write-and-clientscript-registerstartupscript-in-asp-dot-net/</id>
    <published>2010-12-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.218Z</updated>
    
    <content type="html"><![CDATA[<p>最近在用ASP .NET的code behind 调用javascript中发现Response.Write不能拿到form的值，而ClientScript.RegisterStartupScript可以。例如下面的代码<br></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">sb.Append(<span class="string">"&lt;script language=javascript&gt;"</span>);</span><br><span class="line">sb.Append(<span class="string">"alert(document.forms.length);"</span>);</span><br><span class="line">sb.Append(<span class="string">"&lt;/script&gt;"</span>);</span><br><span class="line">Response.Write(sb.ToString());</span><br><span class="line">ClientScript.RegisterStartupScript(<span class="keyword">this</span>.GetType(), <span class="string">"test"</span>, sb.ToString());</span><br></pre></td></tr></table></figure><p>可以明显的看到，Response.Write得到的是0，ClientScript.RegisterStartupScript得到的是1。<br><br></p><p>另外，Response.Write不能调用aspx里面定义的javascript函数，ClientScript.RegisterStartupScrip可以，示例如下。<br>.cs代码<br></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">sb.Append(<span class="string">"&lt;script language=javascript&gt;"</span>);</span><br><span class="line">sb.Append(<span class="string">"TestAlert();"</span>);</span><br><span class="line">sb.Append(<span class="string">"&lt;/script&gt;"</span>);</span><br><span class="line"><span class="comment">//Response.Write(sb.ToString());</span></span><br><span class="line">ClientScript.RegisterStartupScript(<span class="keyword">this</span>.GetType(), <span class="string">"test"</span>, sb.ToString());</span><br></pre></td></tr></table></figure><p>.aspx代码<br></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line"><span class="function">function <span class="title">TestAlert</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">alert(<span class="string">'just a test'</span>);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>可以看到Response.Write会出错，firebug里面提示TestAlert没有定义，而ClientScript.RegisterStartupScript可以正确执行。<br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近在用ASP .NET的code behind 调用javascript中发现Response.Write不能拿到form的值，而ClientScript.RegisterStartupScript可以。例如下面的代码&lt;br&gt;&lt;/p&gt;
&lt;figure class=&quot;hig
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>定制C# combobox的下拉框</title>
    <link href="http://fresky.github.io/2010/11/08/customize-csharp-dropdown-list/"/>
    <id>http://fresky.github.io/2010/11/08/customize-csharp-dropdown-list/</id>
    <published>2010-11-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.216Z</updated>
    
    <content type="html"><![CDATA[<p>今天做了个小东西，需要定制combobox的下拉框，打开下拉框时如下图。</p><img src="/images/coloredcombobox.jpg"><p>选择一个后，如下图。</p><img src="/images/coloredcombobox2.jpg"><p>实现的方法是需要把combobox的DrawoMode设置成OwnerDrawVariable，然后处理DrawItem事件，详见<a href="http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.drawitem.aspx" target="_blank" rel="noopener">ComboBox.DrawItem Event (System.Windows.Forms)</a>代码如下：</p><p></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">cb_Risk_DrawItem</span>(<span class="params"><span class="keyword">object</span> sender, DrawItemEventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (e.Index &lt; <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (e.Index)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            e.Graphics.FillRectangle(Brushes.Red, e.Bounds);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            e.Graphics.FillRectangle(Brushes.Yellow, e.Bounds);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            e.Graphics.FillRectangle(Brushes.Blue, e.Bounds);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    e.Graphics.DrawString(cb_Risk.Items[e.Index].ToString(), cb_Risk.Font, Brushes.Black, (RectangleF)e.Bounds);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br>对了，我这里的代码都是用<a href="http://copysourceashtml.codeplex.com/" target="_blank" rel="noopener">CopySourceAsHtml</a>这个VS的addin粘进来的，对于VS2010，这篇文章<a href="http://blogs.microsoft.co.il/blogs/applisec/archive/2010/02/25/copyashtml-in-visual-studio-2010.aspx" target="_blank" rel="noopener">CopyAsHtml in Visual Studio 2010 - AppliSec</a>有一个workaround。</p><br><p><br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天做了个小东西，需要定制combobox的下拉框，打开下拉框时如下图。&lt;/p&gt;

&lt;img src=&quot;/images/coloredcombobox.jpg&quot;&gt;
&lt;p&gt;选择一个后，如下图。&lt;/p&gt;
&lt;img src=&quot;/images/coloredcombobox2.jp
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>firefox 3.6.12 不能打开gmail的buzz，setting和chat 解决办法</title>
    <link href="http://fresky.github.io/2010/11/08/how-to-fix-issue-that-firefox-can-not-open-buzz/"/>
    <id>http://fresky.github.io/2010/11/08/how-to-fix-issue-that-firefox-can-not-open-buzz/</id>
    <published>2010-11-07T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.217Z</updated>
    
    <content type="html"><![CDATA[<p>前段时间升级firefox到3.6.12后发现不能打开gmail里面的buzz，setting和chat了，今天网上搜了搜，找到了解决办法。在地址栏输入about:config进入firefox设置，找到Dom.storage.enabled，设置成true就行了。<br>详细请看<a href="https://support.mozilla.com/en-US/questions/763190#answer-115496" target="_blank" rel="noopener">Some parts of GMAIL no longer work after a recent update</a> 和<a href="http://kb.mozillazine.org/Dom.storage.enabled" target="_blank" rel="noopener"> Dom.storage.enabled - MozillaZine Knowledge Base</a> 。<br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;前段时间升级firefox到3.6.12后发现不能打开gmail里面的buzz，setting和chat了，今天网上搜了搜，找到了解决办法。在地址栏输入about:config进入firefox设置，找到Dom.storage.enabled，设置成true就行了。&lt;br&gt;
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>推荐一个可以往blog里面加入旅行线路图的travel map网站</title>
    <link href="http://fresky.github.io/2010/11/03/insert-travel-map-to-blog/"/>
    <id>http://fresky.github.io/2010/11/03/insert-travel-map-to-blog/</id>
    <published>2010-11-02T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.216Z</updated>
    
    <content type="html"><![CDATA[<p>今天无意中发现这个网站，<a href="http://www.blogabond.com/Promo/GetABlogMap.aspx" target="_blank" rel="noopener">Free Travel Map Widget</a>，可以很方便的做一个travel map，然后生成html代码放到blog里面。效果可以看看我之前的泰国和欧洲的blog更新，加了map。&lt;br /</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天无意中发现这个网站，&lt;a href=&quot;http://www.blogabond.com/Promo/GetABlogMap.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Free Travel Map Widget&lt;/a&gt;，可以很方便的做一个
      
    
    </summary>
    
    
      <category term="Life" scheme="http://fresky.github.io/tags/Life/"/>
    
  </entry>
  
  <entry>
    <title>带checkbox的C# TreeView处理父子节点选择</title>
    <link href="http://fresky.github.io/2010/11/02/add-checkbox-to-csharp-tree-view/"/>
    <id>http://fresky.github.io/2010/11/02/add-checkbox-to-csharp-tree-view/</id>
    <published>2010-11-01T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.216Z</updated>
    
    <content type="html"><![CDATA[<p>今天写了一个C#的TreeView，需要带checkbox，msdn上<a href="http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.aftercheck.aspx" target="_blank" rel="noopener">TreeView.AfterCheck Event (System.Windows.Forms)</a>之处理了子节点的递归选择问题，贴一下我写的父子节点递归选择。<br><br><br></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tree_AfterCheck</span>(<span class="params"><span class="keyword">object</span> sender, TreeViewEventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (e.Action != TreeViewAction.Unknown)</span><br><span class="line">    &#123;</span><br><span class="line">        UpdateCheckStatus(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// update check status for parent and child</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">UpdateCheckStatus</span>(<span class="params">TreeViewEventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    CheckAllChildNodes(e.Node);</span><br><span class="line">    UpdateAllParentNodes(e.Node);         </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// updates all parent nodes recursively.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">UpdateAllParentNodes</span>(<span class="params">TreeNode treeNode</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    TreeNode parent = treeNode.Parent;</span><br><span class="line">    <span class="keyword">if</span> (parent != <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (parent.Checked &amp;&amp; !treeNode.Checked)</span><br><span class="line">        &#123;</span><br><span class="line">            parent.Checked = <span class="literal">false</span>;</span><br><span class="line">            UpdateAllParentNodes(parent);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (!parent.Checked &amp;&amp; treeNode.Checked)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">bool</span> all = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">foreach</span> (TreeNode node <span class="keyword">in</span> parent.Nodes)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (!node.Checked)</span><br><span class="line">                &#123;</span><br><span class="line">                    all = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (all)</span><br><span class="line">            &#123;</span><br><span class="line">                parent.Checked = <span class="literal">true</span>;</span><br><span class="line">                UpdateAllParentNodes(parent);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// updates all child tree nodes recursively.</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CheckAllChildNodes</span>(<span class="params">TreeNode treeNode</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">foreach</span> (TreeNode node <span class="keyword">in</span> treeNode.Nodes)</span><br><span class="line">    &#123;</span><br><span class="line">        node.Checked = treeNode.Checked;</span><br><span class="line">        <span class="keyword">if</span> (node.Nodes.Count &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// If the current node has child nodes, call the CheckAllChildsNodes method recursively.</span></span><br><span class="line">            <span class="keyword">this</span>.CheckAllChildNodes(node);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天写了一个C#的TreeView，需要带checkbox，msdn上&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.aftercheck.aspx&quot; target
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>设置firefox的默认google搜索.com而不是.hk</title>
    <link href="http://fresky.github.io/2010/10/29/set-firefox-default-google-serach-to-com-not-hk/"/>
    <id>http://fresky.github.io/2010/10/29/set-firefox-default-google-serach-to-com-not-hk/</id>
    <published>2010-10-28T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.216Z</updated>
    
    <content type="html"><![CDATA[<p>有些人在用firefox的时候发现用搜索框里的google搜索会到.hk，很不方便。其实firefox有个addon<a href="https://addons.mozilla.org/en-US/firefox/addon/51000/" target="_blank" rel="noopener">always “.com” - Google.com (in English) :: Add-ons for Firefox</a>可以让每次搜索都到.com。另外再推荐一下<a href="https://addons.mozilla.org/en-US/firefox/addon/10434/" target="_blank" rel="noopener">Bing :: Add-ons for Firefox</a>，他会让你用bing搜索时不用bing.cn。<br><blockquote></blockquote><br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;有些人在用firefox的时候发现用搜索框里的google搜索会到.hk，很不方便。其实firefox有个addon&lt;a href=&quot;https://addons.mozilla.org/en-US/firefox/addon/51000/&quot; target=&quot;_blank&quot;
      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>把Silverlight的WCF service配置地址放到web.config中</title>
    <link href="http://fresky.github.io/2010/10/20/put-wcf-service-to-web-config/"/>
    <id>http://fresky.github.io/2010/10/20/put-wcf-service-to-web-config/</id>
    <published>2010-10-19T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.216Z</updated>
    
    <content type="html"><![CDATA[<p>如果在Silverlight中使用了WCF service，会生成一个ServiceReferences.ClientConfig配置文件，里面描述了WCF service的地址等信息。最后会放在生成的.xap中，可以用zip软件打开.xap，看到这个文件。<br><br>如果开发时的WCF service和部署时的WCF service地址不一样，就需要每次部署时手动修改.xap包中的这个文件，比较麻烦而且容易出错。<br><br>一个解决办法是把Service的地址放到web.config中，变成可配置的。然后在调用Siverlight的aspx或者html中通过initParms传给Silvergliht。下面是示例代码：<br><br>aspx文件中：<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"initParams"</span> <span class="attr">value</span>=<span class="string">"wcfServiceUrl=&lt;%=ConfigurationManager.AppSettings["</span><span class="attr">WCFServiceAddress</span>"] %&gt;</span> " /&gt;</span><br></pre></td></tr></table></figure><p>Silverlight文件初始化WCF Service是不用默认的构造函数，用这种方式：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">BasicHttpBinding binding = <span class="keyword">new</span> BasicHttpBinding(BasicHttpSecurityMode.None);</span><br><span class="line">binding.MaxReceivedMessageSize = <span class="keyword">int</span>.MaxValue;</span><br><span class="line">binding.MaxBufferSize = <span class="keyword">int</span>.MaxValue;</span><br><span class="line">ServiceClient sc = <span class="keyword">new</span> ServiceClient(binding, <span class="keyword">new</span> EndpointAddress(<span class="keyword">new</span> Uri(wcfServiceUrl)));</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;如果在Silverlight中使用了WCF service，会生成一个ServiceReferences.ClientConfig配置文件，里面描述了WCF service的地址等信息。最后会放在生成的.xap中，可以用zip软件打开.xap，看到这个文件。&lt;br&gt;&lt;br&gt;
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>Android初体验-悲剧</title>
    <link href="http://fresky.github.io/2010/10/15/android/"/>
    <id>http://fresky.github.io/2010/10/15/android/</id>
    <published>2010-10-14T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.215Z</updated>
    
    <content type="html"><![CDATA[<p>最近手上有个HTC G2，沃达丰版的，32B，昨晚准备刷最新的2.2ROM，结果刷错了SPL，导致变砖，开门不利啊……<br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近手上有个HTC G2，沃达丰版的，32B，昨晚准备刷最新的2.2ROM，结果刷错了SPL，导致变砖，开门不利啊……&lt;br&gt;&lt;br&gt;&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="Other" scheme="http://fresky.github.io/tags/Other/"/>
    
  </entry>
  
  <entry>
    <title>wcf web service遇到&quot;Could not load file or assembly App_Web...&quot;问题</title>
    <link href="http://fresky.github.io/2010/10/11/solve-could-not-load-file-or-assembly-in-wcf-service/"/>
    <id>http://fresky.github.io/2010/10/11/solve-could-not-load-file-or-assembly-in-wcf-service/</id>
    <published>2010-10-10T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.215Z</updated>
    
    <content type="html"><![CDATA[<p>在IIS中部署wcf webservice，遇到”Could not load file or assembly App_Web…”问题。<br><br>原因是修改了wcf webservice的方法，需要把.svc文件覆盖原来的即可解决。详见下网页。<br><br><a href="http://forums.asp.net/t/1566085.aspx" target="_blank" rel="noopener">Could not load file or assembly App_web_…. (WCF) - ASP.NET Forums</a><br></p><p>It could be that whenever you change method signature (Add / remove  methods, change parameters. change method names etc.) it may happend.</p><p>You need, whenever you deploey the service class’es DLL, to copy the .svc file as well.</p><br><blockquote></blockquote><br><br><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在IIS中部署wcf webservice，遇到”Could not load file or assembly App_Web…”问题。&lt;br&gt;&lt;br&gt;原因是修改了wcf webservice的方法，需要把.svc文件覆盖原来的即可解决。详见下网页。&lt;br&gt;&lt;br&gt;&lt;a 
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>法意蜜月之旅总结</title>
    <link href="http://fresky.github.io/2010/10/09/europe-travel-summary/"/>
    <id>http://fresky.github.io/2010/10/09/europe-travel-summary/</id>
    <published>2010-10-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.214Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://www.blogabond.com/Promo/GetABlogMap.aspx" target="_blank" rel="noopener"><img id="imgBlogabondLogo" style="position: absolute; margin: 2px;" src="http://img.blogabond.com/img2/logo_25.png" border="0" alt><img src="http://www.blogabond.com/BlogMapImage.aspx?tripID=25491" border="0" alt width="450" height="300"></a></p><br><p>到达迪拜机场了，6月4日开始的蜜月之旅今天就结束了。先总结一下行程：<br>6，4 北京-迪拜-巴黎<br>6，5 凡尔赛宫<br>6，6 卢浮宫，奥赛博物馆，卢森堡公园<br>6，7 圣心教堂，凯旋门，香榭丽大街，艾菲尔铁塔<br>6，8 巴黎圣母院，老佛爷，晚上火车去阿维尼翁<br>6，9 薰衣草，红土小镇，石头城，泉水小镇<br>6，10 教皇宫，断桥<br>6，11 上午火车去尼斯，下午eve小镇，晚上尼斯海岸线<br>6，12 上午摩纳哥皇宫，赌场，下午火车去威尼斯<br>6，13 威尼斯玻璃岛，彩色岛<br>6，14 威尼斯主岛圣马可广场，教堂，总督府，叹息桥，大运河，下午火车去佛罗伦萨<br>6，15 百花大教堂，乌菲兹美术馆，老桥，菲拉格慕博物馆，晚上火车去锡耶纳<br>6，16 锡耶纳市政广场，集市，教堂，老城乱逛，晚上火车回佛罗伦萨<br>6，17 the mall逛街，下午米开朗奇罗广场，圣明托教堂，晚上火车去罗马<br>6，18 梵蒂冈博物馆，圣彼得大教堂，圣天使堡<br>6，19 斗兽场，古罗马广场，图拉真市场，卡托比利广场，卡托比利博物馆<br>6，20  圣乔瓦尼教堂，圣玛丽奥教堂，解放广场，巴贝里尼广场，人骨教堂，许愿池，万神庙，纳沃纳广场<br>6，21 波波洛广场，周边教堂，西班牙广场逛街，晚上罗马-迪拜<br>6，22 迪拜-北京 <br><br><br><br></p><br><p class="blogpress_location">Location:<a href="http://maps.google.com/maps?q=%E8%BF%AA%E6%8B%9C&amp;z=10" target="_blank" rel="noopener">迪拜</a></p><br><p><br><br></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://www.blogabond.com/Promo/GetABlogMap.aspx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;img id=&quot;imgBlogabondLogo&quot; style=&quot;position: abso
      
    
    </summary>
    
    
      <category term="Life" scheme="http://fresky.github.io/tags/Life/"/>
    
  </entry>
  
  <entry>
    <title>gvim编辑xml更新</title>
    <link href="http://fresky.github.io/2010/10/09/edit-xml-in-gvim/"/>
    <id>http://fresky.github.io/2010/10/09/edit-xml-in-gvim/</id>
    <published>2010-10-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.213Z</updated>
    
    <content type="html"><![CDATA[<p>上次写的那个gvim编辑xml的方式有点不太好，没有把xml的层级关系列出来，今天找了找，比较完美的解决了gvim编辑和查看xml的问题。<br><br>查看xml，需要用到<a href="http://code.google.com/p/xmllint/" target="_blank" rel="noopener">xmllint</a>，这个是windows版本的，需要放到path里面，其实就是在gvim里能找到就行。然后再gvim的配置中加上这个<br>let mapleader = “,”<br>map &lt;silent&gt; &lt;leader&gt;px : %!xmllint % –format&lt;cr&gt;<br>这样在打开xml后，键盘输入,px，就能得到xml的pretty xml效果。<br><br>对于编辑，需要<a href="http://www.vim.org/scripts/script.php?script_id=301" target="_blank" rel="noopener">xmledit - A filetype plugin to help edit XML, HTML, and SGML documents</a> ，用这个覆盖掉原来gvim自带的xml.vim，在编辑xml文件时就能省很多事了，照抄文档里说。It allows you to jump to the beginning or end of the tag block your cursor is in. ‘%’ will jump between ‘&lt;’ and ‘&gt;’ within the tag your cursor is in. When in insert mode and you finish a tag (pressing ‘&gt;’) the tag will be completed. If you press ‘&gt;’ twice it will complete the tag and place the cursor in the middle of the tags on it’s own line. </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;上次写的那个gvim编辑xml的方式有点不太好，没有把xml的层级关系列出来，今天找了找，比较完美的解决了gvim编辑和查看xml的问题。&lt;br&gt;&lt;br&gt;查看xml，需要用到&lt;a href=&quot;http://code.google.com/p/xmllint/&quot; target
      
    
    </summary>
    
    
      <category term="Tool" scheme="http://fresky.github.io/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>法意蜜月之旅签证、交通、酒店篇</title>
    <link href="http://fresky.github.io/2010/10/09/europe-travel-visa-traffic-hotel/"/>
    <id>http://fresky.github.io/2010/10/09/europe-travel-visa-traffic-hotel/</id>
    <published>2010-10-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.214Z</updated>
    
    <content type="html"><![CDATA[<p>最近开始使用gvim，觉得很不错，可以大大的提高文本输入的效率，有兴趣的可以试试：）<br>如果开始使用的话，可以看看这篇文章<a href="http://www.appinn.com/gvim-ahk-tip/" target="_blank" rel="noopener"> 用 gVim 编辑任意窗口的文字[AHK] - 小众软件</a> 用gvim来编辑任意窗口的文字。 这篇文章<a href="http://vim.wikia.com/wiki/Use_gvim_as_an_external_editor_for_Windows_apps" target="_blank" rel="noopener"> Use gvim as an external editor for Windows apps - Vim Tips Wiki</a> 是gvim网站上提供的方法，我没有试。如果是firefox用户的话，可以考虑这个addon<a href="https://addons.mozilla.org/en-US/firefox/addon/4125/" target="_blank" rel="noopener"> It’s All Text! :: Add-ons for Firefox </a>。<br><br>这篇blog使用scribefire<a href="http://www.scribefire.com/" target="_blank" rel="noopener"> Scribefire: Fire up your blogging</a> 写的，在firefox里面可以用 blog this page 快速的插入超链接，试用试用，所以这篇blog里面就会有很多超链接了：）<br><br>言归正传，现在说说上次旅游的签证办理，我们是从意大利大使馆办理的申根签证，对申根国都有效，理论上是你去哪个国家就该在哪个国家办理，如果多个国家的话，选择首次入申根的国家，或者呆的时间最长的国家办理。其实好像也没啥关系，就是在法国入关的时候问了一句，是不是还要去意大利。<br><br>意大利使馆办签证比法国容易很多，我们是某个周四到意大利签证中心（我咨询的情况是现在个人旅游签证必须经过意大利签证中心处理） <a href="http://www.italyvac.cn/chineese/index1.aspx" target="_blank" rel="noopener">意大利北京</a> 提交材料，然后预约的第二天周五上午面试，面试不到5分钟，然后下周二早上就能拿到签证了。很高效，我有个同事办法国的签证，直到出发前一天下午才出来，真够慢的。而且意大利如果2年之内有过申根签证，可以免面试，直到意大利签证中心提交材料就可以了。如果想签法国的话，需要去中智，看这里<a href="https://cn.tlscontact.com/cn2fr/login.php?l=zh_CN" target="_blank" rel="noopener">欢迎访问 -  TLScontact visas center - 中国, 法国 。</a><br><br>至于签证材料，照着意大利签证中心网页上的要求准备就可以了。公司准假信网上有很多模板，很多公司自己也有模板。行程单自己根据攻略写写也不是啥难事，还算是出游的一个准备。机票找个机票代理都能免费打印一份，就说办签证用的就行，他们都知道，但是如果去携程或者一起飞打印的话是收费的。酒店到booking上预定，看好取消条件，签证完了就取消，也没啥损失。银行的存款证明我有的是拿存折到银行打印，盖个章，中国银行免费。有的直接在网银上列明细，自己打印，也没有人说什么。保险可以到穷游或者别的网站上买，印象中一般大使馆门口都有很多卖保险的。</p><p>办好签证，就可以放心大胆的预定机票，火车票和酒店了。<br><br>我们当时是4月底就找了一个特价票，然后让代理预留着，没有付款，等签证下来才付款的。我当时主要在这个网站上看票，<a href="http://www.kayak.com/" target="_blank" rel="noopener">KAYAK - Compare Hundreds of Travel Sites At Once</a>，因为可以查开口程的，了解大概行情后，然后找代理，发现机票代理还是便宜，因为他们有优惠券可以用。我们最后定的阿联酋的，在迪拜转机。<br><br>我那个时候还比较忙，酒店预定的不是很充分，而且看tripadvisor很容易让人看晕，想找个物美价廉的很难啊。就只预定了法国的，意大利的都没订，想着到了法国再说。导致我们在佛罗伦萨遇到了点小麻烦，以后出去玩还是准备做的充分些好。出去玩最好能带个能上网的东西，小的上网本就很不错，能及时查查攻略，订订酒店啥的。我们没有小本，就用我的iphone了，尽管比较慢，但是还不错，后来的酒店预定都靠它了。如果用iphone的话，booking, hrs, hostelworld, tripadvisor,各个酒店联盟比如spg，雅高啊，都有专门的app，很方便的。<br><br>我们在欧洲境内的行程全部靠火车，因为当时火山灰还有余威，而且觉得做火车看风景挺好的。法国境内的可以通过<a href="http://www.tgv-europe.com/en/" target="_blank" rel="noopener">Welcome to TGV-EUROPE.COM</a> 预定，只要早，就会有便宜的票，另外如果有idtgv的火车，就更便宜的了，它是电子票，提前打印就行，但是需要欧洲或美国的信用卡。意大利的用tgv网站预定也可以，但是可以到意铁官网<a href="http://www.ferroviedellostato.it/homepage_en.html" target="_blank" rel="noopener">Ferrovie  dello Stato - Homepage</a>，提前7天有15%的折扣，提前15天有30%的折扣。所以长途的最好提前订好，短途的可以到了火车站再买，很方便，而且可以时间上更有弹性。我们这次做了法国tgv，eurostart，也做了意大利的R车，坐火车还是很不错的。<br><br>先写这么多吧，一句话，如果打算自己出去玩，一定要早做准备：）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近开始使用gvim，觉得很不错，可以大大的提高文本输入的效率，有兴趣的可以试试：）&lt;br&gt;如果开始使用的话，可以看看这篇文章&lt;a href=&quot;http://www.appinn.com/gvim-ahk-tip/&quot; target=&quot;_blank&quot; rel=&quot;noopene
      
    
    </summary>
    
    
      <category term="Life" scheme="http://fresky.github.io/tags/Life/"/>
    
  </entry>
  
  <entry>
    <title>silverlight中的richtextbox和rtf格式的转换</title>
    <link href="http://fresky.github.io/2010/10/09/how-to-convert-rtf-to-silverlight-rightextbox/"/>
    <id>http://fresky.github.io/2010/10/09/how-to-convert-rtf-to-silverlight-rightextbox/</id>
    <published>2010-10-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.214Z</updated>
    
    <content type="html"><![CDATA[<p>silvergliht 4.0中有了richtextbox控件，但是它只接受xaml格式的输入，下面这个函数实现了rtf和xaml的转换，用到了flowdocument。<br><br>需要注意的是直接从rtf转换过来的话有些attribute silverlight不认。我也不知道找全了没有，目前发现的是 section 里面的一堆attribute，然后就是margin和textindent。另外中文字体也会出错。<br><br></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> convert the string "from" from sourceFormat to targetFormat</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="from"&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="sourceFormat"&gt;</span>System.Windows.DataFormats.Rtf<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="targetFormat"&gt;</span>System.Windows.DataFormats.Xaml <span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">string</span> <span class="title">convertFormat</span>(<span class="params"><span class="keyword">string</span> <span class="keyword">from</span>, <span class="keyword">string</span> sourceFormat, <span class="keyword">string</span> targetFormat</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">string</span> xaml = String.Empty;</span><br><span class="line">    System.Windows.Documents.FlowDocument doc = <span class="keyword">new</span> System.Windows.Documents.FlowDocument();</span><br><span class="line">    System.Windows.Documents.TextRange range = <span class="keyword">new</span> System.Windows.Documents.TextRange(doc.ContentStart, doc.ContentEnd);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">using</span> (MemoryStream ms = <span class="keyword">new</span> MemoryStream())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">using</span> (StreamWriter sw = <span class="keyword">new</span> StreamWriter(ms))</span><br><span class="line">        &#123;</span><br><span class="line">            sw.Write(<span class="keyword">from</span>);</span><br><span class="line">            sw.Flush();</span><br><span class="line">            ms.Seek(<span class="number">0</span>, SeekOrigin.Begin);</span><br><span class="line">            range.Load(ms, sourceFormat);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">using</span> (MemoryStream ms = <span class="keyword">new</span> MemoryStream())</span><br><span class="line">    &#123;</span><br><span class="line">        range = <span class="keyword">new</span> System.Windows.Documents.TextRange(doc.ContentStart, doc.ContentEnd);</span><br><span class="line"></span><br><span class="line">        range.Save(ms, targetFormat);</span><br><span class="line">        ms.Seek(<span class="number">0</span>, SeekOrigin.Begin);</span><br><span class="line">        <span class="keyword">using</span> (StreamReader sr = <span class="keyword">new</span> StreamReader(ms))</span><br><span class="line">        &#123;</span><br><span class="line">            xaml = sr.ReadToEnd();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// remove all attribuites in section and remove attribute margin</span></span><br><span class="line">    <span class="keyword">if</span> (targetFormat.Equals(System.Windows.DataFormats.Xaml))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> start = xaml.IndexOf(<span class="string">"&lt;Section"</span>);</span><br><span class="line">        <span class="keyword">int</span> stop = xaml.IndexOf(<span class="string">"&gt;"</span>) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">string</span> section = xaml.Substring(start, stop);</span><br><span class="line"></span><br><span class="line">        xaml = xaml.Replace(section, <span class="string">"&lt;Section xml:space=\"preserve\" HasTrailingParagraphBreakOnPaste=\"False\" xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"&gt;"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// remove Margin attribute</span></span><br><span class="line">        Regex reg = <span class="keyword">new</span> Regex(<span class="string">"Margin=\"[^\"]*\""</span>);</span><br><span class="line">        xaml = reg.Replace(xaml, <span class="keyword">string</span>.Empty);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// remove TextIndent attribute</span></span><br><span class="line">        reg = <span class="keyword">new</span> Regex(<span class="string">"TextIndent=\"[^\"]*\""</span>);</span><br><span class="line">        xaml = reg.Replace(xaml, <span class="keyword">string</span>.Empty);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// change the non english font family</span></span><br><span class="line">        reg = <span class="keyword">new</span> Regex(<span class="string">"FontFamily=\"[^a-zA-Z]*\""</span>);</span><br><span class="line">        xaml = reg.Replace(xaml, <span class="string">"FontFamily=\"Arial\""</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> xaml;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;silvergliht 4.0中有了richtextbox控件，但是它只接受xaml格式的输入，下面这个函数实现了rtf和xaml的转换，用到了flowdocument。&lt;br&gt;&lt;br&gt;需要注意的是直接从rtf转换过来的话有些attribute silverlight不认。
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
  <entry>
    <title>2009年底泰国游总结</title>
    <link href="http://fresky.github.io/2010/10/09/thailand-travel/"/>
    <id>http://fresky.github.io/2010/10/09/thailand-travel/</id>
    <published>2010-10-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.215Z</updated>
    
    <content type="html"><![CDATA[<p>圣诞到元旦这段时间和老婆去泰国玩了一趟，下面做个简单的总结，给以后要去玩的同学们一个参考。</p><br><p><strong>机票篇：</strong></p><br><blockquote>订机票应该还是越早越好，而且避开高峰期能订到便宜的机票，我们动手有点晚，而且赶上圣诞到元旦这个假期，相对来说机票不算便宜。订机票前推荐到水木新开的flyers版学习学习，那里有很多大牛&hellip;&hellip;<br><br><p>北京到曼谷的机票是从携程上订的，当时看了很多网站，还是携程最便宜，怕太晚定不到，就定了斯里兰卡航空的，其实过了2天就有泰航的更便宜的了，而且泰航还是星空联盟的。泰国国内的航班基本就是到各个航空公司的官网上订的了，找时间合适，价格便宜的。</p><br>北京-曼谷：斯里兰卡航空<br><br><p>曼谷-清迈：Nok air</p><br>清迈-普吉：亚航<br><br><p>普吉-曼谷：曼谷航空</p><br>曼谷-北京：斯里兰卡航空<br><br><p>Tips：</p><br>1. 不是很确定国际往返是不是一定比单程便宜，如果不是的话，可以不买往返票，比如我们的行程，最后一天普吉飞曼谷纯属浪费时间和金钱，直接普吉飞北京就好了。<br><br><p>2. 曼谷航空只要有boarding pass 就能进休息室，免费的饮料点心，但是注意，飞机上的饭巨难吃，所以上飞机前得多吃点。</p><br>3. 曼谷有2个机场，别走错了，国际航班一般在新机场BKK，国内的廉航比如Nok air在老机场DMK。<br><br><p>4. BKK有免费的无线网络，可以找工作人员要用用户名和密码，提供护照即可。</p><br>5. 机场如果看到有免费的电话卡就领，我领了几张，卡里有5bht，打回国内只要1bht/min，通话质量也不错，而且在7-11可以买充值卡，最小面值50bht，我觉得还行，7-11泰国到处都是。<br></blockquote><br><p><strong>酒店篇：</strong></p><br><blockquote>酒店全部是在agoda上订的，也有很多订酒店的网站，可以比较一下，觉得这个网站上的价格还算合适，每个地方都是只定了1天，因为不知道酒店住的舒服与否，如果不合适可以再调换。但是注意，在agoda上拿到的价格在酒店可能拿不到，解决办法就是找个网吧再从网上订：）<br><br><p>这次订酒店我办了件傻事，在普吉的订的日期写错了，晚了1个月&hellip;&hellip;差点没地方住，还整的没了心情，再加上第二天一早6点就要出海，就没去看沙滩的Countdown to New Year 2010。</p><br>曼谷我们第一天住在考山路，有机场大巴直接到这里，可以看看考山路夜晚的繁荣景象，而且第二天逛大皇宫之类的也比较近，第二天搬到了市中心附近，便于老婆逛街，靠近轻轨BTS，交通也不错，后人可以参考：）<br><br><p>清迈比较小，随便住吧，我们租了个摩托车，去哪里都挺方便的，呵呵，第一次开摩托车。其实开摩托车不太安全，如果要开的话，一定要小心。</p><br>普吉我们住在最热闹的巴东海滩，但是我和老婆都不喜欢这里，全是酒吧，车水马龙，太闹了，后来去卡塔和卡隆海滩玩的时候觉得那里不错，比较安静，人也相对来说少一些。<br><br><p>Tips：</p><br>1. 订酒店要上酒店网站，或者打电话问酒店有没有机场免费接送，如果有的话一定要用，可以省很多事，而且省钱：）<br><br><p>2. 酒店一定不要把贵重物品放在房间里，我们有惨痛的教训，放在包里的一些人民币不见了&hellip;&hellip;</p><br>3. 酒店通常会有travel agent，可以问问，不过泰国满大街都是travel agent，价钱好像都差不多。<br></blockquote><br><p><strong>消费篇：</strong></p><br><blockquote>泰国的ATM基本都支持银联，所以不用换泰国泰铢，到时候自己去银联上取钱就行了。如果能办张全球取款不收手续费的平安银行的借记卡当然好，北京好像没有平安银行，我们出发前办了张华夏银行的借记卡，每天全球第一比免收手续费，每天取一次，也够用了。<br><br><p>先写这么多吧，以后想起什么来再补上：）</p><br><br></blockquote><br><p><br> <br><br></p><p><br><a href="http://www.blogabond.com/Promo/GetABlogMap.aspx" target="_blank" rel="noopener"><img id="imgBlogabondLogo" style="position: absolute; margin: 2px;" src="http://img.blogabond.com/img2/logo_25.png" border="0" alt><img src="http://www.blogabond.com/BlogMapImage.aspx?tripID=25489" border="0" alt width="450" height="300"></a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;圣诞到元旦这段时间和老婆去泰国玩了一趟，下面做个简单的总结，给以后要去玩的同学们一个参考。&lt;/p&gt;&lt;br&gt;&lt;p&gt;&lt;strong&gt;机票篇：&lt;/strong&gt;&lt;/p&gt;&lt;br&gt;&lt;blockquote&gt;订机票应该还是越早越好，而且避开高峰期能订到便宜的机票，我们动手有点晚，而且赶上
      
    
    </summary>
    
    
      <category term="Life" scheme="http://fresky.github.io/tags/Life/"/>
    
  </entry>
  
  <entry>
    <title>ASP .NET readonly texbox 后台不能读取问题的解决办法</title>
    <link href="http://fresky.github.io/2010/10/09/how-to-get-readonly-textbox-text-in-asp-dot-net/"/>
    <id>http://fresky.github.io/2010/10/09/how-to-get-readonly-textbox-text-in-asp-dot-net/</id>
    <published>2010-10-08T16:00:00.000Z</published>
    <updated>2019-12-20T08:29:07.215Z</updated>
    
    <content type="html"><![CDATA[<p>最近在做一些ASP .NET和silverlight的项目，把遇到的一些问题记在这里吧：）<br><br>如果需要有一个textbox只能接受特定格式的东西，一个做法是把这个textbox做成readonly的，然后通过别的方式，比如javascript动态的生成需要填充的东西，放进这个textbox里面。但是在ASP的程序中postback到后台后会发现拿不到这个textbox的值，原因在msdn里做了如下解释。<br><br></p><blockquote><p>The Text value of a TextBox control with the ReadOnly property set to true<br>is sent to the server when a postback occurs, but the server does no<br>processing for a read-only text box. This prevents a malicious user from<br>changing a Text value that is read-only. The value of the Text property is preserved in the view state between postbacks unless modified by server-side code.</p></blockquote><p>一个简单的解决办法是，在code behand中设置read only 属性，示例代码如下：<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">textboxReadonly.Attributes.Add(<span class="string">"readonly"</span>, <span class="string">"readonly"</span>);</span><br></pre></td></tr></table></figure></p><p>这样的话就可以了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近在做一些ASP .NET和silverlight的项目，把遇到的一些问题记在这里吧：）&lt;br&gt;&lt;br&gt;如果需要有一个textbox只能接受特定格式的东西，一个做法是把这个textbox做成readonly的，然后通过别的方式，比如javascript动态的生成需要填充的
      
    
    </summary>
    
    
      <category term="CSharp" scheme="http://fresky.github.io/tags/CSharp/"/>
    
  </entry>
  
</feed>
