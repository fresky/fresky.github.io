---
layout: post
title: "不能catch Fatal的exception"
date: 2012-10-15
comments: true
categories: 
---
<p><a href="http://vasters.com/clemensv/2012/09/06/Are+You+Catching+Falling+Knives.aspx">Clemens Vasters - Are you catching falling knives?</a>里给了一个判断C#的exception是不是fatal的代码，可以参考参考。</p>  <div style="border-bottom: #cccccc 1px solid; border-left: #cccccc 1px solid; padding-bottom: 5px; background-color: #f5f5f5; padding-left: 5px; padding-right: 5px; border-top: #cccccc 1px solid; border-right: #cccccc 1px solid; padding-top: 5px" class="cnblogs_code">   <pre><span style="color: #0000ff">public</span> <span style="color: #0000ff">static</span> <span style="color: #0000ff">bool</span> IsFatal(<span style="color: #0000ff">this</span><span style="color: #000000"> Exception exception)
{
    </span><span style="color: #0000ff">while</span> (exception != <span style="color: #0000ff">null</span><span style="color: #000000">)
    {
        </span><span style="color: #0000ff">if</span> (exception <span style="color: #0000ff">as</span> OutOfMemoryException != <span style="color: #0000ff">null</span> &amp;&amp; exception <span style="color: #0000ff">as</span> InsufficientMemoryException == <span style="color: #0000ff">null</span> || exception <span style="color: #0000ff">as</span> ThreadAbortException != <span style="color: #0000ff">null</span> ||<span style="color: #000000"> 
            exception </span><span style="color: #0000ff">as</span> AccessViolationException != <span style="color: #0000ff">null</span> || exception <span style="color: #0000ff">as</span> SEHException != <span style="color: #0000ff">null</span> || exception <span style="color: #0000ff">as</span> StackOverflowException != <span style="color: #0000ff">null</span><span style="color: #000000">)
        {
            </span><span style="color: #0000ff">return</span> <span style="color: #0000ff">true</span><span style="color: #000000">;
        }
        </span><span style="color: #0000ff">else</span><span style="color: #000000">
        {
            </span><span style="color: #0000ff">if</span> (exception <span style="color: #0000ff">as</span> TypeInitializationException == <span style="color: #0000ff">null</span> &amp;&amp; exception <span style="color: #0000ff">as</span> TargetInvocationException == <span style="color: #0000ff">null</span><span style="color: #000000">)
            {
                </span><span style="color: #0000ff">break</span><span style="color: #000000">;
            }
            exception </span>=<span style="color: #000000"> exception.InnerException;
        }
    }
    </span><span style="color: #0000ff">return</span> <span style="color: #0000ff">false</span><span style="color: #000000">;
}</span></pre>
</div>